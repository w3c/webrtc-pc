<!DOCTYPE html>
<html typeof="bibo:Document " prefix="bibo: http://purl.org/ontology/bibo/ w3p: http://www.w3.org/2001/02pd/rec54#" lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta property="dc:language" content="en" lang="">
  <style>
    /*

github.com style (c) Vasily Polovnyov <vast@whiteants.net>

*/
    
    .hljs {
      display: block;
      overflow-x: auto;
      padding: 0.5em;
      color: #333;
      background: #f8f8f8;
    }
    
    .hljs-comment,
    .hljs-quote {
      color: #998;
      font-style: italic;
    }
    
    .hljs-keyword,
    .hljs-selector-tag,
    .hljs-subst {
      color: #333;
      font-weight: bold;
    }
    
    .hljs-number,
    .hljs-literal,
    .hljs-variable,
    .hljs-template-variable,
    .hljs-tag .hljs-attr {
      color: #008080;
    }
    
    .hljs-string,
    .hljs-doctag {
      color: #d14;
    }
    
    .hljs-title,
    .hljs-section,
    .hljs-selector-id {
      color: #900;
      font-weight: bold;
    }
    
    .hljs-subst {
      font-weight: normal;
    }
    
    .hljs-type,
    .hljs-class .hljs-title {
      color: #458;
      font-weight: bold;
    }
    
    .hljs-tag,
    .hljs-name,
    .hljs-attribute {
      color: #000080;
      font-weight: normal;
    }
    
    .hljs-regexp,
    .hljs-link {
      color: #009926;
    }
    
    .hljs-symbol,
    .hljs-bullet {
      color: #990073;
    }
    
    .hljs-built_in,
    .hljs-builtin-name {
      color: #0086b3;
    }
    
    .hljs-meta {
      color: #999;
      font-weight: bold;
    }
    
    .hljs-deletion {
      background: #fdd;
    }
    
    .hljs-addition {
      background: #dfd;
    }
    
    .hljs-emphasis {
      font-style: italic;
    }
    
    .hljs-strong {
      font-weight: bold;
    }
  </style>
  <style>
    /* --- EXAMPLES --- */
    
    div.example-title {
      min-width: 7.5em;
      color: #b9ab2d;
    }
    
    div.example-title span {
      text-transform: uppercase;
    }
    
    aside.example,
    div.example,
    div.illegal-example {
      padding: 0.5em;
      margin: 1em 0;
      position: relative;
      clear: both;
    }
    
    div.illegal-example {
      color: red
    }
    
    div.illegal-example p {
      color: black
    }
    
    aside.example,
    div.example {
      padding: .5em;
      border-left-width: .5em;
      border-left-style: solid;
      border-color: #e0cb52;
      background: #fcfaee;
    }
    
    aside.example div.example {
      border-left-width: .1em;
      border-color: #999;
      background: #fff;
    }
    
    aside.example div.example div.example-title {
      color: #999;
    }
  </style>
  <style>
    /* --- ISSUES/NOTES --- */
    
    div.issue-title,
    div.note-title,
    div.ednote-title,
    div.warning-title {
      padding-right: 1em;
      min-width: 7.5em;
      color: #b9ab2d;
    }
    
    div.issue-title {
      color: #e05252;
    }
    
    div.note-title,
    div.ednote-title {
      color: #2b2;
    }
    
    div.warning-title {
      color: #f22;
    }
    
    div.issue-title span,
    div.note-title span,
    div.ednote-title span,
    div.warning-title span {
      text-transform: uppercase;
    }
    
    div.note,
    div.issue,
    div.ednote,
    div.warning {
      margin-top: 1em;
      margin-bottom: 1em;
    }
    
    .note>p:first-child,
    .ednote>p:first-child,
    .issue>p:first-child,
    .warning>p:first-child {
      margin-top: 0
    }
    
    .issue,
    .note,
    .ednote,
    .warning {
      padding: .5em;
      border-left-width: .5em;
      border-left-style: solid;
    }
    
    div.issue,
    div.note,
    div.ednote,
    div.warning {
      padding: 1em 1.2em 0.5em;
      margin: 1em 0;
      position: relative;
      clear: both;
    }
    
    span.note,
    span.ednote,
    span.issue,
    span.warning {
      padding: .1em .5em .15em;
    }
    
    .issue {
      border-color: #e05252;
      background: #fbe9e9;
    }
    
    .note,
    .ednote {
      border-color: #52e052;
      background: #e9fbe9;
    }
    
    .warning {
      border-color: #f11;
      border-width: .2em;
      border-style: solid;
      background: #fbe9e9;
    }
    
    .warning-title:before {
      content: "âš ";
      /*U+26A0 WARNING SIGN*/
      font-size: 3em;
      float: left;
      height: 100%;
      padding-right: .3em;
      vertical-align: top;
      margin-top: -0.5em;
    }
    
    li.task-list-item {
      list-style: none;
    }
    
    input.task-list-item-checkbox {
      margin: 0 0.35em 0.25em -1.6em;
      vertical-align: middle;
    }
  </style>
  <style>
    /* --- WEB IDL --- */
    
    pre.idl {
      border-top: 1px solid #90b8de;
      border-bottom: 1px solid #90b8de;
      padding: 1em;
      line-height: 120%;
    }
    
    @media print {
      pre.idl {
        white-space: pre-wrap;
      }
    }
    
    pre.idl::before {
      content: "WebIDL";
      display: block;
      width: 150px;
      background: #90b8de;
      color: #fff;
      font-family: sans-serif;
      padding: 3px;
      font-weight: bold;
      margin: -1em 0 1em -1em;
    }
    
    .idlType {
      color: #ff4500;
      font-weight: bold;
      text-decoration: none;
    }
    /*.idlModule*/
    /*.idlModuleID*/
    /*.idlInterface*/
    
    .idlInterfaceID,
    .idlDictionaryID,
    .idlCallbackID,
    .idlEnumID {
      font-weight: bold;
      color: #005a9c;
    }
    
    a.idlEnumItem {
      color: #000;
      border-bottom: 1px dotted #ccc;
      text-decoration: none;
    }
    
    .idlSuperclass {
      font-style: italic;
      color: #005a9c;
    }
    /*.idlAttribute*/
    
    .idlAttrType,
    .idlFieldType,
    .idlMemberType {
      color: #005a9c;
    }
    
    .idlAttrName,
    .idlFieldName,
    .idlMemberName {
      color: #ff4500;
    }
    
    .idlAttrName a,
    .idlFieldName a,
    .idlMemberName a {
      color: #ff4500;
      border-bottom: 1px dotted #ff4500;
      text-decoration: none;
    }
    /*.idlMethod*/
    
    .idlMethType,
    .idlCallbackType {
      color: #005a9c;
    }
    
    .idlMethName {
      color: #ff4500;
    }
    
    .idlMethName a {
      color: #ff4500;
      border-bottom: 1px dotted #ff4500;
      text-decoration: none;
    }
    /*.idlCtor*/
    
    .idlCtorName {
      color: #ff4500;
    }
    
    .idlCtorName a {
      color: #ff4500;
      border-bottom: 1px dotted #ff4500;
      text-decoration: none;
    }
    /*.idlParam*/
    
    .idlParamType {
      color: #005a9c;
    }
    
    .idlParamName,
    .idlDefaultValue {
      font-style: italic;
    }
    
    .extAttr {
      color: #666;
    }
    /*.idlSectionComment*/
    
    .idlSectionComment {
      color: gray;
    }
    /*.idlIterable*/
    
    .idlIterableKeyType,
    .idlIterableValueType {
      color: #005a9c;
    }
    /*.idlMaplike*/
    
    .idlMaplikeKeyType,
    .idlMaplikeValueType {
      color: #005a9c;
    }
    /*.idlConst*/
    
    .idlConstType {
      color: #005a9c;
    }
    
    .idlConstName {
      color: #ff4500;
    }
    
    .idlConstName a {
      color: #ff4500;
      border-bottom: 1px dotted #ff4500;
      text-decoration: none;
    }
    /*.idlException*/
    
    .idlExceptionID {
      font-weight: bold;
      color: #c00;
    }
    
    .idlTypedefID,
    .idlTypedefType {
      color: #005a9c;
    }
    
    .idlRaises,
    .idlRaises a.idlType,
    .idlRaises a.idlType code,
    .excName a,
    .excName a code {
      color: #c00;
      font-weight: normal;
    }
    
    .excName a {
      font-family: monospace;
    }
    
    .idlRaises a.idlType,
    .excName a.idlType {
      border-bottom: 1px dotted #c00;
    }
    
    .excGetSetTrue,
    .excGetSetFalse,
    .prmNullTrue,
    .prmNullFalse,
    .prmOptTrue,
    .prmOptFalse {
      width: 45px;
      text-align: center;
    }
    
    .excGetSetTrue,
    .prmNullTrue,
    .prmOptTrue {
      color: #0c0;
    }
    
    .excGetSetFalse,
    .prmNullFalse,
    .prmOptFalse {
      color: #c00;
    }
    
    .idlImplements a {
      font-weight: bold;
    }
    
    dl.attributes,
    dl.methods,
    dl.constants,
    dl.constructors,
    dl.fields,
    dl.dictionary-members {
      margin-left: 2em;
    }
    
    .attributes dt,
    .methods dt,
    .constants dt,
    .constructors dt,
    .fields dt,
    .dictionary-members dt {
      font-weight: normal;
    }
    
    .attributes dt code,
    .methods dt code,
    .constants dt code,
    .constructors dt code,
    .fields dt code,
    .dictionary-members dt code {
      font-weight: bold;
      color: #000;
      font-family: monospace;
    }
    
    .attributes dt code,
    .fields dt code,
    .dictionary-members dt code {
      background: #ffffd2;
    }
    
    .attributes dt .idlAttrType code,
    .fields dt .idlFieldType code,
    .dictionary-members dt .idlMemberType code {
      color: #005a9c;
      background: transparent;
      font-family: inherit;
      font-weight: normal;
      font-style: italic;
    }
    
    .methods dt code {
      background: #d9e6f8;
    }
    
    .constants dt code {
      background: #ddffd2;
    }
    
    .constructors dt code {
      background: #cfc;
    }
    
    .attributes dd,
    .methods dd,
    .constants dd,
    .constructors dd,
    .fields dd,
    .dictionary-members dd {
      margin-bottom: 1em;
    }
    
    table.parameters,
    table.exceptions {
      border-spacing: 0;
      border-collapse: collapse;
      margin: 0.5em 0;
      width: 100%;
    }
    
    table.parameters {
      border-bottom: 1px solid #90b8de;
    }
    
    table.exceptions {
      border-bottom: 1px solid #deb890;
    }
    
    .parameters th,
    .exceptions th {
      color: inherit;
      padding: 3px 5px;
      text-align: left;
      font-weight: normal;
    }
    
    .parameters th {
      color: #fff;
      background: #005a9c;
    }
    
    .exceptions th {
      background: #deb890;
    }
    
    .parameters td,
    .exceptions td {
      padding: 3px 10px;
      border-top: 1px solid #ddd;
      vertical-align: top;
    }
    
    .parameters tr:first-child td,
    .exceptions tr:first-child td {
      border-top: none;
    }
    
    .parameters td.prmName,
    .exceptions td.excName,
    .exceptions td.excCodeName {
      width: 100px;
    }
    
    .parameters td.prmType {
      width: 120px;
    }
    
    table.exceptions table {
      border-spacing: 0;
      border-collapse: collapse;
      width: 100%;
    }
  </style>
  <style id="respec-mainstyle">
    /*****************************************************************
 * ReSpec 3 CSS
 * Robin Berjon - http://berjon.com/
 *****************************************************************/
    /* Override code highlighter background */
    
    .hljs {
      background: transparent !important;
    }
    /* --- INLINES --- */
    
    em.rfc2119 {
      text-transform: lowercase;
      font-variant: small-caps;
      font-style: normal;
      color: #900;
    }
    
    h1 acronym,
    h2 acronym,
    h3 acronym,
    h4 acronym,
    h5 acronym,
    h6 acronym,
    a acronym,
    h1 abbr,
    h2 abbr,
    h3 abbr,
    h4 abbr,
    h5 abbr,
    h6 abbr,
    a abbr {
      border: none;
    }
    
    dfn {
      font-weight: bold;
    }
    
    a.internalDFN {
      color: inherit;
      border-bottom: 1px solid #99c;
      text-decoration: none;
    }
    
    a.externalDFN {
      color: inherit;
      border-bottom: 1px dotted #ccc;
      text-decoration: none;
    }
    
    a.bibref {
      text-decoration: none;
    }
    
    cite .bibref {
      font-style: normal;
    }
    
    code {
      color: #C83500;
    }
    
    th code {
      color: inherit;
    }
    /* --- TOC --- */
    
    .toc a,
    .tof a {
      text-decoration: none;
    }
    
    a .secno,
    a .figno {
      color: #000;
    }
    
    ul.tof,
    ol.tof {
      list-style: none outside none;
    }
    
    .caption {
      margin-top: 0.5em;
      font-style: italic;
    }
    /* --- TABLE --- */
    
    table.simple {
      border-spacing: 0;
      border-collapse: collapse;
      border-bottom: 3px solid #005a9c;
    }
    
    .simple th {
      background: #005a9c;
      color: #fff;
      padding: 3px 5px;
      text-align: left;
    }
    
    .simple th[scope="row"] {
      background: inherit;
      color: inherit;
      border-top: 1px solid #ddd;
    }
    
    .simple td {
      padding: 3px 10px;
      border-top: 1px solid #ddd;
    }
    
    .simple tr:nth-child(even) {
      background: #f0f6ff;
    }
    /* --- DL --- */
    
    .section dd>p:first-child {
      margin-top: 0;
    }
    
    .section dd>p:last-child {
      margin-bottom: 0;
    }
    
    .section dd {
      margin-bottom: 1em;
    }
    
    .section dl.attrs dd,
    .section dl.eldef dd {
      margin-bottom: 0;
    }
    
    .respec-hidden {
      display: none;
    }
    
    #respec-ui {
      position: fixed;
      top: 20px;
      right: 20px;
      width: 202px;
      text-align: right;
    }
    
    #respec-pill,
    .respec-info-button {
      background: #fff;
      height: 2.5em;
      color: rgb(120, 120, 120);
      border: 1px solid #ccc;
      box-shadow: 1px 1px 8px 0 rgba(100, 100, 100, .5);
    }
    
    .respec-info-button {
      border: none;
      border-radius: 2em;
      margin-right: 1em;
      min-width: 3.5em;
    }
    
    #respec-pill:disabled {
      margin: 10px auto;
      font-size: 2.8px;
      position: relative;
      text-indent: -9999em;
      border-top: 1.1em solid rgba(40, 40, 40, 0.2);
      border-right: 1.1em solid rgba(40, 40, 40, 0.2);
      border-bottom: 1.1em solid rgba(40, 40, 40, 0.2);
      border-left: 1.1em solid #ffffff;
      transform: translateZ(0);
      animation: respec-spin 1.1s infinite linear;
      box-shadow: none;
    }
    
    #respec-pill:disabled,
    #respec-pill:disabled:after {
      border-radius: 50%;
      width: 10em;
      height: 10em;
    }
    
    @keyframes respec-spin {
      0% {
        transform: rotate(0deg);
      }
      100% {
        transform: rotate(360deg);
      }
    }
    
    #respec-pill:hover,
    #respec-pill:focus {
      color: rgb(0, 0, 0);
      transition: color .2s
    }
    
    #respec-menu {
      font-family: sans-serif;
      background: #fff;
      box-shadow: 1px 1px 8px 0 rgba(100, 100, 100, .5);
      width: 200px;
      display: none;
      text-align: left;
      margin-top: 5px;
      font-size: .8em;
    }
    
    .respec-save-button {
      background: #fff;
      border: 1px solid #000;
      border-radius: 5px;
      padding: 5px;
      margin: 5px;
      display: block;
      width: 100%;
      color: #000;
      text-decoration: none;
      text-align: center;
      font-size: inherit;
    }
    
    #respec-ui button:focus,
    #respec-pill:focus,
    .respec-option:focus {
      outline: 0;
      outline-style: none;
    }
    
    #respec-ui button.respec-pill-error {
      background-color: red;
      color: white;
    }
    
    #respec-ui button.respec-pill-warning {
      background-color: orange;
      color: white;
    }
    
    #respec-menu button.respec-option {
      background: white;
      border: none;
      width: 100%;
      text-align: left;
      font-size: inherit;
      padding: 1.2em 1.2em;
    }
    
    #respec-menu button.respec-option:hover {
      background-color: #eeeeee;
    }
    
    .respec-cmd-icon {
      padding-right: .5em;
    }
    
    #respec-ui button.respec-option:last-child {
      border: none;
      border-radius: inherit;
    }
    
    @media print {
      .removeOnSave {
        display: none;
      }
    }
  </style>
  <link href="webrtc.css" rel="stylesheet">
  <title>WebRTC 1.0: Real-time Communication Between Browsers</title>


  <link rel="stylesheet" href="https://www.w3.org/StyleSheets/TR/2016/W3C-ED">
  <!--[if lt IE 9]><script src='https://www.w3.org/2008/site/js/html5shiv.js'></script><![endif]-->
  <link rel="canonical" href="https://www.w3.org/TR/webrtc/">
  <meta name="generator" content="ReSpec 6.1.4">
  <script id="initialUserConfig" type="application/json">
    {
      "specStatus": "ED",
      "shortName": "webrtc",
      "useExperimentalStyles": true,
      "overrideCopyright": "<p class='copyright'>Initial Author of this Specification was Ian Hickson, Google Inc., with the following copyright statement:<br /> &#169; Copyright 2004-2011 Apple Computer, Inc., Mozilla Foundation, and Opera Software ASA. You are granted a license to use, reproduce and create derivative works of this document.</p> <p class='copyright'>All subsequent changes since 26 July 2011 done by the W3C WebRTC Working Group are under the following <a href='https://www.w3.org/Consortium/Legal/ipr-notice#Copyright'>Copyright</a>:<br />&#169; 2011-2016 <a href='https://www.w3.org/'><abbr title='World Wide Web Consortium'>W3C</abbr></a><sup>&#174;</sup> (<a href='https://www.csail.mit.edu/'><abbr title='Massachusetts Institute of Technology'>MIT</abbr></a>, <a href='https://www.ercim.eu/'><abbr title='European Research Consortium for Informatics and Mathematics'>ERCIM</abbr></a>, <a href='https://www.keio.ac.jp/'>Keio</a>, <a href='http://ev.buaa.edu.cn/'>Beihang</a>). <a href='https://www.w3.org/Consortium/Legal/copyright-documents'>Document use</a>  rules apply.</p> <p class='copyright'>For the entire publication on the W3C site the <a href='https://www.w3.org/Consortium/Legal/ipr-notice#Legal_Disclaimer'>liability</a> and <a href='https://www.w3.org/Consortium/Legal/ipr-notice#W3C_Trademarks'>trademark</a> rules apply.</p>",
      "prevED": "https://w3c.github.io/webrtc-pc/archives/20160913/webrtc.html",
      "edDraftURI": "https://w3c.github.io/webrtc-pc/",
      "editors": [
      {
        "name": "Adam Bergkvist",
        "company": "Ericsson",
        "w3cid": "45507"
      },
      {
        "name": "Daniel C. Burnett",
        "company": "Invited Expert",
        "w3cid": "85118"
      },
      {
        "name": "Cullen Jennings",
        "company": "Cisco",
        "w3cid": "25254"
      },
      {
        "name": "Anant Narayanan",
        "company": "Mozilla",
        "note": "until November 2012",
        "w3cid": "47326"
      },
      {
        "name": "Bernard Aboba",
        "company": "Microsoft Corporation",
        "w3cid": "65611"
      }],
      "wg": "Web Real-Time Communications Working Group",
      "wgURI": "https://www.w3.org/2011/04/webrtc/",
      "wgPublicList": "public-webrtc",
      "wgPatentURI": "https://www.w3.org/2004/01/pp-impl/47318/status",
      "issueBase": "https://github.com/w3c/webrtc-pc/issues/",
      "otherLinks": [
      {
        "key": "Participate",
        "data": [
        {
          "value": "Mailing list",
          "href": "https://lists.w3.org/Archives/Public/public-webrtc/"
        },
        {
          "value": "Browse open issues",
          "href": "https://github.com/w3c/webrtc-pc/issues"
        },
        {
          "value": "IETF RTCWEB Working Group",
          "href": "https://tools.ietf.org/wg/rtcweb/"
        }]
      }],
      "preProcess": [
        null
      ],
      "localBiblio":
      {
        "JSEP":
        {
          "authors": [
            "Justin Uberti",
            "Cullen Jennings",
            "Eric Rescorla"
          ],
          "href": "http://datatracker.ietf.org/doc/draft-ietf-rtcweb-jsep/",
          "publisher": "IETF",
          "status": "Active Internet-Draft",
          "title": "Javascript Session Establishment Protocol",
          "date": "20 September 2016"
        },
        "STUN-PARAMETERS":
        {
          "authors": [
            "IETF"
          ],
          "href": "http://www.iana.org/assignments/stun-parameters/stun-parameters.xhtml#stun-parameters-6",
          "publisher": "IANA",
          "status": "IANA Parameter Assignment",
          "title": "STUN Error Codes",
          "date": "April 2011"
        }
      }
    }
  </script>
</head>
<body class="h-entry toc-inline" role="document" id="respecDocument">
  <div class="head" role="contentinfo" id="respecHeader">
    <p>
      <a class="logo" href="https://www.w3.org/"><img src="https://www.w3.org/StyleSheets/TR/2016/logos/W3C" alt="W3C" width="72" height="48"></a>
    </p>
    <h1 class="title p-name" id="title" property="dcterms:title">WebRTC 1.0: Real-time Communication Between Browsers</h1>
    <h2 id="w3c-editor-s-draft-23-november-2016"><abbr title="World Wide Web Consortium">W3C</abbr> Editor's Draft <time property="dcterms:issued" class="dt-published" datetime="2016-11-23">23 November 2016</time></h2>
    <dl>
      <dt>This version:</dt>
      <dd><a class="u-url" href="https://w3c.github.io/webrtc-pc/archives/20161123/webrtc.html">https://w3c.github.io/webrtc-pc/archives/20161123/webrtc.html</a></dd>
      <dt>Latest published version:</dt>
      <dd><a href="https://www.w3.org/TR/webrtc/">https://www.w3.org/TR/webrtc/</a></dd>
      <dt>Latest editor's draft:</dt>
      <dd><a href="https://w3c.github.io/webrtc-pc/">https://w3c.github.io/webrtc-pc/</a></dd>
      <dt>Previous editor's draft:</dt>
      <dd><a href="https://w3c.github.io/webrtc-pc/archives/20160913/webrtc.html">https://w3c.github.io/webrtc-pc/archives/20160913/webrtc.html</a></dd>
      <dt>Editors:</dt>
      <dd class="p-author h-card vcard" property="bibo:editor" resource="_:editor0" data-editor-id="45507"><span property="rdf:first" typeof="foaf:Person"><span property="foaf:name" class="p-name fn">Adam Bergkvist</span>, Ericsson</span>
        <span property="rdf:rest" resource="_:editor1"></span>
      </dd>
      <dd class="p-author h-card vcard" resource="_:editor1" data-editor-id="85118"><span property="rdf:first" typeof="foaf:Person"><span property="foaf:name" class="p-name fn">Daniel C. Burnett</span>, Invited Expert</span>
        <span property="rdf:rest" resource="_:editor2"></span>
      </dd>
      <dd class="p-author h-card vcard" resource="_:editor2" data-editor-id="25254"><span property="rdf:first" typeof="foaf:Person"><span property="foaf:name" class="p-name fn">Cullen Jennings</span>, Cisco</span>
        <span property="rdf:rest" resource="_:editor3"></span>
      </dd>
      <dd class="p-author h-card vcard" resource="_:editor3" data-editor-id="47326"><span property="rdf:first" typeof="foaf:Person"><span property="foaf:name" class="p-name fn">Anant Narayanan</span>, Mozilla (until November 2012)</span>
        <span property="rdf:rest" resource="_:editor4"></span>
      </dd>
      <dd class="p-author h-card vcard" resource="_:editor4" data-editor-id="65611"><span property="rdf:first" typeof="foaf:Person"><span property="foaf:name" class="p-name fn">Bernard Aboba</span>, Microsoft Corporation</span>
        <span property="rdf:rest" resource="rdf:nil"></span>
      </dd>

      <dt>Participate:</dt>
      <dd>
        <a href="https://lists.w3.org/Archives/Public/public-webrtc/">
                      Mailing list
                    </a>
      </dd>
      <dd>
        <a href="https://github.com/w3c/webrtc-pc/issues">
                      Browse open issues
                    </a>
      </dd>
      <dd>
        <a href="https://tools.ietf.org/wg/rtcweb/">
                      IETF RTCWEB Working Group
                    </a>
      </dd>
    </dl>
    <p class="copyright">Initial Author of this Specification was Ian Hickson, Google Inc., with the following copyright statement:<br> Â© Copyright 2004-2011 Apple Computer, Inc., Mozilla Foundation, and Opera Software ASA. You are granted a license to use, reproduce and create derivative works of this document.</p>
    <p class="copyright">All subsequent changes since 26 July 2011 done by the <abbr title="World Wide Web Consortium">W3C</abbr> WebRTC Working Group are under the following <a href="https://www.w3.org/Consortium/Legal/ipr-notice#Copyright">Copyright</a>:<br>Â© 2011-2016 <a href="https://www.w3.org/"><abbr title="World Wide Web Consortium">W3C</abbr></a><sup>Â®</sup> (<a href="https://www.csail.mit.edu/"><abbr title="Massachusetts Institute of Technology">MIT</abbr></a>, <a href="https://www.ercim.eu/"><abbr title="European Research Consortium for Informatics and Mathematics">ERCIM</abbr></a>, <a href="https://www.keio.ac.jp/">Keio</a>, <a href="http://ev.buaa.edu.cn/">Beihang</a>). <a href="https://www.w3.org/Consortium/Legal/copyright-documents">Document use</a> rules apply.</p>
    <p class="copyright">For the entire publication on the <abbr title="World Wide Web Consortium">W3C</abbr> site the <a href="https://www.w3.org/Consortium/Legal/ipr-notice#Legal_Disclaimer">liability</a> and <a href="https://www.w3.org/Consortium/Legal/ipr-notice#W3C_Trademarks">trademark</a> rules apply.</p>
    <hr title="Separator for header">
  </div>

  <section id="abstract" class="introductory" property="dc:abstract">
    <h2 id="h-abstract" resource="#h-abstract"><span property="xhv:role" resource="xhv:heading">Abstract</span></h2>
    <p>This document defines a set of ECMAScript APIs in WebIDL to allow media to be sent to and received from another browser or device implementing the appropriate set of real-time protocols. This specification is being developed in conjunction with a protocol specification developed by the IETF RTCWEB group and an API specification to get access to local media devices developed by the Media Capture Task Force.</p>
  </section>

  <section id="sotd" class="introductory">
    <h2 id="h-sotd" resource="#h-sotd"><span property="xhv:role" resource="xhv:heading">Status of This Document</span></h2>
    <p>
      <em>This section describes the status of this document at the time of its publication. Other documents may supersede this document. A list of current <abbr title="World Wide Web Consortium">W3C</abbr> publications and the latest revision of this technical report can be found in the <a href="https://www.w3.org/TR/"><abbr title="World Wide Web Consortium">W3C</abbr> technical reports index</a> at https://www.w3.org/TR/.</em>
    </p>

    <p>The Editors and active contributors of WebRTC 1.0 intend to publish a Candidate Recommendation soon. Consequently, this is a Request for Comments by the WebRTC Working Group to seek wide review of this document.</p>
    <p>The API is based on preliminary work done in the WHATWG.</p>

    <p>
      This document was published by the <a href="https://www.w3.org/2011/04/webrtc/">Web Real-Time Communications Working Group</a> as an Editor's Draft. If you wish to make comments regarding this document, please send them to
      <a href="mailto:public-webrtc@w3.org">public-webrtc@w3.org</a> (<a href="mailto:public-webrtc-request@w3.org?subject=subscribe">subscribe</a>,
      <a href="https://lists.w3.org/Archives/Public/public-webrtc/">archives</a>). All comments are welcome.
    </p>
    <p>
      Publication as an Editor's Draft does not imply endorsement by the <abbr title="World Wide Web Consortium">W3C</abbr> Membership. This is a draft document and may be updated, replaced or obsoleted by other documents at any time. It is inappropriate to cite this document as other than work in progress.
    </p>
    <p>
      This document was produced by a group operating under the
      <a id="sotd_patent" property="w3p:patentRules" href="https://www.w3.org/Consortium/Patent-Policy-20040205/">5 February 2004 <abbr title="World Wide Web Consortium">W3C</abbr> Patent
              Policy</a>.
      <abbr title="World Wide Web Consortium">W3C</abbr> maintains a <a href="https://www.w3.org/2004/01/pp-impl/47318/status" rel="disclosure">public list of any patent
                disclosures</a> made in connection with the deliverables of the group; that page also includes instructions for disclosing a patent. An individual who has actual knowledge of a patent which the individual believes contains
      <a href="https://www.w3.org/Consortium/Patent-Policy-20040205/#def-essential">Essential
              Claim(s)</a> must disclose the information in accordance with
      <a href="https://www.w3.org/Consortium/Patent-Policy-20040205/#sec-Disclosure">section
              6 of the <abbr title="World Wide Web Consortium">W3C</abbr> Patent Policy</a>.
    </p>
    <p>This document is governed by the <a id="w3c_process_revision" href="https://www.w3.org/2015/Process-20150901/">1 September 2015 <abbr title="World Wide Web Consortium">W3C</abbr> Process Document</a>.
    </p>

  </section>
  <nav id="toc">
    <h2 class="introductory" id="table-of-contents" resource="#table-of-contents"><span property="xhv:role" resource="xhv:heading">Table of Contents</span></h2>
    <ol class="toc" role="directory">
      <li class="tocline"><a href="#intro" class="tocxref"><span class="secno">1. </span>Introduction</a></li>
      <li class="tocline"><a href="#conformance" class="tocxref"><span class="secno">2. </span>Conformance</a></li>
      <li class="tocline"><a href="#terminology" class="tocxref"><span class="secno">3. </span>Terminology</a></li>
      <li class="tocline"><a href="#peer-to-peer-connections" class="tocxref"><span class="secno">4. </span>Peer-to-peer connections</a>
        <ol class="toc">
          <li class="tocline"><a href="#introduction" class="tocxref"><span class="secno">4.1 </span>Introduction</a></li>
          <li class="tocline"><a href="#configuration" class="tocxref"><span class="secno">4.2 </span>Configuration</a>
            <ol class="toc">
              <li class="tocline"><a href="#rtcconfiguration-dictionary" class="tocxref"><span class="secno">4.2.1 </span>RTCConfiguration Dictionary</a></li>
              <li class="tocline"><a href="#rtcicecredentialtype-enum" class="tocxref"><span class="secno">4.2.2 </span>RTCIceCredentialType Enum</a></li>
              <li class="tocline"><a href="#rtciceserver-dictionary" class="tocxref"><span class="secno">4.2.3 </span>RTCIceServer Dictionary</a></li>
              <li class="tocline"><a href="#rtcicetransportpolicy-enum" class="tocxref"><span class="secno">4.2.4 </span>RTCIceTransportPolicy Enum</a></li>
              <li class="tocline"><a href="#rtcbundlepolicy-enum" class="tocxref"><span class="secno">4.2.5 </span>RTCBundlePolicy Enum</a></li>
              <li class="tocline"><a href="#rtcrtcpmuxpolicy-enum" class="tocxref"><span class="secno">4.2.6 </span>RTCRtcpMuxPolicy Enum</a></li>
              <li class="tocline"><a href="#offer-answer-options" class="tocxref"><span class="secno">4.2.7 </span>Offer/Answer Options</a></li>
            </ol>
          </li>
          <li class="tocline"><a href="#rtcpeerconnection-interface" class="tocxref"><span class="secno">4.3 </span>RTCPeerConnection Interface</a>
            <ol class="toc">
              <li class="tocline"><a href="#operation" class="tocxref"><span class="secno">4.3.1 </span>Operation</a></li>
              <li class="tocline"><a href="#interface-definition" class="tocxref"><span class="secno">4.3.2 </span>Interface Definition</a></li>
              <li class="tocline"><a href="#legacy-interface-extensions" class="tocxref"><span class="secno">4.3.3 </span>Legacy Interface Extensions</a></li>
              <li class="tocline"><a href="#garbage-collection" class="tocxref"><span class="secno">4.3.4 </span>Garbage collection</a></li>
            </ol>
          </li>
          <li class="tocline"><a href="#state-definitions" class="tocxref"><span class="secno">4.4 </span>State Definitions</a>
            <ol class="toc">
              <li class="tocline"><a href="#rtcsignalingstate-enum" class="tocxref"><span class="secno">4.4.1 </span>RTCSignalingState Enum</a></li>
              <li class="tocline"><a href="#rtcicegatheringstate-enum" class="tocxref"><span class="secno">4.4.2 </span>RTCIceGatheringState Enum</a></li>
              <li class="tocline"><a href="#rtcpeerconnectionstate-enum" class="tocxref"><span class="secno">4.4.3 </span>RTCPeerConnectionState Enum</a></li>
              <li class="tocline"><a href="#rtciceconnectionstate-enum" class="tocxref"><span class="secno">4.4.4 </span>RTCIceConnectionState Enum</a></li>
            </ol>
          </li>
          <li class="tocline"><a href="#callback-definitions" class="tocxref"><span class="secno">4.5 </span>Callback Definitions</a>
            <ol class="toc">
              <li class="tocline"><a href="#rtcpeerconnectionerrorcallback" class="tocxref"><span class="secno">4.5.1 </span>RTCPeerConnectionErrorCallback</a></li>
              <li class="tocline"><a href="#rtcsessiondescriptioncallback" class="tocxref"><span class="secno">4.5.2 </span>RTCSessionDescriptionCallback</a></li>
            </ol>
          </li>
          <li class="tocline"><a href="#error-handling" class="tocxref"><span class="secno">4.6 </span>Error Handling</a>
            <ol class="toc">
              <li class="tocline"><a href="#general-principles" class="tocxref"><span class="secno">4.6.1 </span>General Principles</a></li>
            </ol>
          </li>
          <li class="tocline"><a href="#session-description-model" class="tocxref"><span class="secno">4.7 </span>Session Description Model</a>
            <ol class="toc">
              <li class="tocline"><a href="#rtcsdptype" class="tocxref"><span class="secno">4.7.1 </span>RTCSdpType</a></li>
              <li class="tocline"><a href="#rtcsessiondescription-class" class="tocxref"><span class="secno">4.7.2 </span>RTCSessionDescription Class</a></li>
            </ol>
          </li>
          <li class="tocline"><a href="#session-negotiation-model" class="tocxref"><span class="secno">4.8 </span>Session Negotiation Model</a>
            <ol class="toc">
              <li class="tocline"><a href="#setting-negotiation-needed" class="tocxref"><span class="secno">4.8.1 </span>Setting Negotiation-Needed</a></li>
              <li class="tocline"><a href="#clearing-negotiation-needed" class="tocxref"><span class="secno">4.8.2 </span>Clearing Negotiation-Needed</a></li>
              <li class="tocline"><a href="#updating-the-negotiation-needed-flag" class="tocxref"><span class="secno">4.8.3 </span>Updating the Negotiation-Needed flag</a></li>
            </ol>
          </li>
          <li class="tocline"><a href="#interfaces-for-connectivity-establishment" class="tocxref"><span class="secno">4.9 </span>Interfaces for Connectivity Establishment</a>
            <ol class="toc">
              <li class="tocline"><a href="#rtcicecandidate-interface" class="tocxref"><span class="secno">4.9.1 </span>RTCIceCandidate Interface</a>
                <ol class="toc">
                  <li class="tocline"><a href="#rtciceprotocol-enum" class="tocxref"><span class="secno">4.9.1.1 </span>RTCIceProtocol Enum</a></li>
                  <li class="tocline"><a href="#rtcicetcpcandidatetype-enum" class="tocxref"><span class="secno">4.9.1.2 </span>RTCIceTcpCandidateType Enum</a></li>
                  <li class="tocline"><a href="#rtcicecandidatetype-enum" class="tocxref"><span class="secno">4.9.1.3 </span>RTCIceCandidateType Enum</a></li>
                </ol>
              </li>
              <li class="tocline"><a href="#rtcpeerconnectioniceevent" class="tocxref"><span class="secno">4.9.2 </span>RTCPeerConnectionIceEvent</a></li>
              <li class="tocline"><a href="#rtcpeerconnectioniceerrorevent" class="tocxref"><span class="secno">4.9.3 </span>RTCPeerConnectionIceErrorEvent</a></li>
            </ol>
          </li>
          <li class="tocline"><a href="#priority-and-qos-model" class="tocxref"><span class="secno">4.10 </span>Priority and QoS Model</a>
            <ol class="toc">
              <li class="tocline"><a href="#rtcprioritytype-enum" class="tocxref"><span class="secno">4.10.1 </span>RTCPriorityType Enum</a></li>
            </ol>
          </li>
          <li class="tocline"><a href="#sec.cert-mgmt" class="tocxref"><span class="secno">4.11 </span>Certificate Management</a>
            <ol class="toc">
              <li class="tocline"><a href="#dictionary-rtccertificateexpiration" class="tocxref"><span class="secno">4.11.1 </span>Dictionary <code><span class="formerLink" data-link-type="dfn"><code>RTCCertificateExpiration</code></span></code></a></li>
              <li class="tocline"><a href="#rtccertificate-interface" class="tocxref"><span class="secno">4.11.2 </span>RTCCertificate Interface</a></li>
            </ol>
          </li>
        </ol>
      </li>
      <li class="tocline"><a href="#rtp-media-api" class="tocxref"><span class="secno">5. </span>RTP Media API</a>
        <ol class="toc">
          <li class="tocline"><a href="#rtcpeerconnection-interface-extensions" class="tocxref"><span class="secno">5.1 </span>RTCPeerConnection Interface Extensions</a>
            <ol class="toc">
              <li class="tocline"><a href="#processing-remote-mediastreamtracks" class="tocxref"><span class="secno">5.1.1 </span>Processing Remote MediaStreamTracks</a></li>
            </ol>
          </li>
          <li class="tocline"><a href="#rtcrtpsender-interface" class="tocxref"><span class="secno">5.2 </span>RTCRtpSender Interface</a></li>
          <li class="tocline"><a href="#rtcrtpreceiver-interface" class="tocxref"><span class="secno">5.3 </span>RTCRtpReceiver Interface</a></li>
          <li class="tocline"><a href="#rtcrtptransceiver-interface" class="tocxref"><span class="secno">5.4 </span>RTCRtpTransceiver Interface</a>
            <ol class="toc">
              <li class="tocline"><a href="#hold-functionality" class="tocxref"><span class="secno">5.4.1 </span>"Hold" functionality</a></li>
            </ol>
          </li>
          <li class="tocline"><a href="#rtcdtlstransport-interface" class="tocxref"><span class="secno">5.5 </span>RTCDtlsTransport Interface</a>
            <ol class="toc">
              <li class="tocline"><a href="#rtcdtlsfingerprint*" class="tocxref"><span class="secno">5.5.1 </span>The RTCDtlsFingerprint Object</a></li>
            </ol>
          </li>
          <li class="tocline"><a href="#rtcicetransport-interface" class="tocxref"><span class="secno">5.6 </span>RTCIceTransport Interface</a></li>
          <li class="tocline"><a href="#rtctrackevent" class="tocxref"><span class="secno">5.7 </span>RTCTrackEvent</a></li>
        </ol>
      </li>
      <li class="tocline"><a href="#peer-to-peer-data-api" class="tocxref"><span class="secno">6. </span>Peer-to-peer Data API</a>
        <ol class="toc">
          <li class="tocline"><a href="#rtcpeerconnection-interface-extensions-1" class="tocxref"><span class="secno">6.1 </span>RTCPeerConnection Interface Extensions</a>
            <ol class="toc">
              <li class="tocline"><a href="#rtcsctptransport-interface" class="tocxref"><span class="secno">6.1.1 </span>RTCSctpTransport Interface</a></li>
            </ol>
          </li>
          <li class="tocline"><a href="#rtcdatachannel" class="tocxref"><span class="secno">6.2 </span>RTCDataChannel</a></li>
          <li class="tocline"><a href="#rtcdatachannelevent" class="tocxref"><span class="secno">6.3 </span>RTCDataChannelEvent</a></li>
          <li class="tocline"><a href="#garbage-collection-1" class="tocxref"><span class="secno">6.4 </span>Garbage Collection</a></li>
        </ol>
      </li>
      <li class="tocline"><a href="#peer-to-peer-dtmf" class="tocxref"><span class="secno">7. </span>Peer-to-peer DTMF</a>
        <ol class="toc">
          <li class="tocline"><a href="#rtcrtpsender-interface-extensions" class="tocxref"><span class="secno">7.1 </span>RTCRtpSender Interface Extensions</a></li>
          <li class="tocline"><a href="#rtcdtmfsender" class="tocxref"><span class="secno">7.2 </span>RTCDTMFSender</a></li>
          <li class="tocline"><a href="#rtcdtmftonechangeevent" class="tocxref"><span class="secno">7.3 </span>RTCDTMFToneChangeEvent</a></li>
        </ol>
      </li>
      <li class="tocline"><a href="#sec.stats-model" class="tocxref"><span class="secno">8. </span>Statistics Model</a>
        <ol class="toc">
          <li class="tocline"><a href="#introduction-1" class="tocxref"><span class="secno">8.1 </span>Introduction</a></li>
          <li class="tocline"><a href="#rtcpeerconnection-interface-extensions-2" class="tocxref"><span class="secno">8.2 </span>RTCPeerConnection Interface Extensions</a></li>
          <li class="tocline"><a href="#rtcstatscallback" class="tocxref"><span class="secno">8.3 </span>RTCStatsCallback</a></li>
          <li class="tocline"><a href="#rtcstatsreport-object" class="tocxref"><span class="secno">8.4 </span>RTCStatsReport Object</a></li>
          <li class="tocline"><a href="#rtcstats-dictionary" class="tocxref"><span class="secno">8.5 </span>RTCStats Dictionary</a></li>
          <li class="tocline"><a href="#derived-stats-dictionaries" class="tocxref"><span class="secno">8.6 </span>Derived Stats Dictionaries</a></li>
          <li class="tocline"><a href="#example" class="tocxref"><span class="secno">8.7 </span>Example</a></li>
        </ol>
      </li>
      <li class="tocline"><a href="#sec.identity-proxy" class="tocxref"><span class="secno">9. </span>Identity</a>
        <ol class="toc">
          <li class="tocline"><a href="#identity-provider-interaction" class="tocxref"><span class="secno">9.1 </span>Identity Provider Interaction</a>
            <ol class="toc">
              <li class="tocline"><a href="#sec.identity-proxy-communications" class="tocxref"><span class="secno">9.1.1 </span>Identity Provider
        Selection</a></li>
              <li class="tocline"><a href="#sec.create-identity-proxy" class="tocxref"><span class="secno">9.1.2 </span>Instantiating an IdP Proxy</a>
                <ol class="toc">
                  <li class="tocline"><a href="#sec.implement-idp" class="tocxref"><span class="secno">9.1.2.1 </span>Implementing an IdP Securely</a></li>
                </ol>
              </li>
            </ol>
          </li>
          <li class="tocline"><a href="#sec.register-idp" class="tocxref"><span class="secno">9.2 </span>Registering an IdP Proxy</a>
            <ol class="toc">
              <li class="tocline"><a href="#interface-exposed-by-identity-providers" class="tocxref"><span class="secno">9.2.1 </span>Interface Exposed by Identity Providers</a></li>
              <li class="tocline"><a href="#identity-assertion-and-validation-results" class="tocxref"><span class="secno">9.2.2 </span>Identity Assertion and Validation Results</a></li>
            </ol>
          </li>
          <li class="tocline"><a href="#sec.identity-proxy-assertion-request" class="tocxref"><span class="secno">9.3 </span>Requesting Identity
      Assertions</a>
            <ol class="toc">
              <li class="tocline"><a href="#sec.idp-loginneeded" class="tocxref"><span class="secno">9.3.1 </span>User Login Procedure</a></li>
            </ol>
          </li>
          <li class="tocline"><a href="#sec.identity-verify-assertion" class="tocxref"><span class="secno">9.4 </span>Verifying Identity Assertions</a></li>
          <li class="tocline"><a href="#sec.idp-error-handling" class="tocxref"><span class="secno">9.5 </span>IdP Error Handling</a></li>
          <li class="tocline"><a href="#rtcpeerconnection-interface-extensions-3" class="tocxref"><span class="secno">9.6 </span>RTCPeerConnection Interface Extensions</a></li>
          <li class="tocline"><a href="#examples" class="tocxref"><span class="secno">9.7 </span>Examples</a></li>
        </ol>
      </li>
      <li class="tocline"><a href="#media-stream-api-extensions-for-network-use" class="tocxref"><span class="secno">10. </span>Media Stream API Extensions for Network Use</a>
        <ol class="toc">
          <li class="tocline"><a href="#introduction-2" class="tocxref"><span class="secno">10.1 </span>Introduction</a></li>
          <li class="tocline"><a href="#mediastream" class="tocxref"><span class="secno">10.2 </span>MediaStream</a>
            <ol class="toc">
              <li class="tocline"><a href="#id" class="tocxref"><span class="secno">10.2.1 </span>id</a></li>
            </ol>
          </li>
          <li class="tocline"><a href="#mediastreamtrack" class="tocxref"><span class="secno">10.3 </span>MediaStreamTrack</a>
            <ol class="toc">
              <li class="tocline"><a href="#mediatracksupportedconstraints-mediatrackcapabilities-mediatrackconstraints-and-mediatracksettings" class="tocxref"><span class="secno">10.3.1 </span>MediaTrackSupportedConstraints, MediaTrackCapabilities,
        MediaTrackConstraints and MediaTrackSettings</a></li>
            </ol>
          </li>
          <li class="tocline"><a href="#isolated-media-streams" class="tocxref"><span class="secno">10.4 </span>Isolated Media Streams</a>
            <ol class="toc">
              <li class="tocline"><a href="#isolated-track" class="tocxref"><span class="secno">10.4.1 </span>Extended MediaStreamTrack Properties</a></li>
              <li class="tocline"><a href="#isolated-pc" class="tocxref"><span class="secno">10.4.2 </span>Isolated Streams and RTCPeerConnection</a></li>
              <li class="tocline"><a href="#isolation-protection" class="tocxref"><span class="secno">10.4.3 </span>Protection Afforded by Media Isolation</a></li>
            </ol>
          </li>
        </ol>
      </li>
      <li class="tocline"><a href="#examples-and-call-flows" class="tocxref"><span class="secno">11. </span>Examples and Call Flows</a>
        <ol class="toc">
          <li class="tocline"><a href="#simple-peer-to-peer-example" class="tocxref"><span class="secno">11.1 </span>Simple Peer-to-peer Example</a></li>
          <li class="tocline"><a href="#simple-peer-to-peer-example-with-warm-up" class="tocxref"><span class="secno">11.2 </span>Simple Peer-to-peer Example with Warm-up</a></li>
          <li class="tocline"><a href="#simple-peer-to-peer-example-with-media-before-signaling" class="tocxref"><span class="secno">11.3 </span>Simple Peer-to-peer Example with media before signaling</a></li>
          <li class="tocline"><a href="#simple-simulcast-example" class="tocxref"><span class="secno">11.4 </span>Simple Simulcast Example</a></li>
          <li class="tocline"><a href="#advanced-peer-to-peer-example" class="tocxref"><span class="secno">11.5 </span>Advanced Peer-to-peer Example</a></li>
          <li class="tocline"><a href="#peer-to-peer-data-example" class="tocxref"><span class="secno">11.6 </span>Peer-to-peer Data Example</a></li>
          <li class="tocline"><a href="#call-flow-browser-to-browser" class="tocxref"><span class="secno">11.7 </span>Call Flow Browser to Browser</a></li>
          <li class="tocline"><a href="#dtmf-example" class="tocxref"><span class="secno">11.8 </span>DTMF Example</a></li>
        </ol>
      </li>
      <li class="tocline"><a href="#event-summary" class="tocxref"><span class="secno">12. </span>Event summary</a></li>
      <li class="tocline"><a href="#privacy-and-security-considerations" class="tocxref"><span class="secno">13. </span>Privacy and Security Considerations</a>
        <ol class="toc">
          <li class="tocline"><a href="#impact-on-same-origin-policy" class="tocxref"><span class="secno">13.1 </span>Impact on same origin policy</a></li>
          <li class="tocline"><a href="#revealing-ip-addresses" class="tocxref"><span class="secno">13.2 </span>Revealing IP addresses</a></li>
          <li class="tocline"><a href="#impact-on-local-network" class="tocxref"><span class="secno">13.3 </span>Impact on local network</a></li>
          <li class="tocline"><a href="#confidentiality-of-communications" class="tocxref"><span class="secno">13.4 </span>Confidentiality of Communications</a></li>
          <li class="tocline"><a href="#persistent-information-exposed-by-webrtc" class="tocxref"><span class="secno">13.5 </span>Persistent information exposed by WebRTC</a></li>
        </ol>
      </li>
      <li class="tocline"><a href="#change-log" class="tocxref"><span class="secno">14. </span>Change Log</a></li>
      <li class="tocline"><a href="#acknowledgements" class="tocxref"><span class="secno">A. </span>Acknowledgements</a></li>
      <li class="tocline"><a href="#references" class="tocxref"><span class="secno">B. </span>References</a>
        <ol class="toc">
          <li class="tocline"><a href="#normative-references" class="tocxref"><span class="secno">B.1 </span>Normative references</a></li>
          <li class="tocline"><a href="#informative-references" class="tocxref"><span class="secno">B.2 </span>Informative references</a></li>
        </ol>
      </li>
    </ol>
  </nav>

  <section class="informative" id="intro" typeof="bibo:Chapter" resource="#intro" property="bibo:hasPart">
    <!--OddPage-->
    <h2 id="h-intro" resource="#h-intro"><span property="xhv:role" resource="xhv:heading"><span class="secno">1. </span>Introduction</span>
    </h2>
    <p><em>This section is non-normative.</em></p>
    <p>There are a number of facets to video-conferencing in HTML covered by this specification:</p>
    <ul>
      <li>Connecting to remote peers using NAT-traversal technologies such as ICE, STUN, and TURN.</li>
      <li>Sending the locally-produced tracks to remote peers and receiving tracks from remote peers.</li>
      <li>Sending arbitrary data directly to remote peers.</li>
    </ul>
    <p>This document defines the APIs used for these features. This specification is being developed in conjunction with a protocol specification developed by the <a href="https://datatracker.ietf.org/wg/rtcweb/">IETF RTCWEB group</a> and an API specification to get access to local media devices [<cite><a class="bibref" href="#bib-GETUSERMEDIA">GETUSERMEDIA</a></cite>] developed by the <a href="https://www.w3.org/wiki/Media_Capture">Media
    Capture Task Force</a>. An overview of the system can be found in [
      <cite><a class="bibref" href="#bib-RTCWEB-OVERVIEW">RTCWEB-OVERVIEW</a></cite>] and [<cite><a class="bibref" href="#bib-RTCWEB-SECURITY">RTCWEB-SECURITY</a></cite>].</p>
  </section>

  <section id="conformance" typeof="bibo:Chapter" resource="#conformance" property="bibo:hasPart">
    <!--OddPage-->
    <h2 id="h-conformance" resource="#h-conformance"><span property="xhv:role" resource="xhv:heading"><span class="secno">2. </span>Conformance</span>
    </h2>
    <p>
      As well as sections marked as non-normative, all authoring guidelines, diagrams, examples, and notes in this specification are non-normative. Everything else in this specification is normative.
    </p>
    <p id="respecRFC2119">The key words <em class="rfc2119" title="MAY">MAY</em>, <em class="rfc2119" title="MUST">MUST</em>, <em class="rfc2119" title="MUST NOT">MUST NOT</em>, <em class="rfc2119" title="SHALL">SHALL</em>, and <em class="rfc2119" title="SHOULD">SHOULD</em> are to be interpreted as described in [<cite><a class="bibref" href="#bib-RFC2119">RFC2119</a></cite>].
    </p>

    <p>This specification defines conformance criteria that apply to a single product: the <dfn data-dfn-type="dfn" id="dfn-user-agent">user agent</dfn> that implements the interfaces that it contains.
    </p>
    <p>Conformance requirements phrased as algorithms or specific steps may be implemented in any manner, so long as the end result is equivalent. (In particular, the algorithms defined in this specification are intended to be easy to follow, and not intended to be performant.)</p>
    <p>Implementations that use ECMAScript to implement the APIs defined in this specification <em class="rfc2119" title="MUST">MUST</em> implement them in a manner consistent with the ECMAScript Bindings defined in the Web IDL specification [<cite><a class="bibref" href="#bib-WEBIDL-1">WEBIDL-1</a></cite>], as this specification uses that specification and terminology.</p>
  </section>

  <section id="terminology" typeof="bibo:Chapter" resource="#terminology" property="bibo:hasPart">
    <!--OddPage-->
    <h2 id="h-terminology" resource="#h-terminology"><span property="xhv:role" resource="xhv:heading"><span class="secno">3. </span>Terminology</span>
    </h2>
    <p>The <code><a href="http://dev.w3.org/html5/spec/webappapis.html#eventhandler">EventHandler</a></code> interface, representing a callback used for event handlers, and the
      <a href="http://dev.w3.org/html5/spec/webappapis.html#errorevent"><code><dfn data-dfn-type="dfn" id="dfn-errorevent">
    ErrorEvent</dfn></code></a> interface are defined in [<cite><a class="bibref" href="#bib-HTML5">HTML5</a></cite>].</p>
    <p>The concepts <dfn data-dfn-type="dfn" id="dfn-queue-a-task"><a href="http://dev.w3.org/html5/spec/webappapis.html#queue-a-task">queue a
    task</a></dfn>, <dfn data-dfn-type="dfn" id="dfn-fire-a-simple-event"><a href="http://dev.w3.org/html5/spec/webappapis.html#fire-a-simple-event">fire a
    simple event</a></dfn> and <dfn data-dfn-type="dfn" id="dfn-networking-task-source"><a href="http://dev.w3.org/html5/spec/webappapis.html#networking-task-source">networking
    task source</a></dfn> are defined in [<cite><a class="bibref" href="#bib-HTML5">HTML5</a></cite>].</p>
    <p>The terms <dfn data-dfn-type="dfn" id="dfn-event">event</dfn>, <dfn data-dfn-type="dfn" id="dfn-event-handlers"><a href="http://dev.w3.org/html5/spec/webappapis.html#event-handlers">event
    handlers</a></dfn> and <dfn data-dfn-type="dfn" id="dfn-event-handler-event-types"><a href="http://dev.w3.org/html5/spec/webappapis.html#event-handler-event-type">event
    handler event types</a></dfn> are defined in [<cite><a class="bibref" href="#bib-HTML5">HTML5</a></cite>].</p>
    <p>The terms <dfn data-dfn-type="dfn" id="dfn-mediastream">MediaStream</dfn>, <dfn data-dfn-for="" data-dfn-type="dfn" id="dom-mediastreamtrack" data-idl=""><code>MediaStreamTrack</code></dfn>, and
      <dfn data-dfn-for="" data-dfn-type="dfn" id="dom-mediastreamconstraints" data-idl=""><code>MediaStreamConstraints</code></dfn> are defined in [<cite><a class="bibref" href="#bib-GETUSERMEDIA">GETUSERMEDIA</a></cite>].</p>
    <p>The term <dfn data-dfn-type="dfn" id="dfn-blob">Blob</dfn> is defined in [<cite><a class="bibref" href="#bib-FILEAPI">FILEAPI</a></cite>].</p>
    <p>The term <dfn data-dfn-type="dfn" id="dfn-media-description">media description</dfn> is defined in [<cite><a class="bibref" href="#bib-RFC4566">RFC4566</a></cite>].</p>
  </section>

  <section id="peer-to-peer-connections" typeof="bibo:Chapter" resource="#peer-to-peer-connections" property="bibo:hasPart">
    <!--OddPage-->
    <h2 id="h-peer-to-peer-connections" resource="#h-peer-to-peer-connections"><span property="xhv:role" resource="xhv:heading"><span class="secno">4. </span>Peer-to-peer connections</span>
    </h2>

    <section id="introduction" typeof="bibo:Chapter" resource="#introduction" property="bibo:hasPart">
      <h3 id="h-introduction" resource="#h-introduction"><span property="xhv:role" resource="xhv:heading"><span class="secno">4.1 </span>Introduction</span>
      </h3>
      <p>An <code><a href="#dom-rtcpeerconnection" class="internalDFN" data-link-type="dfn"><code>RTCPeerConnection</code></a>
        </code> instance allows to establish peer to peer communications. Communications are coordinated via a signaling channel which is provided by unspecified means, but generally by a script in the page via the server, e.g. using
        <code>XMLHttpRequest</code> [<cite><a class="bibref" href="#bib-XMLHttpRequest">XMLHttpRequest</a></cite>] or Web Sockets [
        <cite><a class="bibref" href="#bib-WEBSOCKETS-API">WEBSOCKETS-API</a></cite>].</p>
    </section>

    <section id="configuration" typeof="bibo:Chapter" resource="#configuration" property="bibo:hasPart">
      <h3 id="h-configuration" resource="#h-configuration"><span property="xhv:role" resource="xhv:heading"><span class="secno">4.2 </span>Configuration</span>
      </h3>

      <section id="rtcconfiguration-dictionary" typeof="bibo:Chapter" resource="#rtcconfiguration-dictionary" property="bibo:hasPart">
        <h4 id="h-rtcconfiguration-dictionary" resource="#h-rtcconfiguration-dictionary"><span property="xhv:role" resource="xhv:heading"><span class="secno">4.2.1 </span>RTCConfiguration Dictionary</span>
        </h4>
        <p>The <code>RTCConfiguration</code> defines a set of parameters to configure how the peer to peer communication established via
          <code><a href="#dom-rtcpeerconnection" class="internalDFN" data-link-type="dfn"><code>RTCPeerConnection</code></a>
          </code> is established or re-established.
        </p>
        <div>
          <pre class="def idl"><span class="idlDictionary" id="idl-def-rtcconfiguration" data-idl="" data-title="RTCConfiguration">dictionary <span class="idlDictionaryID">RTCConfiguration</span> {
<span class="idlMember" id="idl-def-rtcconfiguration-iceservers" data-idl="" data-title="iceServers" data-dfn-for="rtcconfiguration">    <span class="idlMemberType">sequence&lt;<a href="#idl-def-rtciceserver" class="internalDFN" data-link-type="dfn"><code>RTCIceServer</code></a>&gt;</span>   <span class="idlMemberName"><a data-lt="iceServers" href="#dom-rtcconfiguration-iceservers" class="internalDFN" data-link-type="dfn" data-for="RTCConfiguration"><code>iceServers</code></a></span>;</span>
<span class="idlMember" id="idl-def-rtcconfiguration-icetransportpolicy" data-idl="" data-title="iceTransportPolicy" data-dfn-for="rtcconfiguration">    <span class="idlMemberType"><a href="#idl-def-rtcicetransportpolicy" class="internalDFN" data-link-type="dfn"><code>RTCIceTransportPolicy</code></a></span>    <span class="idlMemberName"><a data-lt="iceTransportPolicy" href="#dom-rtcconfiguration-icetransportpolicy" class="internalDFN" data-link-type="dfn" data-for="RTCConfiguration"><code>iceTransportPolicy</code></a></span> = <span class="idlMemberValue">"all"</span>;</span>
<span class="idlMember" id="idl-def-rtcconfiguration-bundlepolicy" data-idl="" data-title="bundlePolicy" data-dfn-for="rtcconfiguration">    <span class="idlMemberType"><a href="#idl-def-rtcbundlepolicy" class="internalDFN" data-link-type="dfn"><code>RTCBundlePolicy</code></a></span>          <span class="idlMemberName"><a data-lt="bundlePolicy" href="#dom-rtcconfiguration-bundlepolicy" class="internalDFN" data-link-type="dfn" data-for="RTCConfiguration"><code>bundlePolicy</code></a></span> = <span class="idlMemberValue">"balanced"</span>;</span>
<span class="idlMember" id="idl-def-rtcconfiguration-rtcpmuxpolicy" data-idl="" data-title="rtcpMuxPolicy" data-dfn-for="rtcconfiguration">    <span class="idlMemberType"><a href="#idl-def-rtcrtcpmuxpolicy" class="internalDFN" data-link-type="dfn"><code>RTCRtcpMuxPolicy</code></a></span>         <span class="idlMemberName"><a data-lt="rtcpMuxPolicy" href="#dom-rtcconfiguration-rtcpmuxpolicy" class="internalDFN" data-link-type="dfn" data-for="RTCConfiguration"><code>rtcpMuxPolicy</code></a></span> = <span class="idlMemberValue">"require"</span>;</span>
<span class="idlMember" id="idl-def-rtcconfiguration-peeridentity" data-idl="" data-title="peerIdentity" data-dfn-for="rtcconfiguration">    <span class="idlMemberType">DOMString</span>                <span class="idlMemberName"><a data-lt="peerIdentity" href="#dom-rtcconfiguration-peeridentity" class="internalDFN" data-link-type="dfn" data-for="RTCConfiguration"><code>peerIdentity</code></a></span>;</span>
<span class="idlMember" id="idl-def-rtcconfiguration-certificates" data-idl="" data-title="certificates" data-dfn-for="rtcconfiguration">    <span class="idlMemberType">sequence&lt;<a href="#dom-rtccertificate" class="internalDFN" data-link-type="dfn"><code>RTCCertificate</code></a>&gt;</span> <span class="idlMemberName"><a data-lt="certificates" href="#dom-rtcconfiguration-certificates" class="internalDFN" data-link-type="dfn" data-for="RTCConfiguration"><code>certificates</code></a></span>;</span>
<span class="idlMember" id="idl-def-rtcconfiguration-icecandidatepoolsize" data-idl="" data-title="iceCandidatePoolSize" data-dfn-for="rtcconfiguration">    <span class="idlMemberType">unsigned short</span>           <span class="idlMemberName"><a data-lt="iceCandidatePoolSize" href="#dom-rtcconfiguration-icecandidatepoolsize" class="internalDFN" data-link-type="dfn" data-for="RTCConfiguration"><code>iceCandidatePoolSize</code></a></span> = <span class="idlMemberValue">0</span>;</span>
};</span></pre>

          <section typeof="bibo:Chapter" resource="#dictionary-rtcconfiguration-members" property="bibo:hasPart">
            <h5 id="dictionary-rtcconfiguration-members" resource="#dictionary-rtcconfiguration-members"><span property="xhv:role" resource="xhv:heading">Dictionary <a class="idlType internalDFN" href="#idl-def-rtcconfiguration" data-link-type="dfn"><code>RTCConfiguration</code></a> Members</span></h5>
            <dl data-link-for="RTCConfiguration" data-dfn-for="RTCConfiguration" class="dictionary-members">
              <dt><dfn data-dfn-for="rtcconfiguration" data-dfn-type="dfn" id="dom-rtcconfiguration-iceservers" data-idl=""><code>iceServers</code></dfn> of type <span class="idlMemberType">sequence&lt;<a href="#idl-def-rtciceserver" class="internalDFN" data-link-type="dfn"><code>RTCIceServer</code></a>&gt;</span></dt>
              <dd>
                <p>An array of objects describing servers available to be used by ICE, such as STUN and TURN servers.</p>
              </dd>
              <dt><dfn data-dfn-for="rtcconfiguration" data-dfn-type="dfn" id="dom-rtcconfiguration-icetransportpolicy" data-idl=""><code>iceTransportPolicy</code></dfn> of type
              <span class="idlMemberType"><a href="#idl-def-rtcicetransportpolicy" class="internalDFN" data-link-type="dfn"><code>RTCIceTransportPolicy</code></a></span>,
              defaulting to <code>"all"</code></dt>
              <dd>
                <p>Indicates which candidates the <a href="#dfn-ice-agent" class="internalDFN" data-link-type="dfn">ICE agent</a> is allowed to use.</p>
              </dd>
              <dt><dfn data-dfn-for="rtcconfiguration" data-dfn-type="dfn" id="dom-rtcconfiguration-bundlepolicy" data-idl=""><code>bundlePolicy</code></dfn> of type <span class="idlMemberType"><a href="#idl-def-rtcbundlepolicy" class="internalDFN" data-link-type="dfn"><code>RTCBundlePolicy</code></a></span>, defaulting to
              <code>"balanced"</code></dt>
              <dd>
                <p>Indicates which media-bundling policy to use when gathering ICE candidates.</p>
              </dd>
              <dt><dfn data-dfn-for="rtcconfiguration" data-dfn-type="dfn" id="dom-rtcconfiguration-rtcpmuxpolicy" data-idl=""><code>rtcpMuxPolicy</code></dfn> of type <span class="idlMemberType"><a href="#idl-def-rtcrtcpmuxpolicy" class="internalDFN" data-link-type="dfn"><code>RTCRtcpMuxPolicy</code></a></span>, defaulting to
              <code>"require"</code></dt>
              <dd>
                <p>Indicates which rtcp-mux policy to use when gathering ICE candidates.</p>
              </dd>
              <dt><dfn data-dfn-for="rtcconfiguration" data-dfn-type="dfn" id="dom-rtcconfiguration-peeridentity" data-idl=""><code>peerIdentity</code></dfn> of type <span class="idlMemberType">DOMString</span></dt>
              <dd>
                <p>Sets the <a href="#target-peer-identity" class="internalDFN" data-link-type="dfn">target peer identity</a> for the
                  <a href="#dom-rtcpeerconnection" class="internalDFN" data-link-type="dfn"><code>RTCPeerConnection</code></a>. The <a href="#dom-rtcpeerconnection" class="internalDFN" data-link-type="dfn"><code>RTCPeerConnection</code></a> will not establish a connection to a remote peer unless it can be successfully authenticated with the provided name.</p>
              </dd>
              <dt><dfn data-dfn-for="rtcconfiguration" data-dfn-type="dfn" id="dom-rtcconfiguration-certificates" data-idl=""><code>certificates</code></dfn> of type <span class="idlMemberType">sequence&lt;<a href="#dom-rtccertificate" class="internalDFN" data-link-type="dfn"><code>RTCCertificate</code></a>&gt;</span></dt>
              <dd>
                <p>A set of certificates that the
                  <a href="#dom-rtcpeerconnection" class="internalDFN" data-link-type="dfn"><code><code>RTCPeerConnection</code></code></a> uses to authenticate.</p>
                <p>Valid values for this parameter are created through calls to the <a data-for="RTCPeerConnection" href="#dom-rtcpeerconnection-generatecertificate" class="internalDFN" data-link-type="dfn"><code><code>generateCertificate</code></code></a> function.
                </p>
                <p>Although any given DTLS connection will use only one certificate, this attribute allows the caller to provide multiple certificates that support different algorithms. The final certificate will be selected based on the DTLS handshake, which establishes which certificates are allowed. The
                  <code>RTCPeerConnection</code> implementation selects which of the certificates is used for a given connection; how certificates are selected is outside the scope of this specification.
                </p>
                <p>If this value is absent, then a default set of certificates is generated for each <a href="#dom-rtcpeerconnection" class="internalDFN" data-link-type="dfn"><code><code>RTCPeerConnection</code></code></a> instance.
                </p>
                <p>This option allows applications to establish key continuity. An <code>RTCCertificate</code> can be persisted in [
                  <cite><a class="bibref" href="#bib-INDEXEDDB">INDEXEDDB</a></cite>] and reused. Persistence and reuse also avoids the cost of key generation.</p>
                <p>The value for this configuration option cannot change after its value is initially selected.</p>
              </dd>
              <dt><dfn data-dfn-for="rtcconfiguration" data-dfn-type="dfn" id="dom-rtcconfiguration-icecandidatepoolsize" data-idl=""><code>iceCandidatePoolSize</code></dfn> of type
              <span class="idlMemberType">unsigned short</span>,
              defaulting to <code>0</code></dt>
              <dd>
                <p>Size of the prefetched ICE pool as defined in
                  <span>[<cite><a class="bibref" href="#bib-JSEP">JSEP</a></cite>] (<a href="https://tools.ietf.org/html/draft-ietf-rtcweb-jsep-16#section-3.5.4">section 3.5.4.</a> and <a href="https://tools.ietf.org/html/draft-ietf-rtcweb-jsep-16#section-4.1.1">section 4.1.1.</a>)</span>.</p>
              </dd>
            </dl>
          </section>
        </div>
      </section>

      <section id="rtcicecredentialtype-enum" typeof="bibo:Chapter" resource="#rtcicecredentialtype-enum" property="bibo:hasPart">
        <h4 id="h-rtcicecredentialtype-enum" resource="#h-rtcicecredentialtype-enum"><span property="xhv:role" resource="xhv:heading"><span class="secno">4.2.2 </span>RTCIceCredentialType Enum</span>
        </h4>
        <div>
          <pre class="def idl"><span class="idlEnum" id="idl-def-rtcicecredentialtype" data-idl="" data-title="RTCIceCredentialType">enum <span class="idlEnumID">RTCIceCredentialType</span> {
    "<a href="#dom-rtcicecredentialtype-password" class="idlEnumItem">password</a>",
    "<a href="#dom-rtcicecredentialtype-token" class="idlEnumItem">token</a>"
};</span></pre>
          <table data-link-for="RTCIceCredentialType" data-dfn-for="RTCIceCredentialType" class="simple">
            <tbody>
              <tr>
                <th colspan="2">Enumeration description</th>
              </tr>
              <tr>
                <td><dfn data-dfn-for="rtcicecredentialtype" data-dfn-type="dfn" id="dom-rtcicecredentialtype-password" data-idl=""><code>password</code></dfn></td>
                <td>The credential is a long-term authentication password, as described in [<cite><a class="bibref" href="#bib-RFC5389">RFC5389</a></cite>], Section 10.2.</td>
              </tr>
              <tr>
                <td><dfn data-dfn-for="rtcicecredentialtype" data-dfn-type="dfn" id="dom-rtcicecredentialtype-token" data-idl=""><code>token</code></dfn></td>
                <td>The credential is an access token, as described in [
                  <cite><a class="bibref" href="#bib-TRAM-TURN-THIRD-PARTY-AUTHZ">TRAM-TURN-THIRD-PARTY-AUTHZ</a></cite>], Section 6.2.</td>
              </tr>
            </tbody>
          </table>
        </div>
      </section>

      <section id="rtciceserver-dictionary" typeof="bibo:Chapter" resource="#rtciceserver-dictionary" property="bibo:hasPart">
        <h4 id="h-rtciceserver-dictionary" resource="#h-rtciceserver-dictionary"><span property="xhv:role" resource="xhv:heading"><span class="secno">4.2.3 </span>RTCIceServer Dictionary</span>
        </h4>
        <p>The <code>RTCIceServer</code> dictionary is used to describe the STUN and TURN servers that can be used by the <a href="#dfn-ice-agent" class="internalDFN" data-link-type="dfn">ICE agent</a> to establish a connection with a peer.</p>
        <div>
          <pre class="def idl"><span class="idlDictionary" id="idl-def-rtciceserver" data-idl="" data-title="RTCIceServer">dictionary <span class="idlDictionaryID">RTCIceServer</span> {
<span class="idlMember" id="idl-def-rtciceserver-urls" data-idl="" data-title="urls" data-dfn-for="rtciceserver">    required <span class="idlMemberType">(DOMString or sequence&lt;DOMString&gt;)</span> <span class="idlMemberName"><a data-lt="urls" href="#dom-rtciceserver-urls" class="internalDFN" data-link-type="dfn" data-for="RTCIceServer"><code>urls</code></a></span>;</span>
<span class="idlMember" id="idl-def-rtciceserver-username" data-idl="" data-title="username" data-dfn-for="rtciceserver">             <span class="idlMemberType">DOMString</span>                          <span class="idlMemberName"><a data-lt="username" href="#dom-rtciceserver-username" class="internalDFN" data-link-type="dfn" data-for="RTCIceServer"><code>username</code></a></span>;</span>
<span class="idlMember" id="idl-def-rtciceserver-credential" data-idl="" data-title="credential" data-dfn-for="rtciceserver">             <span class="idlMemberType">DOMString</span>                          <span class="idlMemberName"><a data-lt="credential" href="#dom-rtciceserver-credential" class="internalDFN" data-link-type="dfn" data-for="RTCIceServer"><code>credential</code></a></span>;</span>
<span class="idlMember" id="idl-def-rtciceserver-credentialtype" data-idl="" data-title="credentialType" data-dfn-for="rtciceserver">             <span class="idlMemberType"><a href="#idl-def-rtcicecredentialtype" class="internalDFN" data-link-type="dfn"><code>RTCIceCredentialType</code></a></span>               <span class="idlMemberName"><a data-lt="credentialType" href="#dom-rtciceserver-credentialtype" class="internalDFN" data-link-type="dfn" data-for="RTCIceServer"><code>credentialType</code></a></span> = <span class="idlMemberValue">"password"</span>;</span>
};</span></pre>

          <section typeof="bibo:Chapter" resource="#dictionary-rtciceserver-members" property="bibo:hasPart">
            <h5 id="dictionary-rtciceserver-members" resource="#dictionary-rtciceserver-members"><span property="xhv:role" resource="xhv:heading">Dictionary <a class="idlType internalDFN" href="#idl-def-rtciceserver" data-link-type="dfn"><code>RTCIceServer</code></a> Members</span></h5>
            <dl data-link-for="RTCIceServer" data-dfn-for="RTCIceServer" class="dictionary-members">
              <dt><dfn data-dfn-for="rtciceserver" data-dfn-type="dfn" id="dom-rtciceserver-urls" data-idl=""><code>urls</code></dfn> of type <span class="idlMemberType">(DOMString or
              sequence&lt;DOMString&gt;)</span>, required</dt>
              <dd>
                <p>STUN or TURN URI(s) as defined in [<cite><a class="bibref" href="#bib-RFC7064">RFC7064</a></cite>] and [
                  <cite><a class="bibref" href="#bib-RFC7065">RFC7065</a></cite>] or other URI types.</p>
              </dd>
              <dt><dfn data-dfn-for="rtciceserver" data-dfn-type="dfn" id="dom-rtciceserver-username" data-idl=""><code>username</code></dfn> of type <span class="idlMemberType">DOMString</span></dt>
              <dd>
                <p>If this <code><a href="#idl-def-rtciceserver" class="internalDFN" data-link-type="dfn"><code>RTCIceServer</code></a>
                  </code> object represents a TURN server, then this attribute specifies the username to use with that TURN server.</p>
              </dd>
              <dt><dfn data-dfn-for="rtciceserver" data-dfn-type="dfn" id="dom-rtciceserver-credential" data-idl=""><code>credential</code></dfn> of type <span class="idlMemberType">DOMString</span></dt>
              <dd>
                <p>If this <code><a href="#idl-def-rtciceserver" class="internalDFN" data-link-type="dfn"><code>RTCIceServer</code></a>
                  </code> object represents a TURN server, then this attribute specifies the credential to use with that TURN server.</p>
              </dd>
              <dt><dfn data-dfn-for="rtciceserver" data-dfn-type="dfn" id="dom-rtciceserver-credentialtype" data-idl=""><code>credentialType</code></dfn> of type <span class="idlMemberType"><a href="#idl-def-rtcicecredentialtype" class="internalDFN" data-link-type="dfn"><code>RTCIceCredentialType</code></a></span>, defaulting to
              <code>"password"</code></dt>
              <dd>
                <p>If this <code><a href="#idl-def-rtciceserver" class="internalDFN" data-link-type="dfn"><code>RTCIceServer</code></a>
                  </code> object represents a TURN server, then this attribute specifies how
                  <var>credential</var> should be used when that TURN server requests authorization.</p>
              </dd>
            </dl>
          </section>
        </div>
        <p>An example array of RTCIceServer objects is:</p>
        <div class="example">
          <div class="example-title marker"><span>Example 1</span></div><pre class="highlight hljs xquery"><code>[
     { <span class="hljs-string">"urls"</span>: <span class="hljs-string">"stun:stun1.example.net"</span> },
     { <span class="hljs-string">"urls"</span>: [<span class="hljs-string">"turns:turn.example.org"</span>, <span class="hljs-string">"turn:turn.example.net"</span>],
       <span class="hljs-string">"username"</span>: <span class="hljs-string">"user"</span>,
       <span class="hljs-string">"credential"</span>: <span class="hljs-string">"myPassword"</span>,
       <span class="hljs-string">"credentialType"</span>: <span class="hljs-string">"password"</span> }
]</code></pre></div>
      </section>

      <section id="rtcicetransportpolicy-enum" typeof="bibo:Chapter" resource="#rtcicetransportpolicy-enum" property="bibo:hasPart">
        <h4 id="h-rtcicetransportpolicy-enum" resource="#h-rtcicetransportpolicy-enum"><span property="xhv:role" resource="xhv:heading"><span class="secno">4.2.4 </span>RTCIceTransportPolicy Enum</span>
        </h4>
        <p>As noted in <span>[<cite><a class="bibref" href="#bib-JSEP">JSEP</a></cite>] (<a href="https://tools.ietf.org/html/draft-ietf-rtcweb-jsep-16#section-4.1.1">section 4.1.1.</a>)</span>, if the
          <a data-link-for="RTCConfiguration" href="#dom-rtcconfiguration-icetransportpolicy" class="internalDFN" data-link-type="dfn"><code>iceTransportPolicy</code></a> member of the <code>RTCConfiguration</code> is specified, it defines the
          <span>ICE candidate policy
        [<cite><a class="bibref" href="#bib-JSEP">JSEP</a></cite>] (<a href="https://tools.ietf.org/html/draft-ietf-rtcweb-jsep-16#section-3.5.3">section 3.5.3.</a>)</span> the browser uses to surface the permitted candidates to the application; only these candidates will be used for connectivity checks.
        </p>
        <div>
          <pre class="def idl"><span class="idlEnum" id="idl-def-rtcicetransportpolicy" data-idl="" data-title="RTCIceTransportPolicy">enum <span class="idlEnumID">RTCIceTransportPolicy</span> {
    "<a href="#dom-rtcicetransportpolicy-relay" class="idlEnumItem">relay</a>",
    "<a href="#dom-rtcicetransportpolicy-all" class="idlEnumItem">all</a>"
};</span></pre>
          <table data-link-for="RTCIceTransportPolicy" data-dfn-for="RTCIceTransportPolicy" class="simple">
            <tbody>
              <tr>
                <th colspan="2">Enumeration description</th>
              </tr>
              <tr>
                <td><dfn data-dfn-for="rtcicetransportpolicy" data-dfn-type="dfn" id="dom-rtcicetransportpolicy-relay" data-idl=""><code>relay</code></dfn></td>
                <td>
                  The <a href="#dfn-ice-agent" class="internalDFN" data-link-type="dfn">ICE agent</a> <em class="rfc2119" title="MUST">MUST</em> only use media relay candidates such as candidates passing through a TURN server. This can be used to reduce leakage of IP addresses in certain use cases.
                </td>
              </tr>
              <tr>
                <td><dfn data-dfn-for="rtcicetransportpolicy" data-dfn-type="dfn" id="dom-rtcicetransportpolicy-all" data-idl=""><code>all</code></dfn></td>
                <td>
                  The <a href="#dfn-ice-agent" class="internalDFN" data-link-type="dfn">ICE agent</a> may use any type of candidates when this value is specified. This will not include addresses that have been filtered by the browser.
                </td>
              </tr>
            </tbody>
          </table>
        </div>
      </section>

      <section id="rtcbundlepolicy-enum" typeof="bibo:Chapter" resource="#rtcbundlepolicy-enum" property="bibo:hasPart">
        <h4 id="h-rtcbundlepolicy-enum" resource="#h-rtcbundlepolicy-enum"><span property="xhv:role" resource="xhv:heading"><span class="secno">4.2.5 </span>RTCBundlePolicy Enum</span>
        </h4>
        <p>As described in <span>[<cite><a class="bibref" href="#bib-JSEP">JSEP</a></cite>] (<a href="https://tools.ietf.org/html/draft-ietf-rtcweb-jsep-16#section-4.1.1">section 4.1.1.</a>)</span>, bundle policy affects which media tracks are negotiated if the remote endpoint is not bundle-aware, and what ICE candidates are gathered. If the remote endpoint is bundle-aware, all media tracks and data channels are bundled onto the same transport.</p>
        <div>
          <pre class="def idl" id="target-bundle-policy"><span class="idlEnum" id="idl-def-rtcbundlepolicy" data-idl="" data-title="RTCBundlePolicy">enum <span class="idlEnumID">RTCBundlePolicy</span> {
    "<a href="#dom-rtcbundlepolicy-balanced" class="idlEnumItem">balanced</a>",
    "<a href="#dom-rtcbundlepolicy-max-compat" class="idlEnumItem">max-compat</a>",
    "<a href="#dom-rtcbundlepolicy-max-bundle" class="idlEnumItem">max-bundle</a>"
};</span></pre>
          <table data-link-for="RTCBundlePolicy" data-dfn-for="RTCBundlePolicy" class="simple">
            <tbody>
              <tr>
                <th colspan="2">Enumeration description (non-normative)</th>
              </tr>
              <tr>
                <td><dfn data-dfn-for="rtcbundlepolicy" data-dfn-type="dfn" id="dom-rtcbundlepolicy-balanced" data-idl=""><code>balanced</code></dfn></td>
                <td>Gather ICE candidates for each media type in use (audio, video, and data). If the remote endpoint is not bundle-aware, negotiate only one audio and video track on separate transports.
                </td>
              </tr>
              <tr>
                <td><dfn data-dfn-for="rtcbundlepolicy" data-dfn-type="dfn" id="dom-rtcbundlepolicy-max-compat" data-idl=""><code>max-compat</code></dfn></td>
                <td>Gather ICE candidates for each track. If the remote endpoint is not bundle-aware, negotiate all media tracks on separate transports.</td>
              </tr>
              <tr>
                <td><dfn data-dfn-for="rtcbundlepolicy" data-dfn-type="dfn" id="dom-rtcbundlepolicy-max-bundle" data-idl=""><code>max-bundle</code></dfn></td>
                <td>Gather ICE candidates for only one track. If the remote endpoint is not bundle-aware, negotiate only one media track.
                </td>
              </tr>
            </tbody>
          </table>
        </div>
      </section>

      <section id="rtcrtcpmuxpolicy-enum" typeof="bibo:Chapter" resource="#rtcrtcpmuxpolicy-enum" property="bibo:hasPart">
        <h4 id="h-rtcrtcpmuxpolicy-enum" resource="#h-rtcrtcpmuxpolicy-enum"><span property="xhv:role" resource="xhv:heading"><span class="secno">4.2.6 </span>RTCRtcpMuxPolicy Enum</span>
        </h4>
        <p>As described in <span>[<cite><a class="bibref" href="#bib-JSEP">JSEP</a></cite>] (<a href="https://tools.ietf.org/html/draft-ietf-rtcweb-jsep-16#section-4.1.1">section 4.1.1.</a>)</span>, the RtcpMuxPolicy affects what ICE candidates are gathered to support non-multiplexed RTCP.</p>
        <div>
          <pre class="def idl" id="target-rtcp-mux-policy"><span class="idlEnum" id="idl-def-rtcrtcpmuxpolicy" data-idl="" data-title="RTCRtcpMuxPolicy">enum <span class="idlEnumID">RTCRtcpMuxPolicy</span> {
    "<a href="#dom-rtcrtcpmuxpolicy-negotiate" class="idlEnumItem">negotiate</a>",
    "<a href="#dom-rtcrtcpmuxpolicy-require" class="idlEnumItem">require</a>"
};</span></pre>
          <table data-link-for="RTCRtcpMuxPolicy" data-dfn-for="RTCRtcpMuxPolicy" class="simple">
            <tbody>
              <tr>
                <th colspan="2">Enumeration description (non-normative)</th>
              </tr>
              <tr>
                <td><dfn data-dfn-for="rtcrtcpmuxpolicy" data-dfn-type="dfn" id="dom-rtcrtcpmuxpolicy-negotiate" data-idl=""><code>negotiate</code></dfn></td>
                <td>Gather ICE candidates for both RTP and RTCP candidates. If the remote-endpoint is capable of multiplexing RTCP, multiplex RTCP on the RTP candidates. If it is not, use both the RTP and RTCP candidates separately.</td>
              </tr>
              <tr>
                <td><dfn data-dfn-for="rtcrtcpmuxpolicy" data-dfn-type="dfn" id="dom-rtcrtcpmuxpolicy-require" data-idl=""><code>require</code></dfn></td>
                <td>Gather ICE candidates only for RTP and multiplex RTCP on the RTP candidates. If the remote endpoint is not capable of rtcp-mux, session negotiation will fail.</td>
              </tr>
            </tbody>
          </table>
        </div>
      </section>

      <section id="offer-answer-options" typeof="bibo:Chapter" resource="#offer-answer-options" property="bibo:hasPart">
        <h4 id="h-offer-answer-options" resource="#h-offer-answer-options"><span property="xhv:role" resource="xhv:heading"><span class="secno">4.2.7 </span>Offer/Answer Options</span>
        </h4>
        <p>These dictionaries describe the options that can be used to control the offer/answer creation process.</p>
        <div>
          <pre class="def idl"><span class="idlDictionary" id="idl-def-rtcofferansweroptions" data-idl="" data-title="RTCOfferAnswerOptions">dictionary <span class="idlDictionaryID">RTCOfferAnswerOptions</span> {
<span class="idlMember" id="idl-def-rtcofferansweroptions-voiceactivitydetection" data-idl="" data-title="voiceActivityDetection" data-dfn-for="rtcofferansweroptions">    <span class="idlMemberType">boolean</span> <span class="idlMemberName"><a data-lt="voiceActivityDetection" href="#dom-rtcofferansweroptions-voiceactivitydetection" class="internalDFN" data-link-type="dfn" data-for="RTCOfferAnswerOptions"><code>voiceActivityDetection</code></a></span> = <span class="idlMemberValue">true</span>;</span>
};</span></pre>

          <section typeof="bibo:Chapter" resource="#dictionary-rtcofferansweroptions-members" property="bibo:hasPart">
            <h5 id="dictionary-rtcofferansweroptions-members" resource="#dictionary-rtcofferansweroptions-members"><span property="xhv:role" resource="xhv:heading">Dictionary <a class="idlType internalDFN" href="#idl-def-rtcofferansweroptions" data-link-type="dfn"><code>RTCOfferAnswerOptions</code></a>
            Members</span></h5>
            <dl data-link-for="RTCOfferAnswerOptions" data-dfn-for="RTCOfferAnswerOptions" class="dictionary-members">
              <dt><dfn data-dfn-for="rtcofferansweroptions" data-dfn-type="dfn" id="dom-rtcofferansweroptions-voiceactivitydetection" data-idl=""><code>voiceActivityDetection</code></dfn> of type
              <span class="idlMemberType">boolean</span>, defaulting to
              <code>true</code></dt>
              <dd>
                <p>Many codecs and systems are capable of detecting "silence" and changing their behavior in this case by doing things such as not transmitting any media. In many cases, such as when dealing with emergency calling or sounds other than spoken voice, it is desirable to be able to turn off this behavior. This option allows the application to provide information about whether it wishes this type of processing enabled or disabled.
                </p>
              </dd>
            </dl>
          </section>
        </div>
        <div>
          <pre class="def idl"><span class="idlDictionary" id="idl-def-rtcofferoptions" data-idl="" data-title="RTCOfferOptions">dictionary <span class="idlDictionaryID">RTCOfferOptions</span> : <span class="idlSuperclass"><a href="#idl-def-rtcofferansweroptions" class="internalDFN" data-link-type="dfn"><code>RTCOfferAnswerOptions</code></a></span> {
<span class="idlMember" id="idl-def-rtcofferoptions-icerestart" data-idl="" data-title="iceRestart" data-dfn-for="rtcofferoptions">    <span class="idlMemberType">boolean</span> <span class="idlMemberName"><a data-lt="iceRestart" href="#dom-rtcofferoptions-icerestart" class="internalDFN" data-link-type="dfn" data-for="RTCOfferOptions"><code>iceRestart</code></a></span> = <span class="idlMemberValue">false</span>;</span>
};</span></pre>

          <section typeof="bibo:Chapter" resource="#dictionary-rtcofferoptions-members" property="bibo:hasPart">
            <h5 id="dictionary-rtcofferoptions-members" resource="#dictionary-rtcofferoptions-members"><span property="xhv:role" resource="xhv:heading">Dictionary <a class="idlType internalDFN" href="#idl-def-rtcofferoptions" data-link-type="dfn"><code>RTCOfferOptions</code></a> Members</span></h5>
            <dl data-link-for="RTCOfferOptions" data-dfn-for="RTCOfferOptions" class="dictionary-members">
              <dt><dfn data-dfn-for="rtcofferoptions" data-dfn-type="dfn" id="dom-rtcofferoptions-icerestart" data-idl=""><code>iceRestart</code></dfn> of type <span class="idlMemberType">boolean</span>, defaulting to
              <code>false</code></dt>
              <dd>
                <p>When the value of this dictionary member is true, the generated description will have ICE credentials that are different from the current credentials (as visible in the
                  <code><a data-link-for="RTCPeerConnection" href="#dom-rtcpeerconnection-localdescription" class="internalDFN" data-link-type="dfn"><code>localDescription</code></a>
                  </code> attribute's SDP). Applying the generated description will restart ICE.</p>
                <p>When the value of this dictionary member is false, and the
                  <code><a data-link-for="RTCPeerConnection" href="#dom-rtcpeerconnection-localdescription" class="internalDFN" data-link-type="dfn"><code>localDescription</code></a>
                  </code> attribute has valid ICE credentials, the generated description will have the same ICE credentials as the current value from the
                  <code><a data-link-for="RTCPeerConnection" href="#dom-rtcpeerconnection-localdescription" class="internalDFN" data-link-type="dfn"><code>localDescription</code></a>
                  </code> attribute.</p>
              </dd>
            </dl>
          </section>
        </div>
        <div>
          <pre class="def idl"><span class="idlDictionary" id="idl-def-rtcansweroptions" data-idl="" data-title="RTCAnswerOptions">dictionary <span class="idlDictionaryID">RTCAnswerOptions</span> : <span class="idlSuperclass"><a href="#idl-def-rtcofferansweroptions" class="internalDFN" data-link-type="dfn"><code>RTCOfferAnswerOptions</code></a></span> {
};</span></pre>
        </div>
      </section>
    </section>

    <section id="rtcpeerconnection-interface" typeof="bibo:Chapter" resource="#rtcpeerconnection-interface" property="bibo:hasPart">
      <h3 id="h-rtcpeerconnection-interface" resource="#h-rtcpeerconnection-interface"><span property="xhv:role" resource="xhv:heading"><span class="secno">4.3 </span>RTCPeerConnection Interface</span>
      </h3>
      <p>The [<cite><a class="bibref" href="#bib-JSEP">JSEP</a></cite>] specification, as a whole, describes the details of how the <code><a href="#dom-rtcpeerconnection" class="internalDFN" data-link-type="dfn"><code>RTCPeerConnection</code></a>
        </code> operates. References to specific subsections of [<cite><a class="bibref" href="#bib-JSEP">JSEP</a></cite>] are provided as appropriate.</p>

      <section id="operation" typeof="bibo:Chapter" resource="#operation" property="bibo:hasPart">
        <h4 id="h-operation" resource="#h-operation"><span property="xhv:role" resource="xhv:heading"><span class="secno">4.3.1 </span>Operation</span>
        </h4>
        <p>Calling <code>new <a href="#dom-rtcpeerconnection" class="internalDFN" data-link-type="dfn"><code>RTCPeerConnection</code></a>(<var>configuration</var> )
          </code> creates an <code><a href="#dom-rtcpeerconnection" class="internalDFN" data-link-type="dfn"><code>RTCPeerConnection</code></a>
          </code> object.</p>
        <p>The <var>configuration</var> has the information to find and access the servers used by ICE. There may be multiple servers of each type and any TURN server also acts as a STUN server.</p>
        <p>An <code><a href="#dom-rtcpeerconnection" class="internalDFN" data-link-type="dfn"><code>RTCPeerConnection</code></a>
          </code> object has a <dfn data-dfn-type="dfn" id="dfn-signaling-state">signaling
        state</dfn>, a <dfn data-dfn-type="dfn" id="dfn-connection-state">connection state</dfn>, an <dfn data-dfn-type="dfn" id="dfn-ice-gathering-state">ICE gathering
        state</dfn>, and an <dfn data-dfn-type="dfn" id="dfn-ice-connection-state">ICE connection state</dfn>. These are initialized when the object is created.</p>
        <p>The ICE protocol implementation of an
          <code><a href="#dom-rtcpeerconnection" class="internalDFN" data-link-type="dfn"><code>RTCPeerConnection</code></a>
          </code> is represented by an <dfn data-dfn-type="dfn" id="dfn-ice-agent">ICE
        agent</dfn> [<cite><a class="bibref" href="#bib-ICE">ICE</a></cite>]. The User Agent <em class="rfc2119" title="MUST">MUST</em> respond to the following events triggered by the <a href="#dfn-ice-agent" class="internalDFN" data-link-type="dfn">ICE Agent</a>:</p>
        <ul>
          <li>
            <p>When the <a href="#dfn-ice-agent" class="internalDFN" data-link-type="dfn">ICE Agent</a>'s <a href="#dfn-ice-candidate-pool-size" class="internalDFN" data-link-type="dfn">ICE candidate pool size</a> is set to a nonzero value and the <code>RTCPeerConnection</code>'s
              <a href="#dfn-ice-gathering-state" class="internalDFN" data-link-type="dfn">ICE gathering state</a> is <code>new</code>, the User Agent <em class="rfc2119" title="MUST">MUST</em> start gathering ICE candidates and <a href="#update-ice-gathering-state" class="internalDFN" data-link-type="dfn">update the ICE gathering
            state</a> to <code>gathering</code>.</p>
          </li>
          <li>
            <p>If the <a href="#dfn-ice-agent" class="internalDFN" data-link-type="dfn">ICE Agent</a> has found one or more candidate pairs for each <code><a href="#dom-mediastreamtrack" class="internalDFN" data-link-type="dfn"><code>MediaStreamTrack</code></a>
              </code> that forms a valid connection, <a href="#update-ice-connection-state" class="internalDFN" data-link-type="dfn">update the ICE connection state</a> to
              <code>connected</code>.</p>
          </li>
          <li>
            <p>When the <a href="#dfn-ice-agent" class="internalDFN" data-link-type="dfn">ICE Agent</a> finishes checking all candidate pairs, if at least one connection has been found for each <a href="#dfn-media-description" class="internalDFN" data-link-type="dfn">media
            description</a>, <a href="#update-ice-connection-state" class="internalDFN" data-link-type="dfn">update the ICE connection state</a> to
              <code>completed</code>, otherwise to <code>failed</code>.</p>
          </li>
        </ul>
        <p>When the <dfn id="dom-peerconnection" data-dfn-type="dfn"><code>RTCPeerConnection()</code></dfn> constructor is invoked, the user agent <em class="rfc2119" title="MUST">MUST</em> run the following steps:</p>
        <ol>
          <li>
            <p>Let <var>connection</var> be a newly created
              <code><a href="#dom-rtcpeerconnection" class="internalDFN" data-link-type="dfn"><code>RTCPeerConnection</code></a>
              </code> object.</p>
          </li>
          <li>
            <p>Initialize <var>connection</var>'s <a href="#dfn-ice-agent" class="internalDFN" data-link-type="dfn">ICE Agent</a>.</p>
          </li>
          <li>
            <p><a href="#set-pc-configuration" class="internalDFN" data-link-type="dfn">Set the configuration</a> specified by the constructor's first argument.</p>
          </li>
          <li>
            <p>Let <var>connection</var> have an [[<dfn data-dfn-type="dfn" id="dfn-isclosed">isClosed</dfn>]] internal slot, initialized to <code>false</code>.</p>
          </li>
          <li>
            <p>Let <var>connection</var> have a [[<dfn data-dfn-type="dfn" id="dfn-neednegotiation">needNegotiation</dfn>]] internal slot, initialized to <code>false</code>.</p>
          </li>
          <li>
            <p>Let <var>connection</var> have an [[<dfn data-dfn-type="dfn" id="dfn-operations">operations</dfn>]] internal slot, representing an <a href="#dfn-operations-queue" class="internalDFN" data-link-type="dfn">operations queue</a>, initialized to an empty list.</p>
          </li>
          <li>
            <p>Set <var>connection</var>'s <a href="#dfn-signaling-state" class="internalDFN" data-link-type="dfn">signaling state</a> to
              <code>stable</code>.</p>
          </li>
          <li>
            <p>Set <var>connection</var>'s <a href="#dfn-ice-connection-state" class="internalDFN" data-link-type="dfn">ICE connection state</a> to
              <code>new</code>.</p>
          </li>
          <li>
            <p>Set <var>connection</var>'s <a href="#dfn-ice-gathering-state" class="internalDFN" data-link-type="dfn">ICE gathering state</a> to
              <code>new</code>.</p>
          </li>
          <li>
            <p>Set <var>connection</var>'s <a href="#dfn-connection-state" class="internalDFN" data-link-type="dfn">connection state</a> to
              <code>new</code>.</p>
          </li>
          <li>
            <p>Set <var>connection</var>'s <code><a data-for="RTCPeerConnection" href="#dom-rtcpeerconnection-pendinglocaldescription" class="internalDFN" data-link-type="dfn"><code>pendingLocalDescription</code></a>
              </code>,
              <code><a data-for="RTCPeerConnection" href="#dom-rtcpeerconnection-currentlocaldescription" class="internalDFN" data-link-type="dfn"><code>currentLocalDescription</code></a>
              </code>,
              <code><a data-for="RTCPeerConnection" href="#dom-rtcpeerconnection-pendingremotedescription" class="internalDFN" data-link-type="dfn"><code>pendingRemoteDescription</code></a>
              </code> and
              <code><a data-for="RTCPeerConnection" href="#dom-rtcpeerconnection-currentremotedescription" class="internalDFN" data-link-type="dfn"><code>currentRemoteDescription</code></a>
              </code> to null.
            </p>
          </li>
          <li>
            <p>If the <code>certificates</code> value in the
              <code>RTCConfiguration</code> structure is non-empty, check that the <code>expires</code> on each value is in the future. If a certificate has expired, throw an <code>InvalidAccessError</code> exception and abort these steps; otherwise, store the certificates. If no <code>certificates</code> value was specified, one or more new <code>RTCCertificate</code> instances are generated for use with this <code>RTCPeerConnection</code> instance.</p>
          </li>
          <li>
            <p>Store the configuration, including the certificates, in a [[
              <dfn data-dfn-type="dfn" id="dfn-configuration">configuration</dfn>]] internal slot.</p>
          </li>
          <li>
            <p>Return <var>connection</var>.</p>
          </li>
        </ol>
        <p>An <code><a href="#dom-rtcpeerconnection" class="internalDFN" data-link-type="dfn"><code>RTCPeerConnection</code></a>
          </code> object has an
          <dfn data-dfn-type="dfn" id="dfn-operations-queue">operations queue</dfn>, [[<a href="#dfn-operations" class="internalDFN" data-link-type="dfn">operations</a>]], which ensures that only one asynchronous operation in the queue is executed concurrently. If subsequent calls are made while the returned promise of a previous call is still not settled, they are added to the queue and executed when all the previous calls have finished executing and their promises have settled.</p>
        <p>To <dfn id="enqueue-an-operation" data-dfn-type="dfn">enqueue an operation</dfn>, run the following steps:</p>
        <ol>
          <li>
            <p>Let <var>connection</var> be the current
              <code><a href="#dom-rtcpeerconnection" class="internalDFN" data-link-type="dfn"><code>RTCPeerConnection</code></a>
              </code> object.</p>
          </li>
          <li>
            <p>If <var>connection</var>'s [[<a href="#dfn-isclosed" class="internalDFN" data-link-type="dfn">isClosed</a>]] slot is
              <code>true</code>, return a promise rejected with an
              <code>InvalidStateError</code>.</p>
          </li>
          <li>
            <p>Let <var>operation</var> be the operation to be enqueued.</p>
          </li>
          <li>
            <p>Let <var>p</var> be a new promise.</p>
          </li>
          <li>
            <p>Append <var>operation</var> to [[<a href="#dfn-operations" class="internalDFN" data-link-type="dfn">operations</a>]].</p>
          </li>
          <li>
            <p>If the length of [[<a href="#dfn-operations" class="internalDFN" data-link-type="dfn">operations</a>]] is exactly 1, execute
              <var>operation</var>.</p>
          </li>
          <li>
            <p>Upon fulfillment or rejection of the promise returned by the
              <var>operation</var>, run the following steps:</p>
            <ol>
              <li>
                <p>If <var>connection</var>'s [[<a href="#dfn-isclosed" class="internalDFN" data-link-type="dfn">isClosed</a>]] slot is
                  <code>true</code>, abort these steps.</p>
              </li>
              <li>
                <p>If the promise returned by <var>operation</var> was fulfilled with a value, fulfill <var>p</var> with that value.
                </p>
              </li>
              <li>
                <p>If the promise returned by <var>operation</var> was rejected with a value, reject <var>p</var> with that value.</p>
              </li>
              <li>
                <p>Upon fulfillment or rejection of <var>p</var>, execute the following steps:</p>
                <ol>
                  <li>
                    <p>If <var>connection</var>'s [[<a href="#dfn-isclosed" class="internalDFN" data-link-type="dfn">isClosed</a>]] slot is
                      <code>true</code>, abort these steps.</p>
                  </li>
                  <li>
                    <p>Remove the first element of [[<a href="#dfn-operations" class="internalDFN" data-link-type="dfn">operations</a>]].</p>
                  </li>
                  <li>
                    <p>If [[<a href="#dfn-operations" class="internalDFN" data-link-type="dfn">operations</a>]] is non-empty, execute the operation represented by the first element of [[
                      <a href="#dfn-operations" class="internalDFN" data-link-type="dfn">operations</a>]].</p>
                  </li>
                </ol>
              </li>
            </ol>
          </li>
          <li>
            <p>Return <var>p</var>.</p>
          </li>
        </ol>
        <p>An <code><a href="#dom-rtcpeerconnection" class="internalDFN" data-link-type="dfn"><code>RTCPeerConnection</code></a>
          </code> object has an aggregated
          <a href="#dfn-connection-state" class="internalDFN" data-link-type="dfn">connection state</a>. Whenever the state of an
          <code><a href="#idl-def-rtcdtlstransport" class="internalDFN" data-link-type="dfn"><code>RTCDtlsTransport</code></a>
          </code> or
          <code><a href="#idl-def-rtcicetransport" class="internalDFN" data-link-type="dfn"><code>RTCIceTransport</code></a>
          </code> changes or when the [[
          <a href="#dfn-isclosed" class="internalDFN" data-link-type="dfn">isClosed</a>]] slot turns <code>true</code>, the User Agent <em class="rfc2119" title="MUST">MUST</em> queue a task that runs the following steps:</p>
        <ol>
          <li>
            <p>Let <var>connection</var> be this
              <code><a href="#dom-rtcpeerconnection" class="internalDFN" data-link-type="dfn"><code>RTCPeerConnection</code></a>
              </code> object.</p>
          </li>
          <li>
            <p>Let <var>newState</var> be the value of deriving a new state value as described by the
              <a href="#idl-def-rtcpeerconnectionstate" class="internalDFN" data-link-type="dfn"><code><code>RTCPeerConnectionState</code></code></a> enum.</p>
          </li>
          <li>
            <p>If <a href="#dfn-connection-state" class="internalDFN" data-link-type="dfn">connection state</a> is equal to <var>newState</var>, abort these steps.</p>
          </li>
          <li>
            <p>Let <a href="#dfn-connection-state" class="internalDFN" data-link-type="dfn">connection state</a> be <var>newState</var>.</p>
          </li>
          <li>
            <p>Fire a simple event named
              <code><a href="#event-connectionstatechange" class="internalDFN" data-link-type="dfn"><code>connectionstatechange</code></a>
              </code> at
              <var>connection</var>.</p>
          </li>
        </ol>
        <p>When a new ICE candidate is available or when the ICE gathering process is done, the user agent <em class="rfc2119" title="MUST">MUST</em> queue a task that runs the following steps:</p>
        <ol>
          <li>
            <p>Let <var>connection</var> be the
              <code><a href="#dom-rtcpeerconnection" class="internalDFN" data-link-type="dfn"><code>RTCPeerConnection</code></a>
              </code> object associated with this
              <a href="#dfn-ice-agent" class="internalDFN" data-link-type="dfn">ICE Agent</a>.</p>
          </li>
          <li>
            <p>If <var>connection</var>'s [[<a href="#dfn-isclosed" class="internalDFN" data-link-type="dfn">isClosed</a>]] slot is
              <code>true</code>, abort these steps.</p>
          </li>
          <li>
            <p>If the intent of the <a href="#dfn-ice-agent" class="internalDFN" data-link-type="dfn">ICE Agent</a> is to notify the script that:
            </p>
            <ul>
              <li>
                <p>A new candidate is available.</p>
                <p>Add the candidate to <var>connection</var>'s
                  <code><a data-link-for="RTCPeerConnection" href="#dom-rtcpeerconnection-localdescription" class="internalDFN" data-link-type="dfn"><code>localDescription</code></a>
                  </code> and create an
                  <code><a href="#idl-def-rtcicecandidate" class="internalDFN" data-link-type="dfn"><code>RTCIceCandidate</code></a>
                  </code> instance to represent the candidate. Let <var>newCandidate</var> be that object.</p>
              </li>
              <li>
                <p>The gathering process is done.</p>
                <p><a data-lt="update the ICE gathering state" href="#update-ice-gathering-state" class="internalDFN" data-link-type="dfn">Update
                <var>connection</var>'s ICE gathering state</a> to
                  <code>completed</code> and let <var>newCandidate</var> be null.
                </p>
              </li>
            </ul>
          </li>
          <li>
            <p>Fire an event named <code><a href="#event-icecandidate" class="internalDFN" data-link-type="dfn"><code>icecandidate</code></a>
              </code> with
              <var>newCandidate</var> at <var>connection</var>.</p>
          </li>
        </ol>
        <p>To <dfn id="update-ice-gathering-state" data-dfn-type="dfn">update the <a href="#dfn-ice-gathering-state" class="internalDFN" data-link-type="dfn">ICE gathering
        state</a></dfn> of an <code><a href="#dom-rtcpeerconnection" class="internalDFN" data-link-type="dfn"><code>RTCPeerConnection</code></a>
          </code> instance
          <var>connection</var> to <var>newState</var>, the User Agent <em class="rfc2119" title="MUST">MUST</em> queue a task that runs the following steps:</p>
        <ol>
          <li>
            <p>If <var>connection</var>'s [[<a href="#dfn-isclosed" class="internalDFN" data-link-type="dfn">isClosed</a>]] slot is
              <code>true</code> or <var>connection</var>'s <a href="#dfn-ice-gathering-state" class="internalDFN" data-link-type="dfn">ice gathering
            state</a> has the same value as <var>newState</var>, abort these steps.
            </p>
          </li>
          <li>
            <p>Set <var>connection's</var> <a href="#dfn-ice-gathering-state" class="internalDFN" data-link-type="dfn">ice gathering state</a> to
              <var>newState</var>.</p>
          </li>
          <li>
            <p>Fire a simple event named
              <code><a href="#event-icegatheringstatechange" class="internalDFN" data-link-type="dfn"><code>icegatheringstatechange</code></a>
              </code> at
              <var>connection</var>.</p>
          </li>
        </ol>
        <p>To <dfn id="update-ice-connection-state" data-dfn-type="dfn">update the <a href="#dfn-ice-connection-state" class="internalDFN" data-link-type="dfn">ICE
        connection state</a></dfn> of an <code><a href="#dom-rtcpeerconnection" class="internalDFN" data-link-type="dfn"><code>RTCPeerConnection</code></a>
          </code>
          instance <var>connection</var> to <var>newState</var>, the User Agent
          <em class="rfc2119" title="MUST">MUST</em> queue a task that runs the following steps:</p>
        <ol>
          <li>
            <p>If <var>connection</var>'s [[<a href="#dfn-isclosed" class="internalDFN" data-link-type="dfn">isClosed</a>]] slot is
              <code>true</code> or <var>connection</var>'s <a href="#dfn-ice-connection-state" class="internalDFN" data-link-type="dfn">ice connection
            state</a> has the same value as <var>newState</var>, abort these steps.
            </p>
          </li>
          <li>
            <p>Set <var>connection's</var> <a href="#dfn-ice-connection-state" class="internalDFN" data-link-type="dfn">ice connection state</a> to
              <var>newState</var>.</p>
          </li>
          <li>
            <p>Fire a simple event named
              <code><a href="#event-iceconnectionstatechange" class="internalDFN" data-link-type="dfn"><code>iceconnectionstatechange</code></a>
              </code> at
              <var>connection</var>.</p>
          </li>
        </ol>
        <p>To <dfn id="set-description" data-dfn-type="dfn">set an RTCSessionDescription</dfn>
          <var>description</var> on an <code><a href="#dom-rtcpeerconnection" class="internalDFN" data-link-type="dfn"><code>RTCPeerConnection</code></a>
          </code>
          object <var>connection</var>, <a href="#enqueue-an-operation">enqueue</a> the following steps:</p>
        <ol>
          <li>
            <p>Let <var>p</var> be a new promise.</p>
          </li>
          <li>
            <p>In parallel, start the process to apply <var>description</var> as described in <span>[<cite><a class="bibref" href="#bib-JSEP">JSEP</a></cite>] (<a href="https://tools.ietf.org/html/draft-ietf-rtcweb-jsep-16#section-5.5">section 5.5.</a> and <a href="https://tools.ietf.org/html/draft-ietf-rtcweb-jsep-16#section-5.6">section 5.6.</a>)</span>.</p>
            <ol>
              <li>
                <p>If the process to apply <var>description</var> fails for any reason, then user agent <em class="rfc2119" title="MUST">MUST</em> queue a task runs the following steps:
                </p>
                <ol>
                  <li>
                    <p>If <var>connection</var>'s [[<a href="#dfn-isclosed" class="internalDFN" data-link-type="dfn">isClosed</a>]] slot is
                      <code>true</code>, then abort these steps.</p>
                  </li>
                  <li>
                    <p>If elements of the SDP were modified, then reject
                      <var>p</var> with an <code>InvalidModificationError</code> and abort these steps.</p>
                  </li>
                  <li>
                    <p>If the <var>description</var>'s <code><a data-for="RTCSessionDescription" href="#dom-rtcsessiondescription-type" class="internalDFN" data-link-type="dfn"><code>type</code></a>
                      </code> is invalid for the current <a href="#dfn-signaling-state" class="internalDFN" data-link-type="dfn">signaling state</a> of <var>connection</var>, then reject <var>p</var> with a
                      <code>InvalidStateError</code> and abort these steps.</p>
                  </li>
                  <li>
                    <p>If the content of <var>description</var> is invalid, then reject <var>p</var> with an
                      <code>InvalidAccessError</code> and abort these steps.</p>
                  </li>
                  <li>
                    <p>For all other errors, for example if
                      <var>description</var> cannot be applied at the media layer, reject <var>p</var> with
                      <code>OperationError</code>.</p>
                  </li>
                </ol>
              </li>
              <li>
                <p>If <var>description</var> is applied successfully, the user agent <em class="rfc2119" title="MUST">MUST</em> queue a task that runs the following steps:</p>
                <ol>
                  <li>
                    <p>If <var>connection</var>'s [[<a href="#dfn-isclosed" class="internalDFN" data-link-type="dfn">isClosed</a>]] slot is
                      <code>true</code>, then abort these steps.</p>
                    <div class="issue" id="issue-1">
                      <div class="issue-title marker" aria-level="5" role="heading" id="h-issue1"><span>Issue 1</span></div>
                      <p class="">NOTE: The principles of pending and current SDP were agreed by the WG but the details in the next steps have not yet been fully reviewed. TODO - review this.
                      </p>
                    </div>
                  </li>
                  <li>
                    <p>If <var>description</var> is set as a local description, then run one of the following steps:</p>
                    <ul>
                      <!-- A) transition stable to haveLocalOffer -->
                      <li>
                        <p>If <var>description</var> is of type "offer", set
                          <code><var>connection</var>.<a data-for="RTCPeerConnection" href="#dom-rtcpeerconnection-pendinglocaldescription" class="internalDFN" data-link-type="dfn"><code>pendingLocalDescription</code></a>
                          </code>
                          to <var>description</var> and <a href="#dfn-signaling-state" class="internalDFN" data-link-type="dfn">signaling state</a> to
                          <code>have-local-offer</code>.</p>
                      </li>
                      <!-- C) transition haveRemoteOffer or haveLocalProvAnswer to
                      stable -->
                      <li>
                        <p>If <var>description</var> is of type "answer", then this completes an offer answer negotiation. Set
                          <var>connection</var>'s <code><a data-for="RTCPeerConnection" href="#dom-rtcpeerconnection-currentlocaldescription" class="internalDFN" data-link-type="dfn"><code>currentLocalDescription</code></a>
                          </code>
                          to <var>description</var> and <code><a data-for="RTCPeerConnection" href="#dom-rtcpeerconnection-currentremotedescription" class="internalDFN" data-link-type="dfn"><code>currentRemoteDescription</code></a>
                          </code>
                          to the value of <code><a data-for="RTCPeerConnection" href="#dom-rtcpeerconnection-pendingremotedescription" class="internalDFN" data-link-type="dfn"><code>pendingRemoteDescription</code></a>
                          </code>. Set both <code><a data-for="RTCPeerConnection" href="#dom-rtcpeerconnection-pendingremotedescription" class="internalDFN" data-link-type="dfn"><code>pendingRemoteDescription</code></a>
                          </code>
                          and <code><a data-for="RTCPeerConnection" href="#dom-rtcpeerconnection-pendinglocaldescription" class="internalDFN" data-link-type="dfn"><code>pendingLocalDescription</code></a>
                          </code>
                          to null. Finally set <var>connection</var>'s
                          <a href="#dfn-signaling-state" class="internalDFN" data-link-type="dfn">signaling state</a> to <code>stable</code></p>
                      </li>
                      <!-- B) transition rollback to haveLocalOffer to stable -->
                      <li>
                        <p>If <var>description</var> is of type "rollback", then this is a rollback. Set
                          <code><var>connection</var>.<a data-for="RTCPeerConnection" href="#dom-rtcpeerconnection-pendinglocaldescription" class="internalDFN" data-link-type="dfn"><code>pendingLocalDescription</code></a>
                          </code>
                          to null and <a href="#dfn-signaling-state" class="internalDFN" data-link-type="dfn">signaling state</a> to
                          <code>stable</code>.</p>
                      </li>
                      <!-- G) transition haveRemoteOffer to haveLocalProvAnswer -->
                      <li>
                        <p>If <var>description</var> is of type "pranswer", then set <code><var>connection</var>.<a data-for="RTCPeerConnection" href="#dom-rtcpeerconnection-pendinglocaldescription" class="internalDFN" data-link-type="dfn"><code>pendingLocalDescription</code></a>
                          </code>
                          to <var>description</var> and <a href="#dfn-signaling-state" class="internalDFN" data-link-type="dfn">signaling state</a> to
                          <code>have-local-pranswer</code>.</p>
                      </li>
                    </ul>
                  </li>
                  <li>
                    <p>Otherwise, if <var>description</var> is set as a remote description, then run one of the following steps:</p>
                    <ul>
                      <!-- D) transition stable to haveRemoteOffer -->
                      <li>
                        <p>If <var>description</var> is of type "offer", set
                          <code><var>connection</var>.<a data-for="RTCPeerConnection" href="#dom-rtcpeerconnection-pendingremotedescription" class="internalDFN" data-link-type="dfn"><code>pendingRemoteDescription</code></a>
                          </code>
                          attribute to <var>description</var> and <a href="#dfn-signaling-state" class="internalDFN" data-link-type="dfn">signaling
                        state</a> to <code>have-remote-offer</code>.</p>
                      </li>
                      <!-- F) transition haveRemoteOffer or haveLocalProvAnswer to
                      stable -->
                      <li>
                        <p>If <var>description</var> is of type "answer", then this completes an offer answer negotiation. Set
                          <var>connection</var>'s <code><a data-for="RTCPeerConnection" href="#dom-rtcpeerconnection-currentremotedescription" class="internalDFN" data-link-type="dfn"><code>currentRemoteDescription</code></a>
                          </code>
                          to <var>description</var> and <code><a data-for="RTCPeerConnection" href="#dom-rtcpeerconnection-currentlocaldescription" class="internalDFN" data-link-type="dfn"><code>currentLocalDescription</code></a>
                          </code>
                          to the value of <code><a data-for="RTCPeerConnection" href="#dom-rtcpeerconnection-pendinglocaldescription" class="internalDFN" data-link-type="dfn"><code>pendingLocalDescription</code></a>
                          </code>. Set both <code><a data-for="RTCPeerConnection" href="#dom-rtcpeerconnection-pendingremotedescription" class="internalDFN" data-link-type="dfn"><code>pendingRemoteDescription</code></a>
                          </code>
                          and <code><a data-for="RTCPeerConnection" href="#dom-rtcpeerconnection-pendinglocaldescription" class="internalDFN" data-link-type="dfn"><code>pendingLocalDescription</code></a>
                          </code>
                          to null. Finally set <var>connection</var>'s
                          <a href="#dfn-signaling-state" class="internalDFN" data-link-type="dfn">signaling state</a> to <code>stable</code></p>
                      </li>
                      <!-- E) transition rollback to haveRemoteOffer to stable -->
                      <li>
                        <p>If <var>description</var> is of type "rollback", then this is a rollback. Set
                          <code><var>connection</var>.<a data-for="RTCPeerConnection" href="#dom-rtcpeerconnection-pendingremotedescription" class="internalDFN" data-link-type="dfn"><code>pendingRemoteDescription</code></a>
                          </code>
                          to null and <a href="#dfn-signaling-state" class="internalDFN" data-link-type="dfn">signaling state</a> to
                          <code>stable</code>.</p>
                      </li>
                      <!-- H) transition haveRemoteOffer to haveLocalProvAnswer -->
                      <li>
                        <p>If <var>description</var> is of type "pranswer", then set <code><var>connection</var>.<a data-for="RTCPeerConnection" href="#dom-rtcpeerconnection-pendingremotedescription" class="internalDFN" data-link-type="dfn"><code>pendingRemoteDescription</code></a>
                          </code>
                          to <var>description</var> and <a href="#dfn-signaling-state" class="internalDFN" data-link-type="dfn">signaling state</a> to
                          <code>have-remote-pranswer</code>.</p>
                      </li>
                    </ul>
                  </li>
                  <li>
                    <p>If <var>connection</var>'s <a href="#dfn-signaling-state" class="internalDFN" data-link-type="dfn">signaling state</a> changed above, fire a simple event named
                      <code><a href="#event-signalingstatechange" class="internalDFN" data-link-type="dfn"><code>signalingstatechange</code></a>
                      </code> at
                      <var>connection</var>.</p>
                  </li>
                  <li>
                    <p>If <var>description</var> is set as a local description,
                      <var>connection</var>'s <a href="#dfn-ice-gathering-state" class="internalDFN" data-link-type="dfn">ICE gathering state</a> is
                      <code>new</code>, and <var>description</var> contains media, then <a data-lt="update the ICE gathering state" href="#update-ice-gathering-state" class="internalDFN" data-link-type="dfn">update
                    <var>connection</var>'s ICE gathering state</a> to
                      <code>gathering</code>.</p>
                  </li>
                  <li>
                    <p>If the process to apply <var>description</var> resulted in an ICE restart <span>[<cite><a class="bibref" href="#bib-JSEP">JSEP</a></cite>] (<a href="https://tools.ietf.org/html/draft-ietf-rtcweb-jsep-16#section-5.8">section 5.8.</a> and <a href="https://tools.ietf.org/html/draft-ietf-rtcweb-jsep-16#section-5.9">section 5.9.</a>)</span>, then run the following steps:</p>
                    <ol>
                      <li>
                        <p>If <var>connection</var> is not already gathering,
                          <a data-lt="update the ICE gathering state" href="#update-ice-gathering-state" class="internalDFN" data-link-type="dfn">update
                        <var>connection</var>'s ICE gathering state</a> to
                          <code>gathering</code>.</p>
                      </li>
                      <li>
                        <p>If <var>connection</var>'s <a href="#dfn-ice-connection-state" class="internalDFN" data-link-type="dfn">ICE connection
                        state</a> is <code>completed</code>, <a data-lt="update the ICE connection state" href="#update-ice-connection-state" class="internalDFN" data-link-type="dfn">update
                        <var>connection</var>'s ICE connection state</a> to
                          <code>connected</code>.</p>
                      </li>
                    </ol>
                  </li>
                  <li>
                    <p>If <var>description</var> is set as a remote description with new media descriptions <span>[<cite><a class="bibref" href="#bib-JSEP">JSEP</a></cite>] (<a href="https://tools.ietf.org/html/draft-ietf-rtcweb-jsep-16#section-5.7.2">section 5.7.2.</a>)</span>, the User Agent <em class="rfc2119" title="MUST">MUST</em>
                      <a href="#dispatch-receiver" class="internalDFN" data-link-type="dfn">dispatch a receiver</a> for all new media descriptions.
                    </p>
                  </li>
                  <li>
                    <p>If <var>description</var> is of type "rollback", then run the following steps:</p>
                    <ol>
                      <li>
                        <p>If the <code><a data-for="RTCRtpTransceiver" href="#dom-rtcrtptransceiver-mid" class="internalDFN" data-link-type="dfn"><code>mid</code></a>
                          </code> value of an
                          <code><a href="#idl-def-rtcrtptransceiver" class="internalDFN" data-link-type="dfn"><code>RTCRtpTransceiver</code></a>
                          </code> was set to a non-null value by the
                          <code><a href="#idl-def-rtcsessiondescription" class="internalDFN" data-link-type="dfn"><code>RTCSessionDescription</code></a>
                          </code> that is being rolled back, set the <code><a data-for="RTCRtpTransceiver" href="#dom-rtcrtptransceiver-mid" class="internalDFN" data-link-type="dfn"><code>mid</code></a>
                          </code> value of that transceiver to null, as described by <span>[<cite><a class="bibref" href="#bib-JSEP">JSEP</a></cite>] (<a href="https://tools.ietf.org/html/draft-ietf-rtcweb-jsep-16#section-4.1.7.2">section 4.1.7.2.</a>)</span>.</p>
                      </li>
                      <li>
                        <p>If an <code><a href="#idl-def-rtcrtptransceiver" class="internalDFN" data-link-type="dfn"><code>RTCRtpTransceiver</code></a>
                          </code> was created by applying the
                          <code><a href="#idl-def-rtcsessiondescription" class="internalDFN" data-link-type="dfn"><code>RTCSessionDescription</code></a>
                          </code> that is being rolled back, and a track has not been attached to it via <code>addTrack</code>, remove that transceiver from <var>connection</var>'s <a href="#transceivers-set">set of transceivers</a>, as described by <span>[<cite><a class="bibref" href="#bib-JSEP">JSEP</a></cite>] (<a href="https://tools.ietf.org/html/draft-ietf-rtcweb-jsep-16#section-4.1.7.2">section 4.1.7.2.</a>)</span>.</p>
                      </li>
                    </ol>
                  </li>
                  <li>
                    <p>If <var>connection</var>'s <a href="#dfn-signaling-state" class="internalDFN" data-link-type="dfn">signaling state</a> is now
                      <code>stable</code>, <a href="#dfn-update-the-negotiation-needed-flag" class="internalDFN" data-link-type="dfn">update the negotiation-needed
                    flag</a>. If <var>connection</var>'s [[
                      <a href="#dfn-neednegotiation" class="internalDFN" data-link-type="dfn">needNegotiation</a>]] slot was <code>true</code> both before and after this update, queue a task to check
                      <var>connection</var>'s [[<a href="#dfn-neednegotiation" class="internalDFN" data-link-type="dfn">needNegotiation</a>]] slot and, if still <code>true</code>, fire a simple event named
                      <a href="#event-negotiation" class="internalDFN" data-link-type="dfn"><code>negotiationneeded</code></a> at <var>connection</var>.</p>
                  </li>
                  <li>
                    <p>Resolve <var>p</var> with <var>undefined</var>.</p>
                  </li>
                </ol>
              </li>
            </ol>
          </li>
          <li>
            <p>Return <var>p</var>.</p>
          </li>
        </ol>
        <p>The task source for the tasks listed in this section is the
          <a href="#dfn-networking-task-source" class="internalDFN" data-link-type="dfn">networking task source</a>.</p>
      </section>

      <section id="interface-definition" typeof="bibo:Chapter" resource="#interface-definition" property="bibo:hasPart">
        <h4 id="h-interface-definition" resource="#h-interface-definition"><span property="xhv:role" resource="xhv:heading"><span class="secno">4.3.2 </span>Interface Definition</span>
        </h4>
        <p>The <code><a href="#dom-rtcpeerconnection" class="internalDFN" data-link-type="dfn"><code>RTCPeerConnection</code></a>
          </code> interface presented in this section is extended by several partial interfaces throughout this specification. Notably, the <a href="#dfn-rtp-media-api" class="internalDFN" data-link-type="dfn">RTP Media API</a> section, which adds the APIs to send and receive <code><a href="#dom-mediastreamtrack" class="internalDFN" data-link-type="dfn"><code>MediaStreamTrack</code></a>
          </code>
          objects.</p>
        <div>
          <pre class="def idl"><span class="idlInterface" id="idl-def-rtcpeerconnection" data-idl="" data-title="RTCPeerConnection">[<span class="idlCtor"><span class="extAttrName">Constructor</span>(<span class="idlParam">optional <span class="idlParamType"><a href="#idl-def-rtcconfiguration" class="internalDFN" data-link-type="dfn"><code>RTCConfiguration</code></a></span> <span class="idlParamName">configuration</span></span>)</span>]
interface <span class="idlInterfaceID"><a data-lt="RTCPeerConnection" href="#dom-rtcpeerconnection" class="internalDFN" data-link-type="dfn" data-for=""><code>RTCPeerConnection</code></a></span> : <span class="idlSuperclass">EventTarget</span> {
<span class="idlMethod" id="idl-def-rtcpeerconnection-createoffer(optional-rtcofferoptions)" data-idl="" data-title="createOffer" data-dfn-for="rtcpeerconnection">    <span class="idlMethType">Promise&lt;<a href="#idl-def-rtcsessiondescriptioninit" class="internalDFN" data-link-type="dfn"><code>RTCSessionDescriptionInit</code></a>&gt;</span> <span class="idlMethName"><a data-lt="createOffer" href="#dom-rtcpeerconnection-createoffer" class="internalDFN" data-link-type="dfn" data-for="RTCPeerConnection"><code>createOffer</code></a></span>(<span class="idlParam">optional <span class="idlParamType"><a href="#idl-def-rtcofferoptions" class="internalDFN" data-link-type="dfn"><code>RTCOfferOptions</code></a></span> <span class="idlParamName">options</span></span>);</span>
<span class="idlMethod" id="idl-def-rtcpeerconnection-createanswer(optional-rtcansweroptions)" data-idl="" data-title="createAnswer" data-dfn-for="rtcpeerconnection">    <span class="idlMethType">Promise&lt;<a href="#idl-def-rtcsessiondescriptioninit" class="internalDFN" data-link-type="dfn"><code>RTCSessionDescriptionInit</code></a>&gt;</span> <span class="idlMethName"><a data-lt="createAnswer" href="#dom-rtcpeerconnection-createanswer" class="internalDFN" data-link-type="dfn" data-for="RTCPeerConnection"><code>createAnswer</code></a></span>(<span class="idlParam">optional <span class="idlParamType"><a href="#idl-def-rtcansweroptions" class="internalDFN" data-link-type="dfn"><code>RTCAnswerOptions</code></a></span> <span class="idlParamName">options</span></span>);</span>
<span class="idlMethod" id="idl-def-rtcpeerconnection-setlocaldescription(rtcsessiondescriptioninit)" data-idl="" data-title="setLocalDescription" data-dfn-for="rtcpeerconnection">    <span class="idlMethType">Promise&lt;void&gt;</span>                      <span class="idlMethName"><a data-lt="setLocalDescription" href="#dom-rtcpeerconnection-setlocaldescription" class="internalDFN" data-link-type="dfn" data-for="RTCPeerConnection"><code>setLocalDescription</code></a></span>(<span class="idlParam"><span class="idlParamType"><a href="#idl-def-rtcsessiondescriptioninit" class="internalDFN" data-link-type="dfn"><code>RTCSessionDescriptionInit</code></a></span> <span class="idlParamName">description</span></span>);</span>
<span class="idlAttribute" id="idl-def-rtcpeerconnection-localdescription" data-idl="" data-title="localDescription" data-dfn-for="rtcpeerconnection">    readonly        attribute <span class="idlAttrType"><a href="#idl-def-rtcsessiondescription" class="internalDFN" data-link-type="dfn"><code>RTCSessionDescription</code></a>?</span>    <span class="idlAttrName"><a data-lt="localDescription" href="#dom-rtcpeerconnection-localdescription" class="internalDFN" data-link-type="dfn" data-for="RTCPeerConnection"><code>localDescription</code></a></span>;</span>
<span class="idlAttribute" id="idl-def-rtcpeerconnection-currentlocaldescription" data-idl="" data-title="currentLocalDescription" data-dfn-for="rtcpeerconnection">    readonly        attribute <span class="idlAttrType"><a href="#idl-def-rtcsessiondescription" class="internalDFN" data-link-type="dfn"><code>RTCSessionDescription</code></a>?</span>    <span class="idlAttrName"><a data-lt="currentLocalDescription" href="#dom-rtcpeerconnection-currentlocaldescription" class="internalDFN" data-link-type="dfn" data-for="RTCPeerConnection"><code>currentLocalDescription</code></a></span>;</span>
<span class="idlAttribute" id="idl-def-rtcpeerconnection-pendinglocaldescription" data-idl="" data-title="pendingLocalDescription" data-dfn-for="rtcpeerconnection">    readonly        attribute <span class="idlAttrType"><a href="#idl-def-rtcsessiondescription" class="internalDFN" data-link-type="dfn"><code>RTCSessionDescription</code></a>?</span>    <span class="idlAttrName"><a data-lt="pendingLocalDescription" href="#dom-rtcpeerconnection-pendinglocaldescription" class="internalDFN" data-link-type="dfn" data-for="RTCPeerConnection"><code>pendingLocalDescription</code></a></span>;</span>
<span class="idlMethod" id="idl-def-rtcpeerconnection-setremotedescription(rtcsessiondescriptioninit)" data-idl="" data-title="setRemoteDescription" data-dfn-for="rtcpeerconnection">    <span class="idlMethType">Promise&lt;void&gt;</span>                      <span class="idlMethName"><a data-lt="setRemoteDescription" href="#dom-rtcpeerconnection-setremotedescription" class="internalDFN" data-link-type="dfn" data-for="RTCPeerConnection"><code>setRemoteDescription</code></a></span>(<span class="idlParam"><span class="idlParamType"><a href="#idl-def-rtcsessiondescriptioninit" class="internalDFN" data-link-type="dfn"><code>RTCSessionDescriptionInit</code></a></span> <span class="idlParamName">description</span></span>);</span>
<span class="idlAttribute" id="idl-def-rtcpeerconnection-remotedescription" data-idl="" data-title="remoteDescription" data-dfn-for="rtcpeerconnection">    readonly        attribute <span class="idlAttrType"><a href="#idl-def-rtcsessiondescription" class="internalDFN" data-link-type="dfn"><code>RTCSessionDescription</code></a>?</span>    <span class="idlAttrName"><a data-lt="remoteDescription" href="#dom-rtcpeerconnection-remotedescription" class="internalDFN" data-link-type="dfn" data-for="RTCPeerConnection"><code>remoteDescription</code></a></span>;</span>
<span class="idlAttribute" id="idl-def-rtcpeerconnection-currentremotedescription" data-idl="" data-title="currentRemoteDescription" data-dfn-for="rtcpeerconnection">    readonly        attribute <span class="idlAttrType"><a href="#idl-def-rtcsessiondescription" class="internalDFN" data-link-type="dfn"><code>RTCSessionDescription</code></a>?</span>    <span class="idlAttrName"><a data-lt="currentRemoteDescription" href="#dom-rtcpeerconnection-currentremotedescription" class="internalDFN" data-link-type="dfn" data-for="RTCPeerConnection"><code>currentRemoteDescription</code></a></span>;</span>
<span class="idlAttribute" id="idl-def-rtcpeerconnection-pendingremotedescription" data-idl="" data-title="pendingRemoteDescription" data-dfn-for="rtcpeerconnection">    readonly        attribute <span class="idlAttrType"><a href="#idl-def-rtcsessiondescription" class="internalDFN" data-link-type="dfn"><code>RTCSessionDescription</code></a>?</span>    <span class="idlAttrName"><a data-lt="pendingRemoteDescription" href="#dom-rtcpeerconnection-pendingremotedescription" class="internalDFN" data-link-type="dfn" data-for="RTCPeerConnection"><code>pendingRemoteDescription</code></a></span>;</span>
<span class="idlMethod" id="idl-def-rtcpeerconnection-addicecandidate((rtcicecandidateinit_or_rtcicecandidate)?)" data-idl="" data-title="addIceCandidate" data-dfn-for="rtcpeerconnection">    <span class="idlMethType">Promise&lt;void&gt;</span>                      <span class="idlMethName"><a data-lt="addIceCandidate" href="#dom-rtcpeerconnection-addicecandidate" class="internalDFN" data-link-type="dfn" data-for="RTCPeerConnection"><code>addIceCandidate</code></a></span>(<span class="idlParam"><span class="idlParamType">(<a href="#idl-def-rtcicecandidateinit" class="internalDFN" data-link-type="dfn"><code>RTCIceCandidateInit</code></a> or <a href="#idl-def-rtcicecandidate" class="internalDFN" data-link-type="dfn"><code>RTCIceCandidate</code></a>)?</span> <span class="idlParamName">candidate</span></span>);</span>
<span class="idlAttribute" id="idl-def-rtcpeerconnection-signalingstate" data-idl="" data-title="signalingState" data-dfn-for="rtcpeerconnection">    readonly        attribute <span class="idlAttrType"><a href="#idl-def-rtcsignalingstate" class="internalDFN" data-link-type="dfn"><code>RTCSignalingState</code></a></span>         <span class="idlAttrName"><a data-lt="signalingState" href="#dom-rtcpeerconnection-signalingstate" class="internalDFN" data-link-type="dfn" data-for="RTCPeerConnection"><code>signalingState</code></a></span>;</span>
<span class="idlAttribute" id="idl-def-rtcpeerconnection-icegatheringstate" data-idl="" data-title="iceGatheringState" data-dfn-for="rtcpeerconnection">    readonly        attribute <span class="idlAttrType"><a href="#idl-def-rtcicegatheringstate" class="internalDFN" data-link-type="dfn"><code>RTCIceGatheringState</code></a></span>      <span class="idlAttrName"><a data-lt="iceGatheringState" href="#dom-rtcpeerconnection-icegatheringstate" class="internalDFN" data-link-type="dfn" data-for="RTCPeerConnection"><code>iceGatheringState</code></a></span>;</span>
<span class="idlAttribute" id="idl-def-rtcpeerconnection-iceconnectionstate" data-idl="" data-title="iceConnectionState" data-dfn-for="rtcpeerconnection">    readonly        attribute <span class="idlAttrType"><a href="#idl-def-rtciceconnectionstate" class="internalDFN" data-link-type="dfn"><code>RTCIceConnectionState</code></a></span>     <span class="idlAttrName"><a data-lt="iceConnectionState" href="#dom-rtcpeerconnection-iceconnectionstate" class="internalDFN" data-link-type="dfn" data-for="RTCPeerConnection"><code>iceConnectionState</code></a></span>;</span>
<span class="idlAttribute" id="idl-def-rtcpeerconnection-connectionstate" data-idl="" data-title="connectionState" data-dfn-for="rtcpeerconnection">    readonly        attribute <span class="idlAttrType"><a href="#idl-def-rtcpeerconnectionstate" class="internalDFN" data-link-type="dfn"><code>RTCPeerConnectionState</code></a></span>    <span class="idlAttrName"><a data-lt="connectionState" href="#dom-rtcpeerconnection-connectionstate" class="internalDFN" data-link-type="dfn" data-for="RTCPeerConnection"><code>connectionState</code></a></span>;</span>
<span class="idlAttribute" id="idl-def-rtcpeerconnection-cantrickleicecandidates" data-idl="" data-title="canTrickleIceCandidates" data-dfn-for="rtcpeerconnection">    readonly        attribute <span class="idlAttrType">boolean?</span>                  <span class="idlAttrName"><a data-lt="canTrickleIceCandidates" href="#dom-rtcpeerconnection-cantrickleicecandidates" class="internalDFN" data-link-type="dfn" data-for="RTCPeerConnection"><code>canTrickleIceCandidates</code></a></span>;</span>
<span class="idlAttribute" id="idl-def-rtcpeerconnection-defaulticeservers" data-idl="" data-title="defaultIceServers" data-dfn-for="rtcpeerconnection">    static readonly attribute <span class="idlAttrType">FrozenArray&lt;<a href="#idl-def-rtciceserver" class="internalDFN" data-link-type="dfn"><code>RTCIceServer</code></a>&gt;</span> <span class="idlAttrName"><a data-lt="defaultIceServers" href="#dom-rtcpeerconnection-defaulticeservers" class="internalDFN" data-link-type="dfn" data-for="RTCPeerConnection"><code>defaultIceServers</code></a></span>;</span>
<span class="idlMethod" id="idl-def-rtcpeerconnection-getconfiguration()" data-idl="" data-title="getConfiguration" data-dfn-for="rtcpeerconnection">    <span class="idlMethType"><a href="#idl-def-rtcconfiguration" class="internalDFN" data-link-type="dfn"><code>RTCConfiguration</code></a></span>                   <span class="idlMethName"><a data-lt="getConfiguration" href="#dom-rtcpeerconnection-getconfiguration" class="internalDFN" data-link-type="dfn" data-for="RTCPeerConnection"><code>getConfiguration</code></a></span>();</span>
<span class="idlMethod" id="idl-def-rtcpeerconnection-setconfiguration(rtcconfiguration)" data-idl="" data-title="setConfiguration" data-dfn-for="rtcpeerconnection">    <span class="idlMethType">void</span>                               <span class="idlMethName"><a data-lt="setConfiguration" href="#dom-rtcpeerconnection-setconfiguration" class="internalDFN" data-link-type="dfn" data-for="RTCPeerConnection"><code>setConfiguration</code></a></span>(<span class="idlParam"><span class="idlParamType"><a href="#idl-def-rtcconfiguration" class="internalDFN" data-link-type="dfn"><code>RTCConfiguration</code></a></span> <span class="idlParamName">configuration</span></span>);</span>
<span class="idlMethod" id="idl-def-rtcpeerconnection-close()" data-idl="" data-title="close" data-dfn-for="rtcpeerconnection">    <span class="idlMethType">void</span>                               <span class="idlMethName"><a data-lt="close" href="#dom-rtcpeerconnection-close" class="internalDFN" data-link-type="dfn" data-for="RTCPeerConnection"><code>close</code></a></span>();</span>
<span class="idlAttribute" id="idl-def-rtcpeerconnection-onnegotiationneeded" data-idl="" data-title="onnegotiationneeded" data-dfn-for="rtcpeerconnection">                    attribute <span class="idlAttrType">EventHandler</span>              <span class="idlAttrName"><a data-lt="onnegotiationneeded" href="#dom-rtcpeerconnection-onnegotiationneeded" class="internalDFN" data-link-type="dfn" data-for="RTCPeerConnection"><code>onnegotiationneeded</code></a></span>;</span>
<span class="idlAttribute" id="idl-def-rtcpeerconnection-onicecandidate" data-idl="" data-title="onicecandidate" data-dfn-for="rtcpeerconnection">                    attribute <span class="idlAttrType">EventHandler</span>              <span class="idlAttrName"><a data-lt="onicecandidate" href="#dom-rtcpeerconnection-onicecandidate" class="internalDFN" data-link-type="dfn" data-for="RTCPeerConnection"><code>onicecandidate</code></a></span>;</span>
<span class="idlAttribute" id="idl-def-rtcpeerconnection-onicecandidateerror" data-idl="" data-title="onicecandidateerror" data-dfn-for="rtcpeerconnection">                    attribute <span class="idlAttrType">EventHandler</span>              <span class="idlAttrName"><a data-lt="onicecandidateerror" href="#dom-rtcpeerconnection-onicecandidateerror" class="internalDFN" data-link-type="dfn" data-for="RTCPeerConnection"><code>onicecandidateerror</code></a></span>;</span>
<span class="idlAttribute" id="idl-def-rtcpeerconnection-onsignalingstatechange" data-idl="" data-title="onsignalingstatechange" data-dfn-for="rtcpeerconnection">                    attribute <span class="idlAttrType">EventHandler</span>              <span class="idlAttrName"><a data-lt="onsignalingstatechange" href="#dom-rtcpeerconnection-onsignalingstatechange" class="internalDFN" data-link-type="dfn" data-for="RTCPeerConnection"><code>onsignalingstatechange</code></a></span>;</span>
<span class="idlAttribute" id="idl-def-rtcpeerconnection-oniceconnectionstatechange" data-idl="" data-title="oniceconnectionstatechange" data-dfn-for="rtcpeerconnection">                    attribute <span class="idlAttrType">EventHandler</span>              <span class="idlAttrName"><a data-lt="oniceconnectionstatechange" href="#dom-rtcpeerconnection-oniceconnectionstatechange" class="internalDFN" data-link-type="dfn" data-for="RTCPeerConnection"><code>oniceconnectionstatechange</code></a></span>;</span>
<span class="idlAttribute" id="idl-def-rtcpeerconnection-onicegatheringstatechange" data-idl="" data-title="onicegatheringstatechange" data-dfn-for="rtcpeerconnection">                    attribute <span class="idlAttrType">EventHandler</span>              <span class="idlAttrName"><a data-lt="onicegatheringstatechange" href="#dom-rtcpeerconnection-onicegatheringstatechange" class="internalDFN" data-link-type="dfn" data-for="RTCPeerConnection"><code>onicegatheringstatechange</code></a></span>;</span>
<span class="idlAttribute" id="idl-def-rtcpeerconnection-onconnectionstatechange" data-idl="" data-title="onconnectionstatechange" data-dfn-for="rtcpeerconnection">                    attribute <span class="idlAttrType">EventHandler</span>              <span class="idlAttrName"><a data-lt="onconnectionstatechange" href="#dom-rtcpeerconnection-onconnectionstatechange" class="internalDFN" data-link-type="dfn" data-for="RTCPeerConnection"><code>onconnectionstatechange</code></a></span>;</span>
};</span></pre>

          <section typeof="bibo:Chapter" resource="#constructors" property="bibo:hasPart">
            <h5 id="constructors" resource="#constructors"><span property="xhv:role" resource="xhv:heading">Constructors</span></h5>
            <dl data-link-for="RTCPeerConnection" data-dfn-for="RTCPeerConnection" class="constructors">
              <dt><dfn data-dfn-for="" data-dfn-type="dfn" id="dom-rtcpeerconnection" data-idl=""><code>RTCPeerConnection</code></dfn></dt>
              <dd>
                See the <a data-lt="RTCPeerConnection()" href="#dom-peerconnection" class="internalDFN" data-link-type="dfn"><code>RTCPeerConnection
                constructor algorithm</code></a>.
                <table class="parameters">
                  <tbody>
                    <tr>
                      <th>Parameter</th>
                      <th>Type</th>
                      <th>Nullable</th>
                      <th>Optional</th>
                      <th>Description</th>
                    </tr>
                    <tr>
                      <td class="prmName">configuration</td>
                      <td class="prmType"><code>RTCConfiguration</code></td>
                      <td class="prmNullFalse"><span role="img" aria-label="False">âœ˜</span></td>
                      <td class="prmOptTrue"><span role="img" aria-label="True">âœ”</span></td>
                      <td class="prmDesc"></td>
                    </tr>
                  </tbody>
                </table>
              </dd>
            </dl>
          </section>

          <section typeof="bibo:Chapter" resource="#attributes" property="bibo:hasPart">
            <h5 id="attributes" resource="#attributes"><span property="xhv:role" resource="xhv:heading">Attributes</span></h5>
            <dl data-link-for="RTCPeerConnection" data-dfn-for="RTCPeerConnection" class="attributes">
              <dt><code>localDescription</code> of type <span class="idlAttrType"><a href="#idl-def-rtcsessiondescription" class="internalDFN" data-link-type="dfn"><code>RTCSessionDescription</code></a></span>, readonly ,
              nullable</dt>
              <dd>
                <p>The <dfn id="dom-rtcpeerconnection-localdescription" data-dfn-for="rtcpeerconnection" data-dfn-type="dfn" data-idl=""><code>localDescription</code></dfn> attribute <em class="rfc2119" title="MUST">MUST</em> return <code><a data-for="RTCPeerConnection" href="#dom-rtcpeerconnection-pendinglocaldescription" class="internalDFN" data-link-type="dfn"><code>pendingLocalDescription</code></a>
                  </code> if it is not null and otherwise it <em class="rfc2119" title="MUST">MUST</em> return <code><a data-for="RTCPeerConnection" href="#dom-rtcpeerconnection-currentlocaldescription" class="internalDFN" data-link-type="dfn"><code>currentLocalDescription</code></a>
                  </code>.</p>
              </dd>
              <dt><code>currentLocalDescription</code> of type <span class="idlAttrType"><a href="#idl-def-rtcsessiondescription" class="internalDFN" data-link-type="dfn"><code>RTCSessionDescription</code></a></span>, readonly ,
              nullable</dt>
              <dd>
                <p>The <code><a data-for="RTCPeerConnection" href="#dom-rtcpeerconnection-currentlocaldescription" class="internalDFN" data-link-type="dfn"><code>currentLocalDescription</code></a>
                  </code>
                  attribute represents the local
                  <code><a href="#idl-def-rtcsessiondescription" class="internalDFN" data-link-type="dfn"><code>RTCSessionDescription</code></a>
                  </code> that was successfully negotiated the last time the <code>RTCPeerConnection</code> transitioned into the stable state plus any local candidates that have been generated by the ICE Agent since the offer or answer was created.</p>
                <p>The <dfn id="dom-rtcpeerconnection-currentlocaldescription" data-dfn-for="rtcpeerconnection" data-dfn-type="dfn" data-idl=""><code>currentLocalDescription</code></dfn> attribute <em class="rfc2119" title="MUST">MUST</em> return the last value that algorithms in this specification set it to, complete with any local candidates that have been generated by the <a href="#dfn-ice-agent" class="internalDFN" data-link-type="dfn">ICE Agent</a> since the offer or answer was created. Prior to being set, it returns null.
                </p>
              </dd>
              <dt><code>pendingLocalDescription</code> of type <span class="idlAttrType"><a href="#idl-def-rtcsessiondescription" class="internalDFN" data-link-type="dfn"><code>RTCSessionDescription</code></a></span>, readonly ,
              nullable</dt>
              <dd>
                <p>The <code><a data-for="RTCPeerConnection" href="#dom-rtcpeerconnection-pendinglocaldescription" class="internalDFN" data-link-type="dfn"><code>pendingLocalDescription</code></a>
                  </code>
                  attribute represents a local
                  <code><a href="#idl-def-rtcsessiondescription" class="internalDFN" data-link-type="dfn"><code>RTCSessionDescription</code></a>
                  </code> that is in the process of being negotiated plus any local candidates that have been generated by the <a href="#dfn-ice-agent" class="internalDFN" data-link-type="dfn">ICE Agent</a> since the offer or answer was created. If the <code>RTCPeerConnection</code> is in the stable state, the value is null. This attribute is updated by <code><a data-for="RTCPeerConnection" href="#dom-rtcpeerconnection-setlocaldescription" class="internalDFN" data-link-type="dfn"><code>setLocalDescription</code></a>
                  </code>.</p>
                <p>The <dfn id="dom-rtcpeerconnection-pendinglocaldescription" data-dfn-for="rtcpeerconnection" data-dfn-type="dfn" data-idl=""><code>pendingLocalDescription</code></dfn> attribute <em class="rfc2119" title="MUST">MUST</em> return the last value that algorithms in this specification set it to, complete with any local candidates that have been generated by the <a href="#dfn-ice-agent" class="internalDFN" data-link-type="dfn">ICE Agent</a> since the offer or answer was created. Prior to being set, it returns null.
                </p>
              </dd>
              <dt><code>remoteDescription</code> of type <span class="idlAttrType"><a href="#idl-def-rtcsessiondescription" class="internalDFN" data-link-type="dfn"><code>RTCSessionDescription</code></a></span>, readonly ,
              nullable</dt>
              <dd>
                <p>The <dfn id="dom-rtcpeerconnection-remotedescription" data-dfn-for="rtcpeerconnection" data-dfn-type="dfn" data-idl=""><code>remoteDescription</code></dfn> attribute <em class="rfc2119" title="MUST">MUST</em> return <code><a data-for="RTCPeerConnection" href="#dom-rtcpeerconnection-pendingremotedescription" class="internalDFN" data-link-type="dfn"><code>pendingRemoteDescription</code></a>
                  </code> if it is not null and otherwise it <em class="rfc2119" title="MUST">MUST</em> return <code><a data-for="RTCPeerConnection" href="#dom-rtcpeerconnection-currentremotedescription" class="internalDFN" data-link-type="dfn"><code>currentRemoteDescription</code></a>
                  </code>.</p>
              </dd>
              <dt><code>currentRemoteDescription</code> of type <span class="idlAttrType"><a href="#idl-def-rtcsessiondescription" class="internalDFN" data-link-type="dfn"><code>RTCSessionDescription</code></a></span>, readonly ,
              nullable</dt>
              <dd>
                <p>The <code><a data-for="RTCPeerConnection" href="#dom-rtcpeerconnection-currentremotedescription" class="internalDFN" data-link-type="dfn"><code>currentRemoteDescription</code></a>
                  </code>
                  attribute represents the last remote
                  <code><a href="#idl-def-rtcsessiondescription" class="internalDFN" data-link-type="dfn"><code>RTCSessionDescription</code></a>
                  </code> that was successfully negotiated the last time the <code>RTCPeerConnection</code> transitioned into the stable state plus any remote candidates that have been supplied via <code><a data-for="RTCPeerConnection" href="#dom-peerconnection-addicecandidate" class="internalDFN" data-link-type="dfn"><code>addIceCandidate()</code></a>
                  </code> since the offer or answer was created.</p>
                <p>The <dfn id="dom-rtcpeerconnection-currentremotedescription" data-dfn-for="rtcpeerconnection" data-dfn-type="dfn" data-idl=""><code>currentRemoteDescription</code></dfn> attribute <em class="rfc2119" title="MUST">MUST</em> return the value that algorithms in this specification set it to, complete with any remote candidates that have been supplied via <code><a data-for="RTCPeerConnection" href="#dom-peerconnection-addicecandidate" class="internalDFN" data-link-type="dfn"><code>addIceCandidate()</code></a>
                  </code> since the offer or answer was created. Prior to being set, it returns null.
                </p>
              </dd>
              <dt><code>pendingRemoteDescription</code> of type <span class="idlAttrType"><a href="#idl-def-rtcsessiondescription" class="internalDFN" data-link-type="dfn"><code>RTCSessionDescription</code></a></span>, readonly ,
              nullable</dt>
              <dd>
                <p>The <code><a data-for="RTCPeerConnection" href="#dom-rtcpeerconnection-pendingremotedescription" class="internalDFN" data-link-type="dfn"><code>pendingRemoteDescription</code></a>
                  </code>
                  attribute represents a remote
                  <code><a href="#idl-def-rtcsessiondescription" class="internalDFN" data-link-type="dfn"><code>RTCSessionDescription</code></a>
                  </code> that is in the process of being negotiated, complete with any remote candidates that have been supplied via <code><a data-for="RTCPeerConnection" href="#dom-peerconnection-addicecandidate" class="internalDFN" data-link-type="dfn"><code>addIceCandidate()</code></a>
                  </code> since the offer or answer was created. If the
                  <code>RTCPeerConnection</code> is in the stable state, the value is null. This attribute is updated by <code><a data-for="RTCPeerConnection" href="#dom-rtcpeerconnection-setlocaldescription" class="internalDFN" data-link-type="dfn"><code>setLocalDescription</code></a>
                  </code>.</p>
                <p>The <dfn id="dom-rtcpeerconnection-pendingremotedescription" data-dfn-for="rtcpeerconnection" data-dfn-type="dfn" data-idl=""><code>pendingRemoteDescription</code></dfn> attribute <em class="rfc2119" title="MUST">MUST</em> return the value that algorithms in this specification set it to, completed with any remote candidates that have been supplied via <code><a data-for="RTCPeerConnection" href="#dom-peerconnection-addicecandidate" class="internalDFN" data-link-type="dfn"><code>addIceCandidate()</code></a>
                  </code> since the offer or answer was created. Prior to being set, it returns null.
                </p>
              </dd>
              <dt><code>signalingState</code> of type <span class="idlAttrType"><a href="#idl-def-rtcsignalingstate" class="internalDFN" data-link-type="dfn"><code>RTCSignalingState</code></a></span>, readonly</dt>
              <dd>
                <p>The <dfn id="dom-rtcpeerconnection-signalingstate" data-dfn-for="rtcpeerconnection" data-dfn-type="dfn" data-idl=""><code>signalingState</code></dfn> attribute <em class="rfc2119" title="MUST">MUST</em> return the <code><a data-for="RTCPeerConnection" href="#dom-rtcpeerconnection" class="internalDFN" data-link-type="dfn"><code>RTCPeerConnection</code></a>
                  </code> object's
                  <a href="#dfn-signaling-state" class="internalDFN" data-link-type="dfn">signaling state</a>.</p>
              </dd>
              <dt><code>iceGatheringState</code> of type <span class="idlAttrType"><a href="#idl-def-rtcicegatheringstate" class="internalDFN" data-link-type="dfn"><code>RTCIceGatheringState</code></a></span>, readonly</dt>
              <dd>
                <p>The <dfn id="dom-rtcpeerconnection-icegatheringstate" data-dfn-for="rtcpeerconnection" data-dfn-type="dfn" data-idl=""><code>iceGatheringState</code></dfn> attribute <em class="rfc2119" title="MUST">MUST</em> return the <a href="#dfn-ice-gathering-state" class="internalDFN" data-link-type="dfn">ICE gathering state</a> of the
                  <code>RTCPeerConnection</code> instance.</p>
              </dd>
              <dt><code>iceConnectionState</code> of type <span class="idlAttrType"><a href="#idl-def-rtciceconnectionstate" class="internalDFN" data-link-type="dfn"><code>RTCIceConnectionState</code></a></span>, readonly</dt>
              <dd>
                <p>The <dfn id="dom-rtcpeerconnection-iceconnectionstate" data-dfn-for="rtcpeerconnection" data-dfn-type="dfn" data-idl=""><code>iceConnectionState</code></dfn> attribute <em class="rfc2119" title="MUST">MUST</em> return the <a href="#dfn-ice-connection-state" class="internalDFN" data-link-type="dfn">ICE connection state</a> of the
                  <code>RTCPeerConnection</code> instance.</p>
              </dd>
              <dt><code>connectionState</code> of type <span class="idlAttrType"><a href="#idl-def-rtcpeerconnectionstate" class="internalDFN" data-link-type="dfn"><code>RTCPeerConnectionState</code></a></span>, readonly</dt>
              <dd>
                <p>The <dfn id="dom-rtcpeerconnection-connectionstate" data-dfn-for="rtcpeerconnection" data-dfn-type="dfn" data-idl=""><code>connectionState</code></dfn> attribute <em class="rfc2119" title="MUST">MUST</em> return the <a href="#dfn-connection-state" class="internalDFN" data-link-type="dfn">connection state</a> of the
                  <code><a href="#dom-rtcpeerconnection" class="internalDFN" data-link-type="dfn"><code>RTCPeerConnection</code></a>
                  </code> instance.</p>
              </dd>
              <dt><code>canTrickleIceCandidates</code> of type <span class="idlAttrType">boolean</span>, readonly , nullable</dt>
              <dd>
                <p>The <dfn data-dfn-for="rtcpeerconnection" data-dfn-type="dfn" id="dom-rtcpeerconnection-cantrickleicecandidates" data-idl=""><code>canTrickleIceCandidates</code></dfn> attribute indicates whether the remote peer is able to accept trickled ICE candidates [<cite><a class="bibref" href="#bib-TRICKLE-ICE">TRICKLE-ICE</a></cite>]. The value is determined based on whether a remote description indicates support for trickle ICE, as defined in <span>[<cite><a class="bibref" href="#bib-JSEP">JSEP</a></cite>] (<a href="https://tools.ietf.org/html/draft-ietf-rtcweb-jsep-16#section-4.1.14">section 4.1.14.</a>)</span>. Prior to the completion of
                  <a data-for="RTCPeerConnection" href="#dom-rtcpeerconnection-setremotedescription" class="internalDFN" data-link-type="dfn"><code><code>setRemoteDescription</code></code></a>, this value is <code>null</code>.</p>
              </dd>
              <dt><dfn data-dfn-for="rtcpeerconnection" data-dfn-type="dfn" id="dom-rtcpeerconnection-defaulticeservers" data-idl=""><code>defaultIceServers</code></dfn> of type
              <span class="idlAttrType">FrozenArray&lt;<a href="#idl-def-rtciceserver" class="internalDFN" data-link-type="dfn"><code>RTCIceServer</code></a>&gt;</span>,
              static readonly</dt>
              <dd>
                <p>The <code>defaultIceServers</code> attribute provides a list of ICE servers that are configured into the browser. A browser might be configured to use local or private STUN or TURN servers. This method allows an application to learn about these servers and optionally use them.</p>
                <p class="fingerprint">This list is likely to be persisent and is the same across origins. It thus increases the fingerprinting surface of the browser. In privacy-sensitive contexts, browsers can consider mitigations such as only providing this data to "trusted" origins (or not providing it at all.)<img src="images/fingerprint.png" alt="(This is a fingerprinting vector.)" width="15" height="21"></p>
              </dd>
              <dt><dfn data-dfn-for="rtcpeerconnection" data-dfn-type="dfn" id="dom-rtcpeerconnection-onnegotiationneeded" data-idl=""><code>onnegotiationneeded</code></dfn> of type
              <span class="idlAttrType">EventHandler</span></dt>
              <dd>The event type of this event handler is
                <code><a href="#event-negotiation" class="internalDFN" data-link-type="dfn"><code>negotiationneeded</code></a>
                </code>.</dd>
              <dt><dfn data-dfn-for="rtcpeerconnection" data-dfn-type="dfn" id="dom-rtcpeerconnection-onicecandidate" data-idl=""><code>onicecandidate</code></dfn> of type <span class="idlAttrType">EventHandler</span></dt>
              <dd>The event type of this event handler is
                <code><a href="#event-icecandidate" class="internalDFN" data-link-type="dfn"><code>icecandidate</code></a>
                </code>.</dd>
              <dt><dfn data-dfn-for="rtcpeerconnection" data-dfn-type="dfn" id="dom-rtcpeerconnection-onicecandidateerror" data-idl=""><code>onicecandidateerror</code></dfn> of type
              <span class="idlAttrType">EventHandler</span></dt>
              <dd>The event type of this event handler is
                <code><a href="#event-icecandidateerror" class="internalDFN" data-link-type="dfn"><code>icecandidateerror</code></a>
                </code>.</dd>
              <dt><dfn data-dfn-for="rtcpeerconnection" data-dfn-type="dfn" id="dom-rtcpeerconnection-onsignalingstatechange" data-idl=""><code>onsignalingstatechange</code></dfn> of type
              <span class="idlAttrType">EventHandler</span></dt>
              <dd>The event type of this event handler is
                <code><a href="#event-signalingstatechange" class="internalDFN" data-link-type="dfn"><code>signalingstatechange</code></a>
                </code>.</dd>
              <dt><dfn data-dfn-for="rtcpeerconnection" data-dfn-type="dfn" id="dom-rtcpeerconnection-oniceconnectionstatechange" data-idl=""><code>oniceconnectionstatechange</code></dfn> of type
              <span class="idlAttrType">EventHandler</span></dt>
              <dd>The event type of this event handler is
                <code><a href="#event-iceconnectionstatechange" class="internalDFN" data-link-type="dfn"><code>iceconnectionstatechange</code></a>
                </code>
              </dd>
              <dt><dfn data-dfn-for="rtcpeerconnection" data-dfn-type="dfn" id="dom-rtcpeerconnection-onicegatheringstatechange" data-idl=""><code>onicegatheringstatechange</code></dfn> of type
              <span class="idlAttrType">EventHandler</span></dt>
              <dd>The event type of this event handler is
                <code><a href="#event-icegatheringstatechange" class="internalDFN" data-link-type="dfn"><code>icegatheringstatechange</code></a>
                </code>.</dd>
              <dt><dfn data-dfn-for="rtcpeerconnection" data-dfn-type="dfn" id="dom-rtcpeerconnection-onconnectionstatechange" data-idl=""><code>onconnectionstatechange</code></dfn> of type
              <span class="idlAttrType">EventHandler</span></dt>
              <dd>The event type of this event handler is
                <code><a href="#event-connectionstatechange" class="internalDFN" data-link-type="dfn"><code>connectionstatechange</code></a>
                </code>.</dd>
            </dl>
          </section>

          <section typeof="bibo:Chapter" resource="#methods" property="bibo:hasPart">
            <h5 id="methods" resource="#methods"><span property="xhv:role" resource="xhv:heading">Methods</span></h5>
            <dl data-link-for="RTCPeerConnection" data-dfn-for="RTCPeerConnection" class="methods">
              <dt><dfn data-dfn-for="rtcpeerconnection" data-dfn-type="dfn" id="dom-rtcpeerconnection-createoffer" data-idl=""><code>createOffer</code></dfn></dt>
              <dd>
                <p>The createOffer method generates a blob of SDP that contains an RFC 3264 offer with the supported configurations for the session, including descriptions of the local
                  <code>MediaStreamTrack</code>s attached to this
                  <code>RTCPeerConnection</code>, the codec/RTP/RTCP options supported by this implementation, and any candidates that have been gathered by the <a href="#dfn-ice-agent" class="internalDFN" data-link-type="dfn">ICE Agent</a>. The <code>options</code> parameter may be supplied to provide additional control over the offer generated.</p>
                <p>As an offer, the generated SDP will contain the full set of capabilities supported by the session (as opposed to an answer, which will include only a specific negotiated subset to use); for each SDP line, the generation of the SDP <em class="rfc2119" title="MUST">MUST</em> follow the appropriate process for generating an offer. In the event
                  <code>createOffer</code> is called after the session is established, <code>createOffer</code> will generate an offer that is compatible with the current session, incorporating any changes that have been made to the session since the last complete offer-answer exchange, such as addition or removal of tracks. If no changes have been made, the offer will include the capabilities of the current local description as well as any additional capabilities that could be negotiated in an updated offer.</p>
                <p>Session descriptions generated by <code>createOffer</code>
                  <em class="rfc2119" title="MUST">MUST</em> be immediately usable by <code>setLocalDescription</code> without causing an error as long as
                  <code>setLocalDescription</code> is called reasonably soon. If a system has limited resources (e.g. a finite number of decoders), <code>createOffer</code> needs to return an offer that reflects the current state of the system, so that
                  <code>setLocalDescription</code> will succeed when it attempts to acquire those resources. The session descriptions <em class="rfc2119" title="MUST">MUST</em> remain usable by <code>setLocalDescription</code> without causing an error until at least the end of the fulfillment callback of the returned promise. Calling this method is needed to generate the ICE username fragment and password.</p>
                <p>The value for <code>certificates</code> in the
                  <code><a href="#idl-def-rtcconfiguration" class="internalDFN" data-link-type="dfn"><code>RTCConfiguration</code></a>
                  </code> for the
                  <code>RTCPeerConnection</code> is used to produce a set of certificate fingerprints. These certificate fingerprints are used in the construction of SDP and as input to requests for identity assertions.</p>
                <p>If the <code>RTCPeerConnection</code> is configured to generate Identity assertions by calling
                  <code><a href="#dom-rtcpeerconnection-setidentityprovider" class="internalDFN" data-link-type="dfn"><code>setIdentityProvider</code></a>
                  </code>, then the session description
                  <em class="rfc2119" title="SHALL">SHALL</em> contain an appropriate assertion.</p>
                <p class="fingerprint">The SDP generation process exposes a subset of the media capabilities of the underlying system, which provides generally persistent cross-origin information on the device. It thus increases the fingerprinting surface of the application. In privacy-sensitive contexts, browsers can consider mitigations such as generating SDP matching only a common subset of the capabilities.<img src="images/fingerprint.png" alt="(This is a fingerprinting vector.)" width="15" height="21"></p>
                <p>When the method is called, the User Agent <em class="rfc2119" title="MUST">MUST</em> run the following steps:</p>
                <ol>
                  <li>
                    <p>Let <var>connection</var> be the
                      <code><a href="#dom-rtcpeerconnection" class="internalDFN" data-link-type="dfn"><code>RTCPeerConnection</code></a>
                      </code> object on which the method was invoked.</p>
                  </li>
                  <li>
                    <p>If <var>connection</var>'s [[<a href="#dfn-isclosed" class="internalDFN" data-link-type="dfn">isClosed</a>]] slot is
                      <code>true</code>, return a promise rejected with an
                      <code>InvalidStateError</code>.</p>
                  </li>
                  <li>
                    <p>If <var>connection</var> is configured with an identity provider, and an identity assertion has not yet been generated using said identity provider, then begin <a href="#sec.identity-proxy-assertion-request">the identity
                    assertion request process</a> if it has not already begun.
                    </p>
                  </li>
                  <li>
                    <p>Return the result of <a href="#enqueue-an-operation">enqueuing</a> the following steps:
                    </p>
                    <ol>
                      <li>
                        <p>Let <var>p</var> be a new promise.</p>
                      </li>
                      <li>
                        <p>In parallel, begin the <a href="#dfn-steps-to-create-an-offer" class="internalDFN" data-link-type="dfn">steps to create an
                        offer</a>, given <var>p</var>.</p>
                      </li>
                      <li>
                        <p>Return <var>p</var>.</p>
                      </li>
                    </ol>
                  </li>
                </ol>
                <p>The <dfn data-dfn-type="dfn" id="dfn-steps-to-create-an-offer">steps to create an offer</dfn> given a promise
                  <var>p</var> are as follows:</p>
                <ol>
                  <li>
                    <p>If the need for an identity assertion was identified when <code>createOffer</code> was invoked, wait for
                      <a href="#sec.identity-proxy-assertion-request">the
                    identity assertion request process</a> to complete.</p>
                  </li>
                  <li>
                    <p>If the identity provider was unable to produce an identity assertion, reject <var>p</var> with a
                      <code>DOMException</code> object whose <code>name</code> attribute has the value <code>NotReadableError</code>, and abort these steps.</p>
                  </li>
                  <li>
                    <p>If <var>connection</var> was not constructed with a set of certificates, and one has not yet been generated, wait for it to be generated.</p>
                  </li>
                  <li>
                    <p>Inspect the system state to determine the currently available resources as necessary for generating the offer, as described in <span>[<cite><a class="bibref" href="#bib-JSEP">JSEP</a></cite>] (<a href="https://tools.ietf.org/html/draft-ietf-rtcweb-jsep-16#section-4.1.5">section 4.1.5.</a>)</span>.</p>
                  </li>
                  <li>
                    <p>If this inspection failed for any reason, reject
                      <var>p</var> with a <code>DOMException</code> object whose
                      <code>name</code> attribute has the value
                      <code>OperationError</code>, and abort these steps.</p>
                  </li>
                  <li>
                    <p>Queue a task that runs the <a href="#dfn-final-steps-to-create-an-offer" class="internalDFN" data-link-type="dfn">final steps to create an
                    offer</a>, given <var>p</var>.</p>
                  </li>
                </ol>
                <p>The <dfn data-dfn-type="dfn" id="dfn-final-steps-to-create-an-offer">final steps to create an offer</dfn> given a promise <var>p</var> are as follows:</p>
                <ol>
                  <li>
                    <p>If <var>connection</var>'s [[<a href="#dfn-isclosed" class="internalDFN" data-link-type="dfn">isClosed</a>]] slot is
                      <code>true</code>, then abort these steps.</p>
                  </li>
                  <li>
                    <p>If <var>connection</var> was modified in such a way that additional inspection of the system state is necessary, then in parallel begin the <a href="#dfn-steps-to-create-an-offer" class="internalDFN" data-link-type="dfn">steps to create an offer</a> again, given <var>p</var>, and abort these steps.</p>
                    <div class="note">
                      <div class="note-title marker" aria-level="6" role="heading" id="h-note1"><span>Note</span></div>
                      <div class="">
                        This may be necessary if, for example,
                        <code>createOffer</code> was called when only an audio
                        <code><a href="#idl-def-rtcrtptransceiver" class="internalDFN" data-link-type="dfn"><code>RTCRtpTransceiver</code></a>
                        </code> was added to
                        <var>connection</var>, but while performing the <a href="#dfn-steps-to-create-an-offer" class="internalDFN" data-link-type="dfn">steps
                      to create an offer</a> in parallel, a video
                        <code><a href="#idl-def-rtcrtptransceiver" class="internalDFN" data-link-type="dfn"><code>RTCRtpTransceiver</code></a>
                        </code> was added, requiring additional inspection of video system resources.
                      </div>
                    </div>
                  </li>
                  <li>
                    <p>Given the information that was obtained from previous inspection and the current state of <var>connection</var> and its <code><a href="#idl-def-rtcrtptransceiver" class="internalDFN" data-link-type="dfn"><code>RTCRtpTransceiver</code></a>
                      </code>s, generate an SDP offer, <var>sdpString</var>, as described in
                      <span>[<cite><a class="bibref" href="#bib-JSEP">JSEP</a></cite>] (<a href="https://tools.ietf.org/html/draft-ietf-rtcweb-jsep-16#section-5.2">section 5.2.</a>)</span>.</p>
                  </li>
                  <li>
                    <p>Let <var>offer</var> be a newly created
                      <code><a href="#idl-def-rtcsessiondescriptioninit" class="internalDFN" data-link-type="dfn"><code>RTCSessionDescriptionInit</code></a>
                      </code> dictionary with its <code>type</code> member initialized to the string
                      <code>"offer"</code> and its <code>sdp</code> member initialized to <var>sdpString</var>.</p>
                  </li>
                  <li>
                    <p>Resolve <var>p</var> with <var>offer</var>.</p>
                  </li>
                </ol>
                <table class="parameters">
                  <tbody>
                    <tr>
                      <th>Parameter</th>
                      <th>Type</th>
                      <th>Nullable</th>
                      <th>Optional</th>
                      <th>Description</th>
                    </tr>
                    <tr>
                      <td class="prmName">options</td>
                      <td class="prmType"><code>RTCOfferOptions</code></td>
                      <td class="prmNullFalse"><span role="img" aria-label="False">âœ˜</span></td>
                      <td class="prmOptTrue"><span role="img" aria-label="True">âœ”</span></td>
                      <td class="prmDesc"></td>
                    </tr>
                  </tbody>
                </table>
                <div>
                  <em>Return type:</em>
                  <code>Promise&lt;RTCSessionDescriptionInit&gt;</code>
                </div>
              </dd>
              <dt><dfn data-dfn-for="rtcpeerconnection" data-dfn-type="dfn" id="dom-rtcpeerconnection-createanswer" data-idl=""><code>createAnswer</code></dfn></dt>
              <dd>
                <p>The <code>createAnswer</code> method generates an [<cite><a class="bibref" href="#bib-SDP">SDP</a></cite>] answer with the supported configuration for the session that is compatible with the parameters in the remote configuration. Like <code>createOffer</code>, the returned blob contains descriptions of the local <code>MediaStreamTrack</code>s attached to this <code>RTCPeerConnection</code>, the codec/RTP/RTCP options negotiated for this session, and any candidates that have been gathered by the <a href="#dfn-ice-agent" class="internalDFN" data-link-type="dfn">ICE Agent</a>. The
                  <code>options</code> parameter may be supplied to provide additional control over the generated answer.</p>
                <p>As an answer, the generated SDP will contain a specific configuration that, along with the corresponding offer, specifies how the media plane should be established. The generation of the SDP <em class="rfc2119" title="MUST">MUST</em> follow the appropriate process for generating an answer.</p>
                <p>Session descriptions generated by createAnswer <em class="rfc2119" title="MUST">MUST</em> be immediately usable by <code>setLocalDescription</code> without causing an error as long as <code>setLocalDescription</code> is called reasonably soon. Like <code>createOffer</code>, the returned description <em class="rfc2119" title="SHOULD">SHOULD</em> reflect the current state of the system. The session descriptions <em class="rfc2119" title="MUST">MUST</em> remain usable by
                  <code>setLocalDescription</code> without causing an error until at least the end of the fulfillment callback of the returned promise. Calling this method is needed to generate the ICE username fragment and password.</p>
                <p>An answer can be marked as provisional, as described in
                  <span>[<cite><a class="bibref" href="#bib-JSEP">JSEP</a></cite>] (<a href="https://tools.ietf.org/html/draft-ietf-rtcweb-jsep-16#section-4.1.7.1">section 4.1.7.1.</a>)</span>, by setting the <code><a data-for="RTCSessionDescription" href="#dom-rtcsessiondescription-type" class="internalDFN" data-link-type="dfn"><code>type</code></a>
                  </code> to
                  <code>pranswer</code>.</p>
                <p>If the <code>RTCPeerConnection</code> is configured to generate Identity assertions by calling
                  <code><a href="#dom-rtcpeerconnection-setidentityprovider" class="internalDFN" data-link-type="dfn"><code>setIdentityProvider</code></a>
                  </code>, then the session description <em class="rfc2119" title="SHALL">SHALL</em> contain an appropriate assertion.</p>
                <p>When the method is called, the User Agent <em class="rfc2119" title="MUST">MUST</em> run the following steps:</p>
                <ol>
                  <li>
                    <p>Let <var>connection</var> be the
                      <code><a href="#dom-rtcpeerconnection" class="internalDFN" data-link-type="dfn"><code>RTCPeerConnection</code></a>
                      </code> object on which the method was invoked.</p>
                  </li>
                  <li>
                    <p>If <var>connection</var>'s [[<a href="#dfn-isclosed" class="internalDFN" data-link-type="dfn">isClosed</a>]] slot is
                      <code>true</code>, return a promise rejected with an
                      <code>InvalidStateError</code>.</p>
                  </li>
                  <li>
                    <p>If <var>connection</var> is configured with an identity provider, and an identity assertion has not yet been generated using said identity provider, then begin <a href="#sec.identity-proxy-assertion-request">the identity
                    assertion request process</a> if it has not already begun.
                    </p>
                  </li>
                  <li>
                    <p>Return the result of <a href="#enqueue-an-operation">enqueuing</a> the following steps:
                    </p>
                    <ol>
                      <li>
                        <p>If <var>connection</var>'s <code><a data-for="RTCPeerConnection" href="#dom-rtcpeerconnection-remotedescription" class="internalDFN" data-link-type="dfn"><code>remoteDescription</code></a>
                          </code> is
                          <code>null</code> return a promise rejected with an
                          <code>InvalidStateError</code>.</p>
                      </li>
                      <li>
                        <p>Let <var>p</var> be a new promise.</p>
                      </li>
                      <li>
                        <p>In parallel, begin the <a href="#dfn-steps-to-create-an-answer" class="internalDFN" data-link-type="dfn">steps to create an
                        answer</a>, given <var>p</var>.</p>
                      </li>
                      <li>
                        <p>Return <var>p</var>.</p>
                      </li>
                    </ol>
                  </li>
                </ol>
                <p>The <dfn data-dfn-type="dfn" id="dfn-steps-to-create-an-answer">steps to create an answer</dfn> given a promise
                  <var>p</var> are as follows:</p>
                <ol>
                  <li>
                    <p>If the need for an identity assertion was identified when <code>createAnswer</code> was invoked, wait for
                      <a href="#sec.identity-proxy-assertion-request">the
                    identity assertion request process</a> to complete.</p>
                  </li>
                  <li>
                    <p>If the identity provider was unable to produce an identity assertion, reject <var>p</var> with a
                      <code>DOMException</code> object whose <code>name</code> attribute has the value <code>NotReadableError</code>, and abort these steps.</p>
                  </li>
                  <li>
                    <p>If <var>connection</var> was not constructed with a set of certificates, and one has not yet been generated, wait for it to be generated.</p>
                  </li>
                  <li>
                    <p>Inspect the system state to determine the currently available resources as necessary for generating the answer, as described in <span>[<cite><a class="bibref" href="#bib-JSEP">JSEP</a></cite>] (<a href="https://tools.ietf.org/html/draft-ietf-rtcweb-jsep-16#section-4.1.6">section 4.1.6.</a>)</span>.</p>
                  </li>
                  <li>
                    <p>If this inspection failed for any reason, reject
                      <var>p</var> with a <code>DOMException</code> object whose
                      <code>name</code> attribute has the value
                      <code>OperationError</code>, and abort these steps.</p>
                  </li>
                  <li>
                    <p>Queue a task that runs the <a href="#dfn-final-steps-to-create-an-answer" class="internalDFN" data-link-type="dfn">final steps to create an
                    answer</a>, given <var>p</var>.</p>
                  </li>
                </ol>
                <p>The <dfn data-dfn-type="dfn" id="dfn-final-steps-to-create-an-answer">final steps to create an answer</dfn> given a promise <var>p</var> are as follows:</p>
                <ol>
                  <li>
                    <p>If <var>connection</var>'s [[<a href="#dfn-isclosed" class="internalDFN" data-link-type="dfn">isClosed</a>]] slot is
                      <code>true</code>, then abort these steps.</p>
                  </li>
                  <li>
                    <p>If <var>connection</var> was modified in such a way that additional inspection of the system state is necessary, then in parallel begin the <a href="#dfn-steps-to-create-an-answer" class="internalDFN" data-link-type="dfn">steps to create an answer</a> again, given <var>p</var>, and abort these steps.</p>
                    <div class="note">
                      <div class="note-title marker" aria-level="6" role="heading" id="h-note2"><span>Note</span></div>
                      <div class="">
                        This may be necessary if, for example,
                        <code>createAnswer</code> was called when an
                        <code><a href="#idl-def-rtcrtptransceiver" class="internalDFN" data-link-type="dfn"><code>RTCRtpTransceiver</code></a>
                        </code>'s direction was "recvonly", but while performing the <a href="#dfn-steps-to-create-an-answer" class="internalDFN" data-link-type="dfn">steps to create
                      an answer</a> in parallel, the direction was changed to "sendrecv", requiring additional inspection of video encoding resources.
                      </div>
                    </div>
                  </li>
                  <li>
                    <p>Given the information that was obtained from previous inspection and the current state of <var>connection</var> and its <code><a href="#idl-def-rtcrtptransceiver" class="internalDFN" data-link-type="dfn"><code>RTCRtpTransceiver</code></a>
                      </code>s, generate an SDP answer, <var>sdpString</var>, as described in
                      <span>[<cite><a class="bibref" href="#bib-JSEP">JSEP</a></cite>] (<a href="https://tools.ietf.org/html/draft-ietf-rtcweb-jsep-16#section-5.3">section 5.3.</a>)</span>.
                    </p>
                  </li>
                  <li>
                    <p>Let <var>answer</var> be a newly created
                      <code><a href="#idl-def-rtcsessiondescriptioninit" class="internalDFN" data-link-type="dfn"><code>RTCSessionDescriptionInit</code></a>
                      </code> dictionary with its <code>type</code> member initialized to the string
                      <code>"answer"</code> and its <code>sdp</code> member initialized to <var>sdpString</var>.</p>
                  </li>
                  <li>
                    <p>Resolve <var>p</var> with <var>answer</var>.</p>
                  </li>
                </ol>
                <table class="parameters">
                  <tbody>
                    <tr>
                      <th>Parameter</th>
                      <th>Type</th>
                      <th>Nullable</th>
                      <th>Optional</th>
                      <th>Description</th>
                    </tr>
                    <tr>
                      <td class="prmName">options</td>
                      <td class="prmType"><code>RTCAnswerOptions</code></td>
                      <td class="prmNullFalse"><span role="img" aria-label="False">âœ˜</span></td>
                      <td class="prmOptTrue"><span role="img" aria-label="True">âœ”</span></td>
                      <td class="prmDesc"></td>
                    </tr>
                  </tbody>
                </table>
                <div>
                  <em>Return type:</em>
                  <code>Promise&lt;RTCSessionDescriptionInit&gt;</code>
                </div>
              </dd>
              <dt><code>setLocalDescription</code></dt>
              <dd>
                <p>The <dfn id="dom-rtcpeerconnection-setlocaldescription" data-dfn-for="rtcpeerconnection" data-dfn-type="dfn" data-idl=""><code>setLocalDescription</code></dfn> method instructs the <code><a href="#dom-rtcpeerconnection" class="internalDFN" data-link-type="dfn"><code>RTCPeerConnection</code></a>
                  </code> to apply the supplied
                  <code><a href="#idl-def-rtcsessiondescriptioninit" class="internalDFN" data-link-type="dfn"><code>RTCSessionDescriptionInit</code></a>
                  </code> as the local description.
                </p>
                <p>This API changes the local media state. In order to successfully handle scenarios where the application wants to offer to change from one media format to a different, incompatible format, the <code><a href="#dom-rtcpeerconnection" class="internalDFN" data-link-type="dfn"><code>RTCPeerConnection</code></a>
                  </code>
                  <em class="rfc2119" title="MUST">MUST</em> be able to simultaneously support use of both the current and pending local descriptions (e.g. support codecs that exist in both descriptions) until a final answer is received, at which point the <code><a href="#dom-rtcpeerconnection" class="internalDFN" data-link-type="dfn"><code>RTCPeerConnection</code></a>
                  </code> can fully adopt the pending local description, or rollback to the current description if the remote side rejected the change.</p>
                <p>When the method is invoked, the User Agent <em class="rfc2119" title="MUST">MUST</em> return the result of <a href="#set-description">setting the
                RTCSessionDescription</a> indicated by the method's first argument.
                </p>
                <table class="parameters">
                  <tbody>
                    <tr>
                      <th>Parameter</th>
                      <th>Type</th>
                      <th>Nullable</th>
                      <th>Optional</th>
                      <th>Description</th>
                    </tr>
                    <tr>
                      <td class="prmName">description</td>
                      <td class="prmType">
                        <code>RTCSessionDescriptionInit</code></td>
                      <td class="prmNullFalse"><span role="img" aria-label="False">âœ˜</span></td>
                      <td class="prmOptFalse"><span role="img" aria-label="False">âœ˜</span></td>
                      <td class="prmDesc"></td>
                    </tr>
                  </tbody>
                </table>
                <div>
                  <em>Return type:</em> <code>Promise&lt;void&gt;</code>
                </div>
              </dd>
              <dt><code>setRemoteDescription</code></dt>
              <dd>
                <p>The <dfn id="dom-rtcpeerconnection-setremotedescription" data-dfn-for="rtcpeerconnection" data-dfn-type="dfn" data-idl=""><code>setRemoteDescription</code></dfn> method instructs the <code><a href="#dom-rtcpeerconnection" class="internalDFN" data-link-type="dfn"><code>RTCPeerConnection</code></a>
                  </code> to apply the supplied
                  <code><a href="#idl-def-rtcsessiondescriptioninit" class="internalDFN" data-link-type="dfn"><code>RTCSessionDescriptionInit</code></a>
                  </code> as the remote offer or answer. This API changes the local media state.</p>
                <p>When the method is invoked, the User Agent <em class="rfc2119" title="MUST">MUST</em> return the result of <a href="#set-description">setting the
                RTCSessionDescription</a> indicated by the method's first argument.
                </p>
                <p>In addition, a remote description is processed to determine and verify the identity of the peer.</p>
                <p>If an <code>a=identity</code> attribute is present in the session description, the browser <a href="#sec.identity-verify-assertion">validates the identity
                assertion.</a>.</p>
                <p>If the "peerIdentity" configuration is applied to the
                  <code><a href="#dom-rtcpeerconnection" class="internalDFN" data-link-type="dfn"><code>RTCPeerConnection</code></a>
                  </code>, this establishes a
                  <dfn id="target-peer-identity" data-dfn-type="dfn">target peer identity</dfn> of the provided value. Alternatively, if the
                  <code><a href="#dom-rtcpeerconnection" class="internalDFN" data-link-type="dfn"><code>RTCPeerConnection</code></a>
                  </code> has previously authenticated the identity of the peer (that is, there is a current value for <code><a data-for="RTCPeerConnection" href="#dom-rtcpeerconnection-peeridentity" class="internalDFN" data-link-type="dfn"><code>peerIdentity</code></a>
                  </code> ), then this also establishes a <a href="#target-peer-identity" class="internalDFN" data-link-type="dfn">target peer identity</a>.</p>
                <p>The <a href="#target-peer-identity" class="internalDFN" data-link-type="dfn">target peer identity</a> cannot be changed once set. Once set, if a different value is provided, the user agent <em class="rfc2119" title="MUST">MUST</em> reject the returned promise with
                  <code>InvalidModificationError</code> and abort this operation. The <code><a href="#dom-rtcpeerconnection" class="internalDFN" data-link-type="dfn"><code>RTCPeerConnection</code></a>
                  </code> <em class="rfc2119" title="MUST">MUST</em> be closed if the validated peer identity does not match the <a href="#target-peer-identity" class="internalDFN" data-link-type="dfn">target peer
                identity</a>.</p>
                <p>If there is no <a href="#target-peer-identity" class="internalDFN" data-link-type="dfn">target peer identity</a>, then
                  <code>setRemoteDescription</code> does not await the completion of identity validation.</p>
                <table class="parameters">
                  <tbody>
                    <tr>
                      <th>Parameter</th>
                      <th>Type</th>
                      <th>Nullable</th>
                      <th>Optional</th>
                      <th>Description</th>
                    </tr>
                    <tr>
                      <td class="prmName">description</td>
                      <td class="prmType">
                        <code>RTCSessionDescriptionInit</code></td>
                      <td class="prmNullFalse"><span role="img" aria-label="False">âœ˜</span></td>
                      <td class="prmOptFalse"><span role="img" aria-label="False">âœ˜</span></td>
                      <td class="prmDesc"></td>
                    </tr>
                  </tbody>
                </table>
                <div>
                  <em>Return type:</em> <code>Promise&lt;void&gt;</code>
                </div>
              </dd>
              <dt><dfn data-dfn-for="rtcpeerconnection" data-dfn-type="dfn" id="dom-rtcpeerconnection-addicecandidate" data-idl=""><code>addIceCandidate</code></dfn></dt>
              <dd>
                <p>The <dfn id="dom-peerconnection-addicecandidate" data-dfn-type="dfn"><code>addIceCandidate()</code></dfn> method provides a remote candidate to the <a href="#dfn-ice-agent" class="internalDFN" data-link-type="dfn">ICE Agent</a>. This method can also be used to indicate the end of remote candidates when called with a <code>null</code> value for
                  <code>candidate</code>. The only members of the argument used by this method are <code><a data-for="RTCIceCandidate" href="#dom-rtcicecandidate-candidate" class="internalDFN" data-link-type="dfn"><code>candidate</code></a>
                  </code>, <code><a data-for="RTCIceCandidate" href="#dom-rtcicecandidate-sdpmid" class="internalDFN" data-link-type="dfn"><code>sdpMid</code></a>
                  </code> and <code><a data-for="RTCIceCandidate" href="#dom-rtcicecandidate-sdpmlineindex" class="internalDFN" data-link-type="dfn"><code>sdpMLineIndex</code></a>
                  </code>; the rest are ignored. When the method is invoked, the User Agent <em class="rfc2119" title="MUST">MUST</em> run the following steps:</p>
                <ol>
                  <li>
                    <p>Let <var>candidate</var> be the methods argument.</p>
                  </li>
                  <li>
                    <p>Let <var>connection</var> be the
                      <code><a href="#dom-rtcpeerconnection" class="internalDFN" data-link-type="dfn"><code>RTCPeerConnection</code></a>
                      </code> object on which the method was invoked.</p>
                  </li>
                  <li>
                    <p>If <var>candidate</var> is not <code>null</code> but is missing values for both <var>sdpMid</var> and
                      <var>sdpMLineIndex</var>, return a promise rejected with a
                      <code>TypeError</code>.</p>
                  </li>
                  <li>
                    <p>Return the result of <a href="#enqueue-an-operation">enqueuing</a> the following steps:
                    </p>
                    <ol>
                      <li>
                        <p>If <code><a data-for="RTCPeerConnection" href="#dom-rtcpeerconnection-remotedescription" class="internalDFN" data-link-type="dfn"><code>remoteDescription</code></a>
                          </code> is
                          <code>null</code> return a promise rejected with an
                          <code>InvalidStateError</code>.</p>
                      </li>
                      <li>
                        <p>Let <var>p</var> be a new promise.</p>
                      </li>
                      <li>
                        <p>If <var>candidate</var> is <code>null</code>, the User Agent <em class="rfc2119" title="MUST">MUST</em> queue a task that runs the following steps, and abort these steps:</p>
                        <ol>
                          <li>
                            <p>If <var>connection</var>'s [[<a href="#dfn-isclosed" class="internalDFN" data-link-type="dfn">isClosed</a>]] slot is <code>true</code>, abort these steps.</p>
                          </li>
                          <li>
                            <p>For each <a href="#dfn-media-description" class="internalDFN" data-link-type="dfn">media description</a> in the last successfully applied remote description, perform the processing for an end-of-candidates indication for said <a href="#dfn-media-description" class="internalDFN" data-link-type="dfn">media description</a> as defined in [
                              <cite><a class="bibref" href="#bib-TRICKLE-ICE">TRICKLE-ICE</a></cite>].</p>
                          </li>
                          <li>
                            <p>Resolve <var>p</var> with
                              <code>undefined</code>.</p>
                          </li>
                        </ol>
                      </li>
                      <li>
                        <p>If <var>candidate.sdpMid</var> is not null, run the following steps:</p>
                        <ol>
                          <li>
                            <p>If <var>candidate.sdpMid</var> is not equal to the mid of any media description in
                              <code><a data-for="RTCPeerConnection" href="#dom-rtcpeerconnection-remotedescription" class="internalDFN" data-link-type="dfn"><code>remoteDescription</code></a>
                              </code>, reject <var>p</var> with a
                              <code>DOMException</code> object whose
                              <code>name</code> attribute has the value
                              <code>OperationError</code> and stop processing any more steps.</p>
                          </li>
                        </ol>
                      </li>
                      <li>
                        <p>Else, if <var>candidate.sdpMLineIndex</var> is not null, run the following steps:</p>
                        <ol>
                          <li>
                            <p>If <var>candidate.sdpMLineIndex</var> is equal to or larger than the number of media descriptions in <code><a data-for="RTCPeerConnection" href="#dom-rtcpeerconnection-remotedescription" class="internalDFN" data-link-type="dfn"><code>remoteDescription</code></a>
                              </code>, reject <var>p</var> with a
                              <code>DOMException</code> object whose
                              <code>name</code> attribute has the value
                              <code>OperationError</code> and stop processing any more steps.</p>
                          </li>
                        </ol>
                      </li>
                      <li>
                        <p>In parallel, add the ICE candidate
                          <var>candidate</var> as described in <span>[<cite><a class="bibref" href="#bib-JSEP">JSEP</a></cite>] (<a href="https://tools.ietf.org/html/draft-ietf-rtcweb-jsep-16#section-4.1.16">section 4.1.16.</a>)</span>.</p>
                        <ol>
                          <li>
                            <p>If <var>candidate</var> could not be successfully added the User Agent <em class="rfc2119" title="MUST">MUST</em> queue a task that runs the following steps:</p>
                            <ol>
                              <li>
                                <p>If <var>connection</var>'s [[
                                  <a href="#dfn-isclosed" class="internalDFN" data-link-type="dfn">isClosed</a>]] slot is <code>true</code>, then abort these steps.</p>
                              </li>
                              <li>
                                <p>Reject <var>p</var> with a
                                  <code>DOMException</code> object whose
                                  <code>name</code> attribute has the value
                                  <code>OperationError</code> and abort these steps.
                                </p>
                              </li>
                            </ol>
                          </li>
                          <li>
                            <p>If <var>candidate</var> is applied successfully, the User Agent <em class="rfc2119" title="MUST">MUST</em> queue a task that runs the following steps:</p>
                            <ol>
                              <li>
                                <p>If <var>connection</var>'s [[
                                  <a href="#dfn-isclosed" class="internalDFN" data-link-type="dfn">isClosed</a>]] slot is <code>true</code>, then abort these steps.</p>
                              </li>
                              <li>
                                <p>Let <var>remoteDescription</var> be
                                  <var>connection</var>'s <code><a data-for="RTCPeerConnection" href="#dom-rtcpeerconnection-pendingremotedescription" class="internalDFN" data-link-type="dfn"><code>pendingRemoteDescription</code></a>
                                  </code>
                                  if not null, otherwise <var>connection</var>'s
                                  <code><a data-for="RTCPeerConnection" href="#dom-rtcpeerconnection-currentremotedescription" class="internalDFN" data-link-type="dfn"><code>currentRemoteDescription</code></a>
                                  </code>.</p>
                              </li>
                              <li>
                                <p>Add <var>candidate</var> to
                                  <var>remoteDescription</var>.</p>
                              </li>
                              <li>
                                <p>If the <a href="#dfn-ice-agent" class="internalDFN" data-link-type="dfn">ICE Agent</a> is not currently checking candidate pairs, the <a href="#dfn-ice-agent" class="internalDFN" data-link-type="dfn">ICE Agent</a>
                                  <em class="rfc2119" title="MUST">MUST</em> start checking candidate pairs and
                                  <a data-lt="update the ICE connection state" href="#update-ice-connection-state" class="internalDFN" data-link-type="dfn">update
                                <var>connection</var>'s ICE connection
                                state</a> to <code>checking</code>.</p>
                              </li>
                              <li>
                                <p>Resolve <var>p</var> with
                                  <code>undefined</code>.</p>
                              </li>
                            </ol>
                          </li>
                        </ol>
                      </li>
                      <li>
                        <p>Return <var>p</var>.</p>
                      </li>
                    </ol>
                  </li>
                </ol>
                <table class="parameters">
                  <tbody>
                    <tr>
                      <th>Parameter</th>
                      <th>Type</th>
                      <th>Nullable</th>
                      <th>Optional</th>
                      <th>Description</th>
                    </tr>
                    <tr>
                      <td class="prmName">candidate</td>
                      <td class="prmType"><code>(RTCIceCandidateInit or
                      RTCIceCandidate)</code></td>
                      <td class="prmNullTrue"><span role="img" aria-label="True">âœ”</span></td>
                      <td class="prmOptFalse"><span role="img" aria-label="False">âœ˜</span></td>
                      <td class="prmDesc"></td>
                    </tr>
                  </tbody>
                </table>
                <div>
                  <em>Return type:</em> <code>Promise&lt;void&gt;</code>
                </div>
              </dd>
              <dt><dfn data-dfn-for="rtcpeerconnection" data-dfn-type="dfn" id="dom-rtcpeerconnection-getconfiguration" data-idl=""><code>getConfiguration</code></dfn></dt>
              <dd>
                <p>Returns a <code><a href="#idl-def-rtcconfiguration" class="internalDFN" data-link-type="dfn"><code>RTCConfiguration</code></a>
                  </code> object representing the current configuration of this
                  <code><a href="#dom-rtcpeerconnection" class="internalDFN" data-link-type="dfn"><code>RTCPeerConnection</code></a>
                  </code> object.</p>
                <p>When this method is called, the user agent <em class="rfc2119" title="MUST">MUST</em> return the
                  <code><a href="#idl-def-rtcconfiguration" class="internalDFN" data-link-type="dfn"><code>RTCConfiguration</code></a>
                  </code> object stored in the [[
                  <code><a href="#dfn-configuration" class="internalDFN" data-link-type="dfn">configuration</a></code>]] internal slot.</p>
                <div>
                  <em>No parameters.</em>
                </div>
                <div>
                  <em>Return type:</em> <code>RTCConfiguration</code>
                </div>
              </dd>
              <dt><code>setConfiguration</code></dt>
              <dd>
                <p>The <code>setConfiguration</code> method updates the configuration of this <code><a href="#dom-rtcpeerconnection" class="internalDFN" data-link-type="dfn"><code>RTCPeerConnection</code></a>
                  </code>
                  object. This includes changing the configuration of the <a href="#dfn-ice-agent" class="internalDFN" data-link-type="dfn">ICE
                Agent</a>. As noted in <span>[<cite><a class="bibref" href="#bib-JSEP">JSEP</a></cite>] (<a href="https://tools.ietf.org/html/draft-ietf-rtcweb-jsep-16#section-3.5.1">section 3.5.1.</a>)</span>, when the ICE configuration changes in a way that requires a new gathering phase, an ICE restart is required.</p>
                <p>When the <dfn data-dfn-for="rtcpeerconnection" data-dfn-type="dfn" id="dom-rtcpeerconnection-setconfiguration" data-idl=""><code>setConfiguration</code></dfn> method is invoked, the user agent <em class="rfc2119" title="MUST">MUST</em> run the following steps:</p>
                <ol>
                  <li>
                    <p>Let <var>connection</var> be the
                      <code><a href="#dom-rtcpeerconnection" class="internalDFN" data-link-type="dfn"><code>RTCPeerConnection</code></a>
                      </code> on which the method was invoked.</p>
                  </li>
                  <li>
                    <p>If <var>connection</var>'s [[<a href="#dfn-isclosed" class="internalDFN" data-link-type="dfn">isClosed</a>]] slot is
                      <code>true</code>, throw an <code>InvalidStateError</code> exception and abort these steps.</p>
                  </li>
                </ol>
                <p>To <dfn id="set-pc-configuration" data-dfn-type="dfn">set a configuration</dfn>, run the following steps:</p>
                <ol>
                  <li>Let <var>configuration</var> be the
                    <code><a href="#idl-def-rtcconfiguration" class="internalDFN" data-link-type="dfn"><code>RTCConfiguration</code></a>
                    </code> dictionary to be processed.
                  </li>
                  <li>Let <var>connection</var> be the target
                    <code><a href="#dom-rtcpeerconnection" class="internalDFN" data-link-type="dfn"><code>RTCPeerConnection</code></a>
                    </code> object.</li>
                  <li>If <code><var>configuration</var>.peerIdentity</code> is set and its value differs from the <a href="#target-peer-identity" class="internalDFN" data-link-type="dfn">target peer
                  identity</a>, throw an <code>InvalidModificationError</code>.
                  </li>
                  <li>If <code><var>configuration</var>.certificates</code> is set and the set of certificates differs from the ones used when <var>connection</var> was constructed, throw an
                    <code>InvalidModificationError</code>.</li>
                  <li>If <code><var>configuration</var>.<a data-for="RTCConfiguration" href="#dom-rtcconfiguration-bundlepolicy" class="internalDFN" data-link-type="dfn"><code>bundlePolicy</code></a>
                    </code> is set and its value differs from the <var>connection</var>'s bundle policy, throw an <code>InvalidModificationError</code>.</li>
                  <li>If <code><var>configuration</var>.<a data-for="RTCConfiguration" href="#dom-rtcconfiguration-rtcpmuxpolicy" class="internalDFN" data-link-type="dfn"><code>rtcpMuxPolicy</code></a>
                    </code> is set and its value differs from the <var>connection</var>'s rtcpMux policy, throw an <code>InvalidModificationError</code>.</li>
                  <li>
                    <p>Set the <a href="#dfn-ice-agent" class="internalDFN" data-link-type="dfn">ICE Agent</a>'s <dfn id="ice-transports-setting" data-dfn-type="dfn">ICE transports setting</dfn> to the value of <code><var>configuration</var>.<a data-for="RTCConfiguration" href="#dom-rtcconfiguration-icetransportpolicy" class="internalDFN" data-link-type="dfn"><code>iceTransportPolicy</code></a>
                      </code>. If the new <a href="#ice-transports-setting" class="internalDFN" data-link-type="dfn">ICE transports setting</a> changes the existing setting, no action will be taken until the
                      <code><a href="#dom-rtcpeerconnection" class="internalDFN" data-link-type="dfn"><code>RTCPeerConnection</code></a>
                      </code>'s <a href="#dfn-ice-gathering-state" class="internalDFN" data-link-type="dfn">ICE gathering
                    state</a> transitions to <code>gathering</code>. If a script wants this to happen immediately, it should do an ICE restart.</p>
                  </li>
                  <li>
                    <p>Set the <a href="#dfn-ice-agent" class="internalDFN" data-link-type="dfn">ICE Agent</a>'s prefetched <dfn data-dfn-type="dfn" id="dfn-ice-candidate-pool-size">ICE candidate
                    pool size</dfn> as defined in <span>[<cite><a class="bibref" href="#bib-JSEP">JSEP</a></cite>] (<a href="https://tools.ietf.org/html/draft-ietf-rtcweb-jsep-16#section-3.5.4">section 3.5.4.</a> and <a href="https://tools.ietf.org/html/draft-ietf-rtcweb-jsep-16#section-4.1.1">section 4.1.1.</a>)</span> to the value of <code><var>configuration</var>.<a data-for="RTCConfiguration" href="#dom-rtcconfiguration-icecandidatepoolsize" class="internalDFN" data-link-type="dfn"><code>iceCandidatePoolSize</code></a>
                      </code>. If the new <a href="#dfn-ice-candidate-pool-size" class="internalDFN" data-link-type="dfn">ICE candidate pool size</a> changes the existing setting, no action will be taken until the
                      <code><a href="#dom-rtcpeerconnection" class="internalDFN" data-link-type="dfn"><code>RTCPeerConnection</code></a>
                      </code>'s <a href="#dfn-ice-gathering-state" class="internalDFN" data-link-type="dfn">ICE gathering
                    state</a> transitions to <code>gathering</code>. If a script wants this to happen immediately, it should do an ICE restart.</p>
                  </li>
                  <li>
                    <p>Let <var>validatedServers</var> be an empty list.</p>
                  </li>
                  <li>
                    <p>If <code><var>configuration</var>.<a data-for="RTCConfiguration" href="#dom-rtcconfiguration-iceservers" class="internalDFN" data-link-type="dfn"><code>iceServers</code></a>
                      </code> is defined, then run the following steps for each element:</p>
                    <ol>
                      <li>
                        <p>Let <var>server</var> be the current list element.
                        </p>
                      </li>
                      <li>
                        <p>If <code><var>server</var>.urls</code> is a string, let <code><var>server</var>.urls</code> be a list consisting of just that string.</p>
                      </li>
                      <li>
                        <p>For each <var>url</var> in
                          <code><var>server</var>.urls</code> parse
                          <var>url</var> and obtain <var>scheme name</var>. If the <var>scheme name</var> is not implemented by the browser, or if parsing based on the syntax defined in [
                          <cite><a class="bibref" href="#bib-RFC7064">RFC7064</a></cite>] and [<cite><a class="bibref" href="#bib-RFC7065">RFC7065</a></cite>] fails, throw a
                          <code>SyntaxError</code> and abort these steps.</p>
                      </li>
                      <li>
                        <p>If <var>scheme name</var> is <code>turn</code> or
                          <code>turns</code>, and either of
                          <code><var>server</var>.username</code> or
                          <code><var>server</var>.credential</code> are omitted, then throw an <code>InvalidAccessError</code> and abort these steps.</p>
                      </li>
                      <li>
                        <p>Append<var>server</var> to
                          <var>validatedServers</var>.</p>
                      </li>
                    </ol>
                    <p>Let <var>validatedServers</var> be the <a href="#dfn-ice-agent" class="internalDFN" data-link-type="dfn">ICE
                    Agent</a>'s <dfn id="ice-servers-list" data-dfn-type="dfn">ICE servers
                    list</dfn>.</p>
                    <p>If a new list of servers replaces the <a href="#dfn-ice-agent" class="internalDFN" data-link-type="dfn">ICE Agent</a>'s existing ICE servers list, no action will be taken until the <code><a href="#dom-rtcpeerconnection" class="internalDFN" data-link-type="dfn"><code>RTCPeerConnection</code></a>
                      </code>'s <a href="#dfn-ice-gathering-state" class="internalDFN" data-link-type="dfn">ICE
                    gathering state</a> transitions to <code>gathering</code>. If a script wants this to happen immediately, it should do an ICE restart.</p>
                  </li>
                  <li>
                    <p>Store the configuration in the [[
                      <code><a href="#dfn-configuration" class="internalDFN" data-link-type="dfn">configuration</a></code>]] internal slot.</p>
                  </li>
                </ol>
                <table class="parameters">
                  <tbody>
                    <tr>
                      <th>Parameter</th>
                      <th>Type</th>
                      <th>Nullable</th>
                      <th>Optional</th>
                      <th>Description</th>
                    </tr>
                    <tr>
                      <td class="prmName">configuration</td>
                      <td class="prmType"><code>RTCConfiguration</code></td>
                      <td class="prmNullFalse"><span role="img" aria-label="False">âœ˜</span></td>
                      <td class="prmOptFalse"><span role="img" aria-label="False">âœ˜</span></td>
                      <td class="prmDesc"></td>
                    </tr>
                  </tbody>
                </table>
                <div>
                  <em>Return type:</em> <code>void</code>
                </div>
              </dd>
              <dt><code>close</code></dt>
              <dd>
                <p>When the <dfn data-dfn-for="rtcpeerconnection" data-dfn-type="dfn" id="dom-rtcpeerconnection-close" data-idl=""><code>close</code></dfn> method is invoked, the user agent <em class="rfc2119" title="MUST">MUST</em> run the following steps:</p>
                <ol>
                  <li>
                    <p>Let <var>connection</var> be the
                      <code><a href="#dom-rtcpeerconnection" class="internalDFN" data-link-type="dfn"><code>RTCPeerConnection</code></a>
                      </code> object on which the method was invoked.</p>
                  </li>
                  <li>
                    <p>If <var>connection</var>'s [[<a href="#dfn-isclosed" class="internalDFN" data-link-type="dfn">isClosed</a>]] slot is
                      <code>true</code>, abort these steps.</p>
                  </li>
                  <li>
                    <p>Destroy <var>connection</var>'s <a href="#dfn-ice-agent" class="internalDFN" data-link-type="dfn">ICE Agent</a>, abruptly ending any active ICE processing and any active streaming, and releasing any relevant resources (e.g. TURN permissions).
                    </p>
                  </li>
                  <li>
                    <p>Let <var>senders</var> be the result of executing the
                      <code><a href="#dfn-collectsenders" class="internalDFN" data-link-type="dfn">CollectSenders</a></code> algorithm. For every
                      <code><a href="#dom-rtcrtpsender" class="internalDFN" data-link-type="dfn"><code>RTCRtpSender</code></a>
                      </code> <var>sender</var> in
                      <var>senders</var>, set
                      <code><var>sender.transport.state</var></code> and
                      <code><var>sender.transport.transport.state</var></code> to "closed". If <code><var>sender.rtcpTransport</var></code> is set, set
                      <code><var>sender.rtcpTransport.state</var></code> and
                      <code><var>sender.rtcpTransport.transport.state</var></code> to "closed".</p>
                  </li>
                  <li>
                    <p>Let <var>receivers</var> be the result of executing the
                      <code><a href="#dfn-collectreceivers" class="internalDFN" data-link-type="dfn">CollectReceivers</a></code> algorithm. For every
                      <code><a href="#idl-def-rtcrtpreceiver" class="internalDFN" data-link-type="dfn"><code>RTCRtpReceiver</code></a>
                      </code> <var>receiver</var> in
                      <var>receivers</var>, set
                      <code><var>receiver.transport.state</var></code> and
                      <code><var>receiver.transport.transport.state</var></code> to "closed". If
                      <code><var>receiver.rtcpTransport</var></code> is set, set
                      <code><var>receiver.rtcpTransport.state</var></code> and
                      <code><var>receiver.rtcpTransport.transport.state</var></code> to "closed".</p>
                  </li>
                  <li>
                    <p>All <code><a href="#dom-rtcrtpsender" class="internalDFN" data-link-type="dfn"><code>RTCRtpSender</code></a>
                      </code>s in
                      <var>senders</var> are now considered <a href="#sender-stopped" class="internalDFN" data-link-type="dfn">stopped</a>.</p>
                  </li>
                  <li>
                    <p>All <code><a href="#idl-def-rtcrtpreceiver" class="internalDFN" data-link-type="dfn"><code>RTCRtpReceiver</code></a>
                      </code>s in
                      <var>receivers</var> are now considered <a href="#sender-stopped" class="internalDFN" data-link-type="dfn">stopped</a>.</p>
                  </li>
                  <li>
                    <p>Set <var>connection</var>'s [[<a href="#dfn-isclosed" class="internalDFN" data-link-type="dfn">isClosed</a>]] slot to
                      <code>true</code>.</p>
                  </li>
                </ol>
                <div>
                  <em>No parameters.</em>
                </div>
                <div>
                  <em>Return type:</em> <code>void</code>
                </div>
              </dd>
            </dl>
          </section>
        </div>
      </section>

      <section id="legacy-interface-extensions" typeof="bibo:Chapter" resource="#legacy-interface-extensions" property="bibo:hasPart">
        <h4 id="h-legacy-interface-extensions" resource="#h-legacy-interface-extensions"><span property="xhv:role" resource="xhv:heading"><span class="secno">4.3.3 </span>Legacy Interface Extensions</span>
        </h4>
        <div class="note">
          <div class="note-title marker" aria-level="5" role="heading" id="h-note3"><span>Note</span></div>
          <div class="">
            These methods are kept on <code><a href="#dom-rtcpeerconnection" class="internalDFN" data-link-type="dfn"><code>RTCPeerConnection</code></a>
            </code> for legacy purposes.
          </div>
        </div>
        <div>
          <pre class="def idl"><span class="idlInterface" id="idl-def-rtcpeerconnection-partial-1" data-idl="" data-title="RTCPeerConnection">partial interface <span class="idlInterfaceID"><a data-lt="RTCPeerConnection" href="#dom-rtcpeerconnection" class="internalDFN" data-link-type="dfn" data-for=""><code>RTCPeerConnection</code></a></span> {
<span class="idlMethod" id="idl-def-rtcpeerconnection-createoffer!overload-1(rtcsessiondescriptioncallback,rtcpeerconnectionerrorcallback,optional-rtcofferoptions)" data-idl="" data-title="createOffer" data-dfn-for="rtcpeerconnection">    <span class="idlMethType">Promise&lt;void&gt;</span> <span class="idlMethName"><a data-lt="createOffer!overload-1" data-lt-nodefault="" href="#dom-rtcpeerconnection-createoffer!overload-1" class="internalDFN" data-link-type="dfn" data-for="RTCPeerConnection"><code>createOffer</code></a></span>(<span class="idlParam"><span class="idlParamType"><a href="#idl-def-rtcsessiondescriptioncallback" class="internalDFN" data-link-type="dfn"><code>RTCSessionDescriptionCallback</code></a></span> <span class="idlParamName">successCallback</span></span>,
                              <span class="idlParam"><span class="idlParamType"><a href="#idl-def-rtcpeerconnectionerrorcallback" class="internalDFN" data-link-type="dfn"><code>RTCPeerConnectionErrorCallback</code></a></span> <span class="idlParamName">failureCallback</span></span>,
                              <span class="idlParam">optional <span class="idlParamType"><a href="#idl-def-rtcofferoptions" class="internalDFN" data-link-type="dfn"><code>RTCOfferOptions</code></a></span> <span class="idlParamName">options</span></span>);</span>
<span class="idlMethod" id="idl-def-rtcpeerconnection-setlocaldescription!overload-1(rtcsessiondescriptioninit,voidfunction,rtcpeerconnectionerrorcallback)" data-idl="" data-title="setLocalDescription" data-dfn-for="rtcpeerconnection">    <span class="idlMethType">Promise&lt;void&gt;</span> <span class="idlMethName"><a data-lt="setLocalDescription!overload-1" data-lt-nodefault="" href="#dom-rtcpeerconnection-setlocaldescription!overload-1" class="internalDFN" data-link-type="dfn" data-for="RTCPeerConnection"><code>setLocalDescription</code></a></span>(<span class="idlParam"><span class="idlParamType"><a href="#idl-def-rtcsessiondescriptioninit" class="internalDFN" data-link-type="dfn"><code>RTCSessionDescriptionInit</code></a></span> <span class="idlParamName">description</span></span>,
                                      <span class="idlParam"><span class="idlParamType">VoidFunction</span> <span class="idlParamName">successCallback</span></span>,
                                      <span class="idlParam"><span class="idlParamType"><a href="#idl-def-rtcpeerconnectionerrorcallback" class="internalDFN" data-link-type="dfn"><code>RTCPeerConnectionErrorCallback</code></a></span> <span class="idlParamName">failureCallback</span></span>);</span>
<span class="idlMethod" id="idl-def-rtcpeerconnection-createanswer!overload-1(rtcsessiondescriptioncallback,rtcpeerconnectionerrorcallback)" data-idl="" data-title="createAnswer" data-dfn-for="rtcpeerconnection">    <span class="idlMethType">Promise&lt;void&gt;</span> <span class="idlMethName"><a data-lt="createAnswer!overload-1" data-lt-nodefault="" href="#dom-rtcpeerconnection-createanswer!overload-1" class="internalDFN" data-link-type="dfn" data-for="RTCPeerConnection"><code>createAnswer</code></a></span>(<span class="idlParam"><span class="idlParamType"><a href="#idl-def-rtcsessiondescriptioncallback" class="internalDFN" data-link-type="dfn"><code>RTCSessionDescriptionCallback</code></a></span> <span class="idlParamName">successCallback</span></span>,
                               <span class="idlParam"><span class="idlParamType"><a href="#idl-def-rtcpeerconnectionerrorcallback" class="internalDFN" data-link-type="dfn"><code>RTCPeerConnectionErrorCallback</code></a></span> <span class="idlParamName">failureCallback</span></span>);</span>
<span class="idlMethod" id="idl-def-rtcpeerconnection-setremotedescription!overload-1(rtcsessiondescriptioninit,voidfunction,rtcpeerconnectionerrorcallback)" data-idl="" data-title="setRemoteDescription" data-dfn-for="rtcpeerconnection">    <span class="idlMethType">Promise&lt;void&gt;</span> <span class="idlMethName"><a data-lt="setRemoteDescription!overload-1" data-lt-nodefault="" href="#dom-rtcpeerconnection-setremotedescription!overload-1" class="internalDFN" data-link-type="dfn" data-for="RTCPeerConnection"><code>setRemoteDescription</code></a></span>(<span class="idlParam"><span class="idlParamType"><a href="#idl-def-rtcsessiondescriptioninit" class="internalDFN" data-link-type="dfn"><code>RTCSessionDescriptionInit</code></a></span> <span class="idlParamName">description</span></span>,
                                       <span class="idlParam"><span class="idlParamType">VoidFunction</span> <span class="idlParamName">successCallback</span></span>,
                                       <span class="idlParam"><span class="idlParamType"><a href="#idl-def-rtcpeerconnectionerrorcallback" class="internalDFN" data-link-type="dfn"><code>RTCPeerConnectionErrorCallback</code></a></span> <span class="idlParamName">failureCallback</span></span>);</span>
<span class="idlMethod" id="idl-def-rtcpeerconnection-addicecandidate!overload-1((rtcicecandidateinit_or_rtcicecandidate),voidfunction,rtcpeerconnectionerrorcallback)" data-idl="" data-title="addIceCandidate" data-dfn-for="rtcpeerconnection">    <span class="idlMethType">Promise&lt;void&gt;</span> <span class="idlMethName">addIceCandidate</span>(<span class="idlParam"><span class="idlParamType">(<a href="#idl-def-rtcicecandidateinit" class="internalDFN" data-link-type="dfn"><code>RTCIceCandidateInit</code></a> or <a href="#idl-def-rtcicecandidate" class="internalDFN" data-link-type="dfn"><code>RTCIceCandidate</code></a>)</span> <span class="idlParamName">candidate</span></span>,
                                  <span class="idlParam"><span class="idlParamType">VoidFunction</span> <span class="idlParamName">successCallback</span></span>,
                                  <span class="idlParam"><span class="idlParamType"><a href="#idl-def-rtcpeerconnectionerrorcallback" class="internalDFN" data-link-type="dfn"><code>RTCPeerConnectionErrorCallback</code></a></span> <span class="idlParamName">failureCallback</span></span>);</span>
<span class="idlMethod" id="idl-def-rtcpeerconnection-getstats(mediastreamtrack?,rtcstatscallback,rtcpeerconnectionerrorcallback)" data-idl="" data-title="getStats" data-dfn-for="rtcpeerconnection">    <span class="idlMethType">Promise&lt;void&gt;</span> <span class="idlMethName"><a data-lt="getStats" href="#dom-rtcpeerconnection-getstats" class="internalDFN" data-link-type="dfn" data-for="RTCPeerConnection"><code>getStats</code></a></span>(<span class="idlParam"><span class="idlParamType"><a href="#dom-mediastreamtrack" class="internalDFN" data-link-type="dfn"><code>MediaStreamTrack</code></a>?</span> <span class="idlParamName">selector</span></span>,
                           <span class="idlParam"><span class="idlParamType"><a href="#idl-def-rtcstatscallback" class="internalDFN" data-link-type="dfn"><code>RTCStatsCallback</code></a></span> <span class="idlParamName">successCallback</span></span>,
                           <span class="idlParam"><span class="idlParamType"><a href="#idl-def-rtcpeerconnectionerrorcallback" class="internalDFN" data-link-type="dfn"><code>RTCPeerConnectionErrorCallback</code></a></span> <span class="idlParamName">failureCallback</span></span>);</span>
};</span></pre>

          <section typeof="bibo:Chapter" resource="#methods-1" property="bibo:hasPart">
            <h5 id="methods-1" resource="#methods-1"><span property="xhv:role" resource="xhv:heading">Methods</span></h5>
            <dl data-link-for="RTCPeerConnection" data-dfn-for="RTCPeerConnection" class="methods">
              <dt><dfn data-lt-nodefault="true" data-dfn-for="rtcpeerconnection" data-dfn-type="dfn" id="dom-rtcpeerconnection-createoffer!overload-1" data-idl=""><code>createOffer</code></dfn></dt>
              <dd>
                <p>When the <code>createOffer</code> method is called, the user agent <em class="rfc2119" title="MUST">MUST</em> run the following steps:</p>
                <ol>
                  <li>
                    <p>Let <var>successCallback</var> be the method's first argument.
                    </p>
                  </li>
                  <li>
                    <p>Let <var>failureCallback</var> be the callback indicated by the method's second argument.</p>
                  </li>
                  <li>
                    <p>Let <var>options</var> be the callback indicated by the method's third argument.</p>
                  </li>
                  <li>
                    <p>Run the steps specified by
                      <code><a href="#dom-rtcpeerconnection" class="internalDFN" data-link-type="dfn"><code>RTCPeerConnection</code></a>
                      </code>'s createOffer() method with
                      <var>options</var> as the sole argument, and let
                      <var>p</var> be the resulting promise.</p>
                  </li>
                  <li>
                    <p>Upon fulfillment of <var>p</var> with value
                      <var>offer</var>, invoke <var>successCallback</var> with
                      <var>offer</var> as the argument.</p>
                  </li>
                  <li>
                    <p>Upon rejection of <var>p</var> with reason <var>r</var>, invoke <var>failureCallback</var> with <var>r</var> as the argument.
                    </p>
                  </li>
                  <li>
                    <p>Return a promise resolved with
                      <code>undefined</code>.</p>
                  </li>
                </ol>
                <table class="parameters">
                  <tbody>
                    <tr>
                      <th>Parameter</th>
                      <th>Type</th>
                      <th>Nullable</th>
                      <th>Optional</th>
                      <th>Description</th>
                    </tr>
                    <tr>
                      <td class="prmName">successCallback</td>
                      <td class="prmType">
                        <code>RTCSessionDescriptionCallback</code></td>
                      <td class="prmNullFalse"><span role="img" aria-label="False">âœ˜</span></td>
                      <td class="prmOptFalse"><span role="img" aria-label="False">âœ˜</span></td>
                      <td class="prmDesc"></td>
                    </tr>
                    <tr>
                      <td class="prmName">failureCallback</td>
                      <td class="prmType">
                        <code>RTCPeerConnectionErrorCallback</code></td>
                      <td class="prmNullFalse"><span role="img" aria-label="False">âœ˜</span></td>
                      <td class="prmOptFalse"><span role="img" aria-label="False">âœ˜</span></td>
                      <td class="prmDesc"></td>
                    </tr>
                    <tr>
                      <td class="prmName">options</td>
                      <td class="prmType"><code>RTCOfferOptions</code></td>
                      <td class="prmNullFalse"><span role="img" aria-label="False">âœ˜</span></td>
                      <td class="prmOptTrue"><span role="img" aria-label="True">âœ”</span></td>
                      <td class="prmDesc"></td>
                    </tr>
                  </tbody>
                </table>
                <div>
                  <em>Return type:</em> <code>Promise&lt;void&gt;</code>
                </div>
              </dd>
              <dt><dfn data-lt-nodefault="true" data-dfn-for="rtcpeerconnection" data-dfn-type="dfn" id="dom-rtcpeerconnection-setlocaldescription!overload-1" data-idl=""><code>setLocalDescription</code></dfn></dt>
              <dd>
                <p>When the <code>setLocalDescription</code> method is called, the user agent <em class="rfc2119" title="MUST">MUST</em> run the following steps:</p>
                <ol>
                  <li>
                    <p>Let <var>description</var> be the method's first argument.
                    </p>
                  </li>
                  <li>
                    <p>Let <var>successCallback</var> be the callback indicated by the method's second argument.</p>
                  </li>
                  <li>
                    <p>Let <var>failureCallback</var> be the callback indicated by the method's third argument.</p>
                  </li>
                  <li>
                    <p>Run the steps specified by
                      <code><a href="#dom-rtcpeerconnection" class="internalDFN" data-link-type="dfn"><code>RTCPeerConnection</code></a>
                      </code>'s <a data-for="RTCPeerConnection" href="#dom-rtcpeerconnection-setlocaldescription" class="internalDFN" data-link-type="dfn"><code>setLocalDescription</code></a> method with
                      <var>description</var> as the sole argument, and let
                      <var>p</var> be the resulting promise.</p>
                  </li>
                  <li>
                    <p>Upon fulfillment of <var>p</var>, invoke
                      <var>successCallback</var> with <code>undefined</code> as the argument.</p>
                  </li>
                  <li>
                    <p>Upon rejection of <var>p</var> with reason <var>r</var>, invoke <var>failureCallback</var> with <var>r</var> as the argument.
                    </p>
                  </li>
                  <li>
                    <p>Return a promise resolved with
                      <code>undefined</code>.</p>
                  </li>
                </ol>
                <table class="parameters">
                  <tbody>
                    <tr>
                      <th>Parameter</th>
                      <th>Type</th>
                      <th>Nullable</th>
                      <th>Optional</th>
                      <th>Description</th>
                    </tr>
                    <tr>
                      <td class="prmName">description</td>
                      <td class="prmType">
                        <code>RTCSessionDescriptionInit</code></td>
                      <td class="prmNullFalse"><span role="img" aria-label="False">âœ˜</span></td>
                      <td class="prmOptFalse"><span role="img" aria-label="False">âœ˜</span></td>
                      <td class="prmDesc"></td>
                    </tr>
                    <tr>
                      <td class="prmName">successCallback</td>
                      <td class="prmType"><code>VoidFunction</code></td>
                      <td class="prmNullFalse"><span role="img" aria-label="False">âœ˜</span></td>
                      <td class="prmOptFalse"><span role="img" aria-label="False">âœ˜</span></td>
                      <td class="prmDesc"></td>
                    </tr>
                    <tr>
                      <td class="prmName">failureCallback</td>
                      <td class="prmType">
                        <code>RTCPeerConnectionErrorCallback</code></td>
                      <td class="prmNullFalse"><span role="img" aria-label="False">âœ˜</span></td>
                      <td class="prmOptFalse"><span role="img" aria-label="False">âœ˜</span></td>
                      <td class="prmDesc"></td>
                    </tr>
                  </tbody>
                </table>
                <div>
                  <em>Return type:</em> <code>Promise&lt;void&gt;</code>
                </div>
              </dd>
              <dt><dfn data-lt-nodefault="true" data-dfn-for="rtcpeerconnection" data-dfn-type="dfn" id="dom-rtcpeerconnection-createanswer!overload-1" data-idl=""><code>createAnswer</code></dfn></dt>
              <dd>
                <p>When the <code>createAnswer</code> method is called, the user agent <em class="rfc2119" title="MUST">MUST</em> run the following steps:</p>
                <ol>
                  <li>
                    <p>Let <var>successCallback</var> be the method's first argument.
                    </p>
                  </li>
                  <li>
                    <p>Let <var>failureCallback</var> be the callback indicated by the method's second argument.</p>
                  </li>
                  <li>
                    <p>Run the steps specified by
                      <code><a href="#dom-rtcpeerconnection" class="internalDFN" data-link-type="dfn"><code>RTCPeerConnection</code></a>
                      </code>'s createAnswer() method with no arguments, and let <var>p</var> be the resulting promise.
                    </p>
                  </li>
                  <li>
                    <p>Upon fulfillment of <var>p</var> with value
                      <var>answer</var>, invoke <var>successCallback</var> with
                      <var>answer</var> as the argument.</p>
                  </li>
                  <li>
                    <p>Upon rejection of <var>p</var> with reason <var>r</var>, invoke <var>failureCallback</var> with <var>r</var> as the argument.
                    </p>
                  </li>
                  <li>
                    <p>Return a promise resolved with
                      <code>undefined</code>.</p>
                  </li>
                </ol>
                <table class="parameters">
                  <tbody>
                    <tr>
                      <th>Parameter</th>
                      <th>Type</th>
                      <th>Nullable</th>
                      <th>Optional</th>
                      <th>Description</th>
                    </tr>
                    <tr>
                      <td class="prmName">successCallback</td>
                      <td class="prmType">
                        <code>RTCSessionDescriptionCallback</code></td>
                      <td class="prmNullFalse"><span role="img" aria-label="False">âœ˜</span></td>
                      <td class="prmOptFalse"><span role="img" aria-label="False">âœ˜</span></td>
                      <td class="prmDesc"></td>
                    </tr>
                    <tr>
                      <td class="prmName">failureCallback</td>
                      <td class="prmType">
                        <code>RTCPeerConnectionErrorCallback</code></td>
                      <td class="prmNullFalse"><span role="img" aria-label="False">âœ˜</span></td>
                      <td class="prmOptFalse"><span role="img" aria-label="False">âœ˜</span></td>
                      <td class="prmDesc"></td>
                    </tr>
                  </tbody>
                </table>
                <div>
                  <em>Return type:</em> <code>Promise&lt;void&gt;</code>
                </div>
              </dd>
              <dt><dfn data-lt-nodefault="true" data-dfn-for="rtcpeerconnection" data-dfn-type="dfn" id="dom-rtcpeerconnection-setremotedescription!overload-1" data-idl=""><code>setRemoteDescription</code></dfn></dt>
              <dd>
                <p>When the <code>setRemoteDescription</code> method is called, the user agent <em class="rfc2119" title="MUST">MUST</em> run the following steps:</p>
                <ol>
                  <li>
                    <p>Let <var>description</var> be the method's first argument.
                    </p>
                  </li>
                  <li>
                    <p>Let <var>successCallback</var> be the callback indicated by the method's second argument.</p>
                  </li>
                  <li>
                    <p>Let <var>failureCallback</var> be the callback indicated by the method's third argument.</p>
                  </li>
                  <li>
                    <p>Run the steps specified by
                      <code><a href="#dom-rtcpeerconnection" class="internalDFN" data-link-type="dfn"><code>RTCPeerConnection</code></a>
                      </code>'s <a data-for="RTCPeerConnection" href="#dom-rtcpeerconnection-setremotedescription" class="internalDFN" data-link-type="dfn"><code>setRemoteDescription</code></a> method with
                      <var>description</var> as the sole argument, and let
                      <var>p</var> be the resulting promise.</p>
                  </li>
                  <li>
                    <p>Upon fulfillment of <var>p</var>, invoke
                      <var>successCallback</var> with <code>undefined</code> as the argument.</p>
                  </li>
                  <li>
                    <p>Upon rejection of <var>p</var> with reason <var>r</var>, invoke <var>failureCallback</var> with <var>r</var> as the argument.
                    </p>
                  </li>
                  <li>
                    <p>Return a promise resolved with
                      <code>undefined</code>.</p>
                  </li>
                </ol>
                <table class="parameters">
                  <tbody>
                    <tr>
                      <th>Parameter</th>
                      <th>Type</th>
                      <th>Nullable</th>
                      <th>Optional</th>
                      <th>Description</th>
                    </tr>
                    <tr>
                      <td class="prmName">description</td>
                      <td class="prmType">
                        <code>RTCSessionDescriptionInit</code></td>
                      <td class="prmNullFalse"><span role="img" aria-label="False">âœ˜</span></td>
                      <td class="prmOptFalse"><span role="img" aria-label="False">âœ˜</span></td>
                      <td class="prmDesc"></td>
                    </tr>
                    <tr>
                      <td class="prmName">successCallback</td>
                      <td class="prmType"><code>VoidFunction</code></td>
                      <td class="prmNullFalse"><span role="img" aria-label="False">âœ˜</span></td>
                      <td class="prmOptFalse"><span role="img" aria-label="False">âœ˜</span></td>
                      <td class="prmDesc"></td>
                    </tr>
                    <tr>
                      <td class="prmName">failureCallback</td>
                      <td class="prmType">
                        <code>RTCPeerConnectionErrorCallback</code></td>
                      <td class="prmNullFalse"><span role="img" aria-label="False">âœ˜</span></td>
                      <td class="prmOptFalse"><span role="img" aria-label="False">âœ˜</span></td>
                      <td class="prmDesc"></td>
                    </tr>
                  </tbody>
                </table>
                <div>
                  <em>Return type:</em> <code>Promise&lt;void&gt;</code>
                </div>
              </dd>
              <dt><code>addIceCandidate</code></dt>
              <dd>
                <p>When the <code>addIceCandidate</code> method is called, the user agent <em class="rfc2119" title="MUST">MUST</em> run the following steps:</p>
                <ol>
                  <li>
                    <p>Let <var>candidate</var> be the method's first argument.
                    </p>
                  </li>
                  <li>
                    <p>Let <var>successCallback</var> be the callback indicated by the method's second argument.</p>
                  </li>
                  <li>
                    <p>Let <var>failureCallback</var> be the callback indicated by the method's third argument.</p>
                  </li>
                  <li>
                    <p>Run the steps specified by
                      <code><a href="#dom-rtcpeerconnection" class="internalDFN" data-link-type="dfn"><code>RTCPeerConnection</code></a>
                      </code>'s addIceCandiddate() method with
                      <var>candidate</var> as the sole argument, and let
                      <var>p</var> be the resulting promise.</p>
                  </li>
                  <li>
                    <p>Upon fulfillment of <var>p</var>, invoke
                      <var>successCallback</var> with <code>undefined</code> as the argument.</p>
                  </li>
                  <li>
                    <p>Upon rejection of <var>p</var> with reason <var>r</var>, invoke <var>failureCallback</var> with <var>r</var> as the argument.
                    </p>
                  </li>
                  <li>
                    <p>Return a promise resolved with
                      <code>undefined</code>.</p>
                  </li>
                </ol>
                <table class="parameters">
                  <tbody>
                    <tr>
                      <th>Parameter</th>
                      <th>Type</th>
                      <th>Nullable</th>
                      <th>Optional</th>
                      <th>Description</th>
                    </tr>
                    <tr>
                      <td class="prmName">candidate</td>
                      <td class="prmType"><code>(RTCIceCandidateInit or
                      RTCIceCandidate)</code></td>
                      <td class="prmNullFalse"><span role="img" aria-label="False">âœ˜</span></td>
                      <td class="prmOptFalse"><span role="img" aria-label="False">âœ˜</span></td>
                      <td class="prmDesc"></td>
                    </tr>
                    <tr>
                      <td class="prmName">successCallback</td>
                      <td class="prmType"><code>VoidFunction</code></td>
                      <td class="prmNullFalse"><span role="img" aria-label="False">âœ˜</span></td>
                      <td class="prmOptFalse"><span role="img" aria-label="False">âœ˜</span></td>
                      <td class="prmDesc"></td>
                    </tr>
                    <tr>
                      <td class="prmName">failureCallback</td>
                      <td class="prmType">
                        <code>RTCPeerConnectionErrorCallback</code></td>
                      <td class="prmNullFalse"><span role="img" aria-label="False">âœ˜</span></td>
                      <td class="prmOptFalse"><span role="img" aria-label="False">âœ˜</span></td>
                      <td class="prmDesc"></td>
                    </tr>
                  </tbody>
                </table>
                <div>
                  <em>Return type:</em> <code>Promise&lt;void&gt;</code>
                </div>
              </dd>
              <dt><dfn data-dfn-for="rtcpeerconnection" data-dfn-type="dfn" id="dom-rtcpeerconnection-getstats" data-idl=""><code>getStats</code></dfn></dt>
              <dd>
                <p>When the <code>getStats</code> method is called, the user agent <em class="rfc2119" title="MUST">MUST</em> run the following steps:</p>
                <ol>
                  <li>
                    <p>Let <var>selector</var> be the method's first argument.
                    </p>
                  </li>
                  <li>
                    <p>Let <var>successCallback</var> be the callback indicated by the method's second argument.</p>
                  </li>
                  <li>
                    <p>Let <var>failureCallback</var> be the callback indicated by the method's third argument.</p>
                  </li>
                  <li>
                    <p>Run the steps specified by
                      <code><a href="#dom-rtcpeerconnection" class="internalDFN" data-link-type="dfn"><code>RTCPeerConnection</code></a>
                      </code>'s <a data-for="RTCPeerConnection" href="#widl-RTCPeerConnection-getStats-Promise-RTCStatsReport--MediaStreamTrack-selector" class="internalDFN" data-link-type="dfn">getStats()</a> method with
                      <var>selector</var> as the sole argument, and let
                      <var>p</var> be the resulting promise.</p>
                  </li>
                  <li>
                    <p>Upon fulfillment of <var>p</var> with value
                      <var>report</var>, invoke <var>successCallback</var> with
                      <var>report</var> as the argument.</p>
                  </li>
                  <li>
                    <p>Upon rejection of <var>p</var> with reason <var>r</var>, invoke <var>failureCallback</var> with <var>r</var> as the argument.
                    </p>
                  </li>
                  <li>
                    <p>Return a promise resolved with
                      <code>undefined</code>.</p>
                  </li>
                </ol>
                <table class="parameters">
                  <tbody>
                    <tr>
                      <th>Parameter</th>
                      <th>Type</th>
                      <th>Nullable</th>
                      <th>Optional</th>
                      <th>Description</th>
                    </tr>
                    <tr>
                      <td class="prmName">selector</td>
                      <td class="prmType"><code>MediaStreamTrack</code></td>
                      <td class="prmNullTrue"><span role="img" aria-label="True">âœ”</span></td>
                      <td class="prmOptFalse"><span role="img" aria-label="False">âœ˜</span></td>
                      <td class="prmDesc"></td>
                    </tr>
                    <tr>
                      <td class="prmName">successCallback</td>
                      <td class="prmType"><code>RTCStatsCallback</code></td>
                      <td class="prmNullFalse"><span role="img" aria-label="False">âœ˜</span></td>
                      <td class="prmOptFalse"><span role="img" aria-label="False">âœ˜</span></td>
                      <td class="prmDesc"></td>
                    </tr>
                    <tr>
                      <td class="prmName">failureCallback</td>
                      <td class="prmType">
                        <code>RTCPeerConnectionErrorCallback</code></td>
                      <td class="prmNullFalse"><span role="img" aria-label="False">âœ˜</span></td>
                      <td class="prmOptFalse"><span role="img" aria-label="False">âœ˜</span></td>
                      <td class="prmDesc"></td>
                    </tr>
                  </tbody>
                </table>
                <div>
                  <em>Return type:</em> <code>Promise&lt;void&gt;</code>
                </div>
              </dd>
            </dl>
          </section>
        </div>
      </section>

      <section id="garbage-collection" typeof="bibo:Chapter" resource="#garbage-collection" property="bibo:hasPart">
        <h4 id="h-garbage-collection" resource="#h-garbage-collection"><span property="xhv:role" resource="xhv:heading"><span class="secno">4.3.4 </span>Garbage collection</span>
        </h4>
        <p>An <code><a href="#dom-rtcpeerconnection" class="internalDFN" data-link-type="dfn"><code>RTCPeerConnection</code></a>
          </code> object <em class="rfc2119" title="MUST">MUST</em> not be garbage collected as long as any event can cause an event handler to be triggered on the object. When the object's [[<a href="#dfn-isclosed" class="internalDFN" data-link-type="dfn">isClosed</a>]] internal slot is <code>true</code>, no such event handler can be triggered and it is therefore safe to garbage collect the object.</p>
        <p>All <code><a href="#idl-def-rtcdatachannel" class="internalDFN" data-link-type="dfn"><code>RTCDataChannel</code></a>
          </code> and
          <code><a href="#dom-mediastreamtrack" class="internalDFN" data-link-type="dfn"><code>MediaStreamTrack</code></a>
          </code> objects that are connected to a
          <code><a href="#dom-rtcpeerconnection" class="internalDFN" data-link-type="dfn"><code>RTCPeerConnection</code></a>
          </code> have a strong reference to the
          <code><a href="#dom-rtcpeerconnection" class="internalDFN" data-link-type="dfn"><code>RTCPeerConnection</code></a>
          </code> object.</p>
      </section>
    </section>

    <section id="state-definitions" typeof="bibo:Chapter" resource="#state-definitions" property="bibo:hasPart">
      <h3 id="h-state-definitions" resource="#h-state-definitions"><span property="xhv:role" resource="xhv:heading"><span class="secno">4.4 </span>State Definitions</span>
      </h3>

      <section id="rtcsignalingstate-enum" typeof="bibo:Chapter" resource="#rtcsignalingstate-enum" property="bibo:hasPart">
        <h4 id="h-rtcsignalingstate-enum" resource="#h-rtcsignalingstate-enum"><span property="xhv:role" resource="xhv:heading"><span class="secno">4.4.1 </span>RTCSignalingState Enum</span>
        </h4>
        <div>
          <pre class="def idl"><span class="idlEnum" id="idl-def-rtcsignalingstate" data-idl="" data-title="RTCSignalingState">enum <span class="idlEnumID">RTCSignalingState</span> {
    "<a href="#dom-rtcsignalingstate-stable" class="idlEnumItem">stable</a>",
    "<a href="#dom-rtcsignalingstate-have-local-offer" class="idlEnumItem">have-local-offer</a>",
    "<a href="#dom-rtcsignalingstate-have-remote-offer" class="idlEnumItem">have-remote-offer</a>",
    "<a href="#dom-rtcsignalingstate-have-local-pranswer" class="idlEnumItem">have-local-pranswer</a>",
    "<a href="#dom-rtcsignalingstate-have-remote-pranswer" class="idlEnumItem">have-remote-pranswer</a>"
};</span></pre>
          <table data-link-for="RTCSignalingState" data-dfn-for="RTCSignalingState" class="simple">
            <tbody>
              <tr>
                <th colspan="2">Enumeration description</th>
              </tr>
              <tr>
                <td><dfn data-dfn-for="rtcsignalingstate" data-dfn-type="dfn" id="dom-rtcsignalingstate-stable" data-idl=""><code>stable</code></dfn></td>
                <td>There is no offerÂ­answer exchange in progress. This is also the initial state in which case the local and remote descriptions are empty.</td>
              </tr>
              <tr>
                <td><dfn data-dfn-for="rtcsignalingstate" data-dfn-type="dfn" id="dom-rtcsignalingstate-have-local-offer" data-idl=""><code>have-local-offer</code></dfn></td>
                <td>A local description, of type "offer", has been successfully applied.
                </td>
              </tr>
              <tr>
                <td><dfn data-dfn-for="rtcsignalingstate" data-dfn-type="dfn" id="dom-rtcsignalingstate-have-remote-offer" data-idl=""><code>have-remote-offer</code></dfn></td>
                <td>A remote description, of type "offer", has been successfully applied.</td>
              </tr>
              <tr>
                <td><dfn data-dfn-for="rtcsignalingstate" data-dfn-type="dfn" id="dom-rtcsignalingstate-have-local-pranswer" data-idl=""><code>have-local-pranswer</code></dfn></td>
                <td>A remote description of type "offer" has been successfully applied and a local description of type "pranswer" has been successfully applied.</td>
              </tr>
              <tr>
                <td><dfn data-dfn-for="rtcsignalingstate" data-dfn-type="dfn" id="dom-rtcsignalingstate-have-remote-pranswer" data-idl=""><code>have-remote-pranswer</code></dfn></td>
                <td>A local description of type "offer" has been successfully applied and a remote description of type "pranswer" has been successfully applied.</td>
              </tr>
            </tbody>
          </table>
        </div>
        <figure id="fig-non-normative-signalling-state-transitions-diagram">
          <img alt="signalling state transition diagram" src="images/peerstates.svg" width="600">
          <figcaption>Fig. <span class="figno">1</span> <span class="fig-title">
            Non-normative signalling state transitions diagram
          </span></figcaption>
        </figure>
        <p>An example set of transitions might be:</p>
        <dl>
          <dt>Caller transition:</dt>
          <dd>
            <ul>
              <li>new RTCPeerConnection(): <code>stable</code></li>
              <li>setLocal(offer): <code>have-local-offer</code></li>
              <li>setRemote(pranswer): <code>have-remote-pranswer</code></li>
              <li>setRemote(answer): <code>stable</code></li>
            </ul>
          </dd>
          <dt>Callee transition:</dt>
          <dd>
            <ul>
              <li>new RTCPeerConnection(): <code>stable</code></li>
              <li>setRemote(offer): <code>have-remote-offer</code></li>
              <li>setLocal(pranswer): <code>have-local-pranswer</code></li>
              <li>setLocal(answer): <code>stable</code></li>
            </ul>
          </dd>
        </dl>
      </section>

      <section id="rtcicegatheringstate-enum" typeof="bibo:Chapter" resource="#rtcicegatheringstate-enum" property="bibo:hasPart">
        <h4 id="h-rtcicegatheringstate-enum" resource="#h-rtcicegatheringstate-enum"><span property="xhv:role" resource="xhv:heading"><span class="secno">4.4.2 </span>RTCIceGatheringState Enum</span>
        </h4>
        <div>
          <pre class="def idl"><span class="idlEnum" id="idl-def-rtcicegatheringstate" data-idl="" data-title="RTCIceGatheringState">enum <span class="idlEnumID">RTCIceGatheringState</span> {
    "<a href="#dom-rtcicegatheringstate-new" class="idlEnumItem">new</a>",
    "<a href="#dom-rtcicegatheringstate-gathering" class="idlEnumItem">gathering</a>",
    "<a href="#dom-rtcicegatheringstate-complete" class="idlEnumItem">complete</a>"
};</span></pre>
          <table data-link-for="RTCIceGatheringState" data-dfn-for="RTCIceGatheringState" class="simple">
            <tbody>
              <tr>
                <th colspan="2">Enumeration description</th>
              </tr>
              <tr>
                <td><dfn data-dfn-for="rtcicegatheringstate" data-dfn-type="dfn" id="dom-rtcicegatheringstate-new" data-idl=""><code>new</code></dfn></td>
                <td>Any of the <code><a href="#idl-def-rtcicetransport" class="internalDFN" data-link-type="dfn"><code>RTCIceTransport</code></a>
                  </code>s are in the
                  <code>new</code> gathering state and none of the transports are in the <code>gathering</code> state, or there are no transports.
                </td>
              </tr>
              <tr>
                <td><dfn data-dfn-for="rtcicegatheringstate" data-dfn-type="dfn" id="dom-rtcicegatheringstate-gathering" data-idl=""><code>gathering</code></dfn></td>
                <td>Any of the <code><a href="#idl-def-rtcicetransport" class="internalDFN" data-link-type="dfn"><code>RTCIceTransport</code></a>
                  </code>s are in the
                  <code>gathering</code> state.</td>
              </tr>
              <tr>
                <td><dfn data-dfn-for="rtcicegatheringstate" data-dfn-type="dfn" id="dom-rtcicegatheringstate-complete" data-idl=""><code>complete</code></dfn></td>
                <td>At least one <code><a href="#idl-def-rtcicetransport" class="internalDFN" data-link-type="dfn"><code>RTCIceTransport</code></a>
                  </code> exists, and all <code><a href="#idl-def-rtcicetransport" class="internalDFN" data-link-type="dfn"><code>RTCIceTransport</code></a>
                  </code>s are in the
                  <code>completed</code> gathering state.</td>
              </tr>
            </tbody>
          </table>
        </div>
      </section>

      <section id="rtcpeerconnectionstate-enum" typeof="bibo:Chapter" resource="#rtcpeerconnectionstate-enum" property="bibo:hasPart">
        <h4 id="h-rtcpeerconnectionstate-enum" resource="#h-rtcpeerconnectionstate-enum"><span property="xhv:role" resource="xhv:heading"><span class="secno">4.4.3 </span>RTCPeerConnectionState Enum</span>
        </h4>
        <div>
          <pre class="def idl"><span class="idlEnum" id="idl-def-rtcpeerconnectionstate" data-idl="" data-title="RTCPeerConnectionState">enum <span class="idlEnumID">RTCPeerConnectionState</span> {
    "<a href="#dom-rtcpeerconnectionstate-new" class="idlEnumItem">new</a>",
    "<a href="#dom-rtcpeerconnectionstate-connecting" class="idlEnumItem">connecting</a>",
    "<a href="#dom-rtcpeerconnectionstate-connected" class="idlEnumItem">connected</a>",
    "<a href="#dom-rtcpeerconnectionstate-disconnected" class="idlEnumItem">disconnected</a>",
    "<a href="#dom-rtcpeerconnectionstate-failed" class="idlEnumItem">failed</a>",
    "<a href="#dom-rtcpeerconnectionstate-closed" class="idlEnumItem">closed</a>"
};</span></pre>
          <table data-link-for="RTCPeerConnectionState" data-dfn-for="RTCPeerConnectionState" class="simple">
            <tbody>
              <tr>
                <th colspan="2">Enumeration description</th>
              </tr>
              <tr>
                <td><dfn data-dfn-for="rtcpeerconnectionstate" data-dfn-type="dfn" id="dom-rtcpeerconnectionstate-new" data-idl=""><code>new</code></dfn></td>
                <td>Any of the <code><a href="#idl-def-rtcicetransport" class="internalDFN" data-link-type="dfn"><code>RTCIceTransport</code></a>
                  </code>s or
                  <code><a href="#idl-def-rtcdtlstransport" class="internalDFN" data-link-type="dfn"><code>RTCDtlsTransport</code></a>
                  </code>s are in the
                  <code>new</code> state and none of the transports are in the
                  <code>connecting</code>, <code>checking</code>,
                  <code>failed</code> or <code>disconnected</code> state, or all transports are in the <code>closed</code> state.</td>
              </tr>
              <tr>
                <td><dfn data-dfn-for="rtcpeerconnectionstate" data-dfn-type="dfn" id="dom-rtcpeerconnectionstate-connecting" data-idl=""><code>connecting</code></dfn></td>
                <td>Any of the <code><a href="#idl-def-rtcicetransport" class="internalDFN" data-link-type="dfn"><code>RTCIceTransport</code></a>
                  </code>s or
                  <code><a href="#idl-def-rtcdtlstransport" class="internalDFN" data-link-type="dfn"><code>RTCDtlsTransport</code></a>
                  </code>s are in the
                  <code>connecting</code> or <code>checking</code> state and none of them is in the <code>failed</code> state.</td>
              </tr>
              <tr>
                <td><dfn data-dfn-for="rtcpeerconnectionstate" data-dfn-type="dfn" id="dom-rtcpeerconnectionstate-connected" data-idl=""><code>connected</code></dfn></td>
                <td>All <code><a href="#idl-def-rtcicetransport" class="internalDFN" data-link-type="dfn"><code>RTCIceTransport</code></a>
                  </code>s and
                  <code><a href="#idl-def-rtcdtlstransport" class="internalDFN" data-link-type="dfn"><code>RTCDtlsTransport</code></a>
                  </code>s are in the
                  <code>connected</code>, <code>completed</code> or
                  <code>closed</code> state and at least of them is in the
                  <code>connected</code> or <code>completed</code> state.</td>
              </tr>
              <tr>
                <td><dfn data-dfn-for="rtcpeerconnectionstate" data-dfn-type="dfn" id="dom-rtcpeerconnectionstate-disconnected" data-idl=""><code>disconnected</code></dfn></td>
                <td>Any of the <code><a href="#idl-def-rtcicetransport" class="internalDFN" data-link-type="dfn"><code>RTCIceTransport</code></a>
                  </code>s or
                  <code><a href="#idl-def-rtcdtlstransport" class="internalDFN" data-link-type="dfn"><code>RTCDtlsTransport</code></a>
                  </code>s are in the
                  <code>disconnected</code> state and none of them are in the
                  <code>failed</code> or <code>connecting</code> or
                  <code>checking</code> state.</td>
              </tr>
              <tr>
                <td><dfn data-dfn-for="rtcpeerconnectionstate" data-dfn-type="dfn" id="dom-rtcpeerconnectionstate-failed" data-idl=""><code>failed</code></dfn></td>
                <td>Any of the <code><a href="#idl-def-rtcicetransport" class="internalDFN" data-link-type="dfn"><code>RTCIceTransport</code></a>
                  </code>s or
                  <code><a href="#idl-def-rtcdtlstransport" class="internalDFN" data-link-type="dfn"><code>RTCDtlsTransport</code></a>
                  </code>s are in a
                  <code>failed</code> state.</td>
              </tr>
              <tr>
                <td><dfn data-dfn-for="rtcpeerconnectionstate" data-dfn-type="dfn" id="dom-rtcpeerconnectionstate-closed" data-idl=""><code>closed</code></dfn></td>
                <td>
                  The <code><a href="#dom-rtcpeerconnection" class="internalDFN" data-link-type="dfn"><code>RTCPeerConnection</code></a>
                  </code> object's [[
                  <a href="#dfn-isclosed" class="internalDFN" data-link-type="dfn">isClosed</a>]] slot is <code>true</code>.
                </td>
              </tr>
            </tbody>
          </table>
        </div>
      </section>

      <section id="rtciceconnectionstate-enum" typeof="bibo:Chapter" resource="#rtciceconnectionstate-enum" property="bibo:hasPart">
        <h4 id="h-rtciceconnectionstate-enum" resource="#h-rtciceconnectionstate-enum"><span property="xhv:role" resource="xhv:heading"><span class="secno">4.4.4 </span>RTCIceConnectionState Enum</span>
        </h4>
        <div>
          <pre class="def idl"><span class="idlEnum" id="idl-def-rtciceconnectionstate" data-idl="" data-title="RTCIceConnectionState">enum <span class="idlEnumID">RTCIceConnectionState</span> {
    "<a href="#dom-rtciceconnectionstate-new" class="idlEnumItem">new</a>",
    "<a href="#dom-rtciceconnectionstate-checking" class="idlEnumItem">checking</a>",
    "<a href="#dom-rtciceconnectionstate-connected" class="idlEnumItem">connected</a>",
    "<a href="#dom-rtciceconnectionstate-completed" class="idlEnumItem">completed</a>",
    "<a href="#dom-rtciceconnectionstate-failed" class="idlEnumItem">failed</a>",
    "<a href="#dom-rtciceconnectionstate-disconnected" class="idlEnumItem">disconnected</a>",
    "<a href="#dom-rtciceconnectionstate-closed" class="idlEnumItem">closed</a>"
};</span></pre>
          <table data-link-for="RTCIceConnectionState" data-dfn-for="RTCIceConnectionState" class="simple">
            <tbody>
              <tr>
                <th colspan="2">Enumeration description</th>
              </tr>
              <tr>
                <td><dfn data-dfn-for="rtciceconnectionstate" data-dfn-type="dfn" id="dom-rtciceconnectionstate-new" data-idl=""><code>new</code></dfn></td>
                <td>Any of the <code><a href="#idl-def-rtcicetransport" class="internalDFN" data-link-type="dfn"><code>RTCIceTransport</code></a>
                  </code>s are in the
                  <code>new</code> state and none of them are in the
                  <code>checking</code>, <code>failed</code> or
                  <code>disconnected</code> state, or all
                  <code><a href="#idl-def-rtcicetransport" class="internalDFN" data-link-type="dfn"><code>RTCIceTransport</code></a>
                  </code>s are in the
                  <code>closed</code> state.</td>
              </tr>
              <tr>
                <td><dfn data-dfn-for="rtciceconnectionstate" data-dfn-type="dfn" id="dom-rtciceconnectionstate-checking" data-idl=""><code>checking</code></dfn></td>
                <td>Any of the <code><a href="#idl-def-rtcicetransport" class="internalDFN" data-link-type="dfn"><code>RTCIceTransport</code></a>
                  </code>s are in the
                  <code>checking</code> state and none of them are in the
                  <code>failed</code> or <code>disconnected</code> state.</td>
              </tr>
              <tr>
                <td><dfn data-dfn-for="rtciceconnectionstate" data-dfn-type="dfn" id="dom-rtciceconnectionstate-connected" data-idl=""><code>connected</code></dfn></td>
                <td>All <code><a href="#idl-def-rtcicetransport" class="internalDFN" data-link-type="dfn"><code>RTCIceTransport</code></a>
                  </code>s are in the
                  <code>connected</code>, <code>completed</code> or
                  <code>closed</code> state and at least one of them is in the
                  <code>connected</code> state.</td>
              </tr>
              <tr>
                <td><dfn data-dfn-for="rtciceconnectionstate" data-dfn-type="dfn" id="dom-rtciceconnectionstate-completed" data-idl=""><code>completed</code></dfn></td>
                <td>All <code><a href="#idl-def-rtcicetransport" class="internalDFN" data-link-type="dfn"><code>RTCIceTransport</code></a>
                  </code>s are in the
                  <code>completed</code> or <code>closed</code> state and at least one of them is in the <code>completed</code> state.</td>
              </tr>
              <tr>
                <td><dfn data-dfn-for="rtciceconnectionstate" data-dfn-type="dfn" id="dom-rtciceconnectionstate-failed" data-idl=""><code>failed</code></dfn></td>
                <td>Any of the <code><a href="#idl-def-rtcicetransport" class="internalDFN" data-link-type="dfn"><code>RTCIceTransport</code></a>
                  </code>s are in the
                  <code>failed</code> state.</td>
              </tr>
              <tr>
                <td><dfn data-dfn-for="rtciceconnectionstate" data-dfn-type="dfn" id="dom-rtciceconnectionstate-disconnected" data-idl=""><code>disconnected</code></dfn></td>
                <td>Any of the <code><a href="#idl-def-rtcicetransport" class="internalDFN" data-link-type="dfn"><code>RTCIceTransport</code></a>
                  </code>s are in the
                  <code>disconnected</code> state and none of them are in the
                  <code>failed</code> state.</td>
              </tr>
              <tr>
                <td><dfn data-dfn-for="rtciceconnectionstate" data-dfn-type="dfn" id="dom-rtciceconnectionstate-closed" data-idl=""><code>closed</code></dfn></td>
                <td>
                  The <code><a href="#dom-rtcpeerconnection" class="internalDFN" data-link-type="dfn"><code>RTCPeerConnection</code></a>
                  </code> object's [[
                  <a href="#dfn-isclosed" class="internalDFN" data-link-type="dfn">isClosed</a>]] slot is <code>true</code>.
                </td>
              </tr>
            </tbody>
          </table>
        </div>
        <p>Note that if an <code><a href="#idl-def-rtcicetransport" class="internalDFN" data-link-type="dfn"><code>RTCIceTransport</code></a>
          </code> is discarded as a result of signaling (e.g. RTCP mux or bundling), or created as a result of signaling (e.g. adding a new <a href="#dfn-media-description" class="internalDFN" data-link-type="dfn">media description</a>), the state may advance directly from one state to another.</p>
      </section>
    </section>

    <section id="callback-definitions" typeof="bibo:Chapter" resource="#callback-definitions" property="bibo:hasPart">
      <h3 id="h-callback-definitions" resource="#h-callback-definitions"><span property="xhv:role" resource="xhv:heading"><span class="secno">4.5 </span>Callback Definitions</span>
      </h3>

      <section id="rtcpeerconnectionerrorcallback" typeof="bibo:Chapter" resource="#rtcpeerconnectionerrorcallback" property="bibo:hasPart">
        <h4 id="h-rtcpeerconnectionerrorcallback" resource="#h-rtcpeerconnectionerrorcallback"><span property="xhv:role" resource="xhv:heading"><span class="secno">4.5.1 </span>RTCPeerConnectionErrorCallback</span>
        </h4>
        <div>
          <pre class="def idl"><span class="idlCallback" id="idl-def-rtcpeerconnectionerrorcallback" data-idl="" data-title="RTCPeerConnectionErrorCallback">callback <span class="idlCallbackID">RTCPeerConnectionErrorCallback</span> = <span class="idlCallbackType">void</span> (<span class="idlParam"><span class="idlParamType">DOMException</span> <span class="idlParamName">error</span></span>);</span></pre>

          <section typeof="bibo:Chapter" resource="#callback-rtcpeerconnectionerrorcallback-parameters" property="bibo:hasPart">
            <h5 id="callback-rtcpeerconnectionerrorcallback-parameters" resource="#callback-rtcpeerconnectionerrorcallback-parameters"><span property="xhv:role" resource="xhv:heading">Callback <a class="idlType internalDFN" href="#idl-def-rtcpeerconnectionerrorcallback" data-link-type="dfn"><code>RTCPeerConnectionErrorCallback</code></a>
            Parameters</span></h5>
            <dl data-link-for="RTCPeerConnectionErrorCallback" data-dfn-for="RTCPeerConnectionErrorCallback" class="callback-members">
              <dt><code>error</code> of type <span class="idlMemberType">DOMException</span></dt>
              <dd>An error object encapsulating information about what went wrong.
              </dd>
            </dl>
          </section>
        </div>
      </section>

      <section id="rtcsessiondescriptioncallback" typeof="bibo:Chapter" resource="#rtcsessiondescriptioncallback" property="bibo:hasPart">
        <h4 id="h-rtcsessiondescriptioncallback" resource="#h-rtcsessiondescriptioncallback"><span property="xhv:role" resource="xhv:heading"><span class="secno">4.5.2 </span>RTCSessionDescriptionCallback</span>
        </h4>
        <div>
          <pre class="def idl"><span class="idlCallback" id="idl-def-rtcsessiondescriptioncallback" data-idl="" data-title="RTCSessionDescriptionCallback">callback <span class="idlCallbackID">RTCSessionDescriptionCallback</span> = <span class="idlCallbackType">void</span> (<span class="idlParam"><span class="idlParamType"><a href="#idl-def-rtcsessiondescription" class="internalDFN" data-link-type="dfn"><code>RTCSessionDescription</code></a></span> <span class="idlParamName">sdp</span></span>);</span></pre>

          <section typeof="bibo:Chapter" resource="#callback-rtcsessiondescriptioncallback-parameters" property="bibo:hasPart">
            <h5 id="callback-rtcsessiondescriptioncallback-parameters" resource="#callback-rtcsessiondescriptioncallback-parameters"><span property="xhv:role" resource="xhv:heading">Callback <a class="idlType internalDFN" href="#idl-def-rtcsessiondescriptioncallback" data-link-type="dfn"><code>RTCSessionDescriptionCallback</code></a>
            Parameters</span></h5>
            <dl data-link-for="RTCSessionDescriptionCallback" data-dfn-for="RTCSessionDescriptionCallback" class="callback-members">
              <dt><code>sdp</code> of type <span class="idlMemberType"><a href="#idl-def-rtcsessiondescription" class="internalDFN" data-link-type="dfn"><code>RTCSessionDescription</code></a></span></dt>
              <dd>The object containing the SDP [<cite><a class="bibref" href="#bib-SDP">SDP</a></cite>].</dd>
            </dl>
          </section>
        </div>
      </section>
    </section>

    <section id="error-handling" typeof="bibo:Chapter" resource="#error-handling" property="bibo:hasPart">
      <h3 id="h-error-handling" resource="#h-error-handling"><span property="xhv:role" resource="xhv:heading"><span class="secno">4.6 </span>Error Handling</span>
      </h3>

      <section id="general-principles" typeof="bibo:Chapter" resource="#general-principles" property="bibo:hasPart">
        <h4 id="h-general-principles" resource="#h-general-principles"><span property="xhv:role" resource="xhv:heading"><span class="secno">4.6.1 </span>General Principles</span>
        </h4>
        <p>All methods that return promises are governed by the standard error handling rules of promises. Methods that do not return promises may throw exceptions to indicate errors.</p>
        <p>Legacy-methods may only throw exceptions to indicate invalid state and other programming errors. For example, when a legacy-method is called when the <code><a href="#dom-rtcpeerconnection" class="internalDFN" data-link-type="dfn"><code>RTCPeerConnection</code></a>
          </code> is in an invalid state or a state in which that particular method is not allowed to be executed, it will throw an exception. In all other cases, legacy methods <em class="rfc2119" title="MUST">MUST</em> provide an error object to the error callback.</p>
      </section>
    </section>

    <section id="session-description-model" typeof="bibo:Chapter" resource="#session-description-model" property="bibo:hasPart">
      <h3 id="h-session-description-model" resource="#h-session-description-model"><span property="xhv:role" resource="xhv:heading"><span class="secno">4.7 </span>Session Description Model</span>
      </h3>

      <section id="rtcsdptype" typeof="bibo:Chapter" resource="#rtcsdptype" property="bibo:hasPart">
        <h4 id="h-rtcsdptype" resource="#h-rtcsdptype"><span property="xhv:role" resource="xhv:heading"><span class="secno">4.7.1 </span>RTCSdpType</span>
        </h4>
        <p>The RTCSdpType enum describes the type of an
          <code><a href="#idl-def-rtcsessiondescriptioninit" class="internalDFN" data-link-type="dfn"><code>RTCSessionDescriptionInit</code></a>
          </code> or
          <code><a href="#idl-def-rtcsessiondescription" class="internalDFN" data-link-type="dfn"><code>RTCSessionDescription</code></a>
          </code> instance.</p>
        <div>
          <pre class="def idl"><span class="idlEnum" id="idl-def-rtcsdptype" data-idl="" data-title="RTCSdpType">enum <span class="idlEnumID">RTCSdpType</span> {
    "<a href="#dom-rtcsdptype-offer" class="idlEnumItem">offer</a>",
    "<a href="#dom-rtcsdptype-pranswer" class="idlEnumItem">pranswer</a>",
    "<a href="#dom-rtcsdptype-answer" class="idlEnumItem">answer</a>",
    "<a href="#dom-rtcsdptype-rollback" class="idlEnumItem">rollback</a>"
};</span></pre>
          <table data-link-for="RTCSdpType" data-dfn-for="RTCSdpType" class="simple">
            <tbody>
              <tr>
                <th colspan="2">Enumeration description</th>
              </tr>
              <tr>
                <td><dfn data-dfn-for="rtcsdptype" data-dfn-type="dfn" id="dom-rtcsdptype-offer" data-idl=""><code>offer</code></dfn></td>
                <td>
                  <p>An <code>RTCSdpType</code> of <code>offer</code> indicates that a description <em class="rfc2119" title="MUST">MUST</em> be treated as an [<cite><a class="bibref" href="#bib-SDP">SDP</a></cite>] offer.</p>
                </td>
              </tr>
              <tr>
                <td><dfn data-dfn-for="rtcsdptype" data-dfn-type="dfn" id="dom-rtcsdptype-pranswer" data-idl=""><code>pranswer</code></dfn></td>
                <td>
                  <p>An <code>RTCSdpType</code> of <code>pranswer</code> indicates that a description <em class="rfc2119" title="MUST">MUST</em> be treated as an [<cite><a class="bibref" href="#bib-SDP">SDP</a></cite>] answer, but not a final answer. A description used as an SDP
                    <code>pranswer</code> may be applied as a response to an SDP offer, or an update to a previously sent SDP pranswer.</p>
                </td>
              </tr>
              <tr>
                <td><dfn data-dfn-for="rtcsdptype" data-dfn-type="dfn" id="dom-rtcsdptype-answer" data-idl=""><code>answer</code></dfn></td>
                <td>
                  <p>An <code>RTCSdpType</code> of <code>answer</code> indicates that a description <em class="rfc2119" title="MUST">MUST</em> be treated as an [<cite><a class="bibref" href="#bib-SDP">SDP</a></cite>] final answer, and the offer-answer exchange <em class="rfc2119" title="MUST">MUST</em> be considered complete. A description used as an SDP answer may be applied as a response to an SDP offer or as an update to a previously sent SDP pranswer.</p>
                </td>
              </tr>
              <tr>
                <td><dfn data-dfn-for="rtcsdptype" data-dfn-type="dfn" id="dom-rtcsdptype-rollback" data-idl=""><code>rollback</code></dfn></td>
                <td>
                  <p>An <code>RTCSdpType</code> of <code>rollback</code> indicates that a description <em class="rfc2119" title="MUST">MUST</em> be treated as canceling the current SDP negotiation and moving the SDP [<cite><a class="bibref" href="#bib-SDP">SDP</a></cite>] offer and answer back to what it was in the previous stable state. Note the local or remote SDP descriptions in the previous stable state could be null if there has not yet been a successful offer-answer negotiation.</p>
                </td>
              </tr>
            </tbody>
          </table>
        </div>
      </section>

      <section id="rtcsessiondescription-class" typeof="bibo:Chapter" resource="#rtcsessiondescription-class" property="bibo:hasPart">
        <h4 id="h-rtcsessiondescription-class" resource="#h-rtcsessiondescription-class"><span property="xhv:role" resource="xhv:heading"><span class="secno">4.7.2 </span>RTCSessionDescription Class</span>
        </h4>
        <p>The <code>RTCSessionDescription</code> class is used by
          <code><a href="#dom-rtcpeerconnection" class="internalDFN" data-link-type="dfn"><code>RTCPeerConnection</code></a>
          </code> to expose local and remote session descriptions. Attributes on this interface are mutable for legacy reasons.</p>
        <div>
          <pre class="def idl"><span class="idlInterface" id="idl-def-rtcsessiondescription" data-idl="" data-title="RTCSessionDescription">[<span class="idlCtor"><span class="extAttrName">Constructor</span>(<span class="idlParam"><span class="idlParamType"><a href="#idl-def-rtcsessiondescriptioninit" class="internalDFN" data-link-type="dfn"><code>RTCSessionDescriptionInit</code></a></span> <span class="idlParamName">descriptionInitDict</span></span>)</span>]
interface <span class="idlInterfaceID">RTCSessionDescription</span> {
<span class="idlAttribute" id="idl-def-rtcsessiondescription-type" data-idl="" data-title="type" data-dfn-for="rtcsessiondescription">    readonly attribute <span class="idlAttrType"><a href="#idl-def-rtcsdptype" class="internalDFN" data-link-type="dfn"><code>RTCSdpType</code></a></span> <span class="idlAttrName"><a data-lt="type" href="#dom-rtcsessiondescription-type" class="internalDFN" data-link-type="dfn" data-for="RTCSessionDescription"><code>type</code></a></span>;</span>
<span class="idlAttribute" id="idl-def-rtcsessiondescription-sdp" data-idl="" data-title="sdp" data-dfn-for="rtcsessiondescription">    readonly attribute <span class="idlAttrType">DOMString</span>  <span class="idlAttrName"><a data-lt="sdp" href="#dom-rtcsessiondescription-sdp" class="internalDFN" data-link-type="dfn" data-for="RTCSessionDescription"><code>sdp</code></a></span>;</span>
<span class="idlSerializer" id="idl-def-rtcsessiondescription-serializer" data-idl="" data-title="serializer" data-dfn-for="rtcsessiondescription">    serializer = <span class="idlSerializerValues">{attribute}</span>;</span>
};</span></pre>

          <section typeof="bibo:Chapter" resource="#constructors-1" property="bibo:hasPart">
            <h5 id="constructors-1" resource="#constructors-1"><span property="xhv:role" resource="xhv:heading">Constructors</span></h5>
            <dl data-link-for="RTCSessionDescription" data-dfn-for="RTCSessionDescription" class="constructors">
              <dt><code>RTCSessionDescription</code></dt>
              <dd>
                The <dfn id="dom-sessiondescription" data-dfn-type="dfn"><code>RTCSessionDescription()</code></dfn> constructor takes a dictionary argument,
                <var>descriptionInitDict</var>, whose content is used to initialize the new <code><a href="#idl-def-rtcsessiondescription" class="internalDFN" data-link-type="dfn"><code>RTCSessionDescription</code></a>
                </code>
                object. This constructor is deprecated; it exists for legacy compatibility reasons only.
                <table class="parameters">
                  <tbody>
                    <tr>
                      <th>Parameter</th>
                      <th>Type</th>
                      <th>Nullable</th>
                      <th>Optional</th>
                      <th>Description</th>
                    </tr>
                    <tr>
                      <td class="prmName">descriptionInitDict</td>
                      <td class="prmType">
                        <code>RTCSessionDescriptionInit</code></td>
                      <td class="prmNullFalse"><span role="img" aria-label="False">âœ˜</span></td>
                      <td class="prmOptFalse"><span role="img" aria-label="False">âœ˜</span></td>
                      <td class="prmDesc"></td>
                    </tr>
                  </tbody>
                </table>
              </dd>
            </dl>
          </section>

          <section typeof="bibo:Chapter" resource="#attributes-1" property="bibo:hasPart">
            <h5 id="attributes-1" resource="#attributes-1"><span property="xhv:role" resource="xhv:heading">Attributes</span></h5>
            <dl data-link-for="RTCSessionDescription" data-dfn-for="RTCSessionDescription" class="attributes">
              <dt><dfn data-dfn-for="rtcsessiondescription" data-dfn-type="dfn" id="dom-rtcsessiondescription-type" data-idl=""><code>type</code></dfn> of type <span class="idlAttrType"><a href="#idl-def-rtcsdptype" class="internalDFN" data-link-type="dfn"><code>RTCSdpType</code></a></span>, readonly</dt>
              <dd>The type of this RTCSessionDescription.</dd>
              <dt><dfn data-dfn-for="rtcsessiondescription" data-dfn-type="dfn" id="dom-rtcsessiondescription-sdp" data-idl=""><code>sdp</code></dfn> of type <span class="idlAttrType">DOMString</span>, readonly</dt>
              <dd>The string representation of the SDP [<cite><a class="bibref" href="#bib-SDP">SDP</a></cite>].</dd>
            </dl>
          </section>

          <section typeof="bibo:Chapter" resource="#serializer" property="bibo:hasPart">
            <h5 id="serializer" resource="#serializer"><span property="xhv:role" resource="xhv:heading">Serializer</span></h5>
            <div>
              <p>Instances of this interface are serialized as a map with entries for each of the serializable attributes.</p>
            </div>
          </section>
        </div>
        <div>
          <pre class="def idl"><span class="idlDictionary" id="idl-def-rtcsessiondescriptioninit" data-idl="" data-title="RTCSessionDescriptionInit">dictionary <span class="idlDictionaryID">RTCSessionDescriptionInit</span> {
<span class="idlMember" id="idl-def-rtcsessiondescriptioninit-type" data-idl="" data-title="type" data-dfn-for="rtcsessiondescriptioninit">    required <span class="idlMemberType"><a href="#idl-def-rtcsdptype" class="internalDFN" data-link-type="dfn"><code>RTCSdpType</code></a></span> <span class="idlMemberName"><a data-lt="type" href="#dom-rtcsessiondescriptioninit-type" class="internalDFN" data-link-type="dfn" data-for="RTCSessionDescriptionInit"><code>type</code></a></span>;</span>
<span class="idlMember" id="idl-def-rtcsessiondescriptioninit-sdp" data-idl="" data-title="sdp" data-dfn-for="rtcsessiondescriptioninit">             <span class="idlMemberType">DOMString</span>  <span class="idlMemberName"><a data-lt="sdp" href="#dom-rtcsessiondescriptioninit-sdp" class="internalDFN" data-link-type="dfn" data-for="RTCSessionDescriptionInit"><code>sdp</code></a></span> = <span class="idlMemberValue">""</span>;</span>
};</span></pre>

          <section typeof="bibo:Chapter" resource="#dictionary-rtcsessiondescriptioninit-members" property="bibo:hasPart">
            <h5 id="dictionary-rtcsessiondescriptioninit-members" resource="#dictionary-rtcsessiondescriptioninit-members"><span property="xhv:role" resource="xhv:heading">Dictionary <a class="idlType internalDFN" href="#idl-def-rtcsessiondescriptioninit" data-link-type="dfn"><code>RTCSessionDescriptionInit</code></a>
            Members</span></h5>
            <dl data-link-for="RTCSessionDescriptionInit" data-dfn-for="RTCSessionDescriptionInit" class="dictionary-members">
              <dt><dfn data-dfn-for="rtcsessiondescriptioninit" data-dfn-type="dfn" id="dom-rtcsessiondescriptioninit-type" data-idl=""><code>type</code></dfn> of type <span class="idlMemberType"><a href="#idl-def-rtcsdptype" class="internalDFN" data-link-type="dfn"><code>RTCSdpType</code></a></span>, required</dt>
              <dd>DOMString sdp</dd>
              <dt><dfn data-dfn-for="rtcsessiondescriptioninit" data-dfn-type="dfn" id="dom-rtcsessiondescriptioninit-sdp" data-idl=""><code>sdp</code></dfn> of type <span class="idlMemberType">DOMString</span></dt>
              <dd>The string representation of the SDP [<cite><a class="bibref" href="#bib-SDP">SDP</a></cite>]; if
                <code>type</code> is <code>rollback</code>, this member is unused.
              </dd>
            </dl>
          </section>
        </div>
      </section>
    </section>

    <section id="session-negotiation-model" typeof="bibo:Chapter" resource="#session-negotiation-model" property="bibo:hasPart">
      <h3 id="h-session-negotiation-model" resource="#h-session-negotiation-model"><span property="xhv:role" resource="xhv:heading"><span class="secno">4.8 </span>Session Negotiation Model</span>
      </h3>
      <p>Many changes to state of an <code><a href="#dom-rtcpeerconnection" class="internalDFN" data-link-type="dfn"><code>RTCPeerConnection</code></a>
        </code> will require communication with the remote side via the signaling channel, in order to have the desired effect. The app can be kept informed as to when it needs to do signaling, by listening to the
        <code>negotiationneeded</code> event. This event is fired according to the state of the connection's <dfn data-dfn-type="dfn" id="dfn-negotiation-needed-flag">negotiation-needed flag</dfn>, represented by a [[<a href="#dfn-neednegotiation" class="internalDFN" data-link-type="dfn">needNegotiation</a>]] internal slot.</p>

      <section class="informative" id="setting-negotiation-needed" typeof="bibo:Chapter" resource="#setting-negotiation-needed" property="bibo:hasPart">
        <h4 id="h-setting-negotiation-needed" resource="#h-setting-negotiation-needed"><span property="xhv:role" resource="xhv:heading"><span class="secno">4.8.1 </span>Setting Negotiation-Needed</span>
        </h4>
        <p><em>This section is non-normative.</em></p>
        <p>If an operation is performed on an
          <code><a href="#dom-rtcpeerconnection" class="internalDFN" data-link-type="dfn"><code>RTCPeerConnection</code></a>
          </code> that requires signaling, the connection will be marked as needing negotiation. Examples of such operations include adding or stopping an
          <code><a href="#idl-def-rtcrtptransceiver" class="internalDFN" data-link-type="dfn"><code>RTCRtpTransceiver</code></a>
          </code>, or adding the first <code><a href="#idl-def-rtcdatachannel" class="internalDFN" data-link-type="dfn"><code>
        RTCDataChannel</code></a>
          </code>.</p>
        <p>Internal changes within the implementation can also result in the connection being marked as needing negotiation.</p>
        <p>Note that the exact procedures for <a data-lt="update the
        negotiation-needed flag" href="#dfn-update-the-negotiation-needed-flag" class="internalDFN" data-link-type="dfn">updating the negotiation-needed flag</a> are specified below.</p>
      </section>

      <section class="informative" id="clearing-negotiation-needed" typeof="bibo:Chapter" resource="#clearing-negotiation-needed" property="bibo:hasPart">
        <h4 id="h-clearing-negotiation-needed" resource="#h-clearing-negotiation-needed"><span property="xhv:role" resource="xhv:heading"><span class="secno">4.8.2 </span>Clearing Negotiation-Needed</span>
        </h4>
        <p><em>This section is non-normative.</em></p>
        <p>The negotiation-needed flag is cleared when an
          <code><a href="#idl-def-rtcsessiondescription" class="internalDFN" data-link-type="dfn"><code>RTCSessionDescription</code></a>
          </code> of type "answer" <a href="#set-description">is applied</a>, and the supplied description matches the state of the
          <code><a href="#idl-def-rtcrtptransceiver" class="internalDFN" data-link-type="dfn"><code>RTCRtpTransceiver</code></a>
          </code>s and
          <code><a href="#idl-def-rtcdatachannel" class="internalDFN" data-link-type="dfn"><code>RTCDataChannel</code></a>
          </code>s that currently exist on the
          <code><a href="#dom-rtcpeerconnection" class="internalDFN" data-link-type="dfn"><code>RTCPeerConnection</code></a>
          </code>. Specifically, this means that all non-
          <a data-for="RTCRtpTransceiver" href="#dom-rtcrtptransceiver-stopped" class="internalDFN" data-link-type="dfn"><code>stopped</code></a> transceivers have an associated section in the local description with matching properties, and, if any data channels have been created, a data section exists in the local description.</p>
        <p>Note that the exact procedures for <a data-lt="update the
        negotiation-needed flag" href="#dfn-update-the-negotiation-needed-flag" class="internalDFN" data-link-type="dfn">updating the negotiation-needed flag</a> are specified below.</p>
      </section>

      <section id="updating-the-negotiation-needed-flag" typeof="bibo:Chapter" resource="#updating-the-negotiation-needed-flag" property="bibo:hasPart">
        <h4 id="h-updating-the-negotiation-needed-flag" resource="#h-updating-the-negotiation-needed-flag"><span property="xhv:role" resource="xhv:heading"><span class="secno">4.8.3 </span>Updating the Negotiation-Needed flag</span>
        </h4>
        <p>The process below occurs where referenced elsewhere in this document. It also may occur as a result of internal changes within the implementation that affect negotiation. If such changes occur, the User Agent <em class="rfc2119" title="MUST">MUST</em> queue a task to <a href="#dfn-update-the-negotiation-needed-flag" class="internalDFN" data-link-type="dfn">update the negotiation-needed
        flag</a>.</p>
        <p>To <dfn data-dfn-type="dfn" id="dfn-update-the-negotiation-needed-flag">update the negotiation-needed flag</dfn> for
          <var>connection</var>, run the following steps:</p>
        <ol>
          <li>
            <p>If <var>connection</var>'s <a href="#dfn-signaling-state" class="internalDFN" data-link-type="dfn">signaling state</a> is not "stable", abort these steps.</p>
            <p>

            </p>
            <div class="note">
              <div class="note-title marker" aria-level="5" role="heading" id="h-note4"><span>Note</span></div>
              <p class="">The negotiation-needed flag will be updated once the state transitions to "stable", as part of the steps for <a href="#set-description">setting an RTCSessionDescription</a>.
              </p>
            </div>
          </li>
          <li>
            <p>If the result of <a data-lt="check if negotiation is needed" href="#dfn-check-if-negotiation-is-needed" class="internalDFN" data-link-type="dfn">
            checking if negotiation is needed</a> is "false", <dfn data-dfn-type="dfn" id="dfn-clear-the-negotiation-needed-flag">clear the
            negotiation-needed flag</dfn> by setting <var>connection</var>'s [[
              <a href="#dfn-neednegotiation" class="internalDFN" data-link-type="dfn">needNegotiation</a>]] slot to <code>false</code>, and abort these steps.</p>
          </li>
          <li>
            <p>If <var>connection</var>'s [[<a href="#dfn-neednegotiation" class="internalDFN" data-link-type="dfn">needNegotiation</a>]] slot is already <code>true</code>, abort these steps.</p>
          </li>
          <li>
            <p>Set <var>connection</var>'s [[<a href="#dfn-neednegotiation" class="internalDFN" data-link-type="dfn">needNegotiation</a>]] slot to
              <code>true</code>.</p>
          </li>
          <li>
            <p>Queue a task to check <var>connection</var>'s [[
              <a href="#dfn-neednegotiation" class="internalDFN" data-link-type="dfn">needNegotiation</a>]] slot and, if still <code>true</code>, fire a simple event named <a href="#event-negotiation" class="internalDFN" data-link-type="dfn"><code>negotiationneeded</code></a> at
              <var>connection</var>.</p>

            <div class="note">
              <div class="note-title marker" aria-level="5" role="heading" id="h-note5"><span>Note</span></div>
              <p class="">This queueing prevents <a href="#event-negotiation" class="internalDFN" data-link-type="dfn"><code>negotiationneeded</code></a> from firing prematurely, in the common situation where multiple modifications to <var>connection</var> are being made at once.</p>
            </div>
          </li>
        </ol>
        <p>To <dfn data-dfn-type="dfn" id="dfn-check-if-negotiation-is-needed">check if negotiation is needed</dfn> for
          <var>connection</var>, perform the following checks:</p>
        <ul>
          <li>
            <p>If any implementation-specific negotiation is required, as described at the start of this section, return "true".</p>
          </li>
          <li>
            <p>If <var>connection</var> has created any
              <code><a href="#idl-def-rtcdatachannel" class="internalDFN" data-link-type="dfn"><code>RTCDataChannel</code></a>
              </code>s, and no m= section has been negotiated yet for data, return "true".</p>
          </li>
          <li>
            <p>For each transceiver <var>t</var> in <var>connection</var>'s
              <a href="#transceivers-set" class="internalDFN" data-link-type="dfn">set of transceivers</a>, perform the following checks:</p>
            <ul>
              <li>
                <p>If <var>t</var> isn't <a data-for="RTCRtpTransceiver" href="#dom-rtcrtptransceiver-stopped" class="internalDFN" data-link-type="dfn"><code>
                stopped</code></a> and isn't yet associated with an m= section according to <span>[<cite><a class="bibref" href="#bib-JSEP">JSEP</a></cite>] (<a href="https://tools.ietf.org/html/draft-ietf-rtcweb-jsep-16#section-3.4.1">section 3.4.1.</a>)</span>, return "true".</p>
              </li>
              <li>
                <p>If <var>t</var> isn't <a data-for="RTCRtpTransceiver" href="#dom-rtcrtptransceiver-stopped" class="internalDFN" data-link-type="dfn"><code>
                stopped</code></a> and is associated with an m= section according to <span>[<cite><a class="bibref" href="#bib-JSEP">JSEP</a></cite>] (<a href="https://tools.ietf.org/html/draft-ietf-rtcweb-jsep-16#section-3.4.1">section 3.4.1.</a>)</span>, then perform the following checks:</p>
                <ul>
                  <li>
                    <p>If <var>t</var>'s <a data-for="RTCRtpTransceiver" href="#dom-rtcrtptransceiver-direction" class="internalDFN" data-link-type="dfn"><code>direction</code></a> is "sendrecv" or "sendonly", and the associated m= section in
                      <var>connection</var>'s <code><a data-for="RTCPeerConnection" href="#dom-rtcpeerconnection-currentlocaldescription" class="internalDFN" data-link-type="dfn"><code>currentLocalDescription</code></a>
                      </code>
                      doesn't contain an "a=msid" line, return "true".</p>
                  </li>
                  <li>
                    <p>If <var>connection</var>'s <code><a data-for="RTCPeerConnection" href="#dom-rtcpeerconnection-currentlocaldescription" class="internalDFN" data-link-type="dfn"><code>currentLocalDescription</code></a>
                      </code>
                      if of type "offer", and the direction of the associated m= section in neither the offer nor answer matches
                      <var>t</var>'s <a data-for="RTCRtpTransceiver" href="#dom-rtcrtptransceiver-direction" class="internalDFN" data-link-type="dfn"><code>direction</code></a>, return "true".</p>
                  </li>
                  <li>
                    <p>If <var>connection</var>'s <code><a data-for="RTCPeerConnection" href="#dom-rtcpeerconnection-currentlocaldescription" class="internalDFN" data-link-type="dfn"><code>currentLocalDescription</code></a>
                      </code>
                      if of type "answer", and the direction of the associated m= section in the answer does not match <var>t</var>'s <a data-for="RTCRtpTransceiver" href="#dom-rtcrtptransceiver-direction" class="internalDFN" data-link-type="dfn"><code>direction</code></a> intersected with the offered direction (as described in <span>[<cite><a class="bibref" href="#bib-JSEP">JSEP</a></cite>] (<a href="https://tools.ietf.org/html/draft-ietf-rtcweb-jsep-16#section-5.3.1">section 5.3.1.</a>)</span>), return "true".</p>
                  </li>
                </ul>
              </li>
              <li>
                <p>If <var>t</var> is <a data-for="RTCRtpTransceiver" href="#dom-rtcrtptransceiver-stopped" class="internalDFN" data-link-type="dfn"><code>
                stopped</code></a> and is associated with an m= section according to
                  <span>[<cite><a class="bibref" href="#bib-JSEP">JSEP</a></cite>] (<a href="https://tools.ietf.org/html/draft-ietf-rtcweb-jsep-16#section-3.4.1">section 3.4.1.</a>)</span>, but the associated m= section is not yet rejected in
                  <var>connection</var>'s <code><a data-for="RTCPeerConnection" href="#dom-rtcpeerconnection-currentlocaldescription" class="internalDFN" data-link-type="dfn"><code>currentLocalDescription</code></a>
                  </code> or
                  <code><a data-for="RTCPeerConnection" href="#dom-rtcpeerconnection-currentremotedescription" class="internalDFN" data-link-type="dfn"><code>currentRemoteDescription</code></a>
                  </code>, return "true".</p>
              </li>
            </ul>
          </li>
          <li>
            <p>If all the preceding checks were performed and "true" was not returned, nothing remains to be negotiated; return "false".</p>
          </li>
        </ul>
      </section>
    </section>

    <section id="interfaces-for-connectivity-establishment" typeof="bibo:Chapter" resource="#interfaces-for-connectivity-establishment" property="bibo:hasPart">
      <h3 id="h-interfaces-for-connectivity-establishment" resource="#h-interfaces-for-connectivity-establishment"><span property="xhv:role" resource="xhv:heading"><span class="secno">4.9 </span>Interfaces for Connectivity Establishment</span>
      </h3>

      <section id="rtcicecandidate-interface" typeof="bibo:Chapter" resource="#rtcicecandidate-interface" property="bibo:hasPart">
        <h4 id="h-rtcicecandidate-interface" resource="#h-rtcicecandidate-interface"><span property="xhv:role" resource="xhv:heading"><span class="secno">4.9.1 </span>RTCIceCandidate Interface</span>
        </h4>
        <p>This interface describes an ICE candidate.</p>
        <div>
          <pre class="def idl"><span class="idlInterface" id="idl-def-rtcicecandidate" data-idl="" data-title="RTCIceCandidate">[<span class="idlCtor"><span class="extAttrName">Constructor</span>(<span class="idlParam"><span class="idlParamType"><a href="#idl-def-rtcicecandidateinit" class="internalDFN" data-link-type="dfn"><code>RTCIceCandidateInit</code></a></span> <span class="idlParamName">candidateInitDict</span></span>)</span>]
interface <span class="idlInterfaceID">RTCIceCandidate</span> {
<span class="idlAttribute" id="idl-def-rtcicecandidate-candidate" data-idl="" data-title="candidate" data-dfn-for="rtcicecandidate">    readonly attribute <span class="idlAttrType">DOMString</span>               <span class="idlAttrName"><a data-lt="candidate" href="#dom-rtcicecandidate-candidate" class="internalDFN" data-link-type="dfn" data-for="RTCIceCandidate"><code>candidate</code></a></span>;</span>
<span class="idlAttribute" id="idl-def-rtcicecandidate-sdpmid" data-idl="" data-title="sdpMid" data-dfn-for="rtcicecandidate">    readonly attribute <span class="idlAttrType">DOMString?</span>              <span class="idlAttrName"><a data-lt="sdpMid" href="#dom-rtcicecandidate-sdpmid" class="internalDFN" data-link-type="dfn" data-for="RTCIceCandidate"><code>sdpMid</code></a></span>;</span>
<span class="idlAttribute" id="idl-def-rtcicecandidate-sdpmlineindex" data-idl="" data-title="sdpMLineIndex" data-dfn-for="rtcicecandidate">    readonly attribute <span class="idlAttrType">unsigned short?</span>         <span class="idlAttrName"><a data-lt="sdpMLineIndex" href="#dom-rtcicecandidate-sdpmlineindex" class="internalDFN" data-link-type="dfn" data-for="RTCIceCandidate"><code>sdpMLineIndex</code></a></span>;</span>
<span class="idlAttribute" id="idl-def-rtcicecandidate-foundation" data-idl="" data-title="foundation" data-dfn-for="rtcicecandidate">    readonly attribute <span class="idlAttrType">DOMString</span>               <span class="idlAttrName"><a data-lt="foundation" href="#dom-rtcicecandidate-foundation" class="internalDFN" data-link-type="dfn" data-for="RTCIceCandidate"><code>foundation</code></a></span>;</span>
<span class="idlAttribute" id="idl-def-rtcicecandidate-priority" data-idl="" data-title="priority" data-dfn-for="rtcicecandidate">    readonly attribute <span class="idlAttrType">unsigned long</span>           <span class="idlAttrName"><a data-lt="priority" href="#dom-rtcicecandidate-priority" class="internalDFN" data-link-type="dfn" data-for="RTCIceCandidate"><code>priority</code></a></span>;</span>
<span class="idlAttribute" id="idl-def-rtcicecandidate-ip" data-idl="" data-title="ip" data-dfn-for="rtcicecandidate">    readonly attribute <span class="idlAttrType">DOMString</span>               <span class="idlAttrName"><a data-lt="ip" href="#dom-rtcicecandidate-ip" class="internalDFN" data-link-type="dfn" data-for="RTCIceCandidate"><code>ip</code></a></span>;</span>
<span class="idlAttribute" id="idl-def-rtcicecandidate-protocol" data-idl="" data-title="protocol" data-dfn-for="rtcicecandidate">    readonly attribute <span class="idlAttrType"><a href="#dom-rtciceprotocol" class="internalDFN" data-link-type="dfn"><code>RTCIceProtocol</code></a></span>          <span class="idlAttrName"><a data-lt="protocol" href="#dom-rtcicecandidate-protocol" class="internalDFN" data-link-type="dfn" data-for="RTCIceCandidate"><code>protocol</code></a></span>;</span>
<span class="idlAttribute" id="idl-def-rtcicecandidate-port" data-idl="" data-title="port" data-dfn-for="rtcicecandidate">    readonly attribute <span class="idlAttrType">unsigned short</span>          <span class="idlAttrName"><a data-lt="port" href="#dom-rtcicecandidate-port" class="internalDFN" data-link-type="dfn" data-for="RTCIceCandidate"><code>port</code></a></span>;</span>
<span class="idlAttribute" id="idl-def-rtcicecandidate-type" data-idl="" data-title="type" data-dfn-for="rtcicecandidate">    readonly attribute <span class="idlAttrType"><a href="#dom-rtcicecandidatetype" class="internalDFN" data-link-type="dfn"><code>RTCIceCandidateType</code></a></span>     <span class="idlAttrName"><a data-lt="type" href="#dom-rtcicecandidate-type" class="internalDFN" data-link-type="dfn" data-for="RTCIceCandidate"><code>type</code></a></span>;</span>
<span class="idlAttribute" id="idl-def-rtcicecandidate-tcptype" data-idl="" data-title="tcpType" data-dfn-for="rtcicecandidate">    readonly attribute <span class="idlAttrType"><a href="#dom-rtcicetcpcandidatetype" class="internalDFN" data-link-type="dfn"><code>RTCIceTcpCandidateType</code></a>?</span> <span class="idlAttrName"><a data-lt="tcpType" href="#dom-rtcicecandidate-tcptype" class="internalDFN" data-link-type="dfn" data-for="RTCIceCandidate"><code>tcpType</code></a></span>;</span>
<span class="idlAttribute" id="idl-def-rtcicecandidate-relatedaddress" data-idl="" data-title="relatedAddress" data-dfn-for="rtcicecandidate">    readonly attribute <span class="idlAttrType">DOMString?</span>              <span class="idlAttrName"><a data-lt="relatedAddress" href="#dom-rtcicecandidate-relatedaddress" class="internalDFN" data-link-type="dfn" data-for="RTCIceCandidate"><code>relatedAddress</code></a></span>;</span>
<span class="idlAttribute" id="idl-def-rtcicecandidate-relatedport" data-idl="" data-title="relatedPort" data-dfn-for="rtcicecandidate">    readonly attribute <span class="idlAttrType">unsigned short?</span>         <span class="idlAttrName"><a data-lt="relatedPort" href="#dom-rtcicecandidate-relatedport" class="internalDFN" data-link-type="dfn" data-for="RTCIceCandidate"><code>relatedPort</code></a></span>;</span>
<span class="idlSerializer" id="idl-def-rtcicecandidate-serializer" data-idl="" data-title="serializer" data-dfn-for="rtcicecandidate">    serializer = <span class="idlSerializerValues">{candidate, sdpMid, sdpMLineIndex}</span>;</span>
};</span></pre>

          <section typeof="bibo:Chapter" resource="#constructors-2" property="bibo:hasPart">
            <h5 id="constructors-2" resource="#constructors-2"><span property="xhv:role" resource="xhv:heading">Constructors</span></h5>
            <dl data-link-for="RTCIceCandidate" data-dfn-for="RTCIceCandidate" class="constructors">
              <dt><code>RTCIceCandidate</code></dt>
              <dd>
                The <dfn data-dfn-type="dfn" id="dfn-rtcicecandidate"><code>RTCIceCandidate()</code></dfn> constructor takes a dictionary argument, <var>candidateInitDict</var>, whose content is used to initialize the new <a class="idlType internalDFN" href="#idl-def-rtcicecandidate" data-link-type="dfn"><code><code>RTCIceCandidate</code></code></a> object. When run, if both the <code><a href="#dom-rtcicecandidate-sdpmid" class="internalDFN" data-link-type="dfn"><code>sdpMid</code></a>
                </code> and
                <code><a href="#dom-rtcicecandidate-sdpmlineindex" class="internalDFN" data-link-type="dfn"><code>sdpMLineIndex</code></a>
                </code> dictionary members are
                <code>null</code>, throw a <code>TypeError</code>.
                <table class="parameters">
                  <tbody>
                    <tr>
                      <th>Parameter</th>
                      <th>Type</th>
                      <th>Nullable</th>
                      <th>Optional</th>
                      <th>Description</th>
                    </tr>
                    <tr>
                      <td class="prmName">candidateInitDict</td>
                      <td class="prmType"><code>RTCIceCandidateInit</code></td>
                      <td class="prmNullFalse"><span role="img" aria-label="False">âœ˜</span></td>
                      <td class="prmOptFalse"><span role="img" aria-label="False">âœ˜</span></td>
                      <td class="prmDesc"></td>
                    </tr>
                  </tbody>
                </table>
              </dd>
            </dl>
          </section>

          <section typeof="bibo:Chapter" resource="#attributes-2" property="bibo:hasPart">
            <h5 id="attributes-2" resource="#attributes-2"><span property="xhv:role" resource="xhv:heading">Attributes</span></h5>
            <dl data-link-for="RTCIceCandidate" data-dfn-for="RTCIceCandidate" class="attributes">
              <dt><dfn data-dfn-for="rtcicecandidate" data-dfn-type="dfn" id="dom-rtcicecandidate-candidate" data-idl=""><code>candidate</code></dfn> of type <span class="idlAttrType">DOMString</span>, readonly</dt>
              <dd>This carries the <code>candidate-attribute</code> as defined in section 15.1 of [<cite><a class="bibref" href="#bib-ICE">ICE</a></cite>].</dd>
              <dt><dfn data-dfn-for="rtcicecandidate" data-dfn-type="dfn" id="dom-rtcicecandidate-sdpmid" data-idl=""><code>sdpMid</code></dfn> of type <span class="idlAttrType">DOMString</span>, readonly , nullable</dt>
              <dd>If not <code>null</code>, this contains the identifier of the "media stream identification" as defined in [<cite><a class="bibref" href="#bib-RFC5888">RFC5888</a></cite>] for the media component this candidate is associated with.</dd>
              <dt><dfn data-dfn-for="rtcicecandidate" data-dfn-type="dfn" id="dom-rtcicecandidate-sdpmlineindex" data-idl=""><code>sdpMLineIndex</code></dfn> of type <span class="idlAttrType">unsigned short</span>, readonly ,
              nullable</dt>
              <dd>
                If not <code>null</code>, this indicates the index (starting at zero) of the <a href="#dfn-media-description" class="internalDFN" data-link-type="dfn">media description</a> in the SDP this candidate is associated with.
              </dd>
              <dt><dfn data-dfn-for="rtcicecandidate" data-dfn-type="dfn" id="dom-rtcicecandidate-foundation" data-idl=""><code>foundation</code></dfn> of type <span class="idlAttrType">DOMString</span>, readonly</dt>
              <dd>A unique identifier that allows ICE to correlate candidates that appear on multiple
                <code><a href="#idl-def-rtcicetransport" class="internalDFN" data-link-type="dfn"><code>RTCIceTransport</code></a>
                </code>s.</dd>
              <dt><dfn data-dfn-for="rtcicecandidate" data-dfn-type="dfn" id="dom-rtcicecandidate-priority" data-idl=""><code>priority</code></dfn> of type <span class="idlAttrType">unsigned long</span>, readonly</dt>
              <dd>The assigned priority of the candidate.</dd>
              <dt><dfn data-dfn-for="rtcicecandidate" data-dfn-type="dfn" id="dom-rtcicecandidate-ip" data-idl=""><code>ip</code></dfn> of type <span class="idlAttrType">DOMString</span>, readonly</dt>
              <dd>
                <p>The IP address of the candidate.</p>
                <div class="note">
                  <div class="note-title marker" aria-level="6" role="heading" id="h-note6"><span>Note</span></div>
                  <div class="">
                    <p>The IP addresses exposed in candidates gathered via ICE and made visibile to the application in
                      <code>RTCIceCandidate</code> instances can reveal more information about the device and the user (e.g. location, local network topology) than the user might have expected in a non-WebRTC enabled browser.</p>
                    <p>These IP addresses are always exposed to the application, and potentially exposed to the communicating party, and can be exposed without any specific user consent (e.g. for peer connections used with data channels, or to receive media only).
                    </p>
                    <p class="fingerprint">These IP addresses can also be used as temporary or persistent cross-origin states, and thus contribute to the fingerprinting surface of the device.<img src="images/fingerprint.png" alt="(This is a fingerprinting vector.)" width="15" height="21"></p>
                    <p>Applications can avoid exposing IP addresses to the communicating party, either temporarily or permanently, by forcing the <a href="#dfn-ice-agent" class="internalDFN" data-link-type="dfn">ICE Agent</a> to report only relay candidates via the <code>iceTransportPolicy</code> member of
                      <code><a href="#idl-def-rtcconfiguration" class="internalDFN" data-link-type="dfn"><code>RTCConfiguration</code></a>
                      </code>.</p>
                    <p>To limit the IP addresses exposed to the application itself, browsers can offer their users different policies regarding sharing local IP addresses, as defined in [
                      <cite><a class="bibref" href="#bib-RTCWEB-IP-HANDLING">RTCWEB-IP-HANDLING</a></cite>].</p>
                  </div>
                </div>
              </dd>
              <dt><dfn data-dfn-for="rtcicecandidate" data-dfn-type="dfn" id="dom-rtcicecandidate-protocol" data-idl=""><code>protocol</code></dfn> of type <span class="idlAttrType"><a href="#dom-rtciceprotocol" class="internalDFN" data-link-type="dfn"><code>RTCIceProtocol</code></a></span>, readonly</dt>
              <dd>The protocol of the candidate (<code>udp</code>/<code>tcp</code>).</dd>
              <dt><dfn data-dfn-for="rtcicecandidate" data-dfn-type="dfn" id="dom-rtcicecandidate-port" data-idl=""><code>port</code></dfn> of type <span class="idlAttrType">unsigned short</span>, readonly</dt>
              <dd>The port of the candidate.</dd>
              <dt><dfn data-dfn-for="rtcicecandidate" data-dfn-type="dfn" id="dom-rtcicecandidate-type" data-idl=""><code>type</code></dfn> of type <span class="idlAttrType"><a href="#dom-rtcicecandidatetype" class="internalDFN" data-link-type="dfn"><code>RTCIceCandidateType</code></a></span>, readonly</dt>
              <dd>The type of the candidate.</dd>
              <dt><dfn data-dfn-for="rtcicecandidate" data-dfn-type="dfn" id="dom-rtcicecandidate-tcptype" data-idl=""><code>tcpType</code></dfn> of type <span class="idlAttrType"><a href="#dom-rtcicetcpcandidatetype" class="internalDFN" data-link-type="dfn"><code>RTCIceTcpCandidateType</code></a></span>, readonly ,
              nullable</dt>
              <dd>If <code>protocol</code> is <code>tcp</code>,
                <code>tcpType</code> represents the type of TCP candidate. Otherwise, <code>tcpType</code> is <code>null</code>.</dd>
              <dt><code>relatedAddress</code> of type <span class="idlAttrType">DOMString</span>, readonly , nullable</dt>
              <dd>For a candidate that is derived from another, such as a relay or reflexive candidate, the <dfn data-dfn-for="rtcicecandidate" data-dfn-type="dfn" id="dom-rtcicecandidate-relatedaddress" data-idl=""><code>relatedAddress</code></dfn> is the IP address of the candidate that it is derived from. For host candidates, the <code>relatedAddress</code> is
                <code>null</code>.</dd>
              <dt><code>relatedPort</code> of type <span class="idlAttrType">unsigned short</span>, readonly ,
              nullable</dt>
              <dd>For a candidate that is derived from another, such as a relay or reflexive candidate, the <dfn data-dfn-for="rtcicecandidate" data-dfn-type="dfn" id="dom-rtcicecandidate-relatedport" data-idl=""><code>relatedPort</code></dfn> is the port of the candidate that it is derived from. For host candidates, the
                <code>relatedPort</code> is <code>null</code>.</dd>
            </dl>
          </section>

          <section typeof="bibo:Chapter" resource="#serializer-1" property="bibo:hasPart">
            <h5 id="serializer-1" resource="#serializer-1"><span property="xhv:role" resource="xhv:heading">Serializer</span></h5>
            <div>
              <p>Instances of this interface are serialized as a map with entries for the following attributes: candidate, sdpMid, sdpMLineIndex.
              </p>
            </div>
          </section>
        </div>
        <div>
          <pre class="def idl"><span class="idlDictionary" id="idl-def-rtcicecandidateinit" data-idl="" data-title="RTCIceCandidateInit">dictionary <span class="idlDictionaryID">RTCIceCandidateInit</span> {
<span class="idlMember" id="idl-def-rtcicecandidateinit-candidate" data-idl="" data-title="candidate" data-dfn-for="rtcicecandidateinit">    required <span class="idlMemberType">DOMString</span>       <span class="idlMemberName"><a data-lt="candidate" href="#dom-rtcicecandidateinit-candidate" class="internalDFN" data-link-type="dfn" data-for="RTCIceCandidateInit"><code>candidate</code></a></span>;</span>
<span class="idlMember" id="idl-def-rtcicecandidateinit-sdpmid" data-idl="" data-title="sdpMid" data-dfn-for="rtcicecandidateinit">             <span class="idlMemberType">DOMString?</span>      <span class="idlMemberName"><a data-lt="sdpMid" href="#dom-rtcicecandidateinit-sdpmid" class="internalDFN" data-link-type="dfn" data-for="RTCIceCandidateInit"><code>sdpMid</code></a></span> = <span class="idlMemberValue">null</span>;</span>
<span class="idlMember" id="idl-def-rtcicecandidateinit-sdpmlineindex" data-idl="" data-title="sdpMLineIndex" data-dfn-for="rtcicecandidateinit">             <span class="idlMemberType">unsigned short?</span> <span class="idlMemberName"><a data-lt="sdpMLineIndex" href="#dom-rtcicecandidateinit-sdpmlineindex" class="internalDFN" data-link-type="dfn" data-for="RTCIceCandidateInit"><code>sdpMLineIndex</code></a></span> = <span class="idlMemberValue">null</span>;</span>
};</span></pre>

          <section typeof="bibo:Chapter" resource="#dictionary-rtcicecandidateinit-members" property="bibo:hasPart">
            <h5 id="dictionary-rtcicecandidateinit-members" resource="#dictionary-rtcicecandidateinit-members"><span property="xhv:role" resource="xhv:heading">Dictionary <a class="idlType internalDFN" href="#idl-def-rtcicecandidateinit" data-link-type="dfn"><code>RTCIceCandidateInit</code></a>
            Members</span></h5>
            <dl data-link-for="RTCIceCandidateInit" data-dfn-for="RTCIceCandidateInit" class="dictionary-members">
              <dt><dfn data-dfn-for="rtcicecandidateinit" data-dfn-type="dfn" id="dom-rtcicecandidateinit-candidate" data-idl=""><code>candidate</code></dfn> of type <span class="idlMemberType">DOMString</span>, required</dt>
              <dd></dd>
              <dt><dfn data-dfn-for="rtcicecandidateinit" data-dfn-type="dfn" id="dom-rtcicecandidateinit-sdpmid" data-idl=""><code>sdpMid</code></dfn> of type <span class="idlMemberType">DOMString</span>, nullable, defaulting to
              <code>null</code></dt>
              <dd></dd>
              <dt><dfn data-dfn-for="rtcicecandidateinit" data-dfn-type="dfn" id="dom-rtcicecandidateinit-sdpmlineindex" data-idl=""><code>sdpMLineIndex</code></dfn> of type <span class="idlMemberType">unsigned short</span>, nullable,
              defaulting to <code>null</code></dt>
              <dd></dd>
            </dl>
          </section>
        </div>

        <section id="rtciceprotocol-enum" typeof="bibo:Chapter" resource="#rtciceprotocol-enum" property="bibo:hasPart">
          <h5 id="h-rtciceprotocol-enum" resource="#h-rtciceprotocol-enum"><span property="xhv:role" resource="xhv:heading"><span class="secno">4.9.1.1 </span>RTCIceProtocol Enum</span>
          </h5>
          <p>The <dfn data-dfn-for="" data-dfn-type="dfn" id="dom-rtciceprotocol" data-idl=""><code>RTCIceProtocol</code></dfn> represents the protocol of the ICE candidate.
          </p>
          <div>
            <pre class="def idl"><span class="idlEnum" id="idl-def-rtciceprotocol" data-idl="" data-title="RTCIceProtocol">enum <span class="idlEnumID"><a data-lt="RTCIceProtocol" href="#dom-rtciceprotocol" class="internalDFN" data-link-type="dfn" data-for=""><code>RTCIceProtocol</code></a></span> {
    "<a href="#dom-rtciceprotocol-udp" class="idlEnumItem">udp</a>",
    "<a href="#dom-rtciceprotocol-tcp" class="idlEnumItem">tcp</a>"
};</span></pre>
            <table data-link-for="RTCIceProtocol" data-dfn-for="RTCIceProtocol" class="simple">
              <tbody>
                <tr>
                  <th colspan="2">Enumeration description</th>
                </tr>
                <tr>
                  <td><dfn data-dfn-for="rtciceprotocol" data-dfn-type="dfn" id="dom-rtciceprotocol-udp" data-idl=""><code>udp</code></dfn></td>
                  <td>A UDP candidate, as described in [<cite><a class="bibref" href="#bib-ICE">ICE</a></cite>].</td>
                </tr>
                <tr>
                  <td><dfn data-dfn-for="rtciceprotocol" data-dfn-type="dfn" id="dom-rtciceprotocol-tcp" data-idl=""><code>tcp</code></dfn></td>
                  <td>A TCP candidate, as described in [<cite><a class="bibref" href="#bib-RFC6544">RFC6544</a></cite>].</td>
                </tr>
              </tbody>
            </table>
          </div>
        </section>

        <section id="rtcicetcpcandidatetype-enum" typeof="bibo:Chapter" resource="#rtcicetcpcandidatetype-enum" property="bibo:hasPart">
          <h5 id="h-rtcicetcpcandidatetype-enum" resource="#h-rtcicetcpcandidatetype-enum"><span property="xhv:role" resource="xhv:heading"><span class="secno">4.9.1.2 </span>RTCIceTcpCandidateType Enum</span>
          </h5>
          <p>The <dfn data-dfn-for="" data-dfn-type="dfn" id="dom-rtcicetcpcandidatetype" data-idl=""><code>RTCIceTcpCandidateType</code></dfn> represents the type of the ICE TCP candidate, as defined in [<cite><a class="bibref" href="#bib-RFC6544">RFC6544</a></cite>].</p>
          <div>
            <pre class="def idl"><span class="idlEnum" id="idl-def-rtcicetcpcandidatetype" data-idl="" data-title="RTCIceTcpCandidateType">enum <span class="idlEnumID"><a data-lt="RTCIceTcpCandidateType" href="#dom-rtcicetcpcandidatetype" class="internalDFN" data-link-type="dfn" data-for=""><code>RTCIceTcpCandidateType</code></a></span> {
    "<a href="#dom-rtcicetcpcandidatetype-active" class="idlEnumItem">active</a>",
    "<a href="#dom-rtcicetcpcandidatetype-passive" class="idlEnumItem">passive</a>",
    "<a href="#dom-rtcicetcpcandidatetype-so" class="idlEnumItem">so</a>"
};</span></pre>
            <table data-link-for="RTCIceTcpCandidateType" data-dfn-for="RTCIceTcpCandidateType" class="simple">
              <tbody>
                <tr>
                  <th colspan="2">Enumeration description</th>
                </tr>
                <tr>
                  <td><dfn data-dfn-for="rtcicetcpcandidatetype" data-dfn-type="dfn" id="dom-rtcicetcpcandidatetype-active" data-idl=""><code>active</code></dfn></td>
                  <td>An <code>active</code> TCP candidate is one for which the transport will attempt to open an outbound connection but will not receive incoming connection requests.</td>
                </tr>
                <tr>
                  <td><dfn data-dfn-for="rtcicetcpcandidatetype" data-dfn-type="dfn" id="dom-rtcicetcpcandidatetype-passive" data-idl=""><code>passive</code></dfn></td>
                  <td>A <code>passive</code> TCP candidate is one for which the transport will receive incoming connection attempts but not attempt a connection.</td>
                </tr>
                <tr>
                  <td><dfn data-dfn-for="rtcicetcpcandidatetype" data-dfn-type="dfn" id="dom-rtcicetcpcandidatetype-so" data-idl=""><code>so</code></dfn></td>
                  <td>An <code>so</code> candidate is one for which the transport will attempt to open a connection simultaneously with its peer.</td>
                </tr>
              </tbody>
            </table>
          </div>
        </section>

        <section id="rtcicecandidatetype-enum" typeof="bibo:Chapter" resource="#rtcicecandidatetype-enum" property="bibo:hasPart">
          <h5 id="h-rtcicecandidatetype-enum" resource="#h-rtcicecandidatetype-enum"><span property="xhv:role" resource="xhv:heading"><span class="secno">4.9.1.3 </span>RTCIceCandidateType Enum</span>
          </h5>
          <p>The <dfn data-dfn-for="" data-dfn-type="dfn" id="dom-rtcicecandidatetype" data-idl=""><code>RTCIceCandidateType</code></dfn> represents the type of the ICE candidate, as defined in [<cite><a class="bibref" href="#bib-ICE">ICE</a></cite>] section 15.1.</p>
          <div>
            <pre class="def idl"><span class="idlEnum" id="idl-def-rtcicecandidatetype" data-idl="" data-title="RTCIceCandidateType">enum <span class="idlEnumID"><a data-lt="RTCIceCandidateType" href="#dom-rtcicecandidatetype" class="internalDFN" data-link-type="dfn" data-for=""><code>RTCIceCandidateType</code></a></span> {
    "<a href="#dom-rtcicecandidatetype-host" class="idlEnumItem">host</a>",
    "<a href="#dom-rtcicecandidatetype-srflx" class="idlEnumItem">srflx</a>",
    "<a href="#dom-rtcicecandidatetype-prflx" class="idlEnumItem">prflx</a>",
    "<a href="#dom-rtcicecandidatetype-relay" class="idlEnumItem">relay</a>"
};</span></pre>
            <table data-link-for="RTCIceCandidateType" data-dfn-for="RTCIceCandidateType" class="simple">
              <tbody>
                <tr>
                  <th colspan="2">Enumeration description</th>
                </tr>
                <tr>
                  <td><dfn data-dfn-for="rtcicecandidatetype" data-dfn-type="dfn" id="dom-rtcicecandidatetype-host" data-idl=""><code>host</code></dfn></td>
                  <td>A host candidate, as defined in Section 4.1.1.1 of [
                    <cite><a class="bibref" href="#bib-ICE">ICE</a></cite>].</td>
                </tr>
                <tr>
                  <td><dfn data-dfn-for="rtcicecandidatetype" data-dfn-type="dfn" id="dom-rtcicecandidatetype-srflx" data-idl=""><code>srflx</code></dfn></td>
                  <td>A server reflexive candidate, as defined in Section 4.1.1.2 of [<cite><a class="bibref" href="#bib-ICE">ICE</a></cite>].</td>
                </tr>
                <tr>
                  <td><dfn data-dfn-for="rtcicecandidatetype" data-dfn-type="dfn" id="dom-rtcicecandidatetype-prflx" data-idl=""><code>prflx</code></dfn></td>
                  <td>A peer reflexive candidate, as defined in Section 4.1.1.2 of [<cite><a class="bibref" href="#bib-ICE">ICE</a></cite>].</td>
                </tr>
                <tr>
                  <td><dfn data-dfn-for="rtcicecandidatetype" data-dfn-type="dfn" id="dom-rtcicecandidatetype-relay" data-idl=""><code>relay</code></dfn></td>
                  <td>A relay candidate, as defined in Section 7.1.3.2.1 of [
                    <cite><a class="bibref" href="#bib-ICE">ICE</a></cite>].</td>
                </tr>
              </tbody>
            </table>
          </div>
        </section>
      </section>

      <section id="rtcpeerconnectioniceevent" typeof="bibo:Chapter" resource="#rtcpeerconnectioniceevent" property="bibo:hasPart">
        <h4 id="h-rtcpeerconnectioniceevent" resource="#h-rtcpeerconnectioniceevent"><span property="xhv:role" resource="xhv:heading"><span class="secno">4.9.2 </span>RTCPeerConnectionIceEvent</span>
        </h4>
        <p>The <code>icecandidate</code> event of the RTCPeerConnection uses the <code><a href="#dom-rtcpeerconnectioniceevent" class="internalDFN" data-link-type="dfn"><code>RTCPeerConnectionIceEvent</code></a>
          </code> interface.</p>
        <p><dfn data-dfn-type="dfn" id="dfn-firing-an-rtcpeerconnectioniceevent-event-named-e">Firing an
        <code><a href="#dom-rtcpeerconnectioniceevent" class="internalDFN" data-link-type="dfn"><code>RTCPeerConnectionIceEvent</code></a></code> event named
        <var>e</var></dfn> with an <code><a href="#idl-def-rtcicecandidate" class="internalDFN" data-link-type="dfn"><code>RTCIceCandidate</code></a>
          </code>
          <var>candidate</var> means that an event with the name <var>e</var>, which does not bubble (except where otherwise stated) and is not cancelable (except where otherwise stated), and which uses the
          <code>RTCPeerConnectionIceEvent</code> interface with the
          <code>candidate</code> attribute set to the new ICE candidate, <em class="rfc2119" title="MUST">MUST</em> be created and dispatched at the given target.</p>
        <p>When firing an <code><a href="#dom-rtcpeerconnectioniceevent" class="internalDFN" data-link-type="dfn"><code>RTCPeerConnectionIceEvent</code></a>
          </code> event that contains a <code><a href="#idl-def-rtcicecandidate" class="internalDFN" data-link-type="dfn"><code>RTCIceCandidate</code></a>
          </code> object, it <em class="rfc2119" title="MUST">MUST</em> include values for both <a data-for="RTCIceCandidate" href="#dom-rtcicecandidate-sdpmid" class="internalDFN" data-link-type="dfn"><code><code>sdpMid</code></code></a> and <a data-for="RTCIceCandidate" href="#dom-rtcicecandidate-sdpmlineindex" class="internalDFN" data-link-type="dfn"><code><code>sdpMLineIndex</code></code></a>. If the
          <code><a href="#idl-def-rtcicecandidate" class="internalDFN" data-link-type="dfn"><code>RTCIceCandidate</code></a>
          </code> is of type <code>srflx</code> or type <code>relay</code>, the <code>url</code> property of the event
          <em class="rfc2119" title="MUST">MUST</em> be set to the URL of the ICE server from which the candidate was obtained.
        </p>
        <div>
          <pre class="def idl"><span class="idlInterface" id="idl-def-rtcpeerconnectioniceevent" data-idl="" data-title="RTCPeerConnectionIceEvent">[<span class="idlCtor"><span class="extAttrName">Constructor</span>(<span class="idlParam"><span class="idlParamType">DOMString</span> <span class="idlParamName">type</span></span>, <span class="idlParam">optional <span class="idlParamType"><a href="#idl-def-rtcpeerconnectioniceeventinit" class="internalDFN" data-link-type="dfn"><code>RTCPeerConnectionIceEventInit</code></a></span> <span class="idlParamName">eventInitDict</span></span>)</span>]
interface <span class="idlInterfaceID"><a data-lt="RTCPeerConnectionIceEvent" href="#dom-rtcpeerconnectioniceevent" class="internalDFN" data-link-type="dfn" data-for=""><code>RTCPeerConnectionIceEvent</code></a></span> : <span class="idlSuperclass"><a href="#dfn-event" class="internalDFN" data-link-type="dfn">Event</a></span> {
<span class="idlAttribute" id="idl-def-rtcpeerconnectioniceevent-candidate" data-idl="" data-title="candidate" data-dfn-for="rtcpeerconnectioniceevent">    readonly attribute <span class="idlAttrType"><a href="#idl-def-rtcicecandidate" class="internalDFN" data-link-type="dfn"><code>RTCIceCandidate</code></a>?</span> <span class="idlAttrName"><a data-lt="candidate" href="#dom-rtcpeerconnectioniceevent-candidate" class="internalDFN" data-link-type="dfn" data-for="RTCPeerConnectionIceEvent"><code>candidate</code></a></span>;</span>
<span class="idlAttribute" id="idl-def-rtcpeerconnectioniceevent-url" data-idl="" data-title="url" data-dfn-for="rtcpeerconnectioniceevent">    readonly attribute <span class="idlAttrType">DOMString?</span>       <span class="idlAttrName"><a data-lt="url" href="#dom-rtcpeerconnectioniceevent-url" class="internalDFN" data-link-type="dfn" data-for="RTCPeerConnectionIceEvent"><code>url</code></a></span>;</span>
};</span></pre>

          <section typeof="bibo:Chapter" resource="#constructors-3" property="bibo:hasPart">
            <h5 id="constructors-3" resource="#constructors-3"><span property="xhv:role" resource="xhv:heading">Constructors</span></h5>
            <dl data-link-for="RTCPeerConnectionIceEvent" data-dfn-for="RTCPeerConnectionIceEvent" class="constructors">
              <dt><dfn data-dfn-for="" data-dfn-type="dfn" id="dom-rtcpeerconnectioniceevent" data-idl=""><code>RTCPeerConnectionIceEvent</code></dfn></dt>
              <dd>
                <table class="parameters">
                  <tbody>
                    <tr>
                      <th>Parameter</th>
                      <th>Type</th>
                      <th>Nullable</th>
                      <th>Optional</th>
                      <th>Description</th>
                    </tr>
                    <tr>
                      <td class="prmName">type</td>
                      <td class="prmType"><code>DOMString</code></td>
                      <td class="prmNullFalse"><span role="img" aria-label="False">âœ˜</span></td>
                      <td class="prmOptFalse"><span role="img" aria-label="False">âœ˜</span></td>
                      <td class="prmDesc"></td>
                    </tr>
                    <tr>
                      <td class="prmName">eventInitDict</td>
                      <td class="prmType">
                        <code>RTCPeerConnectionIceEventInit</code></td>
                      <td class="prmNullFalse"><span role="img" aria-label="False">âœ˜</span></td>
                      <td class="prmOptFalse"><span role="img" aria-label="False">âœ˜</span></td>
                      <td class="prmDesc"></td>
                    </tr>
                  </tbody>
                </table>
              </dd>
            </dl>
          </section>

          <section typeof="bibo:Chapter" resource="#attributes-3" property="bibo:hasPart">
            <h5 id="attributes-3" resource="#attributes-3"><span property="xhv:role" resource="xhv:heading">Attributes</span></h5>
            <dl data-link-for="RTCPeerConnectionIceEvent" data-dfn-for="RTCPeerConnectionIceEvent" class="attributes">
              <dt><dfn data-dfn-for="rtcpeerconnectioniceevent" data-dfn-type="dfn" id="dom-rtcpeerconnectioniceevent-candidate" data-idl=""><code>candidate</code></dfn> of type <span class="idlAttrType"><a href="#idl-def-rtcicecandidate" class="internalDFN" data-link-type="dfn"><code>RTCIceCandidate</code></a></span>, readonly ,
              nullable</dt>
              <dd>
                <p>The <code>candidate</code> attribute is the
                  <code><a href="#idl-def-rtcicecandidate" class="internalDFN" data-link-type="dfn"><code>RTCIceCandidate</code></a>
                  </code> object with the new ICE candidate that caused the event.</p>
                <p>This attribute is set to <code>null</code> when an event is generated to indicate the end of candidate gathering.</p>
                <div class="note">
                  <div class="note-title marker" aria-level="6" role="heading" id="h-note7"><span>Note</span></div>
                  <p class="">Even where there are multiple media components, only one event containing a <code>null</code> candidate is fired.
                  </p>
                </div>
              </dd>
              <dt><dfn data-dfn-for="rtcpeerconnectioniceevent" data-dfn-type="dfn" id="dom-rtcpeerconnectioniceevent-url" data-idl=""><code>url</code></dfn> of type <span class="idlAttrType">DOMString</span>, readonly , nullable</dt>
              <dd>
                <p>The <code>url</code> attribute is the STUN or TURN URL that identifies the STUN or TURN server used to gather this candidate. If the candidate was not gathered from a STUN or TURN server, this parameter will be set to
                  <code>null</code>.</p>
              </dd>
            </dl>
          </section>
        </div>
        <div>
          <pre class="def idl"><span class="idlDictionary" id="idl-def-rtcpeerconnectioniceeventinit" data-idl="" data-title="RTCPeerConnectionIceEventInit">dictionary <span class="idlDictionaryID">RTCPeerConnectionIceEventInit</span> : <span class="idlSuperclass">EventInit</span> {
<span class="idlMember" id="idl-def-rtcpeerconnectioniceeventinit-candidate" data-idl="" data-title="candidate" data-dfn-for="rtcpeerconnectioniceeventinit">    <span class="idlMemberType"><a href="#idl-def-rtcicecandidate" class="internalDFN" data-link-type="dfn"><code>RTCIceCandidate</code></a>?</span> <span class="idlMemberName"><a data-lt="candidate" href="#dom-rtcpeerconnectioniceeventinit-candidate" class="internalDFN" data-link-type="dfn" data-for="RTCPeerConnectionIceEventInit"><code>candidate</code></a></span>;</span>
<span class="idlMember" id="idl-def-rtcpeerconnectioniceeventinit-url" data-idl="" data-title="url" data-dfn-for="rtcpeerconnectioniceeventinit">    <span class="idlMemberType">DOMString?</span>       <span class="idlMemberName"><a data-lt="url" href="#dom-rtcpeerconnectioniceeventinit-url" class="internalDFN" data-link-type="dfn" data-for="RTCPeerConnectionIceEventInit"><code>url</code></a></span>;</span>
};</span></pre>

          <section typeof="bibo:Chapter" resource="#dictionary-rtcpeerconnectioniceeventinit-members" property="bibo:hasPart">
            <h5 id="dictionary-rtcpeerconnectioniceeventinit-members" resource="#dictionary-rtcpeerconnectioniceeventinit-members"><span property="xhv:role" resource="xhv:heading">Dictionary <a class="idlType internalDFN" href="#idl-def-rtcpeerconnectioniceeventinit" data-link-type="dfn"><code>RTCPeerConnectionIceEventInit</code></a>
            Members</span></h5>
            <dl data-link-for="RTCPeerConnectionIceEventInit" data-dfn-for="RTCPeerConnectionIceEventInit" class="dictionary-members">
              <dt><dfn data-dfn-for="rtcpeerconnectioniceeventinit" data-dfn-type="dfn" id="dom-rtcpeerconnectioniceeventinit-candidate" data-idl=""><code>candidate</code></dfn> of type <span class="idlMemberType"><a href="#idl-def-rtcicecandidate" class="internalDFN" data-link-type="dfn"><code>RTCIceCandidate</code></a></span>, nullable</dt>
              <dd>
                <p>See the
                  <code>candidate</code> attribute of the
                  <code>RTCPeerConnectionIceEvent</code> interface.</p>
              </dd>
              <dt><dfn data-dfn-for="rtcpeerconnectioniceeventinit" data-dfn-type="dfn" id="dom-rtcpeerconnectioniceeventinit-url" data-idl=""><code>url</code></dfn> of type <span class="idlMemberType">DOMString</span></dt>
              <dd></dd>
            </dl>
          </section>
        </div>
      </section>

      <section id="rtcpeerconnectioniceerrorevent" typeof="bibo:Chapter" resource="#rtcpeerconnectioniceerrorevent" property="bibo:hasPart">
        <h4 id="h-rtcpeerconnectioniceerrorevent" resource="#h-rtcpeerconnectioniceerrorevent"><span property="xhv:role" resource="xhv:heading"><span class="secno">4.9.3 </span>RTCPeerConnectionIceErrorEvent</span>
        </h4>
        <p>The <code>icecandidateerror</code> event of the RTCPeerConnection uses the <code><a href="#dom-rtcpeerconnectioniceerrorevent" class="internalDFN" data-link-type="dfn"><code>RTCPeerConnectionIceErrorEvent</code></a>
          </code>
          interface.</p>
        <div>
          <pre class="def idl"><span class="idlInterface" id="idl-def-rtcpeerconnectioniceerrorevent" data-idl="" data-title="RTCPeerConnectionIceErrorEvent">[<span class="idlCtor"><span class="extAttrName">Constructor</span>(<span class="idlParam"><span class="idlParamType">DOMString</span> <span class="idlParamName">type</span></span>, <span class="idlParam"><span class="idlParamType"><a href="#idl-def-rtcpeerconnectioniceerroreventinit" class="internalDFN" data-link-type="dfn"><code>RTCPeerConnectionIceErrorEventInit</code></a></span> <span class="idlParamName">eventInitDict</span></span>)</span>]
interface <span class="idlInterfaceID"><a data-lt="RTCPeerConnectionIceErrorEvent" href="#dom-rtcpeerconnectioniceerrorevent" class="internalDFN" data-link-type="dfn" data-for=""><code>RTCPeerConnectionIceErrorEvent</code></a></span> : <span class="idlSuperclass"><a href="#dfn-event" class="internalDFN" data-link-type="dfn">Event</a></span> {
<span class="idlAttribute" id="idl-def-rtcpeerconnectioniceerrorevent-hostcandidate" data-idl="" data-title="hostCandidate" data-dfn-for="rtcpeerconnectioniceerrorevent">    readonly attribute <span class="idlAttrType">DOMString</span>      <span class="idlAttrName"><a data-lt="hostCandidate" href="#dom-rtcpeerconnectioniceerrorevent-hostcandidate" class="internalDFN" data-link-type="dfn" data-for="RTCPeerConnectionIceErrorEvent"><code>hostCandidate</code></a></span>;</span>
<span class="idlAttribute" id="idl-def-rtcpeerconnectioniceerrorevent-url" data-idl="" data-title="url" data-dfn-for="rtcpeerconnectioniceerrorevent">    readonly attribute <span class="idlAttrType">DOMString</span>      <span class="idlAttrName"><a data-lt="url" href="#dom-rtcpeerconnectioniceerrorevent-url" class="internalDFN" data-link-type="dfn" data-for="RTCPeerConnectionIceErrorEvent"><code>url</code></a></span>;</span>
<span class="idlAttribute" id="idl-def-rtcpeerconnectioniceerrorevent-errorcode" data-idl="" data-title="errorCode" data-dfn-for="rtcpeerconnectioniceerrorevent">    readonly attribute <span class="idlAttrType">unsigned short</span> <span class="idlAttrName"><a data-lt="errorCode" href="#dom-rtcpeerconnectioniceerrorevent-errorcode" class="internalDFN" data-link-type="dfn" data-for="RTCPeerConnectionIceErrorEvent"><code>errorCode</code></a></span>;</span>
<span class="idlAttribute" id="idl-def-rtcpeerconnectioniceerrorevent-errortext" data-idl="" data-title="errorText" data-dfn-for="rtcpeerconnectioniceerrorevent">    readonly attribute <span class="idlAttrType">USVString</span>      <span class="idlAttrName"><a data-lt="errorText" href="#dom-rtcpeerconnectioniceerrorevent-errortext" class="internalDFN" data-link-type="dfn" data-for="RTCPeerConnectionIceErrorEvent"><code>errorText</code></a></span>;</span>
};</span></pre>

          <section typeof="bibo:Chapter" resource="#constructors-4" property="bibo:hasPart">
            <h5 id="constructors-4" resource="#constructors-4"><span property="xhv:role" resource="xhv:heading">Constructors</span></h5>
            <dl data-link-for="RTCPeerConnectionIceErrorEvent" data-dfn-for="RTCPeerConnectionIceErrorEvent" class="constructors">
              <dt><dfn data-dfn-for="" data-dfn-type="dfn" id="dom-rtcpeerconnectioniceerrorevent" data-idl=""><code>RTCPeerConnectionIceErrorEvent</code></dfn></dt>
              <dd>
                readonly attribute DOMString hostCandidate
                <table class="parameters">
                  <tbody>
                    <tr>
                      <th>Parameter</th>
                      <th>Type</th>
                      <th>Nullable</th>
                      <th>Optional</th>
                      <th>Description</th>
                    </tr>
                    <tr>
                      <td class="prmName">type</td>
                      <td class="prmType"><code>DOMString</code></td>
                      <td class="prmNullFalse"><span role="img" aria-label="False">âœ˜</span></td>
                      <td class="prmOptFalse"><span role="img" aria-label="False">âœ˜</span></td>
                      <td class="prmDesc"></td>
                    </tr>
                    <tr>
                      <td class="prmName">eventInitDict</td>
                      <td class="prmType">
                        <code>RTCPeerConnectionIceErrorEventInit</code></td>
                      <td class="prmNullFalse"><span role="img" aria-label="False">âœ˜</span></td>
                      <td class="prmOptFalse"><span role="img" aria-label="False">âœ˜</span></td>
                      <td class="prmDesc"></td>
                    </tr>
                  </tbody>
                </table>
              </dd>
            </dl>
          </section>

          <section typeof="bibo:Chapter" resource="#attributes-4" property="bibo:hasPart">
            <h5 id="attributes-4" resource="#attributes-4"><span property="xhv:role" resource="xhv:heading">Attributes</span></h5>
            <dl data-link-for="RTCPeerConnectionIceErrorEvent" data-dfn-for="RTCPeerConnectionIceErrorEvent" class="attributes">
              <dt><dfn data-dfn-for="rtcpeerconnectioniceerrorevent" data-dfn-type="dfn" id="dom-rtcpeerconnectioniceerrorevent-hostcandidate" data-idl=""><code>hostCandidate</code></dfn> of type <span class="idlAttrType">DOMString</span>, readonly</dt>
              <dd>
                <p>The <code>hostCandidate</code> attribute is the local IP address and port used to communicate with the STUN or TURN server.
                </p>
                <p>On a multihomed system, multiple interfaces may be used to contact the server, and this attribute allows the application to figure out on which one the failure occurred.</p>
                <p>If use of multiple interfaces has been prohibited for privacy reasons, this attribute will be set to 0.0.0.0:0 or [::]:0, as appropriate.</p>
              </dd>
              <dt><dfn data-dfn-for="rtcpeerconnectioniceerrorevent" data-dfn-type="dfn" id="dom-rtcpeerconnectioniceerrorevent-url" data-idl=""><code>url</code></dfn> of type <span class="idlAttrType">DOMString</span>, readonly</dt>
              <dd>
                <p>The <code>url</code> attribute is the STUN or TURN URL that identifies the STUN or TURN server for which the failure occurred.
                </p>
              </dd>
              <dt><dfn data-dfn-for="rtcpeerconnectioniceerrorevent" data-dfn-type="dfn" id="dom-rtcpeerconnectioniceerrorevent-errorcode" data-idl=""><code>errorCode</code></dfn> of type <span class="idlAttrType">unsigned short</span>, readonly</dt>
              <dd>
                <p>The <code>errorCode</code> attribute is the numeric STUN error code returned by the STUN or TURN server [
                  <cite><a class="bibref" href="#bib-STUN-PARAMETERS">STUN-PARAMETERS</a></cite>].</p>
                <p>If no host candidate can reach the server,
                  <code>errorCode</code> will be set to the value 701 which is outside the STUN error code range. This error is only fired once per server URL while in the
                  <code>RTCIceGatheringState</code> of "gathering".</p>
              </dd>
              <dt><dfn data-dfn-for="rtcpeerconnectioniceerrorevent" data-dfn-type="dfn" id="dom-rtcpeerconnectioniceerrorevent-errortext" data-idl=""><code>errorText</code></dfn> of type <span class="idlAttrType">USVString</span>, readonly</dt>
              <dd>
                <p>The <code>errorText</code> attribute is the STUN reason text returned by the STUN or TURN server [<cite><a class="bibref" href="#bib-STUN-PARAMETERS">STUN-PARAMETERS</a></cite>].</p>
                <p>If the server could not be reached, <code>errorText</code> will be set to an implementation-specific value providing details about the error.</p>
              </dd>
            </dl>
          </section>
        </div>
        <div>
          <pre class="def idl"><span class="idlDictionary" id="idl-def-rtcpeerconnectioniceerroreventinit" data-idl="" data-title="RTCPeerConnectionIceErrorEventInit">dictionary <span class="idlDictionaryID">RTCPeerConnectionIceErrorEventInit</span> : <span class="idlSuperclass">EventInit</span> {
<span class="idlMember" id="idl-def-rtcpeerconnectioniceerroreventinit-hostcandidate" data-idl="" data-title="hostCandidate" data-dfn-for="rtcpeerconnectioniceerroreventinit">    <span class="idlMemberType">DOMString</span>      <span class="idlMemberName"><a data-lt="hostCandidate" href="#dom-rtcpeerconnectioniceerroreventinit-hostcandidate" class="internalDFN" data-link-type="dfn" data-for="RTCPeerConnectionIceErrorEventInit"><code>hostCandidate</code></a></span>;</span>
<span class="idlMember" id="idl-def-rtcpeerconnectioniceerroreventinit-url" data-idl="" data-title="url" data-dfn-for="rtcpeerconnectioniceerroreventinit">    <span class="idlMemberType">DOMString</span>      <span class="idlMemberName"><a data-lt="url" href="#dom-rtcpeerconnectioniceerroreventinit-url" class="internalDFN" data-link-type="dfn" data-for="RTCPeerConnectionIceErrorEventInit"><code>url</code></a></span>;</span>
<span class="idlMember" id="idl-def-rtcpeerconnectioniceerroreventinit-errorcode" data-idl="" data-title="errorCode" data-dfn-for="rtcpeerconnectioniceerroreventinit">    <span class="idlMemberType">unsigned short</span> <span class="idlMemberName"><a data-lt="errorCode" href="#dom-rtcpeerconnectioniceerroreventinit-errorcode" class="internalDFN" data-link-type="dfn" data-for="RTCPeerConnectionIceErrorEventInit"><code>errorCode</code></a></span>;</span>
<span class="idlMember" id="idl-def-rtcpeerconnectioniceerroreventinit-statustext" data-idl="" data-title="statusText" data-dfn-for="rtcpeerconnectioniceerroreventinit">    <span class="idlMemberType">USVString</span>      <span class="idlMemberName"><a data-lt="statusText" href="#dom-rtcpeerconnectioniceerroreventinit-statustext" class="internalDFN" data-link-type="dfn" data-for="RTCPeerConnectionIceErrorEventInit"><code>statusText</code></a></span>;</span>
};</span></pre>

          <section typeof="bibo:Chapter" resource="#dictionary-rtcpeerconnectioniceerroreventinit-members" property="bibo:hasPart">
            <h5 id="dictionary-rtcpeerconnectioniceerroreventinit-members" resource="#dictionary-rtcpeerconnectioniceerroreventinit-members"><span property="xhv:role" resource="xhv:heading">Dictionary <a class="idlType internalDFN" href="#idl-def-rtcpeerconnectioniceerroreventinit" data-link-type="dfn"><code>RTCPeerConnectionIceErrorEventInit</code></a> Members</span></h5>
            <dl data-link-for="RTCPeerConnectionIceErrorEventInit" data-dfn-for="RTCPeerConnectionIceErrorEventInit" class="dictionary-members">
              <dt><dfn data-dfn-for="rtcpeerconnectioniceerroreventinit" data-dfn-type="dfn" id="dom-rtcpeerconnectioniceerroreventinit-hostcandidate" data-idl=""><code>hostCandidate</code></dfn> of type <span class="idlMemberType">DOMString</span></dt>
              <dd>DOMString url</dd>
              <dt><dfn data-dfn-for="rtcpeerconnectioniceerroreventinit" data-dfn-type="dfn" id="dom-rtcpeerconnectioniceerroreventinit-url" data-idl=""><code>url</code></dfn> of type <span class="idlMemberType">DOMString</span></dt>
              <dd>unsigned short errorCode</dd>
              <dt><dfn data-dfn-for="rtcpeerconnectioniceerroreventinit" data-dfn-type="dfn" id="dom-rtcpeerconnectioniceerroreventinit-errorcode" data-idl=""><code>errorCode</code></dfn> of type <span class="idlMemberType">unsigned short</span></dt>
              <dd>USVString statusText</dd>
              <dt><dfn data-dfn-for="rtcpeerconnectioniceerroreventinit" data-dfn-type="dfn" id="dom-rtcpeerconnectioniceerroreventinit-statustext" data-idl=""><code>statusText</code></dfn> of type <span class="idlMemberType">USVString</span></dt>
              <dd></dd>
            </dl>
          </section>
        </div>
      </section>
    </section>

    <section id="priority-and-qos-model" typeof="bibo:Chapter" resource="#priority-and-qos-model" property="bibo:hasPart">
      <h3 id="h-priority-and-qos-model" resource="#h-priority-and-qos-model"><span property="xhv:role" resource="xhv:heading"><span class="secno">4.10 </span>Priority and QoS Model</span>
      </h3>
      <p>Many applications have multiple media flows of the same data type and often some of the flows are more important than others. WebRTC uses the priority and Quality of Service (QoS) framework described in [
        <cite><a class="bibref" href="#bib-RTCWEB-TRANSPORT">RTCWEB-TRANSPORT</a></cite>] and [<cite><a class="bibref" href="#bib-TSVWG-RTCWEB-QOS">TSVWG-RTCWEB-QOS</a></cite>] to provide priority and DSCP marking for packets that will help provide QoS in some networking environments. The priority setting can be used to indicate the relative priority of various flows. The priority API allows the JavaScript applications to tell the browser whether a particular media flow is high, medium, low or of very low importance to the application by setting the
        <code>priority</code> property of
        <code><a href="#idl-def-rtcrtpencodingparameters" class="internalDFN" data-link-type="dfn"><code>RTCRtpEncodingParameters</code></a>
        </code> objects to one of the following values.</p>

      <section id="rtcprioritytype-enum" typeof="bibo:Chapter" resource="#rtcprioritytype-enum" property="bibo:hasPart">
        <h4 id="h-rtcprioritytype-enum" resource="#h-rtcprioritytype-enum"><span property="xhv:role" resource="xhv:heading"><span class="secno">4.10.1 </span>RTCPriorityType Enum</span>
        </h4>
        <div>
          <pre class="def idl"><span class="idlEnum" id="idl-def-rtcprioritytype" data-idl="" data-title="RTCPriorityType">enum <span class="idlEnumID">RTCPriorityType</span> {
    "<a href="#dom-rtcprioritytype-very-low" class="idlEnumItem">very-low</a>",
    "<a href="#dom-rtcprioritytype-low" class="idlEnumItem">low</a>",
    "<a href="#dom-rtcprioritytype-medium" class="idlEnumItem">medium</a>",
    "<a href="#dom-rtcprioritytype-high" class="idlEnumItem">high</a>"
};</span></pre>
          <table data-link-for="RTCPriorityType" data-dfn-for="RTCPriorityType" class="simple">
            <tbody>
              <tr>
                <th colspan="2">Enumeration description</th>
              </tr>
              <tr>
                <td><dfn data-dfn-for="rtcprioritytype" data-dfn-type="dfn" id="dom-rtcprioritytype-very-low" data-idl=""><code>very-low</code></dfn></td>
                <td>See [<cite><a class="bibref" href="#bib-RTCWEB-TRANSPORT">RTCWEB-TRANSPORT</a></cite>], Section 4.</td>
              </tr>
              <tr>
                <td><dfn data-dfn-for="rtcprioritytype" data-dfn-type="dfn" id="dom-rtcprioritytype-low" data-idl=""><code>low</code></dfn></td>
                <td>See [<cite><a class="bibref" href="#bib-RTCWEB-TRANSPORT">RTCWEB-TRANSPORT</a></cite>], Section 4.</td>
              </tr>
              <tr>
                <td><dfn data-dfn-for="rtcprioritytype" data-dfn-type="dfn" id="dom-rtcprioritytype-medium" data-idl=""><code>medium</code></dfn></td>
                <td>See [<cite><a class="bibref" href="#bib-RTCWEB-TRANSPORT">RTCWEB-TRANSPORT</a></cite>], Section 4.</td>
              </tr>
              <tr>
                <td><dfn data-dfn-for="rtcprioritytype" data-dfn-type="dfn" id="dom-rtcprioritytype-high" data-idl=""><code>high</code></dfn></td>
                <td>See [<cite><a class="bibref" href="#bib-RTCWEB-TRANSPORT">RTCWEB-TRANSPORT</a></cite>], Section 4.</td>
              </tr>
            </tbody>
          </table>
        </div>
      </section>
      <p>Applications that use this API should be aware that often better overall user experience is obtained by lowering the priority of things that are not as important rather than raising the priority of the things that are.</p>
    </section>

    <section typeof="bibo:Chapter" resource="#sec.cert-mgmt" property="bibo:hasPart">
      <h3 id="sec.cert-mgmt" resource="#sec.cert-mgmt"><span property="xhv:role" resource="xhv:heading"><span class="secno">4.11 </span>Certificate Management</span>
      </h3>
      <p>The certificates that <code>RTCPeerConnection</code> instances use to authenticate with peers use the <a href="#dom-rtccertificate" class="internalDFN" data-link-type="dfn"><code><code>RTCCertificate</code></code></a> interface. These objects can be explicitly generated by applications using the <a data-for="RTCPeerConnection" href="#dom-rtcpeerconnection-generatecertificate" class="internalDFN" data-link-type="dfn"><code><code>generateCertificate</code></code></a> method on the connection and provided in the <a href="#idl-def-rtcconfiguration" class="internalDFN" data-link-type="dfn"><code><code>RTCConfiguration</code></code></a> when constructing a new <code>RTCPeerConnection</code> instance.</p>
      <p>The explicit certificate management functions provided here are optional. If an application does not provide the
        <code>certificates</code> configuration option when constructing an
        <code>RTCPeerConnection</code> a new set of certificates <em class="rfc2119" title="MUST">MUST</em> be generated by the <a href="#dfn-user-agent" class="internalDFN" data-link-type="dfn">user agent</a>. That set <em class="rfc2119" title="MUST">MUST</em> include an ECDSA certificate with a private key on the P-256 curve and a signature with a SHA-256 hash.</p>
      <div>
        <pre class="def idl"><span class="idlInterface" id="idl-def-rtcpeerconnection-partial-2" data-idl="" data-title="RTCPeerConnection">partial interface <span class="idlInterfaceID"><a data-lt="RTCPeerConnection" href="#dom-rtcpeerconnection" class="internalDFN" data-link-type="dfn" data-for=""><code>RTCPeerConnection</code></a></span> {
<span class="idlMethod" id="idl-def-rtcpeerconnection-generatecertificate(algorithmidentifier)" data-idl="" data-title="generateCertificate" data-dfn-for="rtcpeerconnection">    static <span class="idlMethType">Promise&lt;<a href="#dom-rtccertificate" class="internalDFN" data-link-type="dfn"><code>RTCCertificate</code></a>&gt;</span> <span class="idlMethName"><a data-lt="generateCertificate" href="#dom-rtcpeerconnection-generatecertificate" class="internalDFN" data-link-type="dfn" data-for="RTCPeerConnection"><code>generateCertificate</code></a></span>(<span class="idlParam"><span class="idlParamType">AlgorithmIdentifier</span> <span class="idlParamName">keygenAlgorithm</span></span>);</span>
};</span></pre>

        <section typeof="bibo:Chapter" resource="#methods-2" property="bibo:hasPart">
          <h4 id="methods-2" resource="#methods-2"><span property="xhv:role" resource="xhv:heading">Methods</span></h4>
          <dl data-link-for="RTCPeerConnection" data-dfn-for="RTCPeerConnection" class="methods">
            <dt><dfn data-dfn-for="rtcpeerconnection" data-dfn-type="dfn" id="dom-rtcpeerconnection-generatecertificate" data-idl=""><code>generateCertificate</code></dfn>, static</dt>
            <dd>
              <p>The <code>generateCertificate</code> function causes the
                <a href="#dfn-user-agent" class="internalDFN" data-link-type="dfn">user agent</a> to create and store an X.509 certificate [
                <cite><a class="bibref" href="#bib-X509V3">X509V3</a></cite>] and corresponding private key. A handle to information is provided in the form of the
                <code>RTCCertificate</code> interface. The returned
                <code>RTCCertificate</code> can be used to control the certificate that is offered in the DTLS sessions established by
                <code>RTCPeerConnection</code>.</p>
              <p>The <var>keygenAlgorithm</var> argument is used to control how the private key associated with the certificate is generated. The
                <var>keygenAlgorithm</var> argument uses the WebCrypto [
                <cite><a class="bibref" href="#bib-WebCryptoAPI">WebCryptoAPI</a></cite>]
                <a href="https://w3c.github.io/webcrypto/Overview.html#dfn-AlgorithmIdentifier">
                  <code>AlgorithmIdentifier</code></a> type. The
                <var>keygenAlgorithm</var> value <em class="rfc2119" title="MUST">MUST</em> be a valid argument to
                <a href="https://w3c.github.io/webcrypto/Overview.html#SubtleCrypto-method-generateKey">
                  <code>window.crypto.subtle.generateKey</code></a>; that is, the value <em class="rfc2119" title="MUST">MUST</em> produce a non-error result when normalized according to the WebCrypto <a href="https://w3c.github.io/webcrypto/Overview.html#algorithm-normalization">
              algorithm normalization process</a> [<cite><a class="bibref" href="#bib-WebCryptoAPI">WebCryptoAPI</a></cite>] with an operation name of <code>generateKey</code> and a [[<a href="https://w3c.github.io/webcrypto/Overview.html#dfn-supportedAlgorithms">supportedAlgorithms</a>]] value specific to production of certificates for
                <code>RTCPeerConnection</code>. If the algorithm normalization process produces an error, the call to
                <code>generateCertificate</code> <em class="rfc2119" title="MUST">MUST</em> be rejected with that error.
              </p>
              <p>Signatures produced by the generated key are used to authenticate the DTLS connection. The identified algorithm (as identified by the <code>name</code> of the normalized
                <code>AlgorithmIdentifier</code>) <em class="rfc2119" title="MUST">MUST</em> be an asymmetric algorithm that can be used to produce a signature.</p>
              <p>The certificate produced by this process also contains a signature. The validity of this signature is only relevant for compatibility reasons. Only the public key and the resulting certificate fingerprint are used by
                <code>RTCPeerConnection</code>, but it is more likely that a certificate will be accepted if the certificate is well formed. The browser selects the algorithm used to sign the certificate; a browser <em class="rfc2119" title="SHOULD">SHOULD</em> select SHA-256 [<cite><a class="bibref" href="#bib-FIPS-180-4">FIPS-180-4</a></cite>] if a hash algorithm is needed.</p>
              <p>The resulting certificate <em class="rfc2119" title="MUST NOT">MUST NOT</em> include information that can be linked to a user or <a href="#dfn-user-agent" class="internalDFN" data-link-type="dfn">user agent</a>. Randomized values for distinguished name and serial number <em class="rfc2119" title="SHOULD">SHOULD</em> be used.</p>
              <p>A <a href="#dfn-user-agent" class="internalDFN" data-link-type="dfn">user agent</a> <em class="rfc2119" title="MUST">MUST</em> reject a call to
                <code>generateCertificate()</code> with a
                <code>DOMException</code> of type <code>NotSupportedError</code> if the <var>keygenAlgorithm</var> parameter identifies an algorithm that the <a href="#dfn-user-agent" class="internalDFN" data-link-type="dfn">user agent</a> cannot or will not use to generate a certificate for <code>RTCPeerConnection</code>.</p>
              <p>The following values <em class="rfc2119" title="MUST">MUST</em> be supported by a <a href="#dfn-user-agent" class="internalDFN" data-link-type="dfn">user agent</a>:
                <code>{ name: "<a href="https://w3c.github.io/webcrypto/Overview.html#rsassa-pkcs1">RSASSA-PKCS1-v1_5</a>",
              modulusLength: 2048, publicExponent: new Uint8Array([1, 0, 1]),
              hash: "SHA-256" }</code>, and <code>{ name: "<a href="https://w3c.github.io/webcrypto/Overview.html#ecdsa">ECDSA</a>",
              namedCurve: "<a href="https://w3c.github.io/webcrypto/Overview.html#dfn-NamedCurve">P-256</a>"
              }</code>.</p>
              <div class="note">
                <div class="note-title marker" aria-level="5" role="heading" id="h-note8"><span>Note</span></div>
                <p class="">It is expected that a <a href="#dfn-user-agent" class="internalDFN" data-link-type="dfn">user agent</a> will have a small or even fixed set of values that it will accept.</p>
              </div>
              <table class="parameters">
                <tbody>
                  <tr>
                    <th>Parameter</th>
                    <th>Type</th>
                    <th>Nullable</th>
                    <th>Optional</th>
                    <th>Description</th>
                  </tr>
                  <tr>
                    <td class="prmName">keygenAlgorithm</td>
                    <td class="prmType"><code>AlgorithmIdentifier</code></td>
                    <td class="prmNullFalse"><span role="img" aria-label="False">âœ˜</span></td>
                    <td class="prmOptFalse"><span role="img" aria-label="False">âœ˜</span></td>
                    <td class="prmDesc"></td>
                  </tr>
                </tbody>
              </table>
              <div>
                <em>Return type:</em>
                <code>Promise&lt;RTCCertificate&gt;</code>
              </div>
            </dd>
          </dl>
        </section>
      </div>

      <section id="dictionary-rtccertificateexpiration" typeof="bibo:Chapter" resource="#dictionary-rtccertificateexpiration" property="bibo:hasPart">
        <h4 id="h-dictionary-rtccertificateexpiration" resource="#h-dictionary-rtccertificateexpiration"><span property="xhv:role" resource="xhv:heading"><span class="secno">4.11.1 </span>Dictionary <code><a href="#idl-def-rtccertificateexpiration" class="internalDFN" data-link-type="dfn"><code>RTCCertificateExpiration</code></a>
          </code>
          </span>
        </h4>
        <p><code><a href="#idl-def-rtccertificateexpiration" class="internalDFN" data-link-type="dfn"><code>RTCCertificateExpiration</code></a>
          </code> is used to set an expiration date on certificates generated by <a data-for="RTCPeerConnection" href="#dom-rtcpeerconnection-generatecertificate" class="internalDFN" data-link-type="dfn"><code><code>generateCertificate</code></code></a>.</p>
        <pre class="def idl"><span class="idlDictionary" id="idl-def-rtccertificateexpiration" data-idl="" data-title="RTCCertificateExpiration">dictionary <span class="idlDictionaryID">RTCCertificateExpiration</span> {
<span class="idlMember" id="idl-def-rtccertificateexpiration-expires" data-idl="" data-title="expires" data-dfn-for="rtccertificateexpiration">    [<span class="extAttr"><span class="extAttrName">EnforceRange</span></span>]
    <span class="idlMemberType">DOMTimeStamp</span> <span class="idlMemberName">expires</span>;</span>
};</span></pre>
        <dl data-link-for="RTCGenerateCertificateOptions" data-dfn-for="RTCGenerateCertificateOptions" class="methods">
          <dt><dfn data-for="RTCGenerateCertificateOptions" data-dfn-type="dfn" id="dfn-expires"><code>expires</code></dfn></dt>
          <dd>
            <p>An optional <code>expires</code> attribute <em class="rfc2119" title="MAY">MAY</em> be added to the definition of the algorithm that is passed to <a data-for="RTCPeerConnection" href="#dom-rtcpeerconnection-generatecertificate" class="internalDFN" data-link-type="dfn"><code><code>generateCertificate</code></code></a>. If this parameter is present it indicates the maximum time that the
              <code><a href="#dom-rtccertificate" class="internalDFN" data-link-type="dfn"><code>RTCCertificate</code></a>
              </code> is valid for relative to the current time.</p>
            <p>When <a data-for="RTCPeerConnection" href="#dom-rtcpeerconnection-generatecertificate" class="internalDFN" data-link-type="dfn"><code><code>generateCertificate</code></code></a> is called with an <code>object</code> argument, the <a href="#dfn-user-agent" class="internalDFN" data-link-type="dfn">user agent</a> attempts to convert the object into a
              <code><a href="#idl-def-rtccertificateexpiration" class="internalDFN" data-link-type="dfn"><code>RTCCertificateExpiration</code></a>
              </code>. If this is unsuccessful, immediately return a promise that is rejected with a
              <code>TypeError</code> and abort processing.</p>
            <p>A <a href="#dfn-user-agent" class="internalDFN" data-link-type="dfn">user agent</a> generates a certificate that has an expiration date set to the current time plus the value of the
              <code>expires</code> attribute. The <a data-for="RTCCertificate" href="#dom-rtccertificate-expires" class="internalDFN" data-link-type="dfn"><code><code>expires</code></code></a> attribute of the returned
              <a href="#dom-rtccertificate" class="internalDFN" data-link-type="dfn"><code><code>RTCCertificate</code></code></a> is set to the expiration time of the certificate. A <a href="#dfn-user-agent" class="internalDFN" data-link-type="dfn">user agent</a> <em class="rfc2119" title="MAY">MAY</em> choose to limit the value of the <a data-for="RTCCertificate" href="#dom-rtccertificate-expires" class="internalDFN" data-link-type="dfn"><code><code>expires</code></code></a> attribute.
            </p>
          </dd>
        </dl>
      </section>

      <section id="rtccertificate-interface" typeof="bibo:Chapter" resource="#rtccertificate-interface" property="bibo:hasPart">
        <h4 id="h-rtccertificate-interface" resource="#h-rtccertificate-interface"><span property="xhv:role" resource="xhv:heading"><span class="secno">4.11.2 </span>RTCCertificate Interface</span>
        </h4>
        <p>The <dfn data-dfn-for="" data-dfn-type="dfn" id="dom-rtccertificate" data-idl=""><code>RTCCertificate</code></dfn> interface represents a certificate used to authenticate WebRTC communications. In addition to the visible properties, internal slots contain a handle to the generated private keying materal ([[<dfn id="RTCCertificate-handle" data-dfn-type="dfn">handle</dfn>]]) and a certificate ([[<dfn id="RTCCertificate-certificate" data-dfn-type="dfn">certificate</dfn>]]) that
          <code>RTCPeerConnection</code> uses to authenticate with a peer.</p>
        <div>
          <pre class="def idl"><span class="idlInterface" id="idl-def-rtccertificate" data-idl="" data-title="RTCCertificate">interface <span class="idlInterfaceID"><a data-lt="RTCCertificate" href="#dom-rtccertificate" class="internalDFN" data-link-type="dfn" data-for=""><code>RTCCertificate</code></a></span> {
<span class="idlAttribute" id="idl-def-rtccertificate-expires" data-idl="" data-title="expires" data-dfn-for="rtccertificate">    readonly attribute <span class="idlAttrType">DOMTimeStamp</span>                    <span class="idlAttrName"><a data-lt="expires" href="#dom-rtccertificate-expires" class="internalDFN" data-link-type="dfn" data-for="RTCCertificate"><code>expires</code></a></span>;</span>
<span class="idlAttribute" id="idl-def-rtccertificate-fingerprints" data-idl="" data-title="fingerprints" data-dfn-for="rtccertificate">    readonly attribute <span class="idlAttrType">FrozenArray&lt;<a href="#dom-rtcdtlsfingerprint" class="internalDFN" data-link-type="dfn"><code>RTCDtlsFingerprint</code></a>&gt;</span> <span class="idlAttrName"><a data-lt="fingerprints" href="#dom-rtccertificate-fingerprints" class="internalDFN" data-link-type="dfn" data-for="RTCCertificate"><code>fingerprints</code></a></span>;</span>
<span class="idlMethod" id="idl-def-rtccertificate-getalgorithm()" data-idl="" data-title="getAlgorithm" data-dfn-for="rtccertificate">    <span class="idlMethType">AlgorithmIdentifier</span> <span class="idlMethName"><a data-lt="getAlgorithm" href="#dom-rtccertificate-getalgorithm" class="internalDFN" data-link-type="dfn" data-for="RTCCertificate"><code>getAlgorithm</code></a></span>();</span>
};</span></pre>

          <section typeof="bibo:Chapter" resource="#attributes-5" property="bibo:hasPart">
            <h5 id="attributes-5" resource="#attributes-5"><span property="xhv:role" resource="xhv:heading">Attributes</span></h5>
            <dl data-link-for="RTCCertificate" data-dfn-for="RTCCertificate" class="attributes">
              <dt><dfn data-dfn-for="rtccertificate" data-dfn-type="dfn" id="dom-rtccertificate-expires" data-idl=""><code>expires</code></dfn> of type <span class="idlAttrType">DOMTimeStamp</span>, readonly</dt>
              <dd>
                <p>The <var>expires</var> attribute indicates the date and time in milliseconds relative to 1970-01-01T00:00:00Z after which the certificate will be considered invalid by the browser. After this time, attempts to construct an
                  <code>RTCPeerConnection</code> using this certificate fail.</p>
                <p>Note that this value might not be reflected in a
                  <code>notAfter</code> parameter in the certificate itself.</p>
              </dd>
              <dt><dfn data-dfn-for="rtccertificate" data-dfn-type="dfn" id="dom-rtccertificate-fingerprints" data-idl=""><code>fingerprints</code></dfn> of type <span class="idlAttrType">FrozenArray&lt;<a href="#dom-rtcdtlsfingerprint" class="internalDFN" data-link-type="dfn"><code>RTCDtlsFingerprint</code></a>&gt;</span>,
              readonly</dt>
              <dd>
                <p>A list of certificate fingerprints, one of which is computed with the digest algorithm used in the certificate signature.
                </p>
              </dd>
            </dl>
          </section>

          <section typeof="bibo:Chapter" resource="#methods-3" property="bibo:hasPart">
            <h5 id="methods-3" resource="#methods-3"><span property="xhv:role" resource="xhv:heading">Methods</span></h5>
            <dl data-link-for="RTCCertificate" data-dfn-for="RTCCertificate" class="methods">
              <dt><dfn data-dfn-for="rtccertificate" data-dfn-type="dfn" id="dom-rtccertificate-getalgorithm" data-idl=""><code>getAlgorithm</code></dfn></dt>
              <dd>
                <p>Returns the value of <var>keygenAlgorithm</var> passed in the call to <code>generateCertificate()</code>.</p>
                <div>
                  <em>No parameters.</em>
                </div>
                <div>
                  <em>Return type:</em> <code>AlgorithmIdentifier</code>
                </div>
              </dd>
            </dl>
          </section>
        </div>
        <p>For the purposes of this API, the [[<a href="#RTCCertificate-certificate" class="internalDFN" data-link-type="dfn">certificate</a>]] slot contains unstructured binary data.</p>
        <p>Note that a <code>RTCCertificate</code> might not directly hold private keying material, this might be stored in a secure module.</p>
        <p>The <code>RTCCertificate</code> object can be stored and retrieved from persistent storage by an application. When a <a href="#dfn-user-agent" class="internalDFN" data-link-type="dfn">user agent</a> is required to obtain a structured clone [<cite><a class="bibref" href="#bib-HTML">HTML</a></cite>] of a
          <code>RTCCertificate</code> object, it performs the following steps:
        </p>
        <ol>
          <li>Let <var>input</var> and <var>memory</var> be the corresponding inputs defined by the internal structured cloning algorithm, where
            <var>input</var> represents a <code>RTCCertificate</code> object to be cloned.</li>
          <li>Let <var>output</var> be a newly constructed
            <code>RTCCertificate</code> object.</li>
          <li>Copy the value of the <code>expires</code> attribute from
            <var>input</var> to <var>output</var>.</li>
          <li>Let the [[<a href="#RTCCertificate-certificate" class="internalDFN" data-link-type="dfn">certificate</a>]] internal slot of <var>output</var> be set to the result of invoking the internal structured clone algorithm recursively on the corresponding internal slots of
            <var>input</var>, with the slot contents as the new "
            <var>input</var>" argument and <var>memory</var> as the new "
            <var>memory</var>" argument.
          </li>
          <li>Let the [[<a href="#RTCCertificate-handle" class="internalDFN" data-link-type="dfn">handle</a>]] internal slot of <var>output</var> refer to the same private keying material represented by the [[
            <a href="#RTCCertificate-handle" class="internalDFN" data-link-type="dfn">handle</a>]] internal slot of <var>input</var>.
          </li>
        </ol>
      </section>
    </section>
  </section>

  <section id="rtp-media-api" typeof="bibo:Chapter" resource="#rtp-media-api" property="bibo:hasPart">
    <!--OddPage-->
    <h2 id="h-rtp-media-api" resource="#h-rtp-media-api"><span property="xhv:role" resource="xhv:heading"><span class="secno">5. </span>RTP Media API</span>
    </h2>
    <p>The <dfn data-dfn-type="dfn" id="dfn-rtp-media-api">RTP media API</dfn> lets a web application send and receive
      <code>MediaStreamTrack</code>s over a peer-to-peer connection. Tracks, when added to a <code>RTCPeerConnection</code>, result in signaling; when this signaling is forwarded to a remote peer, it causes corresponding tracks to be created on the remote side.</p>
    <p>The actual encoding and transmission of <code>MediaStreamTrack</code>s is managed through objects called <code><a href="#dom-rtcrtpsender" class="internalDFN" data-link-type="dfn"><code>RTCRtpSender</code></a>
      </code>s. Similarly, the reception and decoding of <code>MediaStreamTrack</code>s is managed through objects called <code><a href="#idl-def-rtcrtpreceiver" class="internalDFN" data-link-type="dfn"><code>RTCRtpReceiver</code></a>
      </code>s. Each track to be sent is associated with exactly one
      <code><a href="#dom-rtcrtpsender" class="internalDFN" data-link-type="dfn"><code>RTCRtpSender</code></a>
      </code>, and each track to be received is associated with exactly one <code><a href="#idl-def-rtcrtpreceiver" class="internalDFN" data-link-type="dfn"><code>RTCRtpReceiver</code></a>
      </code>.</p>
    <p>The encoding and transmission of each <code>MediaStreamTrack</code>
      <em class="rfc2119" title="SHOULD">SHOULD</em> be made such that its characteristics (width, height and frameRate for video tracks; volume, sampleSize, sampleRate and channelCount for audio tracks) are to a reasonable degree retained by the track created on the remote side. There are situations when this does not apply, there may for example be resource constraints at either endpoint or in the network or there may be <code><a href="#dom-rtcrtpsender" class="internalDFN" data-link-type="dfn"><code>RTCRtpSender</code></a>
      </code> settings applied that instruct the implementation to act differently.</p>
    <p><code><a href="#dom-rtcrtpsender" class="internalDFN" data-link-type="dfn"><code>RTCRtpSender</code></a>
      </code>s are created when the application attaches a <code>MediaStreamTrack</code> to a
      <code><a href="#dom-rtcpeerconnection" class="internalDFN" data-link-type="dfn"><code>RTCPeerConnection</code></a>
      </code>, via the <code>addTrack</code> method. <code><a href="#idl-def-rtcrtpreceiver" class="internalDFN" data-link-type="dfn"><code>RTCRtpReceiver</code></a>
      </code>s, on the other hand, are created when remote signaling indicates new tracks are available, and each new
      <code>MediaStreamTrack</code> and its associated
      <code><a href="#idl-def-rtcrtpreceiver" class="internalDFN" data-link-type="dfn"><code>RTCRtpReceiver</code></a>
      </code> are surfaced to the application via the
      <code>ontrack</code> event. Both <code><a href="#dom-rtcrtpsender" class="internalDFN" data-link-type="dfn"><code>RTCRtpSender</code></a>
      </code> and
      <code><a href="#idl-def-rtcrtpreceiver" class="internalDFN" data-link-type="dfn"><code>RTCRtpReceiver</code></a>
      </code> objects are created by the
      <code>addTransceiver</code> method.</p>
    <p>A <code><a href="#dom-rtcpeerconnection" class="internalDFN" data-link-type="dfn"><code>RTCPeerConnection</code></a>
      </code> object contains a <dfn id="transceivers-set" data-dfn-type="dfn">set of
    <code><a href="#idl-def-rtcrtptransceiver" class="internalDFN" data-link-type="dfn"><code>RTCRtpTransceiver</code></a></code>s</dfn>, representing the paired senders and receivers with some shared state. This set is initialized to the empty set when the <code><a href="#dom-rtcpeerconnection" class="internalDFN" data-link-type="dfn"><code>RTCPeerConnection</code></a>
      </code> object is created.
    </p>

    <section id="rtcpeerconnection-interface-extensions" typeof="bibo:Chapter" resource="#rtcpeerconnection-interface-extensions" property="bibo:hasPart">
      <h3 id="h-rtcpeerconnection-interface-extensions" resource="#h-rtcpeerconnection-interface-extensions"><span property="xhv:role" resource="xhv:heading"><span class="secno">5.1 </span>RTCPeerConnection Interface Extensions</span>
      </h3>
      <p>The RTP media API extends the <code><a href="#dom-rtcpeerconnection" class="internalDFN" data-link-type="dfn"><code>RTCPeerConnection</code></a>
        </code>
        interface as described below.</p>
      <div>
        <pre class="def idl"><span class="idlInterface" id="idl-def-rtcpeerconnection-partial-3" data-idl="" data-title="RTCPeerConnection">partial interface <span class="idlInterfaceID"><a data-lt="RTCPeerConnection" href="#dom-rtcpeerconnection" class="internalDFN" data-link-type="dfn" data-for=""><code>RTCPeerConnection</code></a></span> {
<span class="idlMethod" id="idl-def-rtcpeerconnection-getsenders()" data-idl="" data-title="getSenders" data-dfn-for="rtcpeerconnection">    <span class="idlMethType">sequence&lt;<a href="#dom-rtcrtpsender" class="internalDFN" data-link-type="dfn"><code>RTCRtpSender</code></a>&gt;</span>      <span class="idlMethName"><a data-lt="getSenders" href="#dom-rtcpeerconnection-getsenders" class="internalDFN" data-link-type="dfn" data-for="RTCPeerConnection"><code>getSenders</code></a></span>();</span>
<span class="idlMethod" id="idl-def-rtcpeerconnection-getreceivers()" data-idl="" data-title="getReceivers" data-dfn-for="rtcpeerconnection">    <span class="idlMethType">sequence&lt;<a href="#idl-def-rtcrtpreceiver" class="internalDFN" data-link-type="dfn"><code>RTCRtpReceiver</code></a>&gt;</span>    <span class="idlMethName"><a data-lt="getReceivers" href="#dom-rtcpeerconnection-getreceivers" class="internalDFN" data-link-type="dfn" data-for="RTCPeerConnection"><code>getReceivers</code></a></span>();</span>
<span class="idlMethod" id="idl-def-rtcpeerconnection-gettransceivers()" data-idl="" data-title="getTransceivers" data-dfn-for="rtcpeerconnection">    <span class="idlMethType">sequence&lt;<a href="#idl-def-rtcrtptransceiver" class="internalDFN" data-link-type="dfn"><code>RTCRtpTransceiver</code></a>&gt;</span> <span class="idlMethName"><a data-lt="getTransceivers" href="#dom-rtcpeerconnection-gettransceivers" class="internalDFN" data-link-type="dfn" data-for="RTCPeerConnection"><code>getTransceivers</code></a></span>();</span>
<span class="idlMethod" id="idl-def-rtcpeerconnection-addtrack(mediastreamtrack,mediastream...)" data-idl="" data-title="addTrack" data-dfn-for="rtcpeerconnection">    <span class="idlMethType"><a href="#dom-rtcrtpsender" class="internalDFN" data-link-type="dfn"><code>RTCRtpSender</code></a></span>                <span class="idlMethName"><a data-lt="addTrack" href="#dom-rtcpeerconnection-addtrack" class="internalDFN" data-link-type="dfn" data-for="RTCPeerConnection"><code>addTrack</code></a></span>(<span class="idlParam"><span class="idlParamType"><a href="#dom-mediastreamtrack" class="internalDFN" data-link-type="dfn"><code>MediaStreamTrack</code></a></span> <span class="idlParamName">track</span></span>,
                                         <span class="idlParam"><span class="idlParamType"><a href="#dfn-mediastream" class="internalDFN" data-link-type="dfn">MediaStream</a>...</span> <span class="idlParamName">streams</span></span>);</span>
<span class="idlMethod" id="idl-def-rtcpeerconnection-removetrack(rtcrtpsender)" data-idl="" data-title="removeTrack" data-dfn-for="rtcpeerconnection">    <span class="idlMethType">void</span>                        <span class="idlMethName"><a data-lt="removeTrack" href="#dom-rtcpeerconnection-removetrack" class="internalDFN" data-link-type="dfn" data-for="RTCPeerConnection"><code>removeTrack</code></a></span>(<span class="idlParam"><span class="idlParamType"><a href="#dom-rtcrtpsender" class="internalDFN" data-link-type="dfn"><code>RTCRtpSender</code></a></span> <span class="idlParamName">sender</span></span>);</span>
<span class="idlMethod" id="idl-def-rtcpeerconnection-addtransceiver((mediastreamtrack_or_domstring),optional-rtcrtptransceiverinit)" data-idl="" data-title="addTransceiver" data-dfn-for="rtcpeerconnection">    <span class="idlMethType"><a href="#idl-def-rtcrtptransceiver" class="internalDFN" data-link-type="dfn"><code>RTCRtpTransceiver</code></a></span>           <span class="idlMethName"><a data-lt="addTransceiver" href="#dom-rtcpeerconnection-addtransceiver" class="internalDFN" data-link-type="dfn" data-for="RTCPeerConnection"><code>addTransceiver</code></a></span>(<span class="idlParam"><span class="idlParamType">(<a href="#dom-mediastreamtrack" class="internalDFN" data-link-type="dfn"><code>MediaStreamTrack</code></a> or DOMString)</span> <span class="idlParamName">trackOrKind</span></span>,
                                               <span class="idlParam">optional <span class="idlParamType"><a href="#idl-def-rtcrtptransceiverinit" class="internalDFN" data-link-type="dfn"><code>RTCRtpTransceiverInit</code></a></span> <span class="idlParamName">init</span></span>);</span>
<span class="idlAttribute" id="idl-def-rtcpeerconnection-ontrack" data-idl="" data-title="ontrack" data-dfn-for="rtcpeerconnection">    attribute <span class="idlAttrType">EventHandler</span> <span class="idlAttrName"><a data-lt="ontrack" href="#dom-rtcpeerconnection-ontrack" class="internalDFN" data-link-type="dfn" data-for="RTCPeerConnection"><code>ontrack</code></a></span>;</span>
};</span></pre>

        <section typeof="bibo:Chapter" resource="#attributes-6" property="bibo:hasPart">
          <h4 id="attributes-6" resource="#attributes-6"><span property="xhv:role" resource="xhv:heading">Attributes</span></h4>
          <dl data-link-for="RTCPeerConnection" data-dfn-for="RTCPeerConnection" class="attributes">
            <dt><dfn data-dfn-for="rtcpeerconnection" data-dfn-type="dfn" id="dom-rtcpeerconnection-ontrack" data-idl=""><code>ontrack</code></dfn> of type <span class="idlAttrType">EventHandler</span></dt>
            <dd>
              <p>The event type of this event handler is
                <code><a href="#event-track" class="internalDFN" data-link-type="dfn"><code>track</code></a>
                </code>.</p>
            </dd>
          </dl>
        </section>

        <section typeof="bibo:Chapter" resource="#methods-4" property="bibo:hasPart">
          <h4 id="methods-4" resource="#methods-4"><span property="xhv:role" resource="xhv:heading">Methods</span></h4>
          <dl data-link-for="RTCPeerConnection" data-dfn-for="RTCPeerConnection" class="methods">
            <dt><code>getSenders</code></dt>
            <dd>
              <p>Returns a sequence of <code><a href="#dom-rtcrtpsender" class="internalDFN" data-link-type="dfn"><code>RTCRtpSender</code></a>
                </code> objects representing the RTP senders that are currently attached to this
                <code><a href="#dom-rtcpeerconnection" class="internalDFN" data-link-type="dfn"><code>RTCPeerConnection</code></a>
                </code> object.</p>
              <p>The <dfn id="dom-rtcpeerconnection-getsenders" data-dfn-for="rtcpeerconnection" data-dfn-type="dfn" data-idl=""><code>getSenders</code></dfn> method <em class="rfc2119" title="MUST">MUST</em> return the result of executing the
                <code><a href="#dfn-collectsenders" class="internalDFN" data-link-type="dfn">CollectSenders</a></code> algorithm.</p>
              <p></p>
              <p>We define the <dfn data-dfn-type="dfn" id="dfn-collectsenders">CollectSenders</dfn> algorithm as follows:
              </p>
              <ol>
                <li>Let <var>transceivers</var> be the result of executing the
                  <code><a href="#dfn-collecttransceivers" class="internalDFN" data-link-type="dfn">CollectTransceivers</a></code> algorithm.</li>
                <li>Let <var>senderset</var> be a new empty set.</li>
                <li>For each <var>transceiver</var> in <var>transceivers</var>,
                  <ol>
                    <li>Let <var>sender</var> be
                      <var>transceiver</var>.sender.</li>
                    <li>Add <var>sender</var> to <var>senderset</var>.</li>
                  </ol>
                </li>
                <li>Let <var>senders</var> be a new sequence consisting of all the <code><a href="#dom-rtcrtpsender" class="internalDFN" data-link-type="dfn"><code>RTCRtpSender</code></a>
                  </code> objects in
                  <var>senderset</var>. The conversion from the senders set to the sequence is user agent defined and the order does not have to be stable between calls.</li>
                <li>Return <var>senders</var>.</li>
              </ol>
              <div>
                <em>No parameters.</em>
              </div>
              <div>
                <em>Return type:</em> <code>sequence&lt;RTCRtpSender&gt;</code>
              </div>
            </dd>
            <dt><code>getReceivers</code></dt>
            <dd>
              <p>Returns a sequence of <code><a href="#idl-def-rtcrtpreceiver" class="internalDFN" data-link-type="dfn"><code>RTCRtpReceiver</code></a>
                </code>
                objects representing the RTP receivers that are currently attached to this <code><a href="#dom-rtcpeerconnection" class="internalDFN" data-link-type="dfn"><code>RTCPeerConnection</code></a>
                </code>
                object.</p>
              <p>The <dfn id="dom-rtcpeerconnection-getreceivers" data-dfn-for="rtcpeerconnection" data-dfn-type="dfn" data-idl=""><code>getReceivers</code></dfn> method <em class="rfc2119" title="MUST">MUST</em> return the result of executing the
                <code><a href="#dfn-collectreceivers" class="internalDFN" data-link-type="dfn">CollectReceivers</a></code> algorithm.</p>
              <p></p>
              <p>We define the <dfn data-dfn-type="dfn" id="dfn-collectreceivers">CollectReceivers</dfn> algorithm as follows:
              </p>
              <ol>
                <li>Let <var>transceivers</var> be the result of executing the
                  <code><a href="#dfn-collecttransceivers" class="internalDFN" data-link-type="dfn">CollectTransceivers</a></code> algorithm.</li>
                <li>Let <var>receiverset</var> be a new empty set.</li>
                <li>For each <var>transceiver</var> in <var>transceivers</var>,
                  <ol>
                    <li>Let <var>receiver</var> be
                      <var>transceiver</var>.receiver.</li>
                    <li>Add <var>receiver</var> to <var>receiverset</var>.</li>
                  </ol>
                </li>
                <li>Let <var>receivers</var> be a new sequence consisting of all the <code><a href="#idl-def-rtcrtpreceiver" class="internalDFN" data-link-type="dfn"><code>RTCRtpReceiver</code></a>
                  </code> objects in
                  <var>receiverset</var>. The conversion from the receivers set to the sequence is user agent defined and the order does not have to be stable between calls.</li>
                <li>Return <var>receivers</var>.</li>
              </ol>
              <div>
                <em>No parameters.</em>
              </div>
              <div>
                <em>Return type:</em>
                <code>sequence&lt;RTCRtpReceiver&gt;</code>
              </div>
            </dd>
            <dt><code>getTransceivers</code></dt>
            <dd>
              <p>Returns a sequence of <code><a href="#idl-def-rtcrtptransceiver" class="internalDFN" data-link-type="dfn"><code>RTCRtpTransceiver</code></a>
                </code>
                objects representing the RTP transceivers that are currently attached to this <code><a href="#dom-rtcpeerconnection" class="internalDFN" data-link-type="dfn"><code>RTCPeerConnection</code></a>
                </code>
                object.</p>
              <p>The <dfn id="dom-rtcpeerconnection-gettransceivers" data-dfn-for="rtcpeerconnection" data-dfn-type="dfn" data-idl=""><code>getTransceivers</code></dfn> method <em class="rfc2119" title="MUST">MUST</em> return the result of executing the
                <code><a href="#dfn-collecttransceivers" class="internalDFN" data-link-type="dfn">CollectTransceivers</a></code> algorithm.</p>
              <p></p>
              <p>We define the <dfn data-dfn-type="dfn" id="dfn-collecttransceivers">CollectTransceivers</dfn> algorithm as follows:
              </p>
              <ol>
                <li>Let <var>transceivers</var> be a new sequence that represents a snapshot of all the
                  <code><a href="#idl-def-rtcrtptransceiver" class="internalDFN" data-link-type="dfn"><code>RTCRtpTransceiver</code></a>
                  </code> objects in this <code><a href="#dom-rtcpeerconnection" class="internalDFN" data-link-type="dfn"><code>
                  RTCPeerConnection</code></a>
                  </code> object's <a href="#transceivers-set" class="internalDFN" data-link-type="dfn">set of
                  transceivers</a>. The conversion from the transceiver set to the sequence is user agent defined and the order does not have to be stable between calls.
                </li>
                <li>Return <var>transceivers</var>.</li>
              </ol>
              <div>
                <em>No parameters.</em>
              </div>
              <div>
                <em>Return type:</em>
                <code>sequence&lt;RTCRtpTransceiver&gt;</code>
              </div>
            </dd>
            <dt><code>addTrack</code></dt>
            <dd>
              <p>Adds a new track to the <code><a href="#dom-rtcpeerconnection" class="internalDFN" data-link-type="dfn"><code>RTCPeerConnection</code></a>
                </code>, and indicates that it is contained in the specified
                <code>MediaStream</code>s.</p>
              <p>When the <dfn data-dfn-for="rtcpeerconnection" data-dfn-type="dfn" id="dom-rtcpeerconnection-addtrack" data-idl=""><code>addTrack</code></dfn> method is invoked, the user agent <em class="rfc2119" title="MUST">MUST</em> run the following steps:</p>
              <ol>
                <li>
                  <p>Let <var>connection</var> be the
                    <code><a href="#dom-rtcpeerconnection" class="internalDFN" data-link-type="dfn"><code>RTCPeerConnection</code></a>
                    </code> object on which this method was invoked.</p>
                </li>
                <li>
                  <p>Let <var>track</var> be the
                    <code><a href="#dom-mediastreamtrack" class="internalDFN" data-link-type="dfn"><code>MediaStreamTrack</code></a>
                    </code> object indicated by the method's first argument.</p>
                </li>
                <li>
                  <p>Let <var>streams</var> be a list of
                    <code><a href="#dfn-mediastream" class="internalDFN" data-link-type="dfn">MediaStream</a></code> objects constructed from the method's remaining arguments, or an empty list if the method was called with a single argument.</p>
                </li>
                <li>
                  <p>If <var>connection</var>'s [[<a href="#dfn-isclosed" class="internalDFN" data-link-type="dfn">isClosed</a>]] slot is
                    <code>true</code>, throw an <code>InvalidStateError</code> exception and abort these steps.</p>
                </li>
                <li>
                  <p>Let <var>senders</var> be the result of executing the
                    <code><a href="#dfn-collectsenders" class="internalDFN" data-link-type="dfn">CollectSenders</a></code> algorithm. If an
                    <code><a href="#dom-rtcrtpsender" class="internalDFN" data-link-type="dfn"><code>RTCRtpSender</code></a>
                    </code> for <var>track</var> already exists in <var>senders</var>, throw an
                    <code>InvalidAccessError</code> exception and abort these steps.
                  </p>
                </li>
                <li>
                  <p>The steps below describe how to determine if an existing sender can be reused. Doing so will cause future calls to
                    <code>createOffer</code> and <code>createAnswer</code> to mark the corresponding <a href="#dfn-media-description" class="internalDFN" data-link-type="dfn">media description</a> as
                    <code>sendrecv</code> or <code>sendonly</code> and add the MSID of the track added, as defined in <span>[<cite><a class="bibref" href="#bib-JSEP">JSEP</a></cite>] (<a href="https://tools.ietf.org/html/draft-ietf-rtcweb-jsep-16#section-5.2.2">section 5.2.2.</a> and <a href="https://tools.ietf.org/html/draft-ietf-rtcweb-jsep-16#section-5.3.2">section 5.3.2.</a>)</span>.</p>
                  <p>If any <code><a href="#dom-rtcrtpsender" class="internalDFN" data-link-type="dfn"><code>RTCRtpSender</code></a>
                    </code> object in
                    <var>senders</var> matches all the following criteria, let
                    <var>sender</var> be that object, or <code>null</code> otherwise:
                  </p>
                  <ul>
                    <li>
                      <p>The sender's track is null.</p>
                    </li>
                    <li>
                      <p>The <a href="#dfn-transceiver-kind" class="internalDFN" data-link-type="dfn">transceiver kind</a> of the
                        <code><a href="#idl-def-rtcrtptransceiver" class="internalDFN" data-link-type="dfn"><code>RTCRtpTransceiver</code></a>
                        </code>, associated with the sender, matches <var>track</var>'s kind.</p>
                    </li>
                    <li>
                      <p>The sender has never been used to send. More precisely, the <code><a href="#idl-def-rtcrtptransceiver" class="internalDFN" data-link-type="dfn"><code>RTCRtpTransceiver</code></a>
                        </code>
                        associated with the sender has always had a direction of either <code>recvonly</code> or
                        <code>inactive</code>.</p>
                    </li>
                  </ul>
                </li>
                <li>
                  <p>If <var>sender</var> is not <code>null</code>, run the following steps to use that sender:</p>
                  <ol>
                    <li>
                      <p>Set <var>sender.track</var> to <var>track</var>.</p>
                    </li>
                    <li>
                      <p>Set <var>sender</var>'s [[<a href="#dfn-associated-mediastreams" class="internalDFN" data-link-type="dfn">associated
                      MediaStreams</a>]] to <var>streams</var>.</p>
                    </li>
                    <li>
                      <p>Enable sending direction on the
                        <code><a href="#idl-def-rtcrtptransceiver" class="internalDFN" data-link-type="dfn"><code>RTCRtpTransceiver</code></a>
                        </code> associated with
                        <var>sender</var>.</p>
                    </li>
                  </ol>
                </li>
                <li>
                  <p>If <var>sender</var> is <code>null</code>, run the following steps:</p>
                  <ol>
                    <li>
                      <p><a href="#dfn-create-an-rtcrtpsender" class="internalDFN" data-link-type="dfn">Create an RTCRtpSender</a> with <var>track</var> and <var>streams</var> and let <var>sender</var> be the result.
                      </p>
                    </li>
                    <li>
                      <p><a href="#dfn-create-an-rtcrtpreceiver" class="internalDFN" data-link-type="dfn">Create an RTCRtpReceiver</a> with
                        <var>track.kind</var> as kind and let <var>receiver</var> be the result.</p>
                    </li>
                    <li>
                      <p><a href="#dfn-create-an-rtcrtptransceiver" class="internalDFN" data-link-type="dfn">Create an RTCRtpTransceiver</a> with
                        <var>sender</var> and <var>receiver</var> and let
                        <var>transceiver</var> be the result.</p>
                    </li>
                    <li>
                      <p>Add <var>transceiver</var> to <var>connection</var>'s
                        <a href="#transceivers-set">set of transceivers</a></p>
                    </li>
                  </ol>
                </li>
                <li>
                  <p>A track could have contents that are inaccessible to the application. This can be due to being marked with a
                    <code>peerIdentity</code> option or anything that would make a track <a href="http://www.w3.org/html/wg/drafts/html/master/infrastructure.html#cors-cross-origin">
                  CORS cross-origin</a>. These tracks can be supplied to the
                    <code>addTrack</code> method, and have an
                    <code><a href="#dom-rtcrtpsender" class="internalDFN" data-link-type="dfn"><code>RTCRtpSender</code></a>
                    </code> created for them, but content <em class="rfc2119" title="MUST NOT">MUST NOT</em> be transmitted, unless they are also marked with <code>peerIdentity</code> and they meet the requirements for sending (see <a href="#isolated-pc">isolated streams and
                  <code>RTCPeerConnection</code></a>).</p>
                  <p>All other tracks that are not accessible to the application <em class="rfc2119" title="MUST NOT">MUST NOT</em> be sent to the peer, with silence (audio), black frames (video) or equivalently absent content being sent in place of track content.</p>
                  <p>Note that this property can change over time.</p>
                </li>
                <li>
                  <p><a data-lt="update the negotiation-needed flag" href="#dfn-update-the-negotiation-needed-flag" class="internalDFN" data-link-type="dfn">Update the
                  negotiation-needed flag</a> for <var>connection</var>.</p>
                </li>
                <li>
                  <p>Return <var>sender</var>.</p>
                </li>
              </ol>
              <table class="parameters">
                <tbody>
                  <tr>
                    <th>Parameter</th>
                    <th>Type</th>
                    <th>Nullable</th>
                    <th>Optional</th>
                    <th>Description</th>
                  </tr>
                  <tr>
                    <td class="prmName">track</td>
                    <td class="prmType"><code>MediaStreamTrack</code></td>
                    <td class="prmNullFalse"><span role="img" aria-label="False">âœ˜</span></td>
                    <td class="prmOptFalse"><span role="img" aria-label="False">âœ˜</span></td>
                    <td class="prmDesc"></td>
                  </tr>
                  <tr>
                    <td class="prmName">streams</td>
                    <td class="prmType"><code>MediaStream</code></td>
                    <td class="prmNullFalse"><span role="img" aria-label="False">âœ˜</span></td>
                    <td class="prmOptFalse"><span role="img" aria-label="False">âœ˜</span></td>
                    <td class="prmDesc"></td>
                  </tr>
                </tbody>
              </table>
              <div>
                <em>Return type:</em> <code>RTCRtpSender</code>
              </div>
            </dd>
            <dt><code>removeTrack</code></dt>
            <dd>
              <p>Stops sending media from <var>sender</var>. The
                <code><a href="#dom-rtcrtpsender" class="internalDFN" data-link-type="dfn"><code>RTCRtpSender</code></a>
                </code> will still appear in
                <code>getSenders</code>. Doing so will cause future calls to
                <code>createOffer</code> to mark the <a href="#dfn-media-description" class="internalDFN" data-link-type="dfn">media description</a> for the corresponding transceiver as <code>recvonly</code> or
                <code>inactive</code>, as defined in <span>[<cite><a class="bibref" href="#bib-JSEP">JSEP</a></cite>] (<a href="https://tools.ietf.org/html/draft-ietf-rtcweb-jsep-16#section-5.2.2">section 5.2.2.</a>)</span>.
                <!-- onended -->
              </p>
              <p>When the other peer stops sending a track in this manner, an
                <code title="event-MediaStreamTrack-ended">ended</code> event is fired at the <code><a href="#dom-mediastreamtrack" class="internalDFN" data-link-type="dfn"><code>MediaStreamTrack</code></a>
                </code> object.</p>
              <p>When the <dfn data-dfn-for="rtcpeerconnection" data-dfn-type="dfn" id="dom-rtcpeerconnection-removetrack" data-idl=""><code>removeTrack</code></dfn> method is invoked, the user agent <em class="rfc2119" title="MUST">MUST</em> run the following steps:</p>
              <ol>
                <li>
                  <p>Let <var>connection</var> be the
                    <code><a href="#dom-rtcpeerconnection" class="internalDFN" data-link-type="dfn"><code>RTCPeerConnection</code></a>
                    </code> object on which the
                    <code><a href="#dom-rtcrtpsender" class="internalDFN" data-link-type="dfn"><code>RTCRtpSender</code></a>
                    </code>, <var>sender</var>, is to be stopped.
                  </p>
                </li>
                <li>
                  <p>If <var>connection</var>'s [[<a href="#dfn-isclosed" class="internalDFN" data-link-type="dfn">isClosed</a>]] slot is
                    <code>true</code>, throw an <code>InvalidStateError</code> exception and abort these steps.</p>
                </li>
                <li>
                  <p>If <var>sender</var> was not created by
                    <var>connection</var> , throw an
                    <code>InvalidAccessError</code> exception and abort these steps.
                  </p>
                </li>
                <li>
                  <p>Let <var>senders</var> be the result of executing the
                    <code><a href="#dfn-collectsenders" class="internalDFN" data-link-type="dfn">CollectSenders</a></code> algorithm.</p>
                </li>
                <li>
                  <p>If <var>sender</var> is not in <var>senders</var> (which indicates that it was removed due to <a href="#set-description">setting an RTCSessionDescription</a> of type "rollback"), then abort these steps.</p>
                </li>
                <li>
                  <p>If <var>sender</var> is <a href="#sender-stopped" class="internalDFN" data-link-type="dfn">stopped</a>, then abort these steps.
                  </p>
                </li>
                <li>
                  <p>Stop <var>sender</var>.</p>
                </li>
                <li>
                  <p><a data-lt="update the negotiation-needed flag" href="#dfn-update-the-negotiation-needed-flag" class="internalDFN" data-link-type="dfn">Update the
                  negotiation-needed flag</a> for <var>connection</var>.</p>
                </li>
              </ol>
              <table class="parameters">
                <tbody>
                  <tr>
                    <th>Parameter</th>
                    <th>Type</th>
                    <th>Nullable</th>
                    <th>Optional</th>
                    <th>Description</th>
                  </tr>
                  <tr>
                    <td class="prmName">sender</td>
                    <td class="prmType"><code>RTCRtpSender</code></td>
                    <td class="prmNullFalse"><span role="img" aria-label="False">âœ˜</span></td>
                    <td class="prmOptFalse"><span role="img" aria-label="False">âœ˜</span></td>
                    <td class="prmDesc"></td>
                  </tr>
                </tbody>
              </table>
              <div>
                <em>Return type:</em> <code>void</code>
              </div>
            </dd>
            <dt><dfn data-dfn-for="rtcpeerconnection" data-dfn-type="dfn" id="dom-rtcpeerconnection-addtransceiver" data-idl=""><code>addTransceiver</code></dfn></dt>
            <dd>
              <p>Create a new <code><a href="#idl-def-rtcrtptransceiver" class="internalDFN" data-link-type="dfn"><code>RTCRtpTransceiver</code></a>
                </code> and add it to the <a href="#transceivers-set" class="internalDFN" data-link-type="dfn">set of transceivers</a>.</p>
              <p>Adding a transceiver will cause future calls to
                <code>createOffer</code> to add a <a href="#dfn-media-description" class="internalDFN" data-link-type="dfn">media description</a> for the corresponding transceiver, as defined in <span>[<cite><a class="bibref" href="#bib-JSEP">JSEP</a></cite>] (<a href="https://tools.ietf.org/html/draft-ietf-rtcweb-jsep-16#section-5.2.2">section 5.2.2.</a>)</span>.</p>
              <p>The initial value of <code><a data-for="RTCRtpTransceiver" href="#dom-rtcrtptransceiver-mid" class="internalDFN" data-link-type="dfn"><code>mid</code></a>
                </code> is null. Setting a new
                <code><a href="#idl-def-rtcsessiondescription" class="internalDFN" data-link-type="dfn"><code>RTCSessionDescription</code></a>
                </code> may change it to a non-null value, as defined in <span>[<cite><a class="bibref" href="#bib-JSEP">JSEP</a></cite>] (<a href="https://tools.ietf.org/html/draft-ietf-rtcweb-jsep-16#section-5.5">section 5.5.</a> and <a href="https://tools.ietf.org/html/draft-ietf-rtcweb-jsep-16#section-5.6">section 5.6.</a>)</span>.</p>
              <p>When this method is invoked, the User Agent <em class="rfc2119" title="MUST">MUST</em> run the following steps:</p>
              <ol>
                <li>
                  <p>If the dictionary argument is present, and it has a
                    <code>streams</code> member, let <var>streams</var> be that list of <code><a href="#dfn-mediastream" class="internalDFN" data-link-type="dfn">MediaStream</a></code> objects, or an empty list otherwise.</p>
                </li>
                <li>
                  <p>If the dictionary argument is present, and it has a
                    <code>sendEncodings</code> member, let
                    <var>sendEncodings</var> be that list of
                    <code><a href="#idl-def-rtcrtpencodingparameters" class="internalDFN" data-link-type="dfn"><code>RTCRtpEncodingParameters</code></a>
                    </code> objects, or an empty list otherwise.</p>
                </li>
                <li>
                  <p>If the first argument is a string, let it be
                    <var>kind</var> and run the following steps:</p>
                  <ol>
                    <li>
                      <p>If <var>kind</var> is not a legal
                        <code><a href="#dom-mediastreamtrack" class="internalDFN" data-link-type="dfn"><code>MediaStreamTrack</code></a>
                        </code> <code>kind</code>, throw a <code>TypeError</code> and abort these, and all further steps.</p>
                    </li>
                    <li>
                      <p>Let <var>track</var> be <code>null</code>.</p>
                    </li>
                  </ol>
                </li>
                <li>
                  <p>If the first argument is a
                    <code><a href="#dom-mediastreamtrack" class="internalDFN" data-link-type="dfn"><code>MediaStreamTrack</code></a>
                    </code>, let it be
                    <var>track</var> and let <var>kind</var> be
                    <var>track.kind</var>.</p>
                </li>
                <li>
                  <p><a href="#dfn-create-an-rtcrtpsender" class="internalDFN" data-link-type="dfn">Create an RTCRtpSender</a> with <var>track</var>,
                    <var>streams</var> and <var>sendEncodings</var> and let
                    <var>sender</var> be the result.</p>
                  <p>If <var>sendEncodings</var> is set, then subsequent calls to <code>createOffer</code> will be configured to send multiple RTP encodings as defined in <span>[<cite><a class="bibref" href="#bib-JSEP">JSEP</a></cite>] (<a href="https://tools.ietf.org/html/draft-ietf-rtcweb-jsep-16#section-5.2.2">section 5.2.2.</a> and <a href="https://tools.ietf.org/html/draft-ietf-rtcweb-jsep-16#section-5.2.1">section 5.2.1.</a>)</span>. When
                    <code>setRemoteDescription</code> is called with a corresponding remote description that is able to receive multiple RTP encodings as defined in <span>[<cite><a class="bibref" href="#bib-JSEP">JSEP</a></cite>] (<a href="https://tools.ietf.org/html/draft-ietf-rtcweb-jsep-16#section-3.7">section 3.7.</a>)</span>, the
                    <code><a href="#dom-rtcrtpsender" class="internalDFN" data-link-type="dfn"><code>RTCRtpSender</code></a>
                    </code> may send multiple RTP encodings and the parameters retrieved via the transceiver's
                    <code>sender.getParameters()</code> will reflect the encodings negotiated.</p>
                  <p>RID values passed into <code>init.sendEncodings</code> must be composed only of case-sensitive alphanumeric characters (a-z, A-Z, 0-9) up to a maximum of 16 characters.
                  </p>
                </li>
                <li>
                  <p><a href="#dfn-create-an-rtcrtpreceiver" class="internalDFN" data-link-type="dfn">Create an RTCRtpReceiver</a> with <var>kind</var> and let <var>receiver</var> be the result. This specification does not define how to configure <code>createOffer</code> to receive multiple RTP encodings. However when
                    <code>setRemoteDescription</code> is called with a corresponding remote description that is able to send multiple RTP encodings as defined in [<cite><a class="bibref" href="#bib-JSEP">JSEP</a></cite>], the
                    <code><a href="#idl-def-rtcrtpreceiver" class="internalDFN" data-link-type="dfn"><code>RTCRtpReceiver</code></a>
                    </code> may receive multiple RTP encodings and the parameters retrieved via the transceiver's
                    <code>receiver.getParameters()</code> will reflect the encodings negotiated.</p>
                </li>
                <li>
                  <p><a href="#dfn-create-an-rtcrtptransceiver" class="internalDFN" data-link-type="dfn">Create an RTCRtpTransceiver</a> with <var>sender</var> and <var>receiver</var> and let <var>transceiver</var> be the result.
                  </p>
                </li>
                <li>
                  <p>Add <var>transceiver</var> to <var>connection</var>'s
                    <a href="#transceivers-set">set of transceivers</a></p>
                </li>
                <li>
                  <p><a data-lt="update the negotiation-needed flag" href="#dfn-update-the-negotiation-needed-flag" class="internalDFN" data-link-type="dfn">Update the
                  negotiation-needed flag</a> for <var>connection</var>.</p>
                </li>
                <li>
                  <p>Return <var>transceiver</var>.</p>
                </li>
              </ol>
              <table class="parameters">
                <tbody>
                  <tr>
                    <th>Parameter</th>
                    <th>Type</th>
                    <th>Nullable</th>
                    <th>Optional</th>
                    <th>Description</th>
                  </tr>
                  <tr>
                    <td class="prmName">trackOrKind</td>
                    <td class="prmType"><code>(MediaStreamTrack or
                    DOMString)</code></td>
                    <td class="prmNullFalse"><span role="img" aria-label="False">âœ˜</span></td>
                    <td class="prmOptFalse"><span role="img" aria-label="False">âœ˜</span></td>
                    <td class="prmDesc"></td>
                  </tr>
                  <tr>
                    <td class="prmName">init</td>
                    <td class="prmType"><code>RTCRtpTransceiverInit</code></td>
                    <td class="prmNullFalse"><span role="img" aria-label="False">âœ˜</span></td>
                    <td class="prmOptTrue"><span role="img" aria-label="True">âœ”</span></td>
                    <td class="prmDesc"></td>
                  </tr>
                </tbody>
              </table>
              <div>
                <em>Return type:</em> <code>RTCRtpTransceiver</code>
              </div>
            </dd>
          </dl>
        </section>
      </div>
      <div>
        <pre class="def idl"><span class="idlDictionary" id="idl-def-rtcrtptransceiverinit" data-idl="" data-title="RTCRtpTransceiverInit">dictionary <span class="idlDictionaryID">RTCRtpTransceiverInit</span> {
<span class="idlMember" id="idl-def-rtcrtptransceiverinit-direction" data-idl="" data-title="direction" data-dfn-for="rtcrtptransceiverinit">    <span class="idlMemberType"><a href="#idl-def-rtcrtptransceiverdirection" class="internalDFN" data-link-type="dfn"><code>RTCRtpTransceiverDirection</code></a></span>         <span class="idlMemberName"><a data-lt="direction" href="#dom-rtcrtptransceiverinit-direction" class="internalDFN" data-link-type="dfn" data-for="RTCRtpTransceiverInit"><code>direction</code></a></span> = <span class="idlMemberValue">"sendrecv"</span>;</span>
<span class="idlMember" id="idl-def-rtcrtptransceiverinit-streams" data-idl="" data-title="streams" data-dfn-for="rtcrtptransceiverinit">    <span class="idlMemberType">sequence&lt;<a href="#dfn-mediastream" class="internalDFN" data-link-type="dfn">MediaStream</a>&gt;</span>              <span class="idlMemberName"><a data-lt="streams" href="#dom-rtcrtptransceiverinit-streams" class="internalDFN" data-link-type="dfn" data-for="RTCRtpTransceiverInit"><code>streams</code></a></span>;</span>
<span class="idlMember" id="idl-def-rtcrtptransceiverinit-sendencodings" data-idl="" data-title="sendEncodings" data-dfn-for="rtcrtptransceiverinit">    <span class="idlMemberType">sequence&lt;<a href="#idl-def-rtcrtpencodingparameters" class="internalDFN" data-link-type="dfn"><code>RTCRtpEncodingParameters</code></a>&gt;</span> <span class="idlMemberName"><a data-lt="sendEncodings" href="#dom-rtcrtptransceiverinit-sendencodings" class="internalDFN" data-link-type="dfn" data-for="RTCRtpTransceiverInit"><code>sendEncodings</code></a></span>;</span>
};</span></pre>

        <section typeof="bibo:Chapter" resource="#dictionary-rtcrtptransceiverinit-members" property="bibo:hasPart">
          <h4 id="dictionary-rtcrtptransceiverinit-members" resource="#dictionary-rtcrtptransceiverinit-members"><span property="xhv:role" resource="xhv:heading">Dictionary <a class="idlType internalDFN" href="#idl-def-rtcrtptransceiverinit" data-link-type="dfn"><code>RTCRtpTransceiverInit</code></a>
          Members</span></h4>
          <dl data-link-for="RTCRtpTransceiverInit" data-dfn-for="RTCRtpTransceiverInit" class="dictionary-members">
            <dt><dfn data-dfn-for="rtcrtptransceiverinit" data-dfn-type="dfn" id="dom-rtcrtptransceiverinit-direction" data-idl=""><code>direction</code></dfn> of type <span class="idlMemberType"><a href="#idl-def-rtcrtptransceiverdirection" class="internalDFN" data-link-type="dfn"><code>RTCRtpTransceiverDirection</code></a></span>,
            defaulting to <code>"sendrecv"</code></dt>
            <dd>The direction of the <code>RTCRtpTransceiver</code>.</dd>
            <dt><dfn data-dfn-for="rtcrtptransceiverinit" data-dfn-type="dfn" id="dom-rtcrtptransceiverinit-streams" data-idl=""><code>streams</code></dfn> of type <span class="idlMemberType">sequence&lt;<a href="#dfn-mediastream" class="internalDFN" data-link-type="dfn">MediaStream</a>&gt;</span></dt>
            <dd>
              <p>When the remote PeerConnection's ontrack event fires corresponding to the <code><a href="#idl-def-rtcrtpreceiver" class="internalDFN" data-link-type="dfn"><code>RTCRtpReceiver</code></a>
                </code> being added, these are the streams that will be put in the event.</p>
            </dd>
            <dt><dfn data-dfn-for="rtcrtptransceiverinit" data-dfn-type="dfn" id="dom-rtcrtptransceiverinit-sendencodings" data-idl=""><code>sendEncodings</code></dfn> of type <span class="idlMemberType">sequence&lt;<a href="#idl-def-rtcrtpencodingparameters" class="internalDFN" data-link-type="dfn"><code>RTCRtpEncodingParameters</code></a>&gt;</span></dt>
            <dd>
              <p>A sequence containing parameters for sending RTP encodings of media.
              </p>
            </dd>
          </dl>
        </section>
      </div>
      <div>
        <pre class="def idl"><span class="idlEnum" id="idl-def-rtcrtptransceiverdirection" data-idl="" data-title="RTCRtpTransceiverDirection">enum <span class="idlEnumID">RTCRtpTransceiverDirection</span> {
    "<a href="#dom-rtcrtptransceiverdirection-sendrecv" class="idlEnumItem">sendrecv</a>",
    "<a href="#dom-rtcrtptransceiverdirection-sendonly" class="idlEnumItem">sendonly</a>",
    "<a href="#dom-rtcrtptransceiverdirection-recvonly" class="idlEnumItem">recvonly</a>",
    "<a href="#dom-rtcrtptransceiverdirection-inactive" class="idlEnumItem">inactive</a>"
};</span></pre>
        <table data-link-for="RTCRtpTransceiverDirection" data-dfn-for="RTCRtpTransceiverDirection" class="simple">
          <tbody>
            <tr>
              <th colspan="2">Enumeration description</th>
            </tr>
            <tr>
              <td><dfn data-dfn-for="rtcrtptransceiverdirection" data-dfn-type="dfn" id="dom-rtcrtptransceiverdirection-sendrecv" data-idl=""><code>sendrecv</code></dfn></td>
              <td>The <code><a href="#idl-def-rtcrtptransceiver" class="internalDFN" data-link-type="dfn"><code>RTCRtpTransceiver</code></a>
                </code>'s
                <code><a href="#dom-rtcrtpsender" class="internalDFN" data-link-type="dfn"><code>RTCRtpSender</code></a>
                </code> <var>sender</var> will offer to send RTP, and will send RTP if the remote peer accepts and
                <code><var>sender.getParameters().encodings[i].active</var></code> is "true" for any value of <var>i</var>. The
                <code><a href="#idl-def-rtcrtptransceiver" class="internalDFN" data-link-type="dfn"><code>RTCRtpTransceiver</code></a>
                </code>'s
                <code><a href="#idl-def-rtcrtpreceiver" class="internalDFN" data-link-type="dfn"><code>RTCRtpReceiver</code></a>
                </code> will offer to receive RTP, and will receive RTP if the remote peer accepts.</td>
            </tr>
            <tr>
              <td><dfn data-dfn-for="rtcrtptransceiverdirection" data-dfn-type="dfn" id="dom-rtcrtptransceiverdirection-sendonly" data-idl=""><code>sendonly</code></dfn></td>
              <td>The <code><a href="#idl-def-rtcrtptransceiver" class="internalDFN" data-link-type="dfn"><code>RTCRtpTransceiver</code></a>
                </code>'s
                <code><a href="#dom-rtcrtpsender" class="internalDFN" data-link-type="dfn"><code>RTCRtpSender</code></a>
                </code> <var>sender</var> will offer to send RTP, and will send RTP if the remote peer accepts and
                <code><var>sender.getParameters().encodings[i].active</var></code> is "true" for any value of <var>i</var>. The
                <code><a href="#idl-def-rtcrtptransceiver" class="internalDFN" data-link-type="dfn"><code>RTCRtpTransceiver</code></a>
                </code>'s
                <code><a href="#idl-def-rtcrtpreceiver" class="internalDFN" data-link-type="dfn"><code>RTCRtpReceiver</code></a>
                </code> will not offer to receive RTP, and will not receive RTP.</td>
            </tr>
            <tr>
              <td><dfn data-dfn-for="rtcrtptransceiverdirection" data-dfn-type="dfn" id="dom-rtcrtptransceiverdirection-recvonly" data-idl=""><code>recvonly</code></dfn></td>
              <td>The <code><a href="#idl-def-rtcrtptransceiver" class="internalDFN" data-link-type="dfn"><code>RTCRtpTransceiver</code></a>
                </code>'s
                <code><a href="#dom-rtcrtpsender" class="internalDFN" data-link-type="dfn"><code>RTCRtpSender</code></a>
                </code> will not offer to send RTP, and will not send RTP. The <code><a href="#idl-def-rtcrtptransceiver" class="internalDFN" data-link-type="dfn"><code>RTCRtpTransceiver</code></a>
                </code>'s
                <code><a href="#idl-def-rtcrtpreceiver" class="internalDFN" data-link-type="dfn"><code>RTCRtpReceiver</code></a>
                </code> will offer to receive RTP, and will receive RTP if the remote peer accepts.</td>
            </tr>
            <tr>
              <td><dfn data-dfn-for="rtcrtptransceiverdirection" data-dfn-type="dfn" id="dom-rtcrtptransceiverdirection-inactive" data-idl=""><code>inactive</code></dfn></td>
              <td>The <code><a href="#idl-def-rtcrtptransceiver" class="internalDFN" data-link-type="dfn"><code>RTCRtpTransceiver</code></a>
                </code>'s
                <code><a href="#dom-rtcrtpsender" class="internalDFN" data-link-type="dfn"><code>RTCRtpSender</code></a>
                </code> will not offer to send RTP, and will not send RTP. The <code><a href="#idl-def-rtcrtptransceiver" class="internalDFN" data-link-type="dfn"><code>RTCRtpTransceiver</code></a>
                </code>'s
                <code><a href="#idl-def-rtcrtpreceiver" class="internalDFN" data-link-type="dfn"><code>RTCRtpReceiver</code></a>
                </code> will not offer to receive RTP, and will not receive RTP.</td>
            </tr>
          </tbody>
        </table>
      </div>

      <section id="processing-remote-mediastreamtracks" typeof="bibo:Chapter" resource="#processing-remote-mediastreamtracks" property="bibo:hasPart">
        <h4 id="h-processing-remote-mediastreamtracks" resource="#h-processing-remote-mediastreamtracks"><span property="xhv:role" resource="xhv:heading"><span class="secno">5.1.1 </span>Processing Remote MediaStreamTracks</span>
        </h4>
        <p>An application can reject incoming <code><a href="#dom-mediastreamtrack" class="internalDFN" data-link-type="dfn"><code>MediaStreamTrack</code></a>
          </code>
          objects by calling <code><a href="#idl-def-rtcrtptransceiver" class="internalDFN" data-link-type="dfn"><code>RTCRtpTransceiver</code></a>.stop()</code>.</p>
        <p>To <dfn id="dispatch-receiver" data-dfn-type="dfn">dispatch a receiver</dfn> for an incoming media description <span>[<cite><a class="bibref" href="#bib-JSEP">JSEP</a></cite>] (<a href="https://tools.ietf.org/html/draft-ietf-rtcweb-jsep-16#section-5.9">section 5.9.</a>)</span>, the user agent <em class="rfc2119" title="MUST">MUST</em> run the following steps:</p>
        <ol>
          <li>
            <p>Let <var>connection</var> be the
              <code><a href="#dom-rtcpeerconnection" class="internalDFN" data-link-type="dfn"><code>RTCPeerConnection</code></a>
              </code> expecting this media.</p>
          </li>
          <li>
            <p>If <var>connection</var>'s [[<a href="#dfn-isclosed" class="internalDFN" data-link-type="dfn">isClosed</a>]] slot is
              <code>true</code>, abort these steps.</p>
          </li>
          <li>
            <p>Let <var>streams</var> be a list of
              <code><a href="#dfn-mediastream" class="internalDFN" data-link-type="dfn">MediaStream</a></code> objects that the sender indicated the sent <code><a href="#dom-mediastreamtrack" class="internalDFN" data-link-type="dfn"><code>MediaStreamTrack</code></a>
              </code> being a part of. The information needed to collect these objects is part of the media description.
            </p>
          </li>
          <li>
            <p>Run the following steps to create a track representing the incoming media description:</p>
            <ol>
              <li>
                <p>Create a <code><a href="#dom-mediastreamtrack" class="internalDFN" data-link-type="dfn"><code>MediaStreamTrack</code></a>
                  </code> object
                  <var>track</var> to represent the media description. The source of <var>track</var> is a <dfn data-dfn-type="dfn" id="dfn-remote-source">remote source</dfn> provided by
                  <var>connection</var>.</p>
              </li>
              <li>
                <p>Initialize <code><var>track</var>.kind</code> attribute to
                  <code>audio</code> or <code>video</code> depending on the media type of the media description.</p>
              </li>
              <li>
                <p>Initialize <code><var>track</var>.id</code> attribute to the media description track id.</p>
              </li>
              <li>
                <p>Initialize <code><var>track</var>.label</code> attribute to
                  <code>remote audio</code> or <code>remote video</code> depending on the media type of the media description.</p>
              </li>
              <li>
                <p>Initialize <code><var>track</var>.readyState</code> attribute to <code>live</code>.</p>
              </li>
              <li>
                <p>Initialize <code><var>track</var>.muted</code> attribute to
                  <code>true</code>. See the <a href="#dom-mediastreamtrack" class="internalDFN" data-link-type="dfn"><code><code>MediaStreamTrack</code></code></a> section about how the <code>muted</code> attribute reflects if a <code><a href="#dom-mediastreamtrack" class="internalDFN" data-link-type="dfn"><code>MediaStreamTrack</code></a>
                  </code> is receiving media data or not.</p>
              </li>
            </ol>
          </li>
          <li>
            <p>Add <var>track</var> to all <code><a href="#dfn-mediastream" class="internalDFN" data-link-type="dfn">MediaStream</a></code> objects in <var>streams</var>.</p>
            <div class="note">
              <div class="note-title marker" aria-level="5" role="heading" id="h-note9"><span>Note</span></div>
              <p class="">This will result in an addtrack event being fired at each MediaStream as described in [<cite><a class="bibref" href="#bib-GETUSERMEDIA">GETUSERMEDIA</a></cite>].</p>
            </div>
          </li>
          <li>
            <p>Create a new <code><a href="#idl-def-rtcrtpreceiver" class="internalDFN" data-link-type="dfn"><code>RTCRtpReceiver</code></a>
              </code> object
              <var>receiver</var> for <var>track</var>, and add it to
              <var>connection</var>'s set of receivers.</p>
          </li>
          <li>
            <p>Fire an event named <code title="event-track"><a href="#event-track" class="internalDFN" data-link-type="dfn"><code>track</code></a>
              </code> with <var>transceiver</var>,
              <var>track</var>, and <var>streams</var> at the
              <var>connection</var> object.</p>
          </li>
        </ol>
        <p>When an <code><a href="#dom-rtcpeerconnection" class="internalDFN" data-link-type="dfn"><code>RTCPeerConnection</code></a>
          </code> finds that a track from the remote peer has been removed, the user agent <em class="rfc2119" title="MUST">MUST</em> follow these steps:
        </p>
        <ol>
          <li>
            <p>Let <var>connection</var> be the
              <code><a href="#dom-rtcpeerconnection" class="internalDFN" data-link-type="dfn"><code>RTCPeerConnection</code></a>
              </code> associated with the track being removed.</p>
          </li>
          <li>
            <p>Let <var>track</var> be the <code><a href="#dom-mediastreamtrack" class="internalDFN" data-link-type="dfn"><code>MediaStreamTrack</code></a>
              </code>
              object that represents the track being removed, if any. If there isn't one, then abort these steps.</p>
          </li>
          <li>
            <p>By definition, <var>track</var> is now ended.</p>
            <div class="note">
              <div class="note-title marker" aria-level="5" role="heading" id="h-note10"><span>Note</span></div>
              <p class="">A task is thus <span title="queue a task">queued</span> to update <var>track</var> and fire an event.
              </p>
            </div>
          </li>
          <li>
            <p>Queue a task to run the following substeps:</p>
            <ol>
              <li>
                <p>If <var>connection</var>'s [[<a href="#dfn-isclosed" class="internalDFN" data-link-type="dfn">isClosed</a>]] slot is
                  <code>true</code>, abort these steps.</p>
              </li>
              <!-- close() was probably called just before this
           task ran -->
              <li>
                <p>Remove the <code><a href="#idl-def-rtcrtpreceiver" class="internalDFN" data-link-type="dfn"><code>RTCRtpReceiver</code></a>
                  </code> associated with <var>track</var> from <var>connection</var>'s set of receivers.
                </p>
              </li>
            </ol>
          </li>
        </ol>
      </section>
    </section>

    <section id="rtcrtpsender-interface" typeof="bibo:Chapter" resource="#rtcrtpsender-interface" property="bibo:hasPart">
      <h3 id="h-rtcrtpsender-interface" resource="#h-rtcrtpsender-interface"><span property="xhv:role" resource="xhv:heading"><span class="secno">5.2 </span>RTCRtpSender Interface</span>
      </h3>
      <p>The <code><dfn data-dfn-for="" data-dfn-type="dfn" id="dom-rtcrtpsender" data-idl="">RTCRtpSender</dfn></code> interface allows an application to control how a given <code>MediaStreamTrack</code> is encoded and transmitted to a remote peer. When <code>setParameters</code> is called on an <code><a href="#dom-rtcrtpsender" class="internalDFN" data-link-type="dfn"><code>RTCRtpSender</code></a>
        </code> object, the encoding is changed appropriately.</p>
      <p>An <code><a href="#dom-rtcrtpsender" class="internalDFN" data-link-type="dfn"><code>RTCRtpSender</code></a>
        </code> can be <dfn id="sender-stopped" data-dfn-type="dfn">stopped</dfn>, which indicates that it will no longer send any media.</p>
      <p>To <dfn data-dfn-type="dfn" id="dfn-create-an-rtcrtpsender">create an RTCRtpSender</dfn> with a
        <code><a href="#dom-mediastreamtrack" class="internalDFN" data-link-type="dfn"><code>MediaStreamTrack</code></a>
        </code>, <var>track</var>, a list of
        <code><a href="#dfn-mediastream" class="internalDFN" data-link-type="dfn">MediaStream</a></code> objects, <var>streams</var>, and optionally a list of <code><a href="#idl-def-rtcrtpencodingparameters" class="internalDFN" data-link-type="dfn"><code>RTCRtpEncodingParameters</code></a>
        </code>
        objects, <var>sendEncodings</var>, run the following steps:</p>
      <ol>
        <li>
          <p>Let <var>sender</var> be a new <code><a href="#dom-rtcrtpsender" class="internalDFN" data-link-type="dfn"><code>RTCRtpSender</code></a>
            </code>
            object.</p>
        </li>
        <li>
          <p>Set <var>sender.track</var> to <var>track</var>.</p>
        </li>
        <li>
          <p>Let <var>sender</var> have an [[<dfn data-dfn-type="dfn" id="dfn-associated-mediastreams">associated
          MediaStreams</dfn>]] internal slot, representing a list of
            <code><a href="#dfn-mediastream" class="internalDFN" data-link-type="dfn">MediaStream</a></code> objects that the
            <code><a href="#dom-mediastreamtrack" class="internalDFN" data-link-type="dfn"><code>MediaStreamTrack</code></a>
            </code> object of this sender is associated with.</p>
        </li>
        <li>
          <p>Set <var>sender</var>'s [[<a href="#dfn-associated-mediastreams" class="internalDFN" data-link-type="dfn">associated MediaStreams</a>]] slot to
            <var>streams</var>.</p>
        </li>
        <li>
          <p>Let <var>sender</var> have a [[<dfn data-dfn-type="dfn" id="dfn-send-encodings">send encodings</dfn>]] internal slot, representing a list of
            <code><a href="#idl-def-rtcrtpencodingparameters" class="internalDFN" data-link-type="dfn"><code>RTCRtpEncodingParameters</code></a>
            </code> objects, initialized to an empty list.</p>
        </li>
        <li>
          <p>If <var>sendEncodings</var> is given as input to this algorithm, set the [[<a href="#dfn-send-encodings" class="internalDFN" data-link-type="dfn">send encodings</a>]] slot to
            <var>sendEncodings</var>.</p>
        </li>
        <li>
          <p>Return <var>sender</var>.</p>
        </li>
      </ol>
      <div>
        <pre class="def idl"><span class="idlInterface" id="idl-def-rtcrtpsender" data-idl="" data-title="RTCRtpSender">interface <span class="idlInterfaceID"><a data-lt="RTCRtpSender" href="#dom-rtcrtpsender" class="internalDFN" data-link-type="dfn" data-for=""><code>RTCRtpSender</code></a></span> {
<span class="idlAttribute" id="idl-def-rtcrtpsender-track" data-idl="" data-title="track" data-dfn-for="rtcrtpsender">    readonly attribute <span class="idlAttrType"><a href="#dom-mediastreamtrack" class="internalDFN" data-link-type="dfn"><code>MediaStreamTrack</code></a>?</span> <span class="idlAttrName"><a data-lt="track" href="#dom-rtcrtpsender-track" class="internalDFN" data-link-type="dfn" data-for="RTCRtpSender"><code>track</code></a></span>;</span>
<span class="idlAttribute" id="idl-def-rtcrtpsender-transport" data-idl="" data-title="transport" data-dfn-for="rtcrtpsender">    readonly attribute <span class="idlAttrType"><a href="#idl-def-rtcdtlstransport" class="internalDFN" data-link-type="dfn"><code>RTCDtlsTransport</code></a>?</span> <span class="idlAttrName"><a data-lt="transport" href="#dom-rtcrtpsender-transport" class="internalDFN" data-link-type="dfn" data-for="RTCRtpSender"><code>transport</code></a></span>;</span>
<span class="idlAttribute" id="idl-def-rtcrtpsender-rtcptransport" data-idl="" data-title="rtcpTransport" data-dfn-for="rtcrtpsender">    readonly attribute <span class="idlAttrType"><a href="#idl-def-rtcdtlstransport" class="internalDFN" data-link-type="dfn"><code>RTCDtlsTransport</code></a>?</span> <span class="idlAttrName"><a data-lt="rtcpTransport" href="#dom-rtcrtpsender-rtcptransport" class="internalDFN" data-link-type="dfn" data-for="RTCRtpSender"><code>rtcpTransport</code></a></span>;</span>
<span class="idlMethod" id="idl-def-rtcrtpsender-getcapabilities(domstring)" data-idl="" data-title="getCapabilities" data-dfn-for="rtcrtpsender">    static <span class="idlMethType"><a href="#idl-def-rtcrtpcapabilities" class="internalDFN" data-link-type="dfn"><code>RTCRtpCapabilities</code></a></span> <span class="idlMethName"><a data-lt="getCapabilities" href="#dom-rtcrtpsender-getcapabilities" class="internalDFN" data-link-type="dfn" data-for="RTCRtpSender"><code>getCapabilities</code></a></span>(<span class="idlParam"><span class="idlParamType">DOMString</span> <span class="idlParamName">kind</span></span>);</span>
<span class="idlMethod" id="idl-def-rtcrtpsender-setparameters(optional-rtcrtpparameters)" data-idl="" data-title="setParameters" data-dfn-for="rtcrtpsender">    <span class="idlMethType">Promise&lt;void&gt;</span>      <span class="idlMethName"><a data-lt="setParameters" href="#dom-rtcrtpsender-setparameters" class="internalDFN" data-link-type="dfn" data-for="RTCRtpSender"><code>setParameters</code></a></span>(<span class="idlParam">optional <span class="idlParamType"><a href="#idl-def-rtcrtpparameters" class="internalDFN" data-link-type="dfn"><code>RTCRtpParameters</code></a></span> <span class="idlParamName">parameters</span></span>);</span>
<span class="idlMethod" id="idl-def-rtcrtpsender-getparameters()" data-idl="" data-title="getParameters" data-dfn-for="rtcrtpsender">    <span class="idlMethType"><a href="#idl-def-rtcrtpparameters" class="internalDFN" data-link-type="dfn"><code>RTCRtpParameters</code></a></span>   <span class="idlMethName"><a data-lt="getParameters" href="#dom-rtcrtpsender-getparameters" class="internalDFN" data-link-type="dfn" data-for="RTCRtpSender"><code>getParameters</code></a></span>();</span>
<span class="idlMethod" id="idl-def-rtcrtpsender-replacetrack(mediastreamtrack)" data-idl="" data-title="replaceTrack" data-dfn-for="rtcrtpsender">    <span class="idlMethType">Promise&lt;void&gt;</span>      <span class="idlMethName"><a data-lt="replaceTrack" href="#dom-rtcrtpsender-replacetrack" class="internalDFN" data-link-type="dfn" data-for="RTCRtpSender"><code>replaceTrack</code></a></span>(<span class="idlParam"><span class="idlParamType"><a href="#dom-mediastreamtrack" class="internalDFN" data-link-type="dfn"><code>MediaStreamTrack</code></a></span> <span class="idlParamName">withTrack</span></span>);</span>
};</span></pre>

        <section typeof="bibo:Chapter" resource="#attributes-7" property="bibo:hasPart">
          <h4 id="attributes-7" resource="#attributes-7"><span property="xhv:role" resource="xhv:heading">Attributes</span></h4>
          <dl data-link-for="RTCRtpSender" data-dfn-for="RTCRtpSender" class="attributes">
            <dt><dfn data-dfn-for="rtcrtpsender" data-dfn-type="dfn" id="dom-rtcrtpsender-track" data-idl=""><code>track</code></dfn> of type <span class="idlAttrType"><a href="#dom-mediastreamtrack" class="internalDFN" data-link-type="dfn"><code>MediaStreamTrack</code></a></span>, readonly ,
            nullable</dt>
            <dd>
              <p>The <code>track</code> attribute is the track that is associated with this <code><a href="#dom-rtcrtpsender" class="internalDFN" data-link-type="dfn"><code>RTCRtpSender</code></a>
                </code> object. If
                <code>track</code> is ended, or if
                <code>track</code>.<var>muted</var> is set to <code>true</code>, the <code>RTCRtpSender</code> sends silence (audio) or a black frame (video).</p>
            </dd>
            <dt><dfn data-dfn-for="rtcrtpsender" data-dfn-type="dfn" id="dom-rtcrtpsender-transport" data-idl=""><code>transport</code></dfn> of type <span class="idlAttrType"><a href="#idl-def-rtcdtlstransport" class="internalDFN" data-link-type="dfn"><code>RTCDtlsTransport</code></a></span>, readonly,
            nullable</dt>
            <dd>
              <p>The <code>transport</code> attribute is the transport over which media from <code>track</code> is sent in the form of RTP packets. Prior to construction of the
                <code><a href="#idl-def-rtcdtlstransport" class="internalDFN" data-link-type="dfn"><code>RTCDtlsTransport</code></a>
                </code> object, the
                <code>transport</code> attribute will be null. When bundling is used, multiple <code><a href="#dom-rtcrtpsender" class="internalDFN" data-link-type="dfn"><code>RTCRtpSender</code></a>
                </code> objects will share one <code>transport</code> and will all send RTP and RTCP over the same transport.</p>
            </dd>
            <dt><dfn data-dfn-for="rtcrtpsender" data-dfn-type="dfn" id="dom-rtcrtpsender-rtcptransport" data-idl=""><code>rtcpTransport</code></dfn> of type <span class="idlAttrType"><a href="#idl-def-rtcdtlstransport" class="internalDFN" data-link-type="dfn"><code>RTCDtlsTransport</code></a></span>, readonly ,
            nullable</dt>
            <dd>
              <p>The <code>rtcpTransport</code> attribute is the transport over which RTCP is sent and received. Prior to construction of the
                <code><a href="#idl-def-rtcdtlstransport" class="internalDFN" data-link-type="dfn"><code>RTCDtlsTransport</code></a>
                </code> object, the
                <code>rtcpTransport</code> attribute will be null. When RTCP mux is used (or bundling, which mandates RTCP mux),
                <code>rtcpTransport</code> will be null, and both RTP and RTCP traffic will flow over the transport described by
                <code>transport</code>.</p>
            </dd>
          </dl>
        </section>

        <section typeof="bibo:Chapter" resource="#methods-5" property="bibo:hasPart">
          <h4 id="methods-5" resource="#methods-5"><span property="xhv:role" resource="xhv:heading">Methods</span></h4>
          <dl data-link-for="RTCRtpSender" data-dfn-for="RTCRtpSender" class="methods">
            <dt><code>getCapabilities</code>, static</dt>
            <dd>
              <p>The <dfn data-dfn-for="rtcrtpsender" data-dfn-type="dfn" data-lt="getcapabilities" id="dom-rtcrtpsender-getcapabilities" data-idl=""><code>RTCRtpSender.getCapabilities</code></dfn> method returns the most optimist view on the capabilities of the system for sending media of the given kind. It does not reserve any resources, ports, or other state but is meant to provide a way to discover the types of capabilities of the browser including which codecs may be supported.</p>
              <p class="fingerprint">These capabilities provide generally persistent cross-origin information on the device and thus increases the fingerprinting surface of the application. In privacy-sensitive contexts, browsers can consider mitigations such as reporting only a common subset of the capabilities.<img src="images/fingerprint.png" alt="(This is a fingerprinting vector.)" width="15" height="21"></p>
              <table class="parameters">
                <tbody>
                  <tr>
                    <th>Parameter</th>
                    <th>Type</th>
                    <th>Nullable</th>
                    <th>Optional</th>
                    <th>Description</th>
                  </tr>
                  <tr>
                    <td class="prmName">kind</td>
                    <td class="prmType"><code>DOMString</code></td>
                    <td class="prmNullFalse"><span role="img" aria-label="False">âœ˜</span></td>
                    <td class="prmOptFalse"><span role="img" aria-label="False">âœ˜</span></td>
                    <td class="prmDesc"></td>
                  </tr>
                </tbody>
              </table>
              <div>
                <em>Return type:</em> <code>RTCRtpCapabilities</code>
              </div>
            </dd>
            <dt><dfn data-dfn-for="rtcrtpsender" data-dfn-type="dfn" id="dom-rtcrtpsender-setparameters" data-idl=""><code>setParameters</code></dfn></dt>
            <dd>
              <p>The <code>setParameters</code> method updates how
                <code>track</code> is encoded and transmitted to a remote peer.
              </p>
              <p>When the <code>setParameters</code> method is called, the user agent <em class="rfc2119" title="MUST">MUST</em> run the following steps:</p>
              <ol>
                <li>Let <var>sender</var> be the
                  <code><a href="#dom-rtcrtpsender" class="internalDFN" data-link-type="dfn"><code>RTCRtpSender</code></a>
                  </code> object on which
                  <code>setParameters</code> is invoked.</li>
                <li>Let <var>p</var> be a new promise.</li>
                <li>Return <var>p</var>, performing the next steps in parallel.
                </li>
                <li>If any parameter in the <var>parameters</var> argument, marked as a <dfn data-dfn-type="dfn" id="dfn-read-only-parameter">Read-only parameter</dfn>, has a value that is different from the corresponding parameter value returned from
                  <code>getParameters()</code>, abort these steps and return a promise rejected with
                  <code>InvalidModificationError</code>. Note that this also applies to <var>transactionId</var>.</li>
                <li>If the <code>scaleResolutionDownBy</code> parameter in the
                  <var>parameters</var> argument has a value less than 1.0, abort these steps and return a promise rejected with
                  <code>RangeError</code>.</li>
                <li>Set the <code><a href="#dom-rtcrtpsender" class="internalDFN" data-link-type="dfn"><code>RTCRtpSender</code></a>
                  </code>'s internal
                  <var>transactionId</var> slot to a previously unused value.
                </li>
                <li>Resolve <var>p</var> with <code>undefined</code>.</li>
              </ol>
              <p>If codecs are reordered, the new order indicates the preference for sending, with the first codec being the codec with highest preference. If a codec is removed, that codec will not be used to send. The effect of reordering or removing codecs lasts until the codecs are renegotiated. After the codecs are renegotiated, they are set to the value negotiated, and
                <code>setParameters</code> needs to be called again to re-apply codec preferences.</p>
              <p><code>setParameters</code> does not cause SDP renegotiation and can only be used to change what the media stack is sending or receiving within the envelope negotiated by Offer/Answer. The attributes in the <code><a href="#idl-def-rtcrtpparameters" class="internalDFN" data-link-type="dfn"><code>RTCRtpParameters</code></a>
                </code> dictionary are designed to not enable this, so attributes like
                <code>ssrc</code> that cannot be changed are read only. Other things, like bitrate, are controlled using limits such as
                <code>maxBitrate</code>, where the User Agent needs to ensure it does not exceed the maximum bitrate specified by
                <code>maxBitrate</code>, while at the same time making sure it satisfies constraints on bitrate specified in other places such as the SDP.</p>
              <table class="parameters">
                <tbody>
                  <tr>
                    <th>Parameter</th>
                    <th>Type</th>
                    <th>Nullable</th>
                    <th>Optional</th>
                    <th>Description</th>
                  </tr>
                  <tr>
                    <td class="prmName">parameters</td>
                    <td class="prmType"><code>RTCRtpParameters</code></td>
                    <td class="prmNullFalse"><span role="img" aria-label="False">âœ˜</span></td>
                    <td class="prmOptTrue"><span role="img" aria-label="True">âœ”</span></td>
                    <td class="prmDesc"></td>
                  </tr>
                </tbody>
              </table>
              <div>
                <em>Return type:</em> <code>Promise&lt;void&gt;</code>
              </div>
            </dd>
            <dt><code>getParameters</code></dt>
            <dd>
              <p>The <dfn data-dfn-for="rtcrtpsender" data-dfn-type="dfn" id="dom-rtcrtpsender-getparameters" data-idl=""><code>getParameters</code></dfn> method returns the
                <code><a href="#dom-rtcrtpsender" class="internalDFN" data-link-type="dfn"><code>RTCRtpSender</code></a>
                </code> object's current parameters for how <code>track</code> is encoded and transmitted to a remote
                <code><a href="#idl-def-rtcrtpreceiver" class="internalDFN" data-link-type="dfn"><code>RTCRtpReceiver</code></a>
                </code>. It may used with
                <code>setParameters</code> to change the parameters in the following way:</p>
              <div class="example">
                <div class="example-title marker"><span>Example 2</span></div><pre class="highlight hljs javascript"><span class="hljs-keyword">var</span> params = sender.getParameters();
<span class="hljs-comment">// ... make changes to RTCRtpParameters</span>
params.encodings[<span class="hljs-number">0</span>].active = <span class="hljs-literal">false</span>;
sender.setParameters(params)</pre></div>
              <div>
                <em>No parameters.</em>
              </div>
              <div>
                <em>Return type:</em> <code>RTCRtpParameters</code>
              </div>
            </dd>
            <dt><code>replaceTrack</code></dt>
            <dd>
              <p>Attempts to replace the track being sent with another track provided, without renegotiation.</p>
              <p>To avoid track identifiers changing on the remote receiving end when a track is replaced, the sender <em class="rfc2119" title="MUST">MUST</em> retain the original track identifier and stream associations and use these in subsequent negotiations.</p>
              <p>When the <dfn data-dfn-for="rtcrtpsender" data-dfn-type="dfn" id="dom-rtcrtpsender-replacetrack" data-idl=""><code>replaceTrack</code></dfn> method is invoked, the user agent <em class="rfc2119" title="MUST">MUST</em> run the following steps:</p>
              <ol>
                <li>Let <var>sender</var> be the
                  <code><a href="#dom-rtcrtpsender" class="internalDFN" data-link-type="dfn"><code>RTCRtpSender</code></a>
                  </code> object on which
                  <code>replaceTrack</code> is invoked.</li>
                <li>
                  <p>Let <var>connection</var> be the
                    <code><a href="#dom-rtcpeerconnection" class="internalDFN" data-link-type="dfn"><code>RTCPeerConnection</code></a>
                    </code> object that created
                    <var>sender</var>.</p>
                </li>
                <li>
                  <p>If <var>sender</var> is <a href="#sender-stopped" class="internalDFN" data-link-type="dfn">stopped</a>, return a promise rejected with an <code>InvalidStateError</code>.</p>
                </li>
                <li>
                  <p>Let <var>withTrack</var> be the argument to this method.
                  </p>
                </li>
                <li>
                  <p>Let <var>transceiver</var> be the
                    <code><a href="#idl-def-rtcrtptransceiver" class="internalDFN" data-link-type="dfn"><code>RTCRtpTransceiver</code></a>
                    </code> object associated with
                    <var>sender</var>.</p>
                </li>
                <li>
                  <p>If <code><var>withTrack</var>.kind</code> differs from the
                    <a href="#dfn-transceiver-kind" class="internalDFN" data-link-type="dfn">transceiver kind</a> of <var>transceiver</var>, return a promise rejected with a <code>TypeError</code>.</p>
                </li>
                <li>
                  <p>If <var>transceiver</var> is not yet associated with a
                    <a href="#dfn-media-description" class="internalDFN" data-link-type="dfn">media description</a> <span>[<cite><a class="bibref" href="#bib-JSEP">JSEP</a></cite>] (<a href="https://tools.ietf.org/html/draft-ietf-rtcweb-jsep-16#section-3.4.1">section 3.4.1.</a>)</span>, then set
                    <var>sender</var>'s <code><a data-for="RTCRtpSender" href="#dom-rtcrtpsender-track" class="internalDFN" data-link-type="dfn"><code>track</code></a>
                    </code> attribute to
                    <var>withTrack</var>, and return a promise resolved with
                    <code>undefined</code>.</p>
                </li>
                <li>
                  <p>Let <var>p</var> be a new promise.</p>
                </li>
                <li>
                  <p>Run the following steps in parallel:</p>
                  <ol>
                    <li>
                      <p>Determine if negotiation is needed to transmit
                        <var>withTrack</var> in place of the sender's existing track. Negotiation is not needed if the sender's existing track is ended (which appears as though the track was muted). Ignore which <code>MediaStream</code> the track resides in and the <code>id</code> attribute of the track in this determination. If negotiation is needed, then reject <var>p</var> with
                        <code>InvalidModificationError</code> and abort these steps.
                      </p>
                    </li>
                    <li>
                      <p>Have the sender switch seamlessly to transmitting
                        <var>withTrack</var> instead of the sender's existing track, without negotiating.</p>
                    </li>
                    <li>
                      <p>Queue a task that sets <var>sender</var>'s
                        <code><a data-for="RTCRtpSender" href="#dom-rtcrtpsender-track" class="internalDFN" data-link-type="dfn"><code>track</code></a>
                        </code>
                        attribute to <var>withTrack</var>, and resolves
                        <var>p</var> with <code>undefined</code>.</p>
                    </li>
                  </ol>
                </li>
                <li>
                  <p>Return <var>p</var>.</p>
                </li>
              </ol>
              <div class="note">
                <div class="note-title marker" aria-level="5" role="heading" id="h-note11"><span>Note</span></div>
                <div class="">
                  <p>Changing dimensions and/or frame rates might not require negotiation. Cases that may require negotiation include:</p>
                  <ol>
                    <li>Changing a resolution to a value outside of the negotiated imageattr bounds, as described in [
                      <cite><a class="bibref" href="#bib-RFC6236">RFC6236</a></cite>].</li>
                    <li>Changing a frame rate to a value that causes the block rate for the codec to be exceeded.</li>
                    <li>A video track differing in raw vs. pre-encoded format.
                    </li>
                    <li>An audio track having a different number of channels.
                    </li>
                    <li>Sources that also encode (typically hardware encoders) might be unable to produce the negotiated codec; similarly, software sources might not implement the codec that was negotiated for an encoding source.</li>
                  </ol>
                </div>
              </div>
              <table class="parameters">
                <tbody>
                  <tr>
                    <th>Parameter</th>
                    <th>Type</th>
                    <th>Nullable</th>
                    <th>Optional</th>
                    <th>Description</th>
                  </tr>
                  <tr>
                    <td class="prmName">withTrack</td>
                    <td class="prmType"><code>MediaStreamTrack</code></td>
                    <td class="prmNullFalse"><span role="img" aria-label="False">âœ˜</span></td>
                    <td class="prmOptFalse"><span role="img" aria-label="False">âœ˜</span></td>
                    <td class="prmDesc"></td>
                  </tr>
                </tbody>
              </table>
              <div>
                <em>Return type:</em> <code>Promise&lt;void&gt;</code>
              </div>
            </dd>
          </dl>
        </section>
      </div>
      <div>
        <pre class="def idl"><span class="idlDictionary" id="idl-def-rtcrtpparameters" data-idl="" data-title="RTCRtpParameters">dictionary <span class="idlDictionaryID">RTCRtpParameters</span> {
<span class="idlMember" id="idl-def-rtcrtpparameters-transactionid" data-idl="" data-title="transactionId" data-dfn-for="rtcrtpparameters">    <span class="idlMemberType">DOMString</span>                                 <span class="idlMemberName"><a data-lt="transactionId" href="#dom-rtcrtpparameters-transactionid" class="internalDFN" data-link-type="dfn" data-for="RTCRtpParameters"><code>transactionId</code></a></span>;</span>
<span class="idlMember" id="idl-def-rtcrtpparameters-encodings" data-idl="" data-title="encodings" data-dfn-for="rtcrtpparameters">    <span class="idlMemberType">sequence&lt;<a href="#idl-def-rtcrtpencodingparameters" class="internalDFN" data-link-type="dfn"><code>RTCRtpEncodingParameters</code></a>&gt;</span>        <span class="idlMemberName"><a data-lt="encodings" href="#dom-rtcrtpparameters-encodings" class="internalDFN" data-link-type="dfn" data-for="RTCRtpParameters"><code>encodings</code></a></span>;</span>
<span class="idlMember" id="idl-def-rtcrtpparameters-headerextensions" data-idl="" data-title="headerExtensions" data-dfn-for="rtcrtpparameters">    <span class="idlMemberType">sequence&lt;<a href="#idl-def-rtcrtpheaderextensionparameters" class="internalDFN" data-link-type="dfn"><code>RTCRtpHeaderExtensionParameters</code></a>&gt;</span> <span class="idlMemberName"><a data-lt="headerExtensions" href="#dom-rtcrtpparameters-headerextensions" class="internalDFN" data-link-type="dfn" data-for="RTCRtpParameters"><code>headerExtensions</code></a></span>;</span>
<span class="idlMember" id="idl-def-rtcrtpparameters-rtcp" data-idl="" data-title="rtcp" data-dfn-for="rtcrtpparameters">    <span class="idlMemberType"><a href="#idl-def-rtcrtcpparameters" class="internalDFN" data-link-type="dfn"><code>RTCRtcpParameters</code></a></span>                         <span class="idlMemberName"><a data-lt="rtcp" href="#dom-rtcrtpparameters-rtcp" class="internalDFN" data-link-type="dfn" data-for="RTCRtpParameters"><code>rtcp</code></a></span>;</span>
<span class="idlMember" id="idl-def-rtcrtpparameters-codecs" data-idl="" data-title="codecs" data-dfn-for="rtcrtpparameters">    <span class="idlMemberType">sequence&lt;<a href="#idl-def-rtcrtpcodecparameters" class="internalDFN" data-link-type="dfn"><code>RTCRtpCodecParameters</code></a>&gt;</span>           <span class="idlMemberName"><a data-lt="codecs" href="#dom-rtcrtpparameters-codecs" class="internalDFN" data-link-type="dfn" data-for="RTCRtpParameters"><code>codecs</code></a></span>;</span>
<span class="idlMember" id="idl-def-rtcrtpparameters-degradationpreference" data-idl="" data-title="degradationPreference" data-dfn-for="rtcrtpparameters">    <span class="idlMemberType"><a href="#idl-def-rtcdegradationpreference" class="internalDFN" data-link-type="dfn"><code>RTCDegradationPreference</code></a></span>                  <span class="idlMemberName"><a data-lt="degradationPreference" href="#dom-rtcrtpparameters-degradationpreference" class="internalDFN" data-link-type="dfn" data-for="RTCRtpParameters"><code>degradationPreference</code></a></span> = <span class="idlMemberValue">"balanced"</span>;</span>
};</span></pre>

        <section typeof="bibo:Chapter" resource="#dictionary-rtcrtpparameters-members" property="bibo:hasPart">
          <h4 id="dictionary-rtcrtpparameters-members" resource="#dictionary-rtcrtpparameters-members"><span property="xhv:role" resource="xhv:heading">Dictionary <a class="idlType internalDFN" href="#idl-def-rtcrtpparameters" data-link-type="dfn"><code>RTCRtpParameters</code></a> Members</span></h4>
          <dl data-link-for="RTCRtpParameters" data-dfn-for="RTCRtpParameters" class="dictionary-members">
            <dt><dfn data-dfn-for="rtcrtpparameters" data-dfn-type="dfn" id="dom-rtcrtpparameters-transactionid" data-idl=""><code>transactionId</code></dfn> of type <span class="idlMemberType">DOMString</span></dt>
            <dd>
              <p>An unique identifier for the last set of parameters applied. Ensures that setParameters can only be called based on a previous getParameters, and that there are no intervening changes.</p>
            </dd>
            <dt><dfn data-dfn-for="rtcrtpparameters" data-dfn-type="dfn" id="dom-rtcrtpparameters-encodings" data-idl=""><code>encodings</code></dfn> of type <span class="idlMemberType">sequence&lt;<a href="#idl-def-rtcrtpencodingparameters" class="internalDFN" data-link-type="dfn"><code>RTCRtpEncodingParameters</code></a>&gt;</span></dt>
            <dd>
              <p>A sequence containing parameters for RTP encodings of media.
              </p>
            </dd>
            <dt><dfn data-dfn-for="rtcrtpparameters" data-dfn-type="dfn" id="dom-rtcrtpparameters-headerextensions" data-idl=""><code>headerExtensions</code></dfn> of type <span class="idlMemberType">sequence&lt;<a href="#idl-def-rtcrtpheaderextensionparameters" class="internalDFN" data-link-type="dfn"><code>RTCRtpHeaderExtensionParameters</code></a>&gt;</span></dt>
            <dd>
              <p>A sequence containing parameters for RTP header extensions.
              </p>
            </dd>
            <dt><dfn data-dfn-for="rtcrtpparameters" data-dfn-type="dfn" id="dom-rtcrtpparameters-rtcp" data-idl=""><code>rtcp</code></dfn> of type <span class="idlMemberType"><a href="#idl-def-rtcrtcpparameters" class="internalDFN" data-link-type="dfn"><code>RTCRtcpParameters</code></a></span></dt>
            <dd>
              <p>Parameters used for RTCP.</p>
            </dd>
            <dt><dfn data-dfn-for="rtcrtpparameters" data-dfn-type="dfn" id="dom-rtcrtpparameters-codecs" data-idl=""><code>codecs</code></dfn> of type <span class="idlMemberType">sequence&lt;<a href="#idl-def-rtcrtpcodecparameters" class="internalDFN" data-link-type="dfn"><code>RTCRtpCodecParameters</code></a>&gt;</span></dt>
            <dd>
              <p>A sequence containing the media codecs that an
                <code><a href="#dom-rtcrtpsender" class="internalDFN" data-link-type="dfn"><code>RTCRtpSender</code></a>
                </code> will choose from, as well as entries for RTX, RED and FEC mechanisms. Corresponding to each media codec where retransmission via RTX is enabled, there will be an entry in <code>codecs[]</code> with a <code>mimeType</code> attribute indicating retransmission via "audio/rtx" or "video/rtx", and an <code>sdpFmtpLine</code> attribute (providing the "apt" and "rtx-time" parameters).</p>
            </dd>
            <dt><dfn data-dfn-for="rtcrtpparameters" data-dfn-type="dfn" id="dom-rtcrtpparameters-degradationpreference" data-idl=""><code>degradationPreference</code></dfn> of type
            <span class="idlMemberType"><a href="#idl-def-rtcdegradationpreference" class="internalDFN" data-link-type="dfn"><code>RTCDegradationPreference</code></a></span>,
            defaulting to <code>"balanced"</code></dt>
            <dd>
              <p>When bandwidth is constrained and the
                <code>RtpSender</code> needs to choose between degrading resolution or degrading framerate,
                <code>degradationPreference</code> indicates which is preferred.
              </p>
            </dd>
          </dl>
        </section>
      </div>
      <div>
        <pre class="def idl"><span class="idlDictionary" id="idl-def-rtcrtpencodingparameters" data-idl="" data-title="RTCRtpEncodingParameters">dictionary <span class="idlDictionaryID">RTCRtpEncodingParameters</span> {
<span class="idlMember" id="idl-def-rtcrtpencodingparameters-ssrc" data-idl="" data-title="ssrc" data-dfn-for="rtcrtpencodingparameters">    <span class="idlMemberType">unsigned long</span>       <span class="idlMemberName"><a data-lt="ssrc" href="#dom-rtcrtpencodingparameters-ssrc" class="internalDFN" data-link-type="dfn" data-for="RTCRtpEncodingParameters"><code>ssrc</code></a></span>;</span>
<span class="idlMember" id="idl-def-rtcrtpencodingparameters-rtx" data-idl="" data-title="rtx" data-dfn-for="rtcrtpencodingparameters">    <span class="idlMemberType"><a href="#idl-def-rtcrtprtxparameters" class="internalDFN" data-link-type="dfn"><code>RTCRtpRtxParameters</code></a></span> <span class="idlMemberName"><a data-lt="rtx" href="#dom-rtcrtpencodingparameters-rtx" class="internalDFN" data-link-type="dfn" data-for="RTCRtpEncodingParameters"><code>rtx</code></a></span>;</span>
<span class="idlMember" id="idl-def-rtcrtpencodingparameters-fec" data-idl="" data-title="fec" data-dfn-for="rtcrtpencodingparameters">    <span class="idlMemberType"><a href="#idl-def-rtcrtpfecparameters" class="internalDFN" data-link-type="dfn"><code>RTCRtpFecParameters</code></a></span> <span class="idlMemberName"><a data-lt="fec" href="#dom-rtcrtpencodingparameters-fec" class="internalDFN" data-link-type="dfn" data-for="RTCRtpEncodingParameters"><code>fec</code></a></span>;</span>
<span class="idlMember" id="idl-def-rtcrtpencodingparameters-dtx" data-idl="" data-title="dtx" data-dfn-for="rtcrtpencodingparameters">    <span class="idlMemberType"><a href="#idl-def-rtcdtxstatus" class="internalDFN" data-link-type="dfn"><code>RTCDtxStatus</code></a></span>        <span class="idlMemberName"><a data-lt="dtx" href="#dom-rtcrtpencodingparameters-dtx" class="internalDFN" data-link-type="dfn" data-for="RTCRtpEncodingParameters"><code>dtx</code></a></span>;</span>
<span class="idlMember" id="idl-def-rtcrtpencodingparameters-active" data-idl="" data-title="active" data-dfn-for="rtcrtpencodingparameters">    <span class="idlMemberType">boolean</span>             <span class="idlMemberName"><a data-lt="active" href="#dom-rtcrtpencodingparameters-active" class="internalDFN" data-link-type="dfn" data-for="RTCRtpEncodingParameters"><code>active</code></a></span>;</span>
<span class="idlMember" id="idl-def-rtcrtpencodingparameters-priority" data-idl="" data-title="priority" data-dfn-for="rtcrtpencodingparameters">    <span class="idlMemberType"><a href="#idl-def-rtcprioritytype" class="internalDFN" data-link-type="dfn"><code>RTCPriorityType</code></a></span>     <span class="idlMemberName"><a data-lt="priority" href="#dom-rtcrtpencodingparameters-priority" class="internalDFN" data-link-type="dfn" data-for="RTCRtpEncodingParameters"><code>priority</code></a></span>;</span>
<span class="idlMember" id="idl-def-rtcrtpencodingparameters-maxbitrate" data-idl="" data-title="maxBitrate" data-dfn-for="rtcrtpencodingparameters">    <span class="idlMemberType">unsigned long</span>       <span class="idlMemberName"><a data-lt="maxBitrate" href="#dom-rtcrtpencodingparameters-maxbitrate" class="internalDFN" data-link-type="dfn" data-for="RTCRtpEncodingParameters"><code>maxBitrate</code></a></span>;</span>
<span class="idlMember" id="idl-def-rtcrtpencodingparameters-maxframerate" data-idl="" data-title="maxFramerate" data-dfn-for="rtcrtpencodingparameters">    <span class="idlMemberType">unsigned long</span>       <span class="idlMemberName"><a data-lt="maxFramerate" href="#dom-rtcrtpencodingparameters-maxframerate" class="internalDFN" data-link-type="dfn" data-for="RTCRtpEncodingParameters"><code>maxFramerate</code></a></span>;</span>
<span class="idlMember" id="idl-def-rtcrtpencodingparameters-rid" data-idl="" data-title="rid" data-dfn-for="rtcrtpencodingparameters">    <span class="idlMemberType">DOMString</span>           <span class="idlMemberName"><a data-lt="rid" href="#dom-rtcrtpencodingparameters-rid" class="internalDFN" data-link-type="dfn" data-for="RTCRtpEncodingParameters"><code>rid</code></a></span>;</span>
<span class="idlMember" id="idl-def-rtcrtpencodingparameters-scaleresolutiondownby" data-idl="" data-title="scaleResolutionDownBy" data-dfn-for="rtcrtpencodingparameters">    <span class="idlMemberType">double</span>              <span class="idlMemberName"><a data-lt="scaleResolutionDownBy" href="#dom-rtcrtpencodingparameters-scaleresolutiondownby" class="internalDFN" data-link-type="dfn" data-for="RTCRtpEncodingParameters"><code>scaleResolutionDownBy</code></a></span> = <span class="idlMemberValue">1</span>;</span>
};</span></pre>

        <section typeof="bibo:Chapter" resource="#dictionary-rtcrtpencodingparameters-members" property="bibo:hasPart">
          <h4 id="dictionary-rtcrtpencodingparameters-members" resource="#dictionary-rtcrtpencodingparameters-members"><span property="xhv:role" resource="xhv:heading">Dictionary <a class="idlType internalDFN" href="#idl-def-rtcrtpencodingparameters" data-link-type="dfn"><code>RTCRtpEncodingParameters</code></a>
          Members</span></h4>
          <dl data-link-for="RTCRtpEncodingParameters" data-dfn-for="RTCRtpEncodingParameters" class="dictionary-members">
            <dt><dfn data-dfn-for="rtcrtpencodingparameters" data-dfn-type="dfn" id="dom-rtcrtpencodingparameters-ssrc" data-idl=""><code>ssrc</code></dfn> of type <span class="idlMemberType">unsigned long</span></dt>
            <dd>
              <p>The SSRC of the RTP source stream of this encoding (non-RTX, non-FEC RTP stream). <a href="#dfn-read-only-parameter" class="internalDFN" data-link-type="dfn">Read-only parameter</a>.</p>
            </dd>
            <dt><dfn data-dfn-for="rtcrtpencodingparameters" data-dfn-type="dfn" id="dom-rtcrtpencodingparameters-rtx" data-idl=""><code>rtx</code></dfn> of type <span class="idlMemberType"><a href="#idl-def-rtcrtprtxparameters" class="internalDFN" data-link-type="dfn"><code>RTCRtpRtxParameters</code></a></span></dt>
            <dd>
              <p>The parameters used for RTX, or unset if RTX is not being used.
              </p>
            </dd>
            <dt><dfn data-dfn-for="rtcrtpencodingparameters" data-dfn-type="dfn" id="dom-rtcrtpencodingparameters-fec" data-idl=""><code>fec</code></dfn> of type <span class="idlMemberType"><a href="#idl-def-rtcrtpfecparameters" class="internalDFN" data-link-type="dfn"><code>RTCRtpFecParameters</code></a></span></dt>
            <dd>
              <p>The parameters used for FEC, or unset if FEC is not being used.
              </p>
            </dd>
            <dt><dfn data-dfn-for="rtcrtpencodingparameters" data-dfn-type="dfn" id="dom-rtcrtpencodingparameters-dtx" data-idl=""><code>dtx</code></dfn> of type <span class="idlMemberType"><a href="#idl-def-rtcdtxstatus" class="internalDFN" data-link-type="dfn"><code>RTCDtxStatus</code></a></span></dt>
            <dd>
              <p>For an <code><a href="#dom-rtcrtpsender" class="internalDFN" data-link-type="dfn"><code>RTCRtpSender</code></a>
                </code>, indicates whether discontinuous transmission will be used. Setting it to
                <code>disabled</code> causes discontinuous transmission to be turned off. Setting it to <code>enabled</code> causes discontinuous transmission to be turned on if it was negotiated (either via a codec-specific parameter or via negotiation of the CN codec). This attribute is ignored by a video sender.</p>
            </dd>
            <dt><dfn data-dfn-for="rtcrtpencodingparameters" data-dfn-type="dfn" id="dom-rtcrtpencodingparameters-active" data-idl=""><code>active</code></dfn> of type <span class="idlMemberType">boolean</span></dt>
            <dd>
              <p>For an <code><a href="#dom-rtcrtpsender" class="internalDFN" data-link-type="dfn"><code>RTCRtpSender</code></a>
                </code>, indicates that this encoding is actively being sent. Setting it to <code>false</code> causes this encoding to no longer be sent. Setting it to <code>true</code> causes this encoding to be sent. For an <code><a href="#idl-def-rtcrtpreceiver" class="internalDFN" data-link-type="dfn"><code>RTCRtpReceiver</code></a>
                </code>, a value of <code>true</code> indicates that this encoding is being decoded. A value of <code>false</code> indicates this encoding is no longer being decoded.
              </p>
            </dd>
            <dt><dfn data-dfn-for="rtcrtpencodingparameters" data-dfn-type="dfn" id="dom-rtcrtpencodingparameters-priority" data-idl=""><code>priority</code></dfn> of type <span class="idlMemberType"><a href="#idl-def-rtcprioritytype" class="internalDFN" data-link-type="dfn"><code>RTCPriorityType</code></a></span></dt>
            <dd>
              <p>Indicates the priority of this encoding. It is specified in [
                <cite><a class="bibref" href="#bib-RTCWEB-TRANSPORT">RTCWEB-TRANSPORT</a></cite>], Section 4.</p>
            </dd>
            <dt><dfn data-dfn-for="rtcrtpencodingparameters" data-dfn-type="dfn" id="dom-rtcrtpencodingparameters-maxbitrate" data-idl=""><code>maxBitrate</code></dfn> of type <span class="idlMemberType">unsigned long</span></dt>
            <dd>
              <p>Indicates the maximum bitrate that can be used to send this encoding. The encoding may also be further constrained by other limits (such as maxFramerate or per-transport or per-session bandwidth limits) below the maximum specified here. maxBitrate is the Transport Independent Application Specific Maximum (TIAS) bandwidth defined in [<cite><a class="bibref" href="#bib-RFC3890">RFC3890</a></cite>] Section 6.2.2, which is the maximum bandwidth needed without counting IP or other transport layers like TCP or UDP.</p>
            </dd>
            <dt><dfn data-dfn-for="rtcrtpencodingparameters" data-dfn-type="dfn" id="dom-rtcrtpencodingparameters-maxframerate" data-idl=""><code>maxFramerate</code></dfn> of type <span class="idlMemberType">unsigned long</span></dt>
            <dd>
              <p>Indicates the maximum framerate that can be used to send this encoding.
              </p>
            </dd>
            <dt><dfn data-dfn-for="rtcrtpencodingparameters" data-dfn-type="dfn" id="dom-rtcrtpencodingparameters-rid" data-idl=""><code>rid</code></dfn> of type <span class="idlMemberType">DOMString</span></dt>
            <dd>
              <p>If set, this RTP encoding will be sent with the RID header extension as defined by <span>[<cite><a class="bibref" href="#bib-JSEP">JSEP</a></cite>] (<a href="https://tools.ietf.org/html/draft-ietf-rtcweb-jsep-16#section-5.2.1">section 5.2.1.</a>)</span>. The RID is not modifiable via
                <code>setParameters</code>. It can only be set or modified in
                <code>addTransceiver</code>.</p>
            </dd>
            <dt><dfn data-dfn-for="rtcrtpencodingparameters" data-dfn-type="dfn" id="dom-rtcrtpencodingparameters-scaleresolutiondownby" data-idl=""><code>scaleResolutionDownBy</code></dfn> of type
            <span class="idlMemberType">double</span>, defaulting to
            <code>1.0</code></dt>
            <dd>
              <p>If the sender's <code>kind</code> is "video", the video's resolution will be scaled down in each dimension by the given value before sending. For example, if the value is 2.0, the video will be scaled down by a factor of 2 in each dimension, resulting in sending a video of one quarter the size. If the value is 1.0, the video will not be affected. The value must be greater than or equal to 1.0.</p>
            </dd>
          </dl>
          <p>Usage of the attributes is defined in the table below:</p>
          <table class="simple">
            <thead>
              <tr>
                <th>Attribute</th>
                <th>Type</th>
                <th>Receiver/Sender</th>
                <th>Read/Write</th>
              </tr>
            </thead>
            <tbody>
              <tr id="def-ssrc*">
                <td><dfn data-dfn-type="dfn" id="dfn-ssrc">ssrc</dfn></td>
                <td><code>unsigned long</code></td>
                <td>Receiver/Sender</td>
                <td>Read-only</td>
              </tr>
              <tr id="def-fec*">
                <td><dfn data-dfn-type="dfn" id="dfn-fec">fec</dfn></td>
                <td><code><a href="#idl-def-rtcrtpfecparameters" class="internalDFN" data-link-type="dfn"><code>RTCRtpFecParameters</code></a>
                  </code>
                </td>
                <td>Receiver/Sender</td>
                <td>Read-only</td>
              </tr>
              <tr id="def-dtx*">
                <td><dfn data-dfn-type="dfn" id="dfn-dtx">dtx</dfn></td>
                <td><code><a href="#idl-def-rtcdtxstatus" class="internalDFN" data-link-type="dfn"><code>RTCDtxStatus</code></a>
                  </code>
                </td>
                <td>Sender</td>
                <td>Read/Write</td>
              </tr>
              <tr id="def-rtx*">
                <td><dfn data-dfn-type="dfn" id="dfn-rtx">rtx</dfn></td>
                <td><code><a href="#idl-def-rtcrtprtxparameters" class="internalDFN" data-link-type="dfn"><code>RTCRtpRtxParameters</code></a>
                  </code>
                </td>
                <td>Receiver/Sender</td>
                <td>Read-only</td>
              </tr>
              <tr id="def-active*">
                <td><dfn data-dfn-type="dfn" id="dfn-active">active</dfn></td>
                <td><code>boolean</code></td>
                <td>Sender</td>
                <td>Read/Write</td>
              </tr>
              <tr id="def-priority*">
                <td><dfn data-dfn-type="dfn" id="dfn-priority">priority</dfn></td>
                <td><code><a href="#idl-def-rtcprioritytype" class="internalDFN" data-link-type="dfn"><code>RTCPriorityType</code></a>
                  </code>
                </td>
                <td>Sender</td>
                <td>Read/Write</td>
              </tr>
              <tr id="def-maxbitrate*">
                <td><dfn data-dfn-type="dfn" id="dfn-maxbitrate">maxBitrate</dfn></td>
                <td><code>unsigned long</code></td>
                <td>Sender</td>
                <td>Read/Write</td>
              </tr>
              <tr id="def-maxframerate*">
                <td><dfn data-dfn-type="dfn" id="dfn-maxframerate">maxFramerate</dfn></td>
                <td><code>unsigned long</code></td>
                <td>Sender</td>
                <td>Read/Write</td>
              </tr>
              <tr id="def-scaleresolution*">
                <td><dfn data-dfn-type="dfn" id="dfn-scaleresolutiondownby">scaleResolutionDownBy</dfn></td>
                <td><code>double</code></td>
                <td>Sender</td>
                <td>Read/Write</td>
              </tr>
              <tr id="def-rid*">
                <td><dfn data-dfn-type="dfn" id="dfn-rid">rid</dfn></td>
                <td><code>DOMString</code></td>
                <td>Receiver/Sender</td>
                <td>Read-only</td>
              </tr>
            </tbody>
          </table>
        </section>
      </div>
      <div>
        <pre class="def idl"><span class="idlEnum" id="idl-def-rtcdtxstatus" data-idl="" data-title="RTCDtxStatus">enum <span class="idlEnumID">RTCDtxStatus</span> {
    "<a href="#dom-rtcdtxstatus-disabled" class="idlEnumItem">disabled</a>",
    "<a href="#dom-rtcdtxstatus-enabled" class="idlEnumItem">enabled</a>"
};</span></pre>
        <table data-link-for="RTCDtxStatus" data-dfn-for="RTCDtxStatus" class="simple">
          <tbody>
            <tr>
              <th colspan="2">Enumeration description</th>
            </tr>
            <tr>
              <td><dfn data-dfn-for="rtcdtxstatus" data-dfn-type="dfn" id="dom-rtcdtxstatus-disabled" data-idl=""><code>disabled</code></dfn></td>
              <td>
                <p>Discontinuous transmission is disabled.</p>
              </td>
            </tr>
            <tr>
              <td><dfn data-dfn-for="rtcdtxstatus" data-dfn-type="dfn" id="dom-rtcdtxstatus-enabled" data-idl=""><code>enabled</code></dfn></td>
              <td>
                <p>Discontinuous transmission is enabled if negotiated.</p>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
      <div>
        <pre class="def idl"><span class="idlEnum" id="idl-def-rtcdegradationpreference" data-idl="" data-title="RTCDegradationPreference">enum <span class="idlEnumID">RTCDegradationPreference</span> {
    "<a href="#dom-rtcdegradationpreference-maintain-framerate" class="idlEnumItem">maintain-framerate</a>",
    "<a href="#dom-rtcdegradationpreference-maintain-resolution" class="idlEnumItem">maintain-resolution</a>",
    "<a href="#dom-rtcdegradationpreference-balanced" class="idlEnumItem">balanced</a>"
};</span></pre>
        <table data-link-for="RTCDegradationPreference" data-dfn-for="RTCDegradationPreference" class="simple">
          <tbody>
            <tr>
              <th colspan="2">Enumeration description</th>
            </tr>
            <tr>
              <td><dfn data-dfn-for="rtcdegradationpreference" data-dfn-type="dfn" id="dom-rtcdegradationpreference-maintain-framerate" data-idl=""><code>maintain-framerate</code></dfn></td>
              <td>
                <p>Degrade resolution in order to maintain framerate.</p>
              </td>
            </tr>
            <tr>
              <td><dfn data-dfn-for="rtcdegradationpreference" data-dfn-type="dfn" id="dom-rtcdegradationpreference-maintain-resolution" data-idl=""><code>maintain-resolution</code></dfn></td>
              <td>
                <p>Degrade framerate in order to maintain resolution.</p>
              </td>
            </tr>
            <tr>
              <td><dfn data-dfn-for="rtcdegradationpreference" data-dfn-type="dfn" id="dom-rtcdegradationpreference-balanced" data-idl=""><code>balanced</code></dfn></td>
              <td>
                <p>Degrade a balance of framerate and resolution.</p>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
      <div>
        <pre class="def idl"><span class="idlDictionary" id="idl-def-rtcrtprtxparameters" data-idl="" data-title="RTCRtpRtxParameters">dictionary <span class="idlDictionaryID">RTCRtpRtxParameters</span> {
<span class="idlMember" id="idl-def-rtcrtprtxparameters-ssrc" data-idl="" data-title="ssrc" data-dfn-for="rtcrtprtxparameters">    <span class="idlMemberType">unsigned long</span> <span class="idlMemberName"><a data-lt="ssrc" href="#dom-rtcrtprtxparameters-ssrc" class="internalDFN" data-link-type="dfn" data-for="RTCRtpRtxParameters"><code>ssrc</code></a></span>;</span>
};</span></pre>

        <section typeof="bibo:Chapter" resource="#dictionary-rtcrtprtxparameters-members" property="bibo:hasPart">
          <h4 id="dictionary-rtcrtprtxparameters-members" resource="#dictionary-rtcrtprtxparameters-members"><span property="xhv:role" resource="xhv:heading">Dictionary <a class="idlType internalDFN" href="#idl-def-rtcrtprtxparameters" data-link-type="dfn"><code>RTCRtpRtxParameters</code></a>
          Members</span></h4>
          <dl data-link-for="RTCRtpRtxParameters" data-dfn-for="RTCRtpRtxParameters" class="dictionary-members">
            <dt><dfn data-dfn-for="rtcrtprtxparameters" data-dfn-type="dfn" id="dom-rtcrtprtxparameters-ssrc" data-idl=""><code>ssrc</code></dfn> of type <span class="idlMemberType">unsigned long</span></dt>
            <dd>
              <p>The SSRC of the RTP stream for RTX. <a href="#dfn-read-only-parameter" class="internalDFN" data-link-type="dfn">Read-only
              parameter</a>.</p>
            </dd>
          </dl>
        </section>
      </div>
      <div>
        <pre class="def idl"><span class="idlDictionary" id="idl-def-rtcrtpfecparameters" data-idl="" data-title="RTCRtpFecParameters">dictionary <span class="idlDictionaryID">RTCRtpFecParameters</span> {
<span class="idlMember" id="idl-def-rtcrtpfecparameters-ssrc" data-idl="" data-title="ssrc" data-dfn-for="rtcrtpfecparameters">    <span class="idlMemberType">unsigned long</span> <span class="idlMemberName"><a data-lt="ssrc" href="#dom-rtcrtpfecparameters-ssrc" class="internalDFN" data-link-type="dfn" data-for="RTCRtpFecParameters"><code>ssrc</code></a></span>;</span>
};</span></pre>

        <section typeof="bibo:Chapter" resource="#dictionary-rtcrtpfecparameters-members" property="bibo:hasPart">
          <h4 id="dictionary-rtcrtpfecparameters-members" resource="#dictionary-rtcrtpfecparameters-members"><span property="xhv:role" resource="xhv:heading">Dictionary <a class="idlType internalDFN" href="#idl-def-rtcrtpfecparameters" data-link-type="dfn"><code>RTCRtpFecParameters</code></a>
          Members</span></h4>
          <dl data-link-for="RTCRtpFecParameters" data-dfn-for="RTCRtpFecParameters" class="dictionary-members">
            <dt><dfn data-dfn-for="rtcrtpfecparameters" data-dfn-type="dfn" id="dom-rtcrtpfecparameters-ssrc" data-idl=""><code>ssrc</code></dfn> of type <span class="idlMemberType">unsigned long</span></dt>
            <dd>
              <p>The SSRC of the RTP stream for FEC. <a href="#dfn-read-only-parameter" class="internalDFN" data-link-type="dfn">Read-only
              parameter</a>.</p>
            </dd>
          </dl>
        </section>
      </div>
      <div>
        <pre class="def idl"><span class="idlDictionary" id="idl-def-rtcrtcpparameters" data-idl="" data-title="RTCRtcpParameters">dictionary <span class="idlDictionaryID">RTCRtcpParameters</span> {
<span class="idlMember" id="idl-def-rtcrtcpparameters-cname" data-idl="" data-title="cname" data-dfn-for="rtcrtcpparameters">    <span class="idlMemberType">DOMString</span> <span class="idlMemberName"><a data-lt="cname" href="#dom-rtcrtcpparameters-cname" class="internalDFN" data-link-type="dfn" data-for="RTCRtcpParameters"><code>cname</code></a></span>;</span>
<span class="idlMember" id="idl-def-rtcrtcpparameters-reducedsize" data-idl="" data-title="reducedSize" data-dfn-for="rtcrtcpparameters">    <span class="idlMemberType">boolean</span>   <span class="idlMemberName"><a data-lt="reducedSize" href="#dom-rtcrtcpparameters-reducedsize" class="internalDFN" data-link-type="dfn" data-for="RTCRtcpParameters"><code>reducedSize</code></a></span>;</span>
};</span></pre>

        <section typeof="bibo:Chapter" resource="#dictionary-rtcrtcpparameters-members" property="bibo:hasPart">
          <h4 id="dictionary-rtcrtcpparameters-members" resource="#dictionary-rtcrtcpparameters-members"><span property="xhv:role" resource="xhv:heading">Dictionary <a class="idlType internalDFN" href="#idl-def-rtcrtcpparameters" data-link-type="dfn"><code>RTCRtcpParameters</code></a> Members</span></h4>
          <dl data-link-for="RTCRtcpParameters" data-dfn-for="RTCRtcpParameters" class="dictionary-members">
            <dt><dfn data-dfn-for="rtcrtcpparameters" data-dfn-type="dfn" id="dom-rtcrtcpparameters-cname" data-idl=""><code>cname</code></dfn> of type <span class="idlMemberType">DOMString</span></dt>
            <dd>
              <p>The Canonical Name (CNAME) used by RTCP (e.g. in SDES messages). <a href="#dfn-read-only-parameter" class="internalDFN" data-link-type="dfn">Read-only parameter</a>.</p>
            </dd>
            <dt><dfn data-dfn-for="rtcrtcpparameters" data-dfn-type="dfn" id="dom-rtcrtcpparameters-reducedsize" data-idl=""><code>reducedSize</code></dfn> of type <span class="idlMemberType">boolean</span></dt>
            <dd>
              <p>Whether reduced size RTCP [<cite><a class="bibref" href="#bib-RFC5506">RFC5506</a></cite>] is configured (if true) or compound RTCP as specified in [<cite><a class="bibref" href="#bib-RFC3550">RFC3550</a></cite>] (if false).
                <a href="#dfn-read-only-parameter" class="internalDFN" data-link-type="dfn">Read-only parameter</a>.</p>
            </dd>
          </dl>
        </section>
      </div>
      <div>
        <pre class="def idl"><span class="idlDictionary" id="idl-def-rtcrtpheaderextensionparameters" data-idl="" data-title="RTCRtpHeaderExtensionParameters">dictionary <span class="idlDictionaryID">RTCRtpHeaderExtensionParameters</span> {
<span class="idlMember" id="idl-def-rtcrtpheaderextensionparameters-uri" data-idl="" data-title="uri" data-dfn-for="rtcrtpheaderextensionparameters">    <span class="idlMemberType">DOMString</span>      <span class="idlMemberName"><a data-lt="uri" href="#dom-rtcrtpheaderextensionparameters-uri" class="internalDFN" data-link-type="dfn" data-for="RTCRtpHeaderExtensionParameters"><code>uri</code></a></span>;</span>
<span class="idlMember" id="idl-def-rtcrtpheaderextensionparameters-id" data-idl="" data-title="id" data-dfn-for="rtcrtpheaderextensionparameters">    <span class="idlMemberType">unsigned short</span> <span class="idlMemberName"><a data-lt="id" href="#dom-rtcrtpheaderextensionparameters-id" class="internalDFN" data-link-type="dfn" data-for="RTCRtpHeaderExtensionParameters"><code>id</code></a></span>;</span>
<span class="idlMember" id="idl-def-rtcrtpheaderextensionparameters-encrypted" data-idl="" data-title="encrypted" data-dfn-for="rtcrtpheaderextensionparameters">    <span class="idlMemberType">boolean</span>        <span class="idlMemberName"><a data-lt="encrypted" href="#dom-rtcrtpheaderextensionparameters-encrypted" class="internalDFN" data-link-type="dfn" data-for="RTCRtpHeaderExtensionParameters"><code>encrypted</code></a></span>;</span>
};</span></pre>

        <section typeof="bibo:Chapter" resource="#dictionary-rtcrtpheaderextensionparameters-members" property="bibo:hasPart">
          <h4 id="dictionary-rtcrtpheaderextensionparameters-members" resource="#dictionary-rtcrtpheaderextensionparameters-members"><span property="xhv:role" resource="xhv:heading">Dictionary <a class="idlType internalDFN" href="#idl-def-rtcrtpheaderextensionparameters" data-link-type="dfn"><code>RTCRtpHeaderExtensionParameters</code></a>
          Members</span></h4>
          <dl data-link-for="RTCRtpHeaderExtensionParameters" data-dfn-for="RTCRtpHeaderExtensionParameters" class="dictionary-members">
            <dt><dfn data-dfn-for="rtcrtpheaderextensionparameters" data-dfn-type="dfn" id="dom-rtcrtpheaderextensionparameters-uri" data-idl=""><code>uri</code></dfn> of type <span class="idlMemberType">DOMString</span></dt>
            <dd>
              <p>The URI of the RTP header extension, as defined in [
                <cite><a class="bibref" href="#bib-RFC5285">RFC5285</a></cite>]. <a href="#dfn-read-only-parameter" class="internalDFN" data-link-type="dfn">Read-only parameter</a>.</p>
            </dd>
            <dt><dfn data-dfn-for="rtcrtpheaderextensionparameters" data-dfn-type="dfn" id="dom-rtcrtpheaderextensionparameters-id" data-idl=""><code>id</code></dfn> of type <span class="idlMemberType">unsigned short</span></dt>
            <dd>
              <p>The value put in the RTP packet to identify the header extension. <a href="#dfn-read-only-parameter" class="internalDFN" data-link-type="dfn">Read-only parameter</a>.</p>
            </dd>
            <dt><dfn data-dfn-for="rtcrtpheaderextensionparameters" data-dfn-type="dfn" id="dom-rtcrtpheaderextensionparameters-encrypted" data-idl=""><code>encrypted</code></dfn> of type <span class="idlMemberType">boolean</span></dt>
            <dd>
              <p>Whether the header extension is encryted or not. <a href="#dfn-read-only-parameter" class="internalDFN" data-link-type="dfn">Read-only
              parameter</a>.</p>
            </dd>
          </dl>
        </section>
      </div>
      <div>
        <pre class="def idl"><span class="idlDictionary" id="idl-def-rtcrtpcodecparameters" data-idl="" data-title="RTCRtpCodecParameters">dictionary <span class="idlDictionaryID">RTCRtpCodecParameters</span> {
<span class="idlMember" id="idl-def-rtcrtpcodecparameters-payloadtype" data-idl="" data-title="payloadType" data-dfn-for="rtcrtpcodecparameters">    <span class="idlMemberType">unsigned short</span> <span class="idlMemberName"><a data-lt="payloadType" href="#dom-rtcrtpcodecparameters-payloadtype" class="internalDFN" data-link-type="dfn" data-for="RTCRtpCodecParameters"><code>payloadType</code></a></span>;</span>
<span class="idlMember" id="idl-def-rtcrtpcodecparameters-mimetype" data-idl="" data-title="mimeType" data-dfn-for="rtcrtpcodecparameters">    <span class="idlMemberType">DOMString</span>      <span class="idlMemberName"><a data-lt="mimeType" href="#dom-rtcrtpcodecparameters-mimetype" class="internalDFN" data-link-type="dfn" data-for="RTCRtpCodecParameters"><code>mimeType</code></a></span>;</span>
<span class="idlMember" id="idl-def-rtcrtpcodecparameters-clockrate" data-idl="" data-title="clockRate" data-dfn-for="rtcrtpcodecparameters">    <span class="idlMemberType">unsigned long</span>  <span class="idlMemberName"><a data-lt="clockRate" href="#dom-rtcrtpcodecparameters-clockrate" class="internalDFN" data-link-type="dfn" data-for="RTCRtpCodecParameters"><code>clockRate</code></a></span>;</span>
<span class="idlMember" id="idl-def-rtcrtpcodecparameters-channels" data-idl="" data-title="channels" data-dfn-for="rtcrtpcodecparameters">    <span class="idlMemberType">unsigned short</span> <span class="idlMemberName"><a data-lt="channels" href="#dom-rtcrtpcodecparameters-channels" class="internalDFN" data-link-type="dfn" data-for="RTCRtpCodecParameters"><code>channels</code></a></span> = <span class="idlMemberValue">1</span>;</span>
<span class="idlMember" id="idl-def-rtcrtpcodecparameters-sdpfmtpline" data-idl="" data-title="sdpFmtpLine" data-dfn-for="rtcrtpcodecparameters">    <span class="idlMemberType">DOMString</span>      <span class="idlMemberName"><a data-lt="sdpFmtpLine" href="#dom-rtcrtpcodecparameters-sdpfmtpline" class="internalDFN" data-link-type="dfn" data-for="RTCRtpCodecParameters"><code>sdpFmtpLine</code></a></span>;</span>
};</span></pre>

        <section typeof="bibo:Chapter" resource="#dictionary-rtcrtpcodecparameters-members" property="bibo:hasPart">
          <h4 id="dictionary-rtcrtpcodecparameters-members" resource="#dictionary-rtcrtpcodecparameters-members"><span property="xhv:role" resource="xhv:heading">Dictionary <a class="idlType internalDFN" href="#idl-def-rtcrtpcodecparameters" data-link-type="dfn"><code>RTCRtpCodecParameters</code></a>
          Members</span></h4>
          <dl data-link-for="RTCRtpCodecParameters" data-dfn-for="RTCRtpCodecParameters" class="dictionary-members">
            <dt><dfn data-dfn-for="rtcrtpcodecparameters" data-dfn-type="dfn" id="dom-rtcrtpcodecparameters-payloadtype" data-idl=""><code>payloadType</code></dfn> of type <span class="idlMemberType">unsigned short</span></dt>
            <dd>
              <p>The RTP payload type. This value can be set to control which codec should be used to send a given encoding.</p>
            </dd>
            <dt><dfn data-dfn-for="rtcrtpcodecparameters" data-dfn-type="dfn" id="dom-rtcrtpcodecparameters-mimetype" data-idl=""><code>mimeType</code></dfn> of type <span class="idlMemberType">DOMString</span></dt>
            <dd>
              <p>The codec MIME media type/subtype. Valid media types and subtypes are listed in [<cite><a class="bibref" href="#bib-IANA-RTP-2">IANA-RTP-2</a></cite>].</p>
            </dd>
            <dt><dfn data-dfn-for="rtcrtpcodecparameters" data-dfn-type="dfn" id="dom-rtcrtpcodecparameters-clockrate" data-idl=""><code>clockRate</code></dfn> of type <span class="idlMemberType">unsigned long</span></dt>
            <dd>
              <p>The codec clock rate expressed in Hertz.</p>
            </dd>
            <dt><dfn data-dfn-for="rtcrtpcodecparameters" data-dfn-type="dfn" id="dom-rtcrtpcodecparameters-channels" data-idl=""><code>channels</code></dfn> of type <span class="idlMemberType">unsigned short</span>, defaulting to
            <code>1</code></dt>
            <dd>
              <p>The number of channels (mono=1, stereo=2).</p>
            </dd>
            <dt><dfn data-dfn-for="rtcrtpcodecparameters" data-dfn-type="dfn" id="dom-rtcrtpcodecparameters-sdpfmtpline" data-idl=""><code>sdpFmtpLine</code></dfn> of type <span class="idlMemberType">DOMString</span></dt>
            <dd>
              <p>The a=fmtp line in the SDP corresponding to the codec, as defined by <span>[<cite><a class="bibref" href="#bib-JSEP">JSEP</a></cite>] (<a href="https://tools.ietf.org/html/draft-ietf-rtcweb-jsep-16#section-5.7">section 5.7.</a>)</span>.</p>
            </dd>
          </dl>
        </section>
      </div>
      <div>
        <pre class="def idl"><span class="idlDictionary" id="idl-def-rtcrtpcapabilities" data-idl="" data-title="RTCRtpCapabilities">dictionary <span class="idlDictionaryID">RTCRtpCapabilities</span> {
<span class="idlMember" id="idl-def-rtcrtpcapabilities-codecs" data-idl="" data-title="codecs" data-dfn-for="rtcrtpcapabilities">    <span class="idlMemberType">sequence&lt;<a href="#idl-def-rtcrtpcodeccapability" class="internalDFN" data-link-type="dfn"><code>RTCRtpCodecCapability</code></a>&gt;</span>           <span class="idlMemberName"><a data-lt="codecs" href="#dom-rtcrtpcapabilities-codecs" class="internalDFN" data-link-type="dfn" data-for="RTCRtpCapabilities"><code>codecs</code></a></span>;</span>
<span class="idlMember" id="idl-def-rtcrtpcapabilities-headerextensions" data-idl="" data-title="headerExtensions" data-dfn-for="rtcrtpcapabilities">    <span class="idlMemberType">sequence&lt;<a href="#idl-def-rtcrtpheaderextensioncapability" class="internalDFN" data-link-type="dfn"><code>RTCRtpHeaderExtensionCapability</code></a>&gt;</span> <span class="idlMemberName"><a data-lt="headerExtensions" href="#dom-rtcrtpcapabilities-headerextensions" class="internalDFN" data-link-type="dfn" data-for="RTCRtpCapabilities"><code>headerExtensions</code></a></span>;</span>
};</span></pre>

        <section typeof="bibo:Chapter" resource="#dictionary-rtcrtpcapabilities-members" property="bibo:hasPart">
          <h4 id="dictionary-rtcrtpcapabilities-members" resource="#dictionary-rtcrtpcapabilities-members"><span property="xhv:role" resource="xhv:heading">Dictionary <a class="idlType internalDFN" href="#idl-def-rtcrtpcapabilities" data-link-type="dfn"><code>RTCRtpCapabilities</code></a> Members</span></h4>
          <dl data-link-for="RTCRtpCapabilities" data-dfn-for="RTCRtpCapabilities" class="dictionary-members">
            <dt><dfn data-dfn-for="rtcrtpcapabilities" data-dfn-type="dfn" id="dom-rtcrtpcapabilities-codecs" data-idl=""><code>codecs</code></dfn> of type <span class="idlMemberType">sequence&lt;<a href="#idl-def-rtcrtpcodeccapability" class="internalDFN" data-link-type="dfn"><code>RTCRtpCodecCapability</code></a>&gt;</span></dt>
            <dd>
              <p>Supported media codecs as well as entries for RTX, RED and FEC mechanisms. There will only be a single entry in
                <code>codecs[]</code> for retransmission via RTX.</p>
            </dd>
            <dt><dfn data-dfn-for="rtcrtpcapabilities" data-dfn-type="dfn" id="dom-rtcrtpcapabilities-headerextensions" data-idl=""><code>headerExtensions</code></dfn> of type <span class="idlMemberType">sequence&lt;<a href="#idl-def-rtcrtpheaderextensioncapability" class="internalDFN" data-link-type="dfn"><code>RTCRtpHeaderExtensionCapability</code></a>&gt;</span></dt>
            <dd>
              <p>Supported RTP header extensions.</p>
            </dd>
          </dl>
        </section>
      </div>
      <div>
        <pre class="def idl"><span class="idlDictionary" id="idl-def-rtcrtpcodeccapability" data-idl="" data-title="RTCRtpCodecCapability">dictionary <span class="idlDictionaryID">RTCRtpCodecCapability</span> {
<span class="idlMember" id="idl-def-rtcrtpcodeccapability-mimetype" data-idl="" data-title="mimeType" data-dfn-for="rtcrtpcodeccapability">    <span class="idlMemberType">DOMString</span> <span class="idlMemberName"><a data-lt="mimeType" href="#dom-rtcrtpcodeccapability-mimetype" class="internalDFN" data-link-type="dfn" data-for="RTCRtpCodecCapability"><code>mimeType</code></a></span>;</span>
};</span></pre>

        <section typeof="bibo:Chapter" resource="#dictionary-rtcrtpcodeccapability-members" property="bibo:hasPart">
          <h4 id="dictionary-rtcrtpcodeccapability-members" resource="#dictionary-rtcrtpcodeccapability-members"><span property="xhv:role" resource="xhv:heading">Dictionary <a class="idlType internalDFN" href="#idl-def-rtcrtpcodeccapability" data-link-type="dfn"><code>RTCRtpCodecCapability</code></a>
          Members</span></h4>
          <dl data-link-for="RTCRtpCodecCapability" data-dfn-for="RTCRtpCodecCapability" class="dictionary-members">
            <dt><dfn data-dfn-for="rtcrtpcodeccapability" data-dfn-type="dfn" id="dom-rtcrtpcodeccapability-mimetype" data-idl=""><code>mimeType</code></dfn> of type <span class="idlMemberType">DOMString</span></dt>
            <dd>
              <p>The codec MIME media type/subtype. Valid media types and subtypes are listed in [<cite><a class="bibref" href="#bib-IANA-RTP-2">IANA-RTP-2</a></cite>].</p>
            </dd>
          </dl>
        </section>
      </div>
      <div>
        <pre class="def idl"><span class="idlDictionary" id="idl-def-rtcrtpheaderextensioncapability" data-idl="" data-title="RTCRtpHeaderExtensionCapability">dictionary <span class="idlDictionaryID">RTCRtpHeaderExtensionCapability</span> {
<span class="idlMember" id="idl-def-rtcrtpheaderextensioncapability-uri" data-idl="" data-title="uri" data-dfn-for="rtcrtpheaderextensioncapability">    <span class="idlMemberType">DOMString</span> <span class="idlMemberName"><a data-lt="uri" href="#dom-rtcrtpheaderextensioncapability-uri" class="internalDFN" data-link-type="dfn" data-for="RTCRtpHeaderExtensionCapability"><code>uri</code></a></span>;</span>
};</span></pre>

        <section typeof="bibo:Chapter" resource="#dictionary-rtcrtpheaderextensioncapability-members" property="bibo:hasPart">
          <h4 id="dictionary-rtcrtpheaderextensioncapability-members" resource="#dictionary-rtcrtpheaderextensioncapability-members"><span property="xhv:role" resource="xhv:heading">Dictionary <a class="idlType internalDFN" href="#idl-def-rtcrtpheaderextensioncapability" data-link-type="dfn"><code>RTCRtpHeaderExtensionCapability</code></a>
          Members</span></h4>
          <dl data-link-for="RTCRtpHeaderExtensionCapability" data-dfn-for="RTCRtpHeaderExtensionCapability" class="dictionary-members">
            <dt><dfn data-dfn-for="rtcrtpheaderextensioncapability" data-dfn-type="dfn" id="dom-rtcrtpheaderextensioncapability-uri" data-idl=""><code>uri</code></dfn> of type <span class="idlMemberType">DOMString</span></dt>
            <dd>
              <p>The URI of the RTP header extension, as defined in [
                <cite><a class="bibref" href="#bib-RFC5285">RFC5285</a></cite>].</p>
            </dd>
          </dl>
        </section>
      </div>
    </section>

    <section id="rtcrtpreceiver-interface" typeof="bibo:Chapter" resource="#rtcrtpreceiver-interface" property="bibo:hasPart">
      <h3 id="h-rtcrtpreceiver-interface" resource="#h-rtcrtpreceiver-interface"><span property="xhv:role" resource="xhv:heading"><span class="secno">5.3 </span>RTCRtpReceiver Interface</span>
      </h3>
      <p>The <code>RTCRtpReceiver</code> interface allows an application to inspect the receipt of a <code>MediaStreamTrack</code>.</p>
      <p>To <dfn data-dfn-type="dfn" id="dfn-create-an-rtcrtpreceiver">create an RTCRtpReceiver</dfn> with kind, <var>kind</var>, and optionally an id string, <var>id</var>, run the following steps:</p>
      <ol>
        <li>
          <p>Let <var>receiver</var> be a new <code><a href="#idl-def-rtcrtpreceiver" class="internalDFN" data-link-type="dfn"><code>RTCRtpReceiver</code></a>
            </code>
            object.</p>
        </li>
        <li>
          <p>Let <var>track</var> be a new <code><a href="#dom-mediastreamtrack" class="internalDFN" data-link-type="dfn"><code>MediaStreamTrack</code></a>
            </code>
            object [<cite><a class="bibref" href="#bib-GETUSERMEDIA">GETUSERMEDIA</a></cite>].</p>
        </li>
        <li>
          <p>Initialize <var>track.kind</var> to <var>kind</var>.</p>
        </li>
        <li>
          <p>If an id string, <var>id</var>, was given as input to this algorithm, initialize <var>track.id</var> to <var>id</var>. (Otherwise the value generated when <var>track</var> was created will be used.)</p>
        </li>
        <li>
          <p>Initialize <var>track.label</var> to the result of concatenating the string <code>"remote "</code> with <var>kind</var>.</p>
        </li>
        <li>
          <p>Initialize <var>track.readyState</var> to <code>live</code>.</p>
        </li>
        <li>
          <p>Initialize <var>track.muted</var> to <code>true</code>. See the
            <a href="#dom-mediastreamtrack" class="internalDFN" data-link-type="dfn"><code><code>MediaStreamTrack</code></code></a> section about how the
            <code>muted</code> attribute reflects if a
            <code><a href="#dom-mediastreamtrack" class="internalDFN" data-link-type="dfn"><code>MediaStreamTrack</code></a>
            </code> is receiving media data or not.
          </p>
        </li>
        <li>
          <p>Set <var>receiver.track</var> to <var>track</var>.</p>
        </li>
        <li>
          <p>Return <var>receiver</var>.</p>
        </li>
      </ol>
      <div>
        <pre class="def idl"><span class="idlInterface" id="idl-def-rtcrtpreceiver" data-idl="" data-title="RTCRtpReceiver">interface <span class="idlInterfaceID">RTCRtpReceiver</span> {
<span class="idlAttribute" id="idl-def-rtcrtpreceiver-track" data-idl="" data-title="track" data-dfn-for="rtcrtpreceiver">    readonly attribute <span class="idlAttrType"><a href="#dom-mediastreamtrack" class="internalDFN" data-link-type="dfn"><code>MediaStreamTrack</code></a></span>  <span class="idlAttrName"><a data-lt="track" href="#dom-rtcrtpreceiver-track" class="internalDFN" data-link-type="dfn" data-for="RTCRtpReceiver"><code>track</code></a></span>;</span>
<span class="idlAttribute" id="idl-def-rtcrtpreceiver-transport" data-idl="" data-title="transport" data-dfn-for="rtcrtpreceiver">    readonly attribute <span class="idlAttrType"><a href="#idl-def-rtcdtlstransport" class="internalDFN" data-link-type="dfn"><code>RTCDtlsTransport</code></a>?</span> <span class="idlAttrName"><a data-lt="transport" href="#dom-rtcrtpreceiver-transport" class="internalDFN" data-link-type="dfn" data-for="RTCRtpReceiver"><code>transport</code></a></span>;</span>
<span class="idlAttribute" id="idl-def-rtcrtpreceiver-rtcptransport" data-idl="" data-title="rtcpTransport" data-dfn-for="rtcrtpreceiver">    readonly attribute <span class="idlAttrType"><a href="#idl-def-rtcdtlstransport" class="internalDFN" data-link-type="dfn"><code>RTCDtlsTransport</code></a>?</span> <span class="idlAttrName"><a data-lt="rtcpTransport" href="#dom-rtcrtpreceiver-rtcptransport" class="internalDFN" data-link-type="dfn" data-for="RTCRtpReceiver"><code>rtcpTransport</code></a></span>;</span>
<span class="idlMethod" id="idl-def-rtcrtpreceiver-getcapabilities(domstring)" data-idl="" data-title="getCapabilities" data-dfn-for="rtcrtpreceiver">    static <span class="idlMethType"><a href="#idl-def-rtcrtpcapabilities" class="internalDFN" data-link-type="dfn"><code>RTCRtpCapabilities</code></a></span>          <span class="idlMethName"><a data-lt="getCapabilities" href="#dom-rtcrtpreceiver-getcapabilities" class="internalDFN" data-link-type="dfn" data-for="RTCRtpReceiver"><code>getCapabilities</code></a></span>(<span class="idlParam"><span class="idlParamType">DOMString</span> <span class="idlParamName">kind</span></span>);</span>
<span class="idlMethod" id="idl-def-rtcrtpreceiver-getparameters()" data-idl="" data-title="getParameters" data-dfn-for="rtcrtpreceiver">    <span class="idlMethType"><a href="#idl-def-rtcrtpparameters" class="internalDFN" data-link-type="dfn"><code>RTCRtpParameters</code></a></span>                   <span class="idlMethName"><a data-lt="getParameters" href="#dom-rtcrtpreceiver-getparameters" class="internalDFN" data-link-type="dfn" data-for="RTCRtpReceiver"><code>getParameters</code></a></span>();</span>
<span class="idlMethod" id="idl-def-rtcrtpreceiver-getcontributingsources()" data-idl="" data-title="getContributingSources" data-dfn-for="rtcrtpreceiver">    <span class="idlMethType">sequence&lt;<a href="#dom-rtcrtpcontributingsource" class="internalDFN" data-link-type="dfn"><code>RTCRtpContributingSource</code></a>&gt;</span> <span class="idlMethName"><a data-lt="getContributingSources" href="#dom-rtcrtpreceiver-getcontributingsources" class="internalDFN" data-link-type="dfn" data-for="RTCRtpReceiver"><code>getContributingSources</code></a></span>();</span>
};</span></pre>

        <section typeof="bibo:Chapter" resource="#attributes-8" property="bibo:hasPart">
          <h4 id="attributes-8" resource="#attributes-8"><span property="xhv:role" resource="xhv:heading">Attributes</span></h4>
          <dl data-link-for="RTCRtpReceiver" data-dfn-for="RTCRtpReceiver" class="attributes">
            <dt><dfn data-dfn-for="rtcrtpreceiver" data-dfn-type="dfn" id="dom-rtcrtpreceiver-track" data-idl=""><code>track</code></dfn> of type <span class="idlAttrType"><a href="#dom-mediastreamtrack" class="internalDFN" data-link-type="dfn"><code>MediaStreamTrack</code></a></span>, readonly</dt>
            <dd>
              <p>The <code id="dom-rtpreceiver-track">track</code> attribute is the track that is associated with this
                <code><a href="#idl-def-rtcrtpreceiver" class="internalDFN" data-link-type="dfn"><code>RTCRtpReceiver</code></a>
                </code> object. Note that
                <code>track.stop()</code> is final, although clones are not affected. Since <code>receiver.track.stop()</code> does not implicitly stop <var>receiver</var>, Receiver Reports continue to be sent.</p>
            </dd>
            <dt><code>transport</code> of type <span class="idlAttrType"><a href="#idl-def-rtcdtlstransport" class="internalDFN" data-link-type="dfn"><code>RTCDtlsTransport</code></a></span>, readonly,
            nullable</dt>
            <dd>
              <p>The <dfn data-dfn-for="rtcrtpreceiver" data-dfn-type="dfn" id="dom-rtcrtpreceiver-transport" data-idl=""><code>transport</code></dfn> attribute is the transport over which media for the receiver's <code>track</code> is received in the form of RTP packets. Prior to construction of the <code><a href="#idl-def-rtcdtlstransport" class="internalDFN" data-link-type="dfn"><code>RTCDtlsTransport</code></a>
                </code> object, the
                <code>transport</code> attribute will be null. When bundling is used, multiple <code><a href="#idl-def-rtcrtpreceiver" class="internalDFN" data-link-type="dfn"><code>RTCRtpReceiver</code></a>
                </code> objects will share one <code>transport</code> and will all receive RTP and RTCP over the same transport.</p>
            </dd>
            <dt><code>rtcpTransport</code> of type <span class="idlAttrType"><a href="#idl-def-rtcdtlstransport" class="internalDFN" data-link-type="dfn"><code>RTCDtlsTransport</code></a></span>, readonly ,
            nullable</dt>
            <dd>
              <p>The <dfn data-dfn-for="rtcrtpreceiver" data-dfn-type="dfn" id="dom-rtcrtpreceiver-rtcptransport" data-idl=""><code>rtcpTransport</code></dfn> attribute is the transport over which RTCP is sent and received. Prior to construction of the <code><a href="#idl-def-rtcdtlstransport" class="internalDFN" data-link-type="dfn"><code>RTCDtlsTransport</code></a>
                </code> object, the <code>rtcpTransport</code> attribute will be null. When RTCP mux is used (or bundling, which mandates RTCP mux),
                <code>rtcpTransport</code> will be null, and both RTP and RTCP traffic will flow over <code>transport</code>.</p>
            </dd>
          </dl>
        </section>

        <section typeof="bibo:Chapter" resource="#methods-6" property="bibo:hasPart">
          <h4 id="methods-6" resource="#methods-6"><span property="xhv:role" resource="xhv:heading">Methods</span></h4>
          <dl data-link-for="RTCRtpReceiver" data-dfn-for="RTCRtpReceiver" class="methods">
            <dt><code>getCapabilities</code>, static</dt>
            <dd>
              <p>The <dfn data-dfn-for="rtcrtpreceiver" data-dfn-type="dfn" data-lt="getcapabilities" id="dom-rtcrtpreceiver-getcapabilities" data-idl=""><code>RTCRtpReceiver.getCapabilities</code></dfn> method returns the most optimistic view of the capabilities of the system for receiving media of the given kind. It does not reserve any resources, ports, or other state but is meant to provide a way to discover the types of capabilities of the browser including which codecs may be supported.</p>
              <p class="fingerprint">These capabilities provide generally persistent cross-origin information on the device and thus increases the fingerprinting surface of the application. In privacy-sensitive contexts, browsers can consider mitigations such as reporting only a common subset of the capabilities.<img src="images/fingerprint.png" alt="(This is a fingerprinting vector.)" width="15" height="21"></p>
              <table class="parameters">
                <tbody>
                  <tr>
                    <th>Parameter</th>
                    <th>Type</th>
                    <th>Nullable</th>
                    <th>Optional</th>
                    <th>Description</th>
                  </tr>
                  <tr>
                    <td class="prmName">kind</td>
                    <td class="prmType"><code>DOMString</code></td>
                    <td class="prmNullFalse"><span role="img" aria-label="False">âœ˜</span></td>
                    <td class="prmOptFalse"><span role="img" aria-label="False">âœ˜</span></td>
                    <td class="prmDesc"></td>
                  </tr>
                </tbody>
              </table>
              <div>
                <em>Return type:</em> <code>RTCRtpCapabilities</code>
              </div>
            </dd>
            <dt><dfn data-dfn-for="rtcrtpreceiver" data-dfn-type="dfn" id="dom-rtcrtpreceiver-getparameters" data-idl=""><code>getParameters</code></dfn></dt>
            <dd>
              <p>The <code>getParameters</code> method returns the
                <code>RTCRtpReceiver</code> object's current parameters for how
                <code>track</code> is decoded.</p>
              <div>
                <em>No parameters.</em>
              </div>
              <div>
                <em>Return type:</em> <code>RTCRtpParameters</code>
              </div>
            </dd>
            <dt><dfn data-dfn-for="rtcrtpreceiver" data-dfn-type="dfn" id="dom-rtcrtpreceiver-getcontributingsources" data-idl=""><code>getContributingSources</code></dfn></dt>
            <dd>
              <p>Returns an <code><a href="#dom-rtcrtpcontributingsource" class="internalDFN" data-link-type="dfn"><code>RTCRtpContributingSource</code></a>
                </code> for each unique CSRC or SSRC received by this RTCRtpReceiver in the last 10 seconds.</p>
              <div>
                <em>No parameters.</em>
              </div>
              <div>
                <em>Return type:</em>
                <code>sequence&lt;RTCRtpContributingSource&gt;</code>
              </div>
            </dd>
          </dl>
        </section>
      </div>
      <p>The <dfn data-dfn-for="" data-dfn-type="dfn" id="dom-rtcrtpcontributingsource" data-idl=""><code>RTCRtpContributingSource</code></dfn> objects contain information about a given contributing source, including the time the most recent time a packet was received from the source. The browser <em class="rfc2119" title="MUST">MUST</em> keep information from RTP packets received in the previous 10 seconds. Each time an RTP packet is received, the
        <code><a href="#dom-rtcrtpcontributingsource" class="internalDFN" data-link-type="dfn"><code>RTCRtpContributingSource</code></a>
        </code> objects are updated. If the RTP packet contains CSRCs, then the
        <code><a href="#dom-rtcrtpcontributingsource" class="internalDFN" data-link-type="dfn"><code>RTCRtpContributingSource</code></a>
        </code> objects corresponding to those CSRCs are updated. If the RTP packet contains no CSRCs, then the
        <code><a href="#dom-rtcrtpcontributingsource" class="internalDFN" data-link-type="dfn"><code>RTCRtpContributingSource</code></a>
        </code> object corresponding to the SSRC is updated.</p>
      <div>
        <pre class="def idl"><span class="idlInterface" id="idl-def-rtcrtpcontributingsource" data-idl="" data-title="RTCRtpContributingSource">interface <span class="idlInterfaceID"><a data-lt="RTCRtpContributingSource" href="#dom-rtcrtpcontributingsource" class="internalDFN" data-link-type="dfn" data-for=""><code>RTCRtpContributingSource</code></a></span> {
<span class="idlAttribute" id="idl-def-rtcrtpcontributingsource-timestamp" data-idl="" data-title="timestamp" data-dfn-for="rtcrtpcontributingsource">    readonly attribute <span class="idlAttrType">DOMHighResTimeStamp</span> <span class="idlAttrName"><a data-lt="timestamp" href="#dom-rtcrtpcontributingsource-timestamp" class="internalDFN" data-link-type="dfn" data-for="RTCRtpContributingSource"><code>timestamp</code></a></span>;</span>
<span class="idlAttribute" id="idl-def-rtcrtpcontributingsource-source" data-idl="" data-title="source" data-dfn-for="rtcrtpcontributingsource">    readonly attribute <span class="idlAttrType">unsigned long</span>       <span class="idlAttrName"><a data-lt="source" href="#dom-rtcrtpcontributingsource-source" class="internalDFN" data-link-type="dfn" data-for="RTCRtpContributingSource"><code>source</code></a></span>;</span>
<span class="idlAttribute" id="idl-def-rtcrtpcontributingsource-audiolevel" data-idl="" data-title="audioLevel" data-dfn-for="rtcrtpcontributingsource">    readonly attribute <span class="idlAttrType">byte?</span>               <span class="idlAttrName"><a data-lt="audioLevel" href="#dom-rtcrtpcontributingsource-audiolevel" class="internalDFN" data-link-type="dfn" data-for="RTCRtpContributingSource"><code>audioLevel</code></a></span>;</span>
<span class="idlAttribute" id="idl-def-rtcrtpcontributingsource-voiceactivityflag" data-idl="" data-title="voiceActivityFlag" data-dfn-for="rtcrtpcontributingsource">    readonly attribute <span class="idlAttrType">boolean?</span>            <span class="idlAttrName"><a data-lt="voiceActivityFlag" href="#dom-rtcrtpcontributingsource-voiceactivityflag" class="internalDFN" data-link-type="dfn" data-for="RTCRtpContributingSource"><code>voiceActivityFlag</code></a></span>;</span>
};</span></pre>

        <section typeof="bibo:Chapter" resource="#attributes-9" property="bibo:hasPart">
          <h4 id="attributes-9" resource="#attributes-9"><span property="xhv:role" resource="xhv:heading">Attributes</span></h4>
          <dl data-link-for="RTCRtpContributingSource" data-dfn-for="RTCRtpContributingSource" class="attributes">
            <dt><dfn data-dfn-for="rtcrtpcontributingsource" data-dfn-type="dfn" id="dom-rtcrtpcontributingsource-timestamp" data-idl=""><code>timestamp</code></dfn> of type <span class="idlAttrType">DOMHighResTimeStamp</span>, readonly</dt>
            <dd>
              <p>The timestamp of type DOMHighResTimeStamp [<cite><a class="bibref" href="#bib-HIGHRES-TIME">HIGHRES-TIME</a></cite>], indicating the time of reception of the most recent RTP packet containing the source. The timestamp is defined in [
                <cite><a class="bibref" href="#bib-HIGHRES-TIME">HIGHRES-TIME</a></cite>] and corresponds to a local clock.</p>
            </dd>
            <dt><dfn data-dfn-for="rtcrtpcontributingsource" data-dfn-type="dfn" id="dom-rtcrtpcontributingsource-source" data-idl=""><code>source</code></dfn> of type <span class="idlAttrType">unsigned long</span>, readonly</dt>
            <dd>
              <p>The CSRC or SSRC value of the contributing source.</p>
            </dd>
            <dt><dfn data-dfn-for="rtcrtpcontributingsource" data-dfn-type="dfn" id="dom-rtcrtpcontributingsource-audiolevel" data-idl=""><code>audioLevel</code></dfn> of type <span class="idlAttrType">byte</span>, readonly , nullable</dt>
            <dd>
              <p>The audio level contained in the last RTP packet received from this source. If the source was set from an SSRC, this will be the level value defined in [<cite><a class="bibref" href="#bib-RFC6464">RFC6464</a></cite>]. If an RFC 6464 extension header is not present, the browser will compute the value as if it had come from RFC 6464 and use that. If the source was set from a CSRC, this will be the level value defined in [
                <cite><a class="bibref" href="#bib-RFC6465">RFC6465</a></cite>]. RFC 6464 and 6465 define the level as a integral value from 0 to 127 representing the audio level in negative decibels relative to the loudest signal that they system could possibly encode. Thus, 0 represents the loudest signal the system could possibly encode, and 127 represents silence.</p>
            </dd>
            <dt><dfn data-dfn-for="rtcrtpcontributingsource" data-dfn-type="dfn" id="dom-rtcrtpcontributingsource-voiceactivityflag" data-idl=""><code>voiceActivityFlag</code></dfn> of type <span class="idlAttrType">boolean</span>, readonly , nullable</dt>
            <dd>
              <p>Whether the last RTP packet received from this source contains voice activity (true) or not (false). Since the "V" bit is supported in [<cite><a class="bibref" href="#bib-RFC6464">RFC6464</a></cite>] but not [<cite><a class="bibref" href="#bib-RFC6465">RFC6465</a></cite>], the
                <var>voiceActivityFlag</var> attribute will only be set for RTP packets received from peers enabling the client-mixer header extension with the "vad" extension set to "on".</p>
            </dd>
          </dl>
        </section>
      </div>
    </section>

    <section id="rtcrtptransceiver-interface" typeof="bibo:Chapter" resource="#rtcrtptransceiver-interface" property="bibo:hasPart">
      <h3 id="h-rtcrtptransceiver-interface" resource="#h-rtcrtptransceiver-interface"><span property="xhv:role" resource="xhv:heading"><span class="secno">5.4 </span>RTCRtpTransceiver Interface</span>
      </h3>
      <p>The <a href="#idl-def-rtcrtptransceiver" class="internalDFN" data-link-type="dfn"><code><code>RTCRtpTransceiver</code></code></a> interface represents a combination of an <a href="#dom-rtcrtpsender" class="internalDFN" data-link-type="dfn"><code><code>RTCRtpSender</code></code></a> and an
        <a href="#idl-def-rtcrtpreceiver" class="internalDFN" data-link-type="dfn"><code><code>RTCRtpReceiver</code></code></a> that share a common
        <code>mid</code>.</p>
      <p>The <dfn data-dfn-type="dfn" id="dfn-transceiver-kind">transceiver kind</dfn> of an
        <code><a href="#idl-def-rtcrtptransceiver" class="internalDFN" data-link-type="dfn"><code>RTCRtpTransceiver</code></a>
        </code> is defined by the kind of the associated <code><a href="#idl-def-rtcrtpreceiver" class="internalDFN" data-link-type="dfn"><code>RTCRtpReceiver</code></a>
        </code>'s
        <code><a href="#dom-mediastreamtrack" class="internalDFN" data-link-type="dfn"><code>MediaStreamTrack</code></a>
        </code> object.</p>
      <p>To <dfn data-dfn-type="dfn" id="dfn-create-an-rtcrtptransceiver">create an RTCRtpTransceiver</dfn> with an
        <code><a href="#idl-def-rtcrtpreceiver" class="internalDFN" data-link-type="dfn"><code>RTCRtpReceiver</code></a>
        </code> object, <var>receiver</var>, and an
        <code><a href="#dom-rtcrtpsender" class="internalDFN" data-link-type="dfn"><code>RTCRtpSender</code></a>
        </code> object, <var>sender</var>, run the following steps:</p>
      <ol>
        <li>
          <p>Let <var>transceiver</var> be a new
            <code><a href="#idl-def-rtcrtptransceiver" class="internalDFN" data-link-type="dfn"><code>RTCRtpTransceiver</code></a>
            </code> object.</p>
        </li>
        <li>
          <p>Set <var>transceiver.sender</var> to <var>sender</var>.</p>
        </li>
        <li>
          <p>Set <var>transceiver.receiver</var> to <var>receiver</var>.</p>
        </li>
        <li>
          <p>Set <var>transceiver.stopped</var> to <code>false</code>.</p>
        </li>
        <li>
          <p>Return <var>transceiver</var>.</p>
        </li>
      </ol>
      <div>
        <pre class="def idl"><span class="idlInterface" id="idl-def-rtcrtptransceiver" data-idl="" data-title="RTCRtpTransceiver">interface <span class="idlInterfaceID">RTCRtpTransceiver</span> {
<span class="idlAttribute" id="idl-def-rtcrtptransceiver-mid" data-idl="" data-title="mid" data-dfn-for="rtcrtptransceiver">    readonly attribute <span class="idlAttrType">DOMString?</span>                 <span class="idlAttrName"><a data-lt="mid" href="#dom-rtcrtptransceiver-mid" class="internalDFN" data-link-type="dfn" data-for="RTCRtpTransceiver"><code>mid</code></a></span>;</span>
<span class="idlAttribute" id="idl-def-rtcrtptransceiver-sender" data-idl="" data-title="sender" data-dfn-for="rtcrtptransceiver">    [<span class="extAttr"><span class="extAttrName">SameObject</span></span>]
    readonly attribute <span class="idlAttrType"><a href="#dom-rtcrtpsender" class="internalDFN" data-link-type="dfn"><code>RTCRtpSender</code></a></span>               <span class="idlAttrName"><a data-lt="sender" href="#dom-rtcrtptransceiver-sender" class="internalDFN" data-link-type="dfn" data-for="RTCRtpTransceiver"><code>sender</code></a></span>;</span>
<span class="idlAttribute" id="idl-def-rtcrtptransceiver-receiver" data-idl="" data-title="receiver" data-dfn-for="rtcrtptransceiver">    [<span class="extAttr"><span class="extAttrName">SameObject</span></span>]
    readonly attribute <span class="idlAttrType"><a href="#idl-def-rtcrtpreceiver" class="internalDFN" data-link-type="dfn"><code>RTCRtpReceiver</code></a></span>             <span class="idlAttrName"><a data-lt="receiver" href="#dom-rtcrtptransceiver-receiver" class="internalDFN" data-link-type="dfn" data-for="RTCRtpTransceiver"><code>receiver</code></a></span>;</span>
<span class="idlAttribute" id="idl-def-rtcrtptransceiver-stopped" data-idl="" data-title="stopped" data-dfn-for="rtcrtptransceiver">    readonly attribute <span class="idlAttrType">boolean</span>                    <span class="idlAttrName"><a data-lt="stopped" href="#dom-rtcrtptransceiver-stopped" class="internalDFN" data-link-type="dfn" data-for="RTCRtpTransceiver"><code>stopped</code></a></span>;</span>
<span class="idlAttribute" id="idl-def-rtcrtptransceiver-direction" data-idl="" data-title="direction" data-dfn-for="rtcrtptransceiver">    readonly attribute <span class="idlAttrType"><a href="#idl-def-rtcrtptransceiverdirection" class="internalDFN" data-link-type="dfn"><code>RTCRtpTransceiverDirection</code></a></span> <span class="idlAttrName"><a data-lt="direction" href="#dom-rtcrtptransceiver-direction" class="internalDFN" data-link-type="dfn" data-for="RTCRtpTransceiver"><code>direction</code></a></span>;</span>
<span class="idlMethod" id="idl-def-rtcrtptransceiver-setdirection(rtcrtptransceiverdirection)" data-idl="" data-title="setDirection" data-dfn-for="rtcrtptransceiver">    <span class="idlMethType">void</span> <span class="idlMethName"><a data-lt="setDirection" href="#dom-rtcrtptransceiver-setdirection" class="internalDFN" data-link-type="dfn" data-for="RTCRtpTransceiver"><code>setDirection</code></a></span>(<span class="idlParam"><span class="idlParamType"><a href="#idl-def-rtcrtptransceiverdirection" class="internalDFN" data-link-type="dfn"><code>RTCRtpTransceiverDirection</code></a></span> <span class="idlParamName">direction</span></span>);</span>
<span class="idlMethod" id="idl-def-rtcrtptransceiver-stop()" data-idl="" data-title="stop" data-dfn-for="rtcrtptransceiver">    <span class="idlMethType">void</span> <span class="idlMethName"><a data-lt="stop" href="#dom-rtcrtptransceiver-stop" class="internalDFN" data-link-type="dfn" data-for="RTCRtpTransceiver"><code>stop</code></a></span>();</span>
<span class="idlMethod" id="idl-def-rtcrtptransceiver-setcodecpreferences(sequence<rtcrtpcodeccapability>)" data-idl="" data-title="setCodecPreferences" data-dfn-for="rtcrtptransceiver">    <span class="idlMethType">void</span> <span class="idlMethName"><a data-lt="setCodecPreferences" href="#dom-rtcrtptransceiver-setcodecpreferences" class="internalDFN" data-link-type="dfn" data-for="RTCRtpTransceiver"><code>setCodecPreferences</code></a></span>(<span class="idlParam"><span class="idlParamType">sequence&lt;<a href="#idl-def-rtcrtpcodeccapability" class="internalDFN" data-link-type="dfn"><code>RTCRtpCodecCapability</code></a>&gt;</span> <span class="idlParamName">codecs</span></span>);</span>
};</span></pre>

        <section typeof="bibo:Chapter" resource="#attributes-10" property="bibo:hasPart">
          <h4 id="attributes-10" resource="#attributes-10"><span property="xhv:role" resource="xhv:heading">Attributes</span></h4>
          <dl data-link-for="RTCRtpTransceiver" data-dfn-for="RTCRtpTransceiver" class="attributes">
            <dt><code>mid</code> of type <span class="idlAttrType">DOMString</span>, readonly , nullable</dt>
            <dd>
              <p>The <dfn id="dom-rtcrtptransceiver-mid" data-dfn-for="rtcrtptransceiver" data-dfn-type="dfn" data-idl=""><code>mid</code></dfn> attribute is the <code>mid</code> negotatiated and present in the local and remote descriptions as defined in <span>[<cite><a class="bibref" href="#bib-JSEP">JSEP</a></cite>] (<a href="https://tools.ietf.org/html/draft-ietf-rtcweb-jsep-16#section-5.2.1">section 5.2.1.</a> and <a href="https://tools.ietf.org/html/draft-ietf-rtcweb-jsep-16#section-5.3.1">section 5.3.1.</a>)</span>. Before negotiation is complete, the <code>mid</code> value may be null. If there is no MID value in the remote SDP, and no MID value was previously assigned, a random value will be created for the
                <code>mid</code> as described in <span>[<cite><a class="bibref" href="#bib-JSEP">JSEP</a></cite>] (<a href="https://tools.ietf.org/html/draft-ietf-rtcweb-jsep-16#section-5.9">section 5.9.</a>)</span> when the remote SDP is set. After rollbacks, the value may change from a non-null value to null.</p>
            </dd>
            <dt><dfn data-dfn-for="rtcrtptransceiver" data-dfn-type="dfn" id="dom-rtcrtptransceiver-sender" data-idl=""><code>sender</code></dfn> of type <span class="idlAttrType"><a href="#dom-rtcrtpsender" class="internalDFN" data-link-type="dfn"><code>RTCRtpSender</code></a></span>, readonly</dt>
            <dd>
              <p>The <code>sender</code> attribute is the
                <a href="#dom-rtcrtpsender" class="internalDFN" data-link-type="dfn"><code><code>RTCRtpSender</code></code></a> corresponding to the RTP media that may be sent with mid = <a href="#dom-rtcrtptransceiver-mid" class="internalDFN" data-link-type="dfn"><code><code>mid</code></code></a>.</p>
            </dd>
            <dt><dfn data-dfn-for="rtcrtptransceiver" data-dfn-type="dfn" id="dom-rtcrtptransceiver-receiver" data-idl=""><code>receiver</code></dfn> of type <span class="idlAttrType"><a href="#idl-def-rtcrtpreceiver" class="internalDFN" data-link-type="dfn"><code>RTCRtpReceiver</code></a></span>, readonly</dt>
            <dd>
              <p>The <code>receiver</code> attribute is the
                <a href="#idl-def-rtcrtpreceiver" class="internalDFN" data-link-type="dfn"><code><code>RTCRtpReceiver</code></code></a> corresponding to the RTP media that may be received with mid = <a href="#dom-rtcrtptransceiver-mid" class="internalDFN" data-link-type="dfn"><code><code>mid</code></code></a>.</p>
            </dd>
            <dt><dfn data-dfn-for="rtcrtptransceiver" data-dfn-type="dfn" id="dom-rtcrtptransceiver-stopped" data-idl=""><code>stopped</code></dfn> of type <span class="idlAttrType">boolean</span>, readonly</dt>
            <dd>
              <p>The <code>stopped</code> attribute indicates that the sender of this transceiver will no longer send, and that the receiver will no longer receive. It is true if either <code>stop</code> has been called or if setting the local or remote description has caused the <a href="#idl-def-rtcrtpreceiver" class="internalDFN" data-link-type="dfn"><code><code>RTCRtpReceiver</code></code></a> to be stopped.</p>
            </dd>
            <dt><dfn data-dfn-for="rtcrtptransceiver" data-dfn-type="dfn" id="dom-rtcrtptransceiver-direction" data-idl=""><code>direction</code></dfn> of type <span class="idlAttrType"><a href="#idl-def-rtcrtptransceiverdirection" class="internalDFN" data-link-type="dfn"><code>RTCRtpTransceiverDirection</code></a></span>,
            readonly</dt>
            <dd>
              <p>The <var>direction</var> attribute indicates the direction of this transceiver. The value of <var>direction</var> is independent of the value of <var>encodings[].active</var> since one cannot be deduced from the other. If the <code>stop()</code> method is called, <var>direction</var> retains the value it had prior to calling <code>stop()</code>.</p>
            </dd>
          </dl>
        </section>

        <section typeof="bibo:Chapter" resource="#methods-7" property="bibo:hasPart">
          <h4 id="methods-7" resource="#methods-7"><span property="xhv:role" resource="xhv:heading">Methods</span></h4>
          <dl data-link-for="RTCRtpTransceiver" data-dfn-for="RTCRtpTransceiver" class="methods">
            <dt><code>setDirection</code></dt>
            <dd>
              <p>The <dfn id="dom-rtcrtptransceiver-setdirection" data-dfn-for="rtcrtptransceiver" data-dfn-type="dfn" data-idl=""><code>setDirection</code></dfn> method sets the direction of the <code>RTCRtpTransceiver</code>. Calls to <code>setDirection()</code> do not take effect immediately. Instead, future calls to <code>createOffer</code> and <code>createAnswer</code> mark the corresponding media description as <code>sendrecv</code>, <code>sendonly</code>,
                <code>recvonly</code> or <code>inactive</code> as defined in
                <span>[<cite><a class="bibref" href="#bib-JSEP">JSEP</a></cite>] (<a href="https://tools.ietf.org/html/draft-ietf-rtcweb-jsep-16#section-5.2.2">section 5.2.2.</a> and <a href="https://tools.ietf.org/html/draft-ietf-rtcweb-jsep-16#section-5.3.2">section 5.3.2.</a>)</span>. Calling
                <code>setDirection()</code> <a data-lt="update the negotiation-needed flag" href="#dfn-update-the-negotiation-needed-flag" class="internalDFN" data-link-type="dfn">updates the
              negotiation-needed flag</a> for the
                <code>RTCRtpTransceiver</code>'s associated
                <code><a href="#dom-rtcpeerconnection" class="internalDFN" data-link-type="dfn"><code>RTCPeerConnection</code></a>
                </code>.</p>
              <table class="parameters">
                <tbody>
                  <tr>
                    <th>Parameter</th>
                    <th>Type</th>
                    <th>Nullable</th>
                    <th>Optional</th>
                    <th>Description</th>
                  </tr>
                  <tr>
                    <td class="prmName">direction</td>
                    <td class="prmType">
                      <code>RTCRtpTransceiverDirection</code></td>
                    <td class="prmNullFalse"><span role="img" aria-label="False">âœ˜</span></td>
                    <td class="prmOptFalse"><span role="img" aria-label="False">âœ˜</span></td>
                    <td class="prmDesc"></td>
                  </tr>
                </tbody>
              </table>
              <div>
                <em>Return type:</em> <code>void</code>
              </div>
            </dd>
            <dt><code>stop</code></dt>
            <dd>
              <p>The <dfn data-dfn-for="rtcrtptransceiver" data-dfn-type="dfn" id="dom-rtcrtptransceiver-stop" data-idl=""><code>stop</code></dfn> method stops the
                <a href="#idl-def-rtcrtptransceiver" class="internalDFN" data-link-type="dfn"><code><code>RTCRtpTransceiver</code></code></a>. The sender of this transceiver will no longer send, the receiver will no longer receive. Calling <code>stop()</code> <a data-lt="update the negotiation-needed flag" href="#dfn-update-the-negotiation-needed-flag" class="internalDFN" data-link-type="dfn">updates the
              negotiation-needed flag</a> for the
                <code>RTCRtpTransceiver</code>'s associated
                <code><a href="#dom-rtcpeerconnection" class="internalDFN" data-link-type="dfn"><code>RTCPeerConnection</code></a>
                </code>.</p>
              <div>
                <em>No parameters.</em>
              </div>
              <div>
                <em>Return type:</em> <code>void</code>
              </div>
            </dd>
            <dt><dfn data-dfn-for="rtcrtptransceiver" data-dfn-type="dfn" id="dom-rtcrtptransceiver-setcodecpreferences" data-idl=""><code>setCodecPreferences</code></dfn></dt>
            <dd>
              <p>The <code>setCodecPreferences</code> method overrides the default codec preferences used by the <a href="#dfn-user-agent" class="internalDFN" data-link-type="dfn">user agent</a>. When generating a session description using either
                <code>createOffer</code> or <code>createAnswer</code>, the
                <a href="#dfn-user-agent" class="internalDFN" data-link-type="dfn">user agent</a> <em class="rfc2119" title="MUST">MUST</em> use the indicated codecs, in the order specified in the <var>codecs</var> argument, for the media section corresponding to this <code>RTCRtpTransceiver</code>. Note that calls to <code>createAnswer</code> will use only the common subset of these codecs and the codecs that appear in the offer.
              </p>
              <p>This method allows applications to disable the negotiation of specific codecs. It also allows an application to cause a remote peer to prefer the codec that appears first in the list for sending.
              </p>
              <p>Codec preferences remain in effect for all calls to
                <code>createOffer</code> and <code>createAnswer</code> that include this <code>RTCRtpTransceiver</code> until this method is called again. Setting <var>codecs</var> to an empty sequence resets codec preferences to any default value.</p>
              <table class="parameters">
                <tbody>
                  <tr>
                    <th>Parameter</th>
                    <th>Type</th>
                    <th>Nullable</th>
                    <th>Optional</th>
                    <th>Description</th>
                  </tr>
                  <tr>
                    <td class="prmName">codecs</td>
                    <td class="prmType">
                      <code>sequence&lt;RTCRtpCodecCapability&gt;</code></td>
                    <td class="prmNullFalse"><span role="img" aria-label="False">âœ˜</span></td>
                    <td class="prmOptFalse"><span role="img" aria-label="False">âœ˜</span></td>
                    <td class="prmDesc"></td>
                  </tr>
                </tbody>
              </table>
              <div>
                <em>Return type:</em> <code>void</code>
              </div>
            </dd>
          </dl>
        </section>
      </div>

      <section id="hold-functionality" typeof="bibo:Chapter" resource="#hold-functionality" property="bibo:hasPart">
        <h4 id="h-hold-functionality" resource="#h-hold-functionality"><span property="xhv:role" resource="xhv:heading"><span class="secno">5.4.1 </span>"Hold" functionality</span>
        </h4>
        <p>Together, the <code>setDirection</code>, <code>getParameters</code>,
          <code>setParameters</code> and <code>replaceTrack</code> methods enable developers to implement "hold" scenarios.</p>
        <p>To send music to a peer and cease rendering received audio:</p>
        <div class="example">
          <div class="example-title marker"><span>Example 3</span></div><pre class="highlight hljs javascript"><span class="hljs-comment">// Assume we have an audio transceiver and a music track named musicTrack</span>
audio.sender.replaceTrack(musicTrack);
<span class="hljs-comment">// Set the direction to send-only (requires negotiation)</span>
audio.setDirection(<span class="hljs-string">"sendonly"</span>);</pre></div>
        <p>To stop sending audio to a peer:</p>
        <div class="example">
          <div class="example-title marker"><span>Example 4</span></div><pre class="highlight hljs javascript"><span class="hljs-keyword">var</span> params = audio.sender.getParameters();
params.encodings[<span class="hljs-number">0</span>].active = <span class="hljs-literal">false</span>;
audio.sender.setParameters(params);</pre></div>
        <p>To re-enable sending audio captured from a microphone as well as rendering of received audio:</p>
        <div class="example">
          <div class="example-title marker"><span>Example 5</span></div><pre class="highlight hljs javascript"><span class="hljs-comment">//assume we have an audio transceiver and a microphone track named micTrack</span>
audio.sender.replaceTrack(micTrack);
<span class="hljs-comment">// Set the direction to sendrecv (requires negotiation)</span>
audio.setDirection(<span class="hljs-string">"sendrecv"</span>);</pre></div>
        <p>To re-enable sending audio to a peer:</p>
        <div class="example">
          <div class="example-title marker"><span>Example 6</span></div><pre class="highlight hljs javascript"><span class="hljs-keyword">var</span> params = audio.sender.getParameters();
params.encodings[<span class="hljs-number">0</span>].active = <span class="hljs-literal">true</span>;
audio.sender.setParameters(params);</pre></div>
      </section>
    </section>

    <section id="rtcdtlstransport-interface" typeof="bibo:Chapter" resource="#rtcdtlstransport-interface" property="bibo:hasPart">
      <h3 id="h-rtcdtlstransport-interface" resource="#h-rtcdtlstransport-interface"><span property="xhv:role" resource="xhv:heading"><span class="secno">5.5 </span>RTCDtlsTransport Interface</span>
      </h3>
      <p>The <code><a href="#idl-def-rtcdtlstransport" class="internalDFN" data-link-type="dfn"><code>RTCDtlsTransport</code></a>
        </code> interface allows an application access to information about the Datagram Transport Layer Security (DTLS) transport over which RTP and RTCP packets are sent and received by <code><a href="#dom-rtcrtpsender" class="internalDFN" data-link-type="dfn"><code>RTCRtpSender</code></a>
        </code> and
        <code><a href="#idl-def-rtcrtpreceiver" class="internalDFN" data-link-type="dfn"><code>RTCRtpReceiver</code></a>
        </code> objects, as well other data such as SCTP packets sent and received by data channels. In particular, DTLS adds security to an underlying transport, and the
        <code>RTCDtlsTransport</code> interface allows access to information about the underlying transport and the security added.
        <code><a href="#idl-def-rtcdtlstransport" class="internalDFN" data-link-type="dfn"><code>RTCDtlsTransport</code></a>
        </code> objects are constructed as a result of calls to <code>setLocalDescription()</code> and
        <code>setRemoteDescription()</code>.</p>
      <div>
        <pre class="def idl"><span class="idlInterface" id="idl-def-rtcdtlstransport" data-idl="" data-title="RTCDtlsTransport">interface <span class="idlInterfaceID">RTCDtlsTransport</span> {
<span class="idlAttribute" id="idl-def-rtcdtlstransport-transport" data-idl="" data-title="transport" data-dfn-for="rtcdtlstransport">    readonly attribute <span class="idlAttrType"><a href="#idl-def-rtcicetransport" class="internalDFN" data-link-type="dfn"><code>RTCIceTransport</code></a></span>       <span class="idlAttrName"><a data-lt="transport" href="#dom-rtcdtlstransport-transport" class="internalDFN" data-link-type="dfn" data-for="RTCDtlsTransport"><code>transport</code></a></span>;</span>
<span class="idlAttribute" id="idl-def-rtcdtlstransport-state" data-idl="" data-title="state" data-dfn-for="rtcdtlstransport">    readonly attribute <span class="idlAttrType"><a href="#idl-def-rtcdtlstransportstate" class="internalDFN" data-link-type="dfn"><code>RTCDtlsTransportState</code></a></span> <span class="idlAttrName"><a data-lt="state" href="#dom-rtcdtlstransport-state" class="internalDFN" data-link-type="dfn" data-for="RTCDtlsTransport"><code>state</code></a></span>;</span>
<span class="idlMethod" id="idl-def-rtcdtlstransport-getremotecertificates()" data-idl="" data-title="getRemoteCertificates" data-dfn-for="rtcdtlstransport">    <span class="idlMethType">sequence&lt;ArrayBuffer&gt;</span> <span class="idlMethName"><a data-lt="getRemoteCertificates" href="#dom-rtcdtlstransport-getremotecertificates" class="internalDFN" data-link-type="dfn" data-for="RTCDtlsTransport"><code>getRemoteCertificates</code></a></span>();</span>
<span class="idlAttribute" id="idl-def-rtcdtlstransport-onstatechange" data-idl="" data-title="onstatechange" data-dfn-for="rtcdtlstransport">             attribute <span class="idlAttrType">EventHandler</span>          <span class="idlAttrName"><a data-lt="onstatechange" href="#dom-rtcdtlstransport-onstatechange" class="internalDFN" data-link-type="dfn" data-for="RTCDtlsTransport"><code>onstatechange</code></a></span>;</span>
};</span></pre>

        <section typeof="bibo:Chapter" resource="#attributes-11" property="bibo:hasPart">
          <h4 id="attributes-11" resource="#attributes-11"><span property="xhv:role" resource="xhv:heading">Attributes</span></h4>
          <dl data-link-for="RTCDtlsTransport" data-dfn-for="RTCDtlsTransport" class="attributes">
            <dt><dfn data-dfn-for="rtcdtlstransport" data-dfn-type="dfn" id="dom-rtcdtlstransport-transport" data-idl=""><code>transport</code></dfn> of type <span class="idlAttrType"><a href="#idl-def-rtcicetransport" class="internalDFN" data-link-type="dfn"><code>RTCIceTransport</code></a></span>, readonly</dt>
            <dd>
              <p>The <code>transport</code> attribute is the underlying transport that is used to send and receive packets. The underlying transport may not be shared between multiple active
                <code><a href="#idl-def-rtcdtlstransport" class="internalDFN" data-link-type="dfn"><code>RTCDtlsTransport</code></a>
                </code> objects.</p>
            </dd>
            <dt><dfn data-dfn-for="rtcdtlstransport" data-dfn-type="dfn" id="dom-rtcdtlstransport-state" data-idl=""><code>state</code></dfn> of type <span class="idlAttrType"><a href="#idl-def-rtcdtlstransportstate" class="internalDFN" data-link-type="dfn"><code>RTCDtlsTransportState</code></a></span>, readonly</dt>
            <dd>
              <p>The <code>state</code> attribute <em class="rfc2119" title="MUST">MUST</em> return the state of the transport.
              </p>
            </dd>
            <dt><dfn data-dfn-for="rtcdtlstransport" data-dfn-type="dfn" id="dom-rtcdtlstransport-onstatechange" data-idl=""><code>onstatechange</code></dfn> of type <span class="idlAttrType">EventHandler</span></dt>
            <dd>
              This event handler, of event handler event type
              <code><a href="#event-icetransport-statechange" class="internalDFN" data-link-type="dfn"><code>statechange</code></a>
              </code>, <em class="rfc2119" title="MUST">MUST</em> be fired any time the
              <code>RTCDtlsTransport</code> state changes.
            </dd>
          </dl>
        </section>

        <section typeof="bibo:Chapter" resource="#methods-8" property="bibo:hasPart">
          <h4 id="methods-8" resource="#methods-8"><span property="xhv:role" resource="xhv:heading">Methods</span></h4>
          <dl data-link-for="RTCDtlsTransport" data-dfn-for="RTCDtlsTransport" class="methods">
            <dt><dfn data-dfn-for="rtcdtlstransport" data-dfn-type="dfn" id="dom-rtcdtlstransport-getremotecertificates" data-idl=""><code>getRemoteCertificates</code></dfn></dt>
            <dd>
              <p>Returns the certificate chain in use by the remote side, with each certificate encoded in binary Distinguished Encoding Rules (DER) [<cite><a class="bibref" href="#bib-X690">X690</a></cite>]. <code>getRemoteCertificates()</code> will return an empty list prior to selection of the remote certificate, which will be completed by the time
                <code><a href="#idl-def-rtcdtlstransportstate" class="internalDFN" data-link-type="dfn"><code>RTCDtlsTransportState</code></a>
                </code> transitions to "connected".
              </p>
              <div>
                <em>No parameters.</em>
              </div>
              <div>
                <em>Return type:</em> <code>sequence&lt;ArrayBuffer&gt;</code>
              </div>
            </dd>
          </dl>
        </section>
      </div>
      <h3 id="rtcdtlstransportstate-enum">RTCDtlsTransportState Enum</h3>
      <div>
        <pre class="def idl"><span class="idlEnum" id="idl-def-rtcdtlstransportstate" data-idl="" data-title="RTCDtlsTransportState">enum <span class="idlEnumID">RTCDtlsTransportState</span> {
    "<a href="#dom-rtcdtlstransportstate-new" class="idlEnumItem">new</a>",
    "<a href="#dom-rtcdtlstransportstate-connecting" class="idlEnumItem">connecting</a>",
    "<a href="#dom-rtcdtlstransportstate-connected" class="idlEnumItem">connected</a>",
    "<a href="#dom-rtcdtlstransportstate-closed" class="idlEnumItem">closed</a>",
    "<a href="#dom-rtcdtlstransportstate-failed" class="idlEnumItem">failed</a>"
};</span></pre>
        <table data-link-for="RTCDtlsTransportState" data-dfn-for="RTCDtlsTransportState" class="simple">
          <tbody>
            <tr>
              <th colspan="2">Enumeration description</th>
            </tr>
            <tr>
              <td><dfn data-dfn-for="rtcdtlstransportstate" data-dfn-type="dfn" id="dom-rtcdtlstransportstate-new" data-idl=""><code>new</code></dfn></td>
              <td>DTLS has not started negotiating yet.</td>
            </tr>
            <tr>
              <td><dfn data-dfn-for="rtcdtlstransportstate" data-dfn-type="dfn" id="dom-rtcdtlstransportstate-connecting" data-idl=""><code>connecting</code></dfn></td>
              <td>DTLS is in the process of negotiating a secure connection.
              </td>
            </tr>
            <tr>
              <td><dfn data-dfn-for="rtcdtlstransportstate" data-dfn-type="dfn" id="dom-rtcdtlstransportstate-connected" data-idl=""><code>connected</code></dfn></td>
              <td>DTLS has completed negotiation of a secure connection.</td>
            </tr>
            <tr>
              <td><dfn data-dfn-for="rtcdtlstransportstate" data-dfn-type="dfn" id="dom-rtcdtlstransportstate-closed" data-idl=""><code>closed</code></dfn></td>
              <td>The transport has been closed.</td>
            </tr>
            <tr>
              <td><dfn data-dfn-for="rtcdtlstransportstate" data-dfn-type="dfn" id="dom-rtcdtlstransportstate-failed" data-idl=""><code>failed</code></dfn></td>
              <td>The transport has failed as the result of an error (such as a failure to validate the remote fingerprint).</td>
            </tr>
          </tbody>
        </table>
      </div>

      <section id="rtcdtlsfingerprint*" typeof="bibo:Chapter" resource="#rtcdtlsfingerprint*" property="bibo:hasPart">
        <h4 id="h-rtcdtlsfingerprint" resource="#h-rtcdtlsfingerprint"><span property="xhv:role" resource="xhv:heading"><span class="secno">5.5.1 </span>The RTCDtlsFingerprint Object</span>
        </h4>
        <p>The <dfn data-dfn-for="" data-dfn-type="dfn" id="dom-rtcdtlsfingerprint" data-idl=""><code>RTCDtlsFingerprint</code></dfn> object includes the hash function algorithm and certificate fingerprint as described in [
          <cite><a class="bibref" href="#bib-RFC4572">RFC4572</a></cite>].</p>
        <div>
          <pre class="def idl"><span class="idlDictionary" id="idl-def-rtcdtlsfingerprint" data-idl="" data-title="RTCDtlsFingerprint">dictionary <span class="idlDictionaryID"><a data-lt="RTCDtlsFingerprint" href="#dom-rtcdtlsfingerprint" class="internalDFN" data-link-type="dfn" data-for=""><code>RTCDtlsFingerprint</code></a></span> {
<span class="idlMember" id="idl-def-rtcdtlsfingerprint-algorithm" data-idl="" data-title="algorithm" data-dfn-for="rtcdtlsfingerprint">    <span class="idlMemberType">DOMString</span> <span class="idlMemberName"><a data-lt="algorithm" href="#dom-rtcdtlsfingerprint-algorithm" class="internalDFN" data-link-type="dfn" data-for="RTCDtlsFingerprint"><code>algorithm</code></a></span>;</span>
<span class="idlMember" id="idl-def-rtcdtlsfingerprint-value" data-idl="" data-title="value" data-dfn-for="rtcdtlsfingerprint">    <span class="idlMemberType">DOMString</span> <span class="idlMemberName"><a data-lt="value" href="#dom-rtcdtlsfingerprint-value" class="internalDFN" data-link-type="dfn" data-for="RTCDtlsFingerprint"><code>value</code></a></span>;</span>
};</span></pre>

          <section typeof="bibo:Chapter" resource="#dictionary-rtcdtlsfingerprint-members" property="bibo:hasPart">
            <h5 id="dictionary-rtcdtlsfingerprint-members" resource="#dictionary-rtcdtlsfingerprint-members"><span property="xhv:role" resource="xhv:heading">Dictionary <a class="idlType internalDFN" href="#dom-rtcdtlsfingerprint" data-link-type="dfn"><code>RTCDtlsFingerprint</code></a>
            Members</span></h5>
            <dl data-link-for="RTCDtlsFingerprint" data-dfn-for="RTCDtlsFingerprint" class="dictionary-members">
              <dt><dfn data-dfn-for="rtcdtlsfingerprint" data-dfn-type="dfn" id="dom-rtcdtlsfingerprint-algorithm" data-idl=""><code>algorithm</code></dfn> of type <span class="idlMemberType">DOMString</span></dt>
              <dd>
                <p>One of the the hash function algorithms defined in the 'Hash function Textual Names' registry, initially specified in [
                  <cite><a class="bibref" href="#bib-RFC4572">RFC4572</a></cite>] Section 8. As noted in [<cite><a class="bibref" href="#bib-JSEP">JSEP</a></cite>] Section 5.2.1, the digest algorithm used for the fingerprint matches that used in the certificate signature.</p>
              </dd>
              <dt><dfn data-dfn-for="rtcdtlsfingerprint" data-dfn-type="dfn" id="dom-rtcdtlsfingerprint-value" data-idl=""><code>value</code></dfn> of type <span class="idlMemberType">DOMString</span></dt>
              <dd>
                <p>The value of the certificate fingerprint in lowercase hex string as expressed utilizing the syntax of 'fingerprint' in [
                  <cite><a class="bibref" href="#bib-RFC4572">RFC4572</a></cite>] Section 5.</p>
              </dd>
            </dl>
          </section>
        </div>
      </section>
    </section>

    <section id="rtcicetransport-interface" typeof="bibo:Chapter" resource="#rtcicetransport-interface" property="bibo:hasPart">
      <h3 id="h-rtcicetransport-interface" resource="#h-rtcicetransport-interface"><span property="xhv:role" resource="xhv:heading"><span class="secno">5.6 </span>RTCIceTransport Interface</span>
      </h3>
      <p>The <code><a href="#idl-def-rtcicetransport" class="internalDFN" data-link-type="dfn"><code>RTCIceTransport</code></a>
        </code> interface allows an application access to information about the ICE transport over which packets are sent and received. In particular, ICE manages peer-to-peer connections which involve state which the application may want to access.
        <code><a href="#idl-def-rtcicetransport" class="internalDFN" data-link-type="dfn"><code>RTCIceTransport</code></a>
        </code> objects are constructed as a result of calls to <code>setLocalDescription()</code> and
        <code>setRemoteDescription()</code>.</p>
      <div>
        <pre class="def idl"><span class="idlInterface" id="idl-def-rtcicetransport" data-idl="" data-title="RTCIceTransport">interface <span class="idlInterfaceID">RTCIceTransport</span> {
<span class="idlAttribute" id="idl-def-rtcicetransport-role" data-idl="" data-title="role" data-dfn-for="rtcicetransport">    readonly attribute <span class="idlAttrType"><a href="#idl-def-rtcicerole" class="internalDFN" data-link-type="dfn"><code>RTCIceRole</code></a></span>           <span class="idlAttrName"><a data-lt="role" href="#dom-rtcicetransport-role" class="internalDFN" data-link-type="dfn" data-for="RTCIceTransport"><code>role</code></a></span>;</span>
<span class="idlAttribute" id="idl-def-rtcicetransport-component" data-idl="" data-title="component" data-dfn-for="rtcicetransport">    readonly attribute <span class="idlAttrType"><a href="#idl-def-rtcicecomponent" class="internalDFN" data-link-type="dfn"><code>RTCIceComponent</code></a></span>      <span class="idlAttrName"><a data-lt="component" href="#dom-rtcicetransport-component" class="internalDFN" data-link-type="dfn" data-for="RTCIceTransport"><code>component</code></a></span>;</span>
<span class="idlAttribute" id="idl-def-rtcicetransport-state" data-idl="" data-title="state" data-dfn-for="rtcicetransport">    readonly attribute <span class="idlAttrType"><a href="#idl-def-rtcicetransportstate" class="internalDFN" data-link-type="dfn"><code>RTCIceTransportState</code></a></span> <span class="idlAttrName"><a data-lt="state" href="#dom-rtcicetransport-state" class="internalDFN" data-link-type="dfn" data-for="RTCIceTransport"><code>state</code></a></span>;</span>
<span class="idlAttribute" id="idl-def-rtcicetransport-gatheringstate" data-idl="" data-title="gatheringState" data-dfn-for="rtcicetransport">    readonly attribute <span class="idlAttrType"><a href="#idl-def-rtcicegathererstate" class="internalDFN" data-link-type="dfn"><code>RTCIceGathererState</code></a></span>  <span class="idlAttrName"><a data-lt="gatheringState" href="#dom-rtcicetransport-gatheringstate" class="internalDFN" data-link-type="dfn" data-for="RTCIceTransport"><code>gatheringState</code></a></span>;</span>
<span class="idlMethod" id="idl-def-rtcicetransport-getlocalcandidates()" data-idl="" data-title="getLocalCandidates" data-dfn-for="rtcicetransport">    <span class="idlMethType">sequence&lt;<a href="#idl-def-rtcicecandidate" class="internalDFN" data-link-type="dfn"><code>RTCIceCandidate</code></a>&gt;</span> <span class="idlMethName"><a data-lt="getLocalCandidates" href="#dom-rtcicetransport-getlocalcandidates" class="internalDFN" data-link-type="dfn" data-for="RTCIceTransport"><code>getLocalCandidates</code></a></span>();</span>
<span class="idlMethod" id="idl-def-rtcicetransport-getremotecandidates()" data-idl="" data-title="getRemoteCandidates" data-dfn-for="rtcicetransport">    <span class="idlMethType">sequence&lt;<a href="#idl-def-rtcicecandidate" class="internalDFN" data-link-type="dfn"><code>RTCIceCandidate</code></a>&gt;</span> <span class="idlMethName"><a data-lt="getRemoteCandidates" href="#dom-rtcicetransport-getremotecandidates" class="internalDFN" data-link-type="dfn" data-for="RTCIceTransport"><code>getRemoteCandidates</code></a></span>();</span>
<span class="idlMethod" id="idl-def-rtcicetransport-getselectedcandidatepair()" data-idl="" data-title="getSelectedCandidatePair" data-dfn-for="rtcicetransport">    <span class="idlMethType"><a href="#idl-def-rtcicecandidatepair" class="internalDFN" data-link-type="dfn"><code>RTCIceCandidatePair</code></a>?</span>      <span class="idlMethName"><a data-lt="getSelectedCandidatePair" href="#dom-rtcicetransport-getselectedcandidatepair" class="internalDFN" data-link-type="dfn" data-for="RTCIceTransport"><code>getSelectedCandidatePair</code></a></span>();</span>
<span class="idlMethod" id="idl-def-rtcicetransport-getlocalparameters()" data-idl="" data-title="getLocalParameters" data-dfn-for="rtcicetransport">    <span class="idlMethType"><a href="#idl-def-rtciceparameters" class="internalDFN" data-link-type="dfn"><code>RTCIceParameters</code></a>?</span>         <span class="idlMethName"><a data-lt="getLocalParameters" href="#dom-rtcicetransport-getlocalparameters" class="internalDFN" data-link-type="dfn" data-for="RTCIceTransport"><code>getLocalParameters</code></a></span>();</span>
<span class="idlMethod" id="idl-def-rtcicetransport-getremoteparameters()" data-idl="" data-title="getRemoteParameters" data-dfn-for="rtcicetransport">    <span class="idlMethType"><a href="#idl-def-rtciceparameters" class="internalDFN" data-link-type="dfn"><code>RTCIceParameters</code></a>?</span>         <span class="idlMethName"><a data-lt="getRemoteParameters" href="#dom-rtcicetransport-getremoteparameters" class="internalDFN" data-link-type="dfn" data-for="RTCIceTransport"><code>getRemoteParameters</code></a></span>();</span>
<span class="idlAttribute" id="idl-def-rtcicetransport-onstatechange" data-idl="" data-title="onstatechange" data-dfn-for="rtcicetransport">             attribute <span class="idlAttrType">EventHandler</span>         <span class="idlAttrName"><a data-lt="onstatechange" href="#dom-rtcicetransport-onstatechange" class="internalDFN" data-link-type="dfn" data-for="RTCIceTransport"><code>onstatechange</code></a></span>;</span>
<span class="idlAttribute" id="idl-def-rtcicetransport-ongatheringstatechange" data-idl="" data-title="ongatheringstatechange" data-dfn-for="rtcicetransport">             attribute <span class="idlAttrType">EventHandler</span>         <span class="idlAttrName"><a data-lt="ongatheringstatechange" href="#dom-rtcicetransport-ongatheringstatechange" class="internalDFN" data-link-type="dfn" data-for="RTCIceTransport"><code>ongatheringstatechange</code></a></span>;</span>
<span class="idlAttribute" id="idl-def-rtcicetransport-onselectedcandidatepairchange" data-idl="" data-title="onselectedcandidatepairchange" data-dfn-for="rtcicetransport">             attribute <span class="idlAttrType">EventHandler</span>         <span class="idlAttrName"><a data-lt="onselectedcandidatepairchange" href="#dom-rtcicetransport-onselectedcandidatepairchange" class="internalDFN" data-link-type="dfn" data-for="RTCIceTransport"><code>onselectedcandidatepairchange</code></a></span>;</span>
};</span></pre>

        <section typeof="bibo:Chapter" resource="#attributes-12" property="bibo:hasPart">
          <h4 id="attributes-12" resource="#attributes-12"><span property="xhv:role" resource="xhv:heading">Attributes</span></h4>
          <dl data-link-for="RTCIceTransport" data-dfn-for="RTCIceTransport" class="attributes">
            <dt><code>role</code> of type <span class="idlAttrType"><a href="#idl-def-rtcicerole" class="internalDFN" data-link-type="dfn"><code>RTCIceRole</code></a></span>, readonly</dt>
            <dd>
              <p>The <dfn id="dom-rtcicetransport-role" data-dfn-for="rtcicetransport" data-dfn-type="dfn" data-idl=""><code>role</code></dfn> attribute <em class="rfc2119" title="MUST">MUST</em> return the ICE role of the transport.</p>
            </dd>
            <dt><code>component</code> of type <span class="idlAttrType"><a href="#idl-def-rtcicecomponent" class="internalDFN" data-link-type="dfn"><code>RTCIceComponent</code></a></span>, readonly</dt>
            <dd>
              <p>The <dfn id="dom-rtcicetransport-component" data-dfn-for="rtcicetransport" data-dfn-type="dfn" data-idl=""><code>component</code></dfn> attribute <em class="rfc2119" title="MUST">MUST</em> return the ICE component of the transport. When RTP/RTCP mux is used, a single
                <code><a href="#idl-def-rtcicetransport" class="internalDFN" data-link-type="dfn"><code>RTCIceTransport</code></a>
                </code> transports both RTP and RTCP and <code>component</code> is set to "RTP".</p>
            </dd>
            <dt><code>state</code> of type <span class="idlAttrType"><a href="#idl-def-rtcicetransportstate" class="internalDFN" data-link-type="dfn"><code>RTCIceTransportState</code></a></span>, readonly</dt>
            <dd>
              <p>The <dfn id="dom-rtcicetransport-state" data-dfn-for="rtcicetransport" data-dfn-type="dfn" data-idl=""><code>state</code></dfn> attribute <em class="rfc2119" title="MUST">MUST</em> return the state of the transport.</p>
            </dd>
            <dt><dfn data-dfn-for="rtcicetransport" data-dfn-type="dfn" id="dom-rtcicetransport-gatheringstate" data-idl=""><code>gatheringState</code></dfn> of type <span class="idlAttrType"><a href="#idl-def-rtcicegatheringstate" class="internalDFN" data-link-type="dfn"><code>RTCIceGatheringState</code></a></span>, readonly</dt>
            <dd>
              <p>The <dfn id="dom-icetransport-gatheringstate" data-dfn-type="dfn"><code>gathering
              state</code></dfn> attribute <em class="rfc2119" title="MUST">MUST</em> return the gathering state of the transport.</p>
            </dd>
            <dt><dfn data-dfn-for="rtcicetransport" data-dfn-type="dfn" id="dom-rtcicetransport-onstatechange" data-idl=""><code>onstatechange</code></dfn> of type <span class="idlAttrType">EventHandler</span></dt>
            <dd>
              This event handler, of event handler event type
              <code><a href="#event-icetransport-statechange" class="internalDFN" data-link-type="dfn"><code>statechange</code></a>
              </code>, <em class="rfc2119" title="MUST">MUST</em> be fired any time the
              <code>RTCIceTransport</code> state changes.
            </dd>
            <dt><dfn data-dfn-for="rtcicetransport" data-dfn-type="dfn" id="dom-rtcicetransport-ongatheringstatechange" data-idl=""><code>ongatheringstatechange</code></dfn> of type
            <span class="idlAttrType">EventHandler</span></dt>
            <dd>
              This event handler, of event handler event type
              <code><a href="#event-icetransport-gatheringstatechange" class="internalDFN" data-link-type="dfn"><code>gatheringstatechange</code></a>
              </code>, <em class="rfc2119" title="MUST">MUST</em> be fired any time the <code>RTCIceTransport</code>gathering state changes.
            </dd>
            <dt><dfn data-dfn-for="rtcicetransport" data-dfn-type="dfn" id="dom-rtcicetransport-onselectedcandidatepairchange" data-idl=""><code>onselectedcandidatepairchange</code></dfn> of type
            <span class="idlAttrType">EventHandler</span></dt>
            <dd>This event handler, of event handler event type
              <code><a href="#event-icetransport-selectedcandidatepairchange" class="internalDFN" data-link-type="dfn"><code>selectedcandidatepairchange</code></a>
              </code>, <em class="rfc2119" title="MUST">MUST</em> be fired any time the <code><a href="#idl-def-rtcicetransport" class="internalDFN" data-link-type="dfn"><code>RTCIceTransport</code></a>
              </code>'s selected candidate pair changes.</dd>
          </dl>
        </section>

        <section typeof="bibo:Chapter" resource="#methods-9" property="bibo:hasPart">
          <h4 id="methods-9" resource="#methods-9"><span property="xhv:role" resource="xhv:heading">Methods</span></h4>
          <dl data-link-for="RTCIceTransport" data-dfn-for="RTCIceTransport" class="methods">
            <dt><dfn data-dfn-for="rtcicetransport" data-dfn-type="dfn" id="dom-rtcicetransport-getlocalcandidates" data-idl=""><code>getLocalCandidates</code></dfn></dt>
            <dd>
              <p>Returns a sequence describing the local ICE candidates gathered for this <code><a href="#idl-def-rtcicetransport" class="internalDFN" data-link-type="dfn"><code>RTCIceTransport</code></a>
                </code> and sent in
                <code><a data-for="RTCPeerConnection" href="#dom-rtcpeerconnection-onicecandidate" class="internalDFN" data-link-type="dfn"><code>onicecandidate</code></a>
                </code>
              </p>
              <div>
                <em>No parameters.</em>
              </div>
              <div>
                <em>Return type:</em>
                <code>sequence&lt;RTCIceCandidate&gt;</code>
              </div>
            </dd>
            <dt><dfn data-dfn-for="rtcicetransport" data-dfn-type="dfn" id="dom-rtcicetransport-getremotecandidates" data-idl=""><code>getRemoteCandidates</code></dfn></dt>
            <dd>
              <p>Returns a sequence describing the remote ICE candidates received by this <code><a href="#idl-def-rtcicetransport" class="internalDFN" data-link-type="dfn"><code>RTCIceTransport</code></a>
                </code> via
                <code><a data-for="RTCPeerConnection" href="#dom-peerconnection-addicecandidate" class="internalDFN" data-link-type="dfn"><code>addIceCandidate()</code></a>
                </code>
              </p>
              <div>
                <em>No parameters.</em>
              </div>
              <div>
                <em>Return type:</em>
                <code>sequence&lt;RTCIceCandidate&gt;</code>
              </div>
            </dd>
            <dt><dfn data-dfn-for="rtcicetransport" data-dfn-type="dfn" id="dom-rtcicetransport-getselectedcandidatepair" data-idl=""><code>getSelectedCandidatePair</code></dfn></dt>
            <dd>
              <p>Returns the selected candidate pair on which packets are sent, or <code>null</code> if there is no such pair.</p>
              <div>
                <em>No parameters.</em>
              </div>
              <div>
                <em>Return type:</em> <code>RTCIceCandidatePair</code>, nullable
              </div>
            </dd>
            <dt><dfn data-dfn-for="rtcicetransport" data-dfn-type="dfn" id="dom-rtcicetransport-getlocalparameters" data-idl=""><code>getLocalParameters</code></dfn></dt>
            <dd>
              <p>Returns the local ICE parameters received by this
                <code><a href="#idl-def-rtcicetransport" class="internalDFN" data-link-type="dfn"><code>RTCIceTransport</code></a>
                </code> via <code><a data-for="RTCPeerConnection" href="#dom-rtcpeerconnection-setlocaldescription" class="internalDFN" data-link-type="dfn"><code>setLocalDescription</code></a>
                </code>, or
                <code>null</code> if the parameters have not yet been received.
              </p>
              <div>
                <em>No parameters.</em>
              </div>
              <div>
                <em>Return type:</em> <code>RTCIceParameters</code>, nullable
              </div>
            </dd>
            <dt><dfn data-dfn-for="rtcicetransport" data-dfn-type="dfn" id="dom-rtcicetransport-getremoteparameters" data-idl=""><code>getRemoteParameters</code></dfn></dt>
            <dd>
              <p>Returns the remote ICE parameters received by this
                <code><a href="#idl-def-rtcicetransport" class="internalDFN" data-link-type="dfn"><code>RTCIceTransport</code></a>
                </code> via <code><a data-for="RTCPeerConnection" href="#dom-rtcpeerconnection-setremotedescription" class="internalDFN" data-link-type="dfn"><code>setRemoteDescription</code></a>
                </code> or
                <code>null</code> if the parameters have not yet been received.
              </p>
              <div>
                <em>No parameters.</em>
              </div>
              <div>
                <em>Return type:</em> <code>RTCIceParameters</code>, nullable
              </div>
            </dd>
          </dl>
        </section>
      </div>
      <div>
        <pre class="def idl"><span class="idlDictionary" id="idl-def-rtciceparameters" data-idl="" data-title="RTCIceParameters">dictionary <span class="idlDictionaryID">RTCIceParameters</span> {
<span class="idlMember" id="idl-def-rtciceparameters-usernamefragment" data-idl="" data-title="usernameFragment" data-dfn-for="rtciceparameters">    <span class="idlMemberType">DOMString</span> <span class="idlMemberName"><a data-lt="usernameFragment" href="#dom-rtciceparameters-usernamefragment" class="internalDFN" data-link-type="dfn" data-for="RTCIceParameters"><code>usernameFragment</code></a></span>;</span>
<span class="idlMember" id="idl-def-rtciceparameters-password" data-idl="" data-title="password" data-dfn-for="rtciceparameters">    <span class="idlMemberType">DOMString</span> <span class="idlMemberName"><a data-lt="password" href="#dom-rtciceparameters-password" class="internalDFN" data-link-type="dfn" data-for="RTCIceParameters"><code>password</code></a></span>;</span>
};</span></pre>

        <section typeof="bibo:Chapter" resource="#dictionary-rtciceparameters-members" property="bibo:hasPart">
          <h4 id="dictionary-rtciceparameters-members" resource="#dictionary-rtciceparameters-members"><span property="xhv:role" resource="xhv:heading">Dictionary <a class="idlType internalDFN" href="#idl-def-rtciceparameters" data-link-type="dfn"><code>RTCIceParameters</code></a> Members</span></h4>
          <dl data-link-for="RTCIceParameters" data-dfn-for="RTCIceParameters" class="dictionary-members">
            <dt><dfn data-dfn-for="rtciceparameters" data-dfn-type="dfn" id="dom-rtciceparameters-usernamefragment" data-idl=""><code>usernameFragment</code></dfn> of type <span class="idlMemberType">DOMString</span></dt>
            <dd>
              <p>The ICE username fragment as defined in [<cite><a class="bibref" href="#bib-ICE">ICE</a></cite>], Section 7.1.2.3.
              </p>
            </dd>
            <dt><dfn data-dfn-for="rtciceparameters" data-dfn-type="dfn" id="dom-rtciceparameters-password" data-idl=""><code>password</code></dfn> of type <span class="idlMemberType">DOMString</span></dt>
            <dd>
              <p>The ICE password as defined in [<cite><a class="bibref" href="#bib-ICE">ICE</a></cite>], Section 7.1.2.3.</p>
            </dd>
          </dl>
        </section>
      </div>
      <div>
        <pre class="def idl"><span class="idlDictionary" id="idl-def-rtcicecandidatepair" data-idl="" data-title="RTCIceCandidatePair">dictionary <span class="idlDictionaryID">RTCIceCandidatePair</span> {
<span class="idlMember" id="idl-def-rtcicecandidatepair-local" data-idl="" data-title="local" data-dfn-for="rtcicecandidatepair">    <span class="idlMemberType"><a href="#idl-def-rtcicecandidate" class="internalDFN" data-link-type="dfn"><code>RTCIceCandidate</code></a></span> <span class="idlMemberName"><a data-lt="local" href="#dom-rtcicecandidatepair-local" class="internalDFN" data-link-type="dfn" data-for="RTCIceCandidatePair"><code>local</code></a></span>;</span>
<span class="idlMember" id="idl-def-rtcicecandidatepair-remote" data-idl="" data-title="remote" data-dfn-for="rtcicecandidatepair">    <span class="idlMemberType"><a href="#idl-def-rtcicecandidate" class="internalDFN" data-link-type="dfn"><code>RTCIceCandidate</code></a></span> <span class="idlMemberName"><a data-lt="remote" href="#dom-rtcicecandidatepair-remote" class="internalDFN" data-link-type="dfn" data-for="RTCIceCandidatePair"><code>remote</code></a></span>;</span>
};</span></pre>

        <section typeof="bibo:Chapter" resource="#dictionary-rtcicecandidatepair-members" property="bibo:hasPart">
          <h4 id="dictionary-rtcicecandidatepair-members" resource="#dictionary-rtcicecandidatepair-members"><span property="xhv:role" resource="xhv:heading">Dictionary <a class="idlType internalDFN" href="#idl-def-rtcicecandidatepair" data-link-type="dfn"><code>RTCIceCandidatePair</code></a>
          Members</span></h4>
          <dl data-link-for="RTCIceCandidatePair" data-dfn-for="RTCIceCandidatePair" class="dictionary-members">
            <dt><dfn data-dfn-for="rtcicecandidatepair" data-dfn-type="dfn" id="dom-rtcicecandidatepair-local" data-idl=""><code>local</code></dfn> of type <span class="idlMemberType"><a href="#idl-def-rtcicecandidate" class="internalDFN" data-link-type="dfn"><code>RTCIceCandidate</code></a></span></dt>
            <dd>
              <p>The local ICE candidate.</p>
            </dd>
            <dt><dfn data-dfn-for="rtcicecandidatepair" data-dfn-type="dfn" id="dom-rtcicecandidatepair-remote" data-idl=""><code>remote</code></dfn> of type <span class="idlMemberType"><a href="#idl-def-rtcicecandidate" class="internalDFN" data-link-type="dfn"><code>RTCIceCandidate</code></a></span></dt>
            <dd>
              <p>The remote ICE candidate.</p>
            </dd>
          </dl>
        </section>
      </div>
      <h3 id="rtcicegathererstate-enum">RTCIceGathererState Enum</h3>
      <div>
        <pre class="def idl"><span class="idlEnum" id="idl-def-rtcicegathererstate" data-idl="" data-title="RTCIceGathererState">enum <span class="idlEnumID">RTCIceGathererState</span> {
    "<a href="#dom-rtcicegathererstate-new" class="idlEnumItem">new</a>",
    "<a href="#dom-rtcicegathererstate-gathering" class="idlEnumItem">gathering</a>",
    "<a href="#dom-rtcicegathererstate-complete" class="idlEnumItem">complete</a>"
};</span></pre>
        <table data-link-for="RTCIceGathererState" data-dfn-for="RTCIceGathererState" class="simple">
          <tbody>
            <tr>
              <th colspan="2">Enumeration description</th>
            </tr>
            <tr>
              <td><dfn data-dfn-for="rtcicegathererstate" data-dfn-type="dfn" id="dom-rtcicegathererstate-new" data-idl=""><code>new</code></dfn></td>
              <td>The <code><a href="#idl-def-rtcicetransport" class="internalDFN" data-link-type="dfn"><code>RTCIceTransport</code></a>
                </code> was just created, and has not started gathering candidates yet.</td>
            </tr>
            <tr>
              <td><dfn data-dfn-for="rtcicegathererstate" data-dfn-type="dfn" id="dom-rtcicegathererstate-gathering" data-idl=""><code>gathering</code></dfn></td>
              <td>The <code><a href="#idl-def-rtcicetransport" class="internalDFN" data-link-type="dfn"><code>RTCIceTransport</code></a>
                </code> is in the process of gathering candidates.</td>
            </tr>
            <tr>
              <td><dfn data-dfn-for="rtcicegathererstate" data-dfn-type="dfn" id="dom-rtcicegathererstate-complete" data-idl=""><code>complete</code></dfn></td>
              <td>The <code><a href="#idl-def-rtcicetransport" class="internalDFN" data-link-type="dfn"><code>RTCIceTransport</code></a>
                </code> has completed gathering and the end-of-candidates indication for this transport has been sent. It will not gather candidates again until an ICE restart causes it to restart.</td>
            </tr>
          </tbody>
        </table>
      </div>
      <h3 id="rtcicetransportstate-enum">RTCIceTransportState Enum</h3>
      <div>
        <pre class="def idl"><span class="idlEnum" id="idl-def-rtcicetransportstate" data-idl="" data-title="RTCIceTransportState">enum <span class="idlEnumID">RTCIceTransportState</span> {
    "<a href="#dom-rtcicetransportstate-new" class="idlEnumItem">new</a>",
    "<a href="#dom-rtcicetransportstate-checking" class="idlEnumItem">checking</a>",
    "<a href="#dom-rtcicetransportstate-connected" class="idlEnumItem">connected</a>",
    "<a href="#dom-rtcicetransportstate-completed" class="idlEnumItem">completed</a>",
    "<a href="#dom-rtcicetransportstate-failed" class="idlEnumItem">failed</a>",
    "<a href="#dom-rtcicetransportstate-disconnected" class="idlEnumItem">disconnected</a>",
    "<a href="#dom-rtcicetransportstate-closed" class="idlEnumItem">closed</a>"
};</span></pre>
        <table data-link-for="RTCIceTransportState" data-dfn-for="RTCIceTransportState" class="simple">
          <tbody>
            <tr>
              <th colspan="2">Enumeration description</th>
            </tr>
            <tr>
              <td><dfn data-dfn-for="rtcicetransportstate" data-dfn-type="dfn" id="dom-rtcicetransportstate-new" data-idl=""><code>new</code></dfn></td>
              <td>The <code><a href="#idl-def-rtcicetransport" class="internalDFN" data-link-type="dfn"><code>RTCIceTransport</code></a>
                </code> is gathering candidates and/or waiting for remote candidates to be supplied, and has not yet started checking.</td>
            </tr>
            <tr>
              <td><dfn data-dfn-for="rtcicetransportstate" data-dfn-type="dfn" id="dom-rtcicetransportstate-checking" data-idl=""><code>checking</code></dfn></td>
              <td>The <code><a href="#idl-def-rtcicetransport" class="internalDFN" data-link-type="dfn"><code>RTCIceTransport</code></a>
                </code> has received at least one remote candidate and is checking candidate pairs and has either not yet found a connection or consent checks [<cite><a class="bibref" href="#bib-RFC7675">RFC7675</a></cite>] have failed on all previously successful candidate pairs. In addition to checking, it may also still be gathering.</td>
            </tr>
            <tr>
              <td><dfn data-dfn-for="rtcicetransportstate" data-dfn-type="dfn" id="dom-rtcicetransportstate-connected" data-idl=""><code>connected</code></dfn></td>
              <td>The <code><a href="#idl-def-rtcicetransport" class="internalDFN" data-link-type="dfn"><code>RTCIceTransport</code></a>
                </code> has found a usable connection, but is still checking other candidate pairs to see if there is a better connection. It may also still be gathering and/or waiting for additional remote candidates. If consent checks [<cite><a class="bibref" href="#bib-RFC7675">RFC7675</a></cite>] fail on the connection in use, and there are no other successful candidate pairs available, then the state transitions to "checking" (if there are candidate pairs remaining to be checked) or "disconnected" (if there are no candidate pairs to check, but the peer is still gathering and/or waiting for additional remote candidates).</td>
            </tr>
            <tr>
              <td><dfn data-dfn-for="rtcicetransportstate" data-dfn-type="dfn" id="dom-rtcicetransportstate-completed" data-idl=""><code>completed</code></dfn></td>
              <td>The <code><a href="#idl-def-rtcicetransport" class="internalDFN" data-link-type="dfn"><code>RTCIceTransport</code></a>
                </code> has finished gathering, received an indication that there are no more remote candidates, finished checking all candidate pairs and found a connection. If consent checks [<cite><a class="bibref" href="#bib-RFC7675">RFC7675</a></cite>] subsequently fail on all successful candidate pairs, the state transitions to "failed".
              </td>
            </tr>
            <tr>
              <td><dfn data-dfn-for="rtcicetransportstate" data-dfn-type="dfn" id="dom-rtcicetransportstate-failed" data-idl=""><code>failed</code></dfn></td>
              <td>The <code><a href="#idl-def-rtcicetransport" class="internalDFN" data-link-type="dfn"><code>RTCIceTransport</code></a>
                </code> has finished gathering, received an indication that there are no more remote candidates, finished checking all candidate pairs, and all pairs have either failed connectivity checks or have lost consent.</td>
            </tr>
            <tr>
              <td><dfn data-dfn-for="rtcicetransportstate" data-dfn-type="dfn" id="dom-rtcicetransportstate-disconnected" data-idl=""><code>disconnected</code></dfn></td>
              <td>
                The ICE agent has determined that connectivity is currently lost for this <code><a href="#idl-def-rtcicetransport" class="internalDFN" data-link-type="dfn"><code>RTCIceTransport</code></a>
                </code>. This is more aggressive than <code>failed</code>, and may trigger intermittently (and resolve itself without action) on a flaky network. The way this state is determined is implementation dependent. Examples include:
                <ul>
                  <li>Losing the network interface for the connection in use.
                  </li>
                  <li>Repeatedly failing to receive a response to STUN requests.
                  </li>
                </ul>Alternatively, the <code><a href="#idl-def-rtcicetransport" class="internalDFN" data-link-type="dfn"><code>RTCIceTransport</code></a>
                </code> has finished checking all existing candidates pairs and failed to find a connection (or consent checks [<cite><a class="bibref" href="#bib-RFC7675">RFC7675</a></cite>] once successful, have now failed), but it is still gathering and/or waiting for additional remote candidates.
              </td>
            </tr>
            <tr>
              <td><dfn data-dfn-for="rtcicetransportstate" data-dfn-type="dfn" id="dom-rtcicetransportstate-closed" data-idl=""><code>closed</code></dfn></td>
              <td>The <code><a href="#idl-def-rtcicetransport" class="internalDFN" data-link-type="dfn"><code>RTCIceTransport</code></a>
                </code> has shut down and is no longer responding to STUN requests.</td>
            </tr>
          </tbody>
        </table>
      </div>
      <p>The <code>failed</code> and <code>completed</code> states require an indication that there are no additional remote candidates. This can be indicated either by <a data-link-for="RTCPeerConnection" href="#dom-rtcpeerconnection-cantrickleicecandidates" class="internalDFN" data-link-type="dfn"><code>canTrickleIceCandidates</code></a> being set to
        <code>false</code>, or the processing of an end-of-candidates indication as described in [<cite><a class="bibref" href="#bib-JSEP">JSEP</a></cite>].</p>
      <p>Some example transitions might be:</p>
      <ul>
        <li>(<code><a href="#idl-def-rtcicetransport" class="internalDFN" data-link-type="dfn"><code>RTCIceTransport</code></a>
          </code> first created, as a result of
          <code>setLocalDescription</code> or <code>setRemoteDescription</code>):
          <code>new</code></li>
        <li>(<code>new</code>, remote candidates received):
          <code>checking</code></li>
        <li>(<code>checking</code>, found usable connection):
          <code>connected</code></li>
        <li>(<code>checking</code>, checks fail but gathering still in progress): <code>disconnected</code></li>
        <li>(<code>checking</code>, gave up): <code>failed</code></li>
        <li>(<code>disconnected</code>, new local candidates):
          <code>checking</code></li>
        <li>(<code>connected</code>, finished all checks):
          <code>completed</code></li>
        <li>(<code>completed</code>, lost connectivity):
          <code>disconnected</code></li>
        <li>(any state, ICE restart occurs): <code>new</code></li>
        <li><code>RTCPeerConnection.close()</code>: <code>closed</code></li>
      </ul>
      <figure id="fig-non-normative-ice-transport-state-transition-diagram">
        <img alt="ICE transport state transition diagram" src="images/icetransportstate.svg" width="600">
        <figcaption>Fig. <span class="figno">2</span> <span class="fig-title">
          Non-normative ICE transport state transition diagram
        </span></figcaption>
      </figure>
      <h3 id="rtcicerole-enum">RTCIceRole Enum</h3>
      <div>
        <pre class="def idl"><span class="idlEnum" id="idl-def-rtcicerole" data-idl="" data-title="RTCIceRole">enum <span class="idlEnumID">RTCIceRole</span> {
    "<a href="#dom-rtcicerole-controlling" class="idlEnumItem">controlling</a>",
    "<a href="#dom-rtcicerole-controlled" class="idlEnumItem">controlled</a>"
};</span></pre>
        <table data-link-for="RTCIceRole" data-dfn-for="RTCIceRole" class="simple">
          <tbody>
            <tr>
              <th colspan="2">Enumeration description</th>
            </tr>
            <tr>
              <td><dfn data-dfn-for="rtcicerole" data-dfn-type="dfn" id="dom-rtcicerole-controlling" data-idl=""><code>controlling</code></dfn></td>
              <td>A controlling agent as defined by [<cite><a class="bibref" href="#bib-ICE">ICE</a></cite>], Section 3.</td>
            </tr>
            <tr>
              <td><dfn data-dfn-for="rtcicerole" data-dfn-type="dfn" id="dom-rtcicerole-controlled" data-idl=""><code>controlled</code></dfn></td>
              <td>A controlled agent as defined by [<cite><a class="bibref" href="#bib-ICE">ICE</a></cite>], Section 3.</td>
            </tr>
          </tbody>
        </table>
      </div>
      <h3 id="rtcicecomponent-enum">RTCIceComponent Enum</h3>
      <div>
        <pre class="def idl"><span class="idlEnum" id="idl-def-rtcicecomponent" data-idl="" data-title="RTCIceComponent">enum <span class="idlEnumID">RTCIceComponent</span> {
    "<a href="#dom-rtcicecomponent-rtp" class="idlEnumItem">RTP</a>",
    "<a href="#dom-rtcicecomponent-rtcp" class="idlEnumItem">RTCP</a>"
};</span></pre>
        <table data-link-for="RTCIceComponent" data-dfn-for="RTCIceComponent" class="simple">
          <tbody>
            <tr>
              <th colspan="2">Enumeration description</th>
            </tr>
            <tr>
              <td><dfn data-dfn-for="rtcicecomponent" data-dfn-type="dfn" id="dom-rtcicecomponent-rtp" data-idl=""><code>RTP</code></dfn></td>
              <td>The ICE Transport is used for RTP (or RTP/RTCP-multiplexing), as defined in [<cite><a class="bibref" href="#bib-ICE">ICE</a></cite>], Section 4.1.1.1. Protocols multiplexed with RTP (e.g. data channel) share its component ID.</td>
            </tr>
            <tr>
              <td><dfn data-dfn-for="rtcicecomponent" data-dfn-type="dfn" id="dom-rtcicecomponent-rtcp" data-idl=""><code>RTCP</code></dfn></td>
              <td>The ICE Transport is used for RTCP as defined by [<cite><a class="bibref" href="#bib-ICE">ICE</a></cite>], Section 4.1.1.1.</td>
            </tr>
          </tbody>
        </table>
      </div>
    </section>

    <section id="rtctrackevent" typeof="bibo:Chapter" resource="#rtctrackevent" property="bibo:hasPart">
      <h3 id="h-rtctrackevent" resource="#h-rtctrackevent"><span property="xhv:role" resource="xhv:heading"><span class="secno">5.7 </span>RTCTrackEvent</span>
      </h3>
      <p>The <code><a href="#event-track" class="internalDFN" data-link-type="dfn"><code>track</code></a>
        </code> event uses the
        <code><a href="#dom-rtctrackevent" class="internalDFN" data-link-type="dfn"><code>RTCTrackEvent</code></a>
        </code> interface.</p>
      <p><dfn id="fire-track-event" data-dfn-type="dfn">Firing an
      RTCTrackEvent event named <var>e</var></dfn> with an
        <code><a href="#idl-def-rtcrtpreceiver" class="internalDFN" data-link-type="dfn"><code>RTCRtpReceiver</code></a>
        </code> <var>receiver</var>, a
        <code><a href="#dom-mediastreamtrack" class="internalDFN" data-link-type="dfn"><code>MediaStreamTrack</code></a>
        </code> <var>track</var> and a
        <code>MediaStream</code>[] <var>streams</var>, means that an event with the name <var>e</var>, which does not bubble (except where otherwise stated) and is not cancelable (except where otherwise stated), and which uses the <code><a href="#dom-rtctrackevent" class="internalDFN" data-link-type="dfn"><code>RTCTrackEvent</code></a>
        </code> interface with the
        <code><a data-for="RTCTrackEvent" href="#dom-rtctrackevent-receiver" class="internalDFN" data-link-type="dfn"><code>receiver</code></a>
        </code> attribute set to
        <var>receiver</var>, <code><a data-for="RTCTrackEvent" href="#dom-rtctrackevent-track" class="internalDFN" data-link-type="dfn"><code>track</code></a>
        </code>
        attribute set to <var>track</var>, <code><a data-for="RTCTrackEvent" href="#dom-rtctrackevent-streams" class="internalDFN" data-link-type="dfn"><code>streams</code></a>
        </code> attribute set to <var>streams</var>,
        <em class="rfc2119" title="MUST">MUST</em> be created and dispatched at the given target.</p>
      <div>
        <pre class="def idl"><span class="idlInterface" id="idl-def-rtctrackevent" data-idl="" data-title="RTCTrackEvent">[<span class="idlCtor"><span class="extAttrName">Constructor</span>(<span class="idlParam"><span class="idlParamType">DOMString</span> <span class="idlParamName">type</span></span>, <span class="idlParam"><span class="idlParamType"><a href="#idl-def-rtctrackeventinit" class="internalDFN" data-link-type="dfn"><code>RTCTrackEventInit</code></a></span> <span class="idlParamName">eventInitDict</span></span>)</span>]
interface <span class="idlInterfaceID"><a data-lt="RTCTrackEvent" href="#dom-rtctrackevent" class="internalDFN" data-link-type="dfn" data-for=""><code>RTCTrackEvent</code></a></span> : <span class="idlSuperclass"><a href="#dfn-event" class="internalDFN" data-link-type="dfn">Event</a></span> {
<span class="idlAttribute" id="idl-def-rtctrackevent-receiver" data-idl="" data-title="receiver" data-dfn-for="rtctrackevent">    readonly attribute <span class="idlAttrType"><a href="#idl-def-rtcrtpreceiver" class="internalDFN" data-link-type="dfn"><code>RTCRtpReceiver</code></a></span>           <span class="idlAttrName"><a data-lt="receiver" href="#dom-rtctrackevent-receiver" class="internalDFN" data-link-type="dfn" data-for="RTCTrackEvent"><code>receiver</code></a></span>;</span>
<span class="idlAttribute" id="idl-def-rtctrackevent-track" data-idl="" data-title="track" data-dfn-for="rtctrackevent">    readonly attribute <span class="idlAttrType"><a href="#dom-mediastreamtrack" class="internalDFN" data-link-type="dfn"><code>MediaStreamTrack</code></a></span>         <span class="idlAttrName"><a data-lt="track" href="#dom-rtctrackevent-track" class="internalDFN" data-link-type="dfn" data-for="RTCTrackEvent"><code>track</code></a></span>;</span>
<span class="idlAttribute" id="idl-def-rtctrackevent-streams" data-idl="" data-title="streams" data-dfn-for="rtctrackevent">    readonly attribute <span class="idlAttrType">FrozenArray&lt;<a href="#dfn-mediastream" class="internalDFN" data-link-type="dfn">MediaStream</a>&gt;</span> <span class="idlAttrName"><a data-lt="streams" href="#dom-rtctrackevent-streams" class="internalDFN" data-link-type="dfn" data-for="RTCTrackEvent"><code>streams</code></a></span>;</span>
<span class="idlAttribute" id="idl-def-rtctrackevent-transceiver" data-idl="" data-title="transceiver" data-dfn-for="rtctrackevent">    readonly attribute <span class="idlAttrType"><a href="#idl-def-rtcrtptransceiver" class="internalDFN" data-link-type="dfn"><code>RTCRtpTransceiver</code></a></span>        <span class="idlAttrName"><a data-lt="transceiver" href="#dom-rtctrackevent-transceiver" class="internalDFN" data-link-type="dfn" data-for="RTCTrackEvent"><code>transceiver</code></a></span>;</span>
};</span></pre>

        <section typeof="bibo:Chapter" resource="#constructors-5" property="bibo:hasPart">
          <h4 id="constructors-5" resource="#constructors-5"><span property="xhv:role" resource="xhv:heading">Constructors</span></h4>
          <dl data-link-for="RTCTrackEvent" data-dfn-for="RTCTrackEvent" class="constructors">
            <dt><dfn data-dfn-for="" data-dfn-type="dfn" id="dom-rtctrackevent" data-idl=""><code>RTCTrackEvent</code></dfn></dt>
            <dd>
              readonly attribute RTCRtpReceiver receiver
              <table class="parameters">
                <tbody>
                  <tr>
                    <th>Parameter</th>
                    <th>Type</th>
                    <th>Nullable</th>
                    <th>Optional</th>
                    <th>Description</th>
                  </tr>
                  <tr>
                    <td class="prmName">type</td>
                    <td class="prmType"><code>DOMString</code></td>
                    <td class="prmNullFalse"><span role="img" aria-label="False">âœ˜</span></td>
                    <td class="prmOptFalse"><span role="img" aria-label="False">âœ˜</span></td>
                    <td class="prmDesc"></td>
                  </tr>
                  <tr>
                    <td class="prmName">eventInitDict</td>
                    <td class="prmType"><code>RTCTrackEventInit</code></td>
                    <td class="prmNullFalse"><span role="img" aria-label="False">âœ˜</span></td>
                    <td class="prmOptFalse"><span role="img" aria-label="False">âœ˜</span></td>
                    <td class="prmDesc"></td>
                  </tr>
                </tbody>
              </table>
            </dd>
          </dl>
        </section>

        <section typeof="bibo:Chapter" resource="#attributes-13" property="bibo:hasPart">
          <h4 id="attributes-13" resource="#attributes-13"><span property="xhv:role" resource="xhv:heading">Attributes</span></h4>
          <dl data-link-for="RTCTrackEvent" data-dfn-for="RTCTrackEvent" class="attributes">
            <dt><code>receiver</code> of type <span class="idlAttrType"><a href="#idl-def-rtcrtpreceiver" class="internalDFN" data-link-type="dfn"><code>RTCRtpReceiver</code></a></span>, readonly</dt>
            <dd>
              <p>The <dfn id="dom-rtctrackevent-receiver" data-dfn-for="rtctrackevent" data-dfn-type="dfn" data-idl=""><code>receiver</code></dfn> attribute represents the <code><a href="#idl-def-rtcrtpreceiver" class="internalDFN" data-link-type="dfn"><code>RTCRtpReceiver</code></a>
                </code> object associated with the event.</p>
            </dd>
            <dt><dfn data-dfn-for="rtctrackevent" data-dfn-type="dfn" id="dom-rtctrackevent-track" data-idl=""><code>track</code></dfn> of type <span class="idlAttrType"><a href="#dom-mediastreamtrack" class="internalDFN" data-link-type="dfn"><code>MediaStreamTrack</code></a></span>, readonly</dt>
            <dd>
              <p>The <code>track</code> attribute represents the
                <code><a href="#dom-mediastreamtrack" class="internalDFN" data-link-type="dfn"><code>MediaStreamTrack</code></a>
                </code> object that is associated with the <code><a href="#idl-def-rtcrtpreceiver" class="internalDFN" data-link-type="dfn"><code>RTCRtpReceiver</code></a>
                </code> identified by
                <code>receiver</code>.</p>
            </dd>
            <dt><code>streams</code> of type <span class="idlAttrType">FrozenArray&lt;<a href="#dfn-mediastream" class="internalDFN" data-link-type="dfn">MediaStream</a>&gt;</span>,
            readonly</dt>
            <dd>
              <p>The <dfn data-dfn-for="rtctrackevent" data-dfn-type="dfn" id="dom-rtctrackevent-streams" data-idl=""><code>streams</code></dfn> attribute returns an array of <code><a href="#dfn-mediastream" class="internalDFN" data-link-type="dfn">MediaStream</a></code> objects representing the
                <code><a href="#dfn-mediastream" class="internalDFN" data-link-type="dfn">MediaStream</a></code>s that this event's
                <code>track</code> is a part of.</p>
            </dd>
            <dt><code>transceiver</code> of type <span class="idlAttrType"><a href="#idl-def-rtcrtptransceiver" class="internalDFN" data-link-type="dfn"><code>RTCRtpTransceiver</code></a></span>, readonly</dt>
            <dd>
              <p>The <dfn id="dom-rtctrackevent-transceiver" data-dfn-for="rtctrackevent" data-dfn-type="dfn" data-idl=""><code>transceiver</code></dfn> attribute represents the <code><a href="#idl-def-rtcrtptransceiver" class="internalDFN" data-link-type="dfn"><code>RTCRtpTransceiver</code></a>
                </code>
                object associated with the event.</p>
            </dd>
          </dl>
        </section>
      </div>
      <div>
        <pre class="def idl"><span class="idlDictionary" id="idl-def-rtctrackeventinit" data-idl="" data-title="RTCTrackEventInit">dictionary <span class="idlDictionaryID">RTCTrackEventInit</span> : <span class="idlSuperclass">EventInit</span> {
<span class="idlMember" id="idl-def-rtctrackeventinit-receiver" data-idl="" data-title="receiver" data-dfn-for="rtctrackeventinit">    required <span class="idlMemberType"><a href="#idl-def-rtcrtpreceiver" class="internalDFN" data-link-type="dfn"><code>RTCRtpReceiver</code></a></span>        <span class="idlMemberName"><a data-lt="receiver" href="#dom-rtctrackeventinit-receiver" class="internalDFN" data-link-type="dfn" data-for="RTCTrackEventInit"><code>receiver</code></a></span>;</span>
<span class="idlMember" id="idl-def-rtctrackeventinit-track" data-idl="" data-title="track" data-dfn-for="rtctrackeventinit">    required <span class="idlMemberType"><a href="#dom-mediastreamtrack" class="internalDFN" data-link-type="dfn"><code>MediaStreamTrack</code></a></span>      <span class="idlMemberName"><a data-lt="track" href="#dom-rtctrackeventinit-track" class="internalDFN" data-link-type="dfn" data-for="RTCTrackEventInit"><code>track</code></a></span>;</span>
<span class="idlMember" id="idl-def-rtctrackeventinit-streams" data-idl="" data-title="streams" data-dfn-for="rtctrackeventinit">             <span class="idlMemberType">sequence&lt;<a href="#dfn-mediastream" class="internalDFN" data-link-type="dfn">MediaStream</a>&gt;</span> <span class="idlMemberName"><a data-lt="streams" href="#dom-rtctrackeventinit-streams" class="internalDFN" data-link-type="dfn" data-for="RTCTrackEventInit"><code>streams</code></a></span> = <span class="idlMemberValue">[]</span>;</span>
<span class="idlMember" id="idl-def-rtctrackeventinit-transceiver" data-idl="" data-title="transceiver" data-dfn-for="rtctrackeventinit">    required <span class="idlMemberType"><a href="#idl-def-rtcrtptransceiver" class="internalDFN" data-link-type="dfn"><code>RTCRtpTransceiver</code></a></span>     <span class="idlMemberName"><a data-lt="transceiver" href="#dom-rtctrackeventinit-transceiver" class="internalDFN" data-link-type="dfn" data-for="RTCTrackEventInit"><code>transceiver</code></a></span>;</span>
};</span></pre>

        <section typeof="bibo:Chapter" resource="#dictionary-rtctrackeventinit-members" property="bibo:hasPart">
          <h4 id="dictionary-rtctrackeventinit-members" resource="#dictionary-rtctrackeventinit-members"><span property="xhv:role" resource="xhv:heading">Dictionary <a class="idlType internalDFN" href="#idl-def-rtctrackeventinit" data-link-type="dfn"><code>RTCTrackEventInit</code></a> Members</span></h4>
          <dl data-link-for="RTCTrackEventInit" data-dfn-for="RTCTrackEventInit" class="dictionary-members">
            <dt><dfn data-dfn-for="rtctrackeventinit" data-dfn-type="dfn" id="dom-rtctrackeventinit-receiver" data-idl=""><code>receiver</code></dfn> of type <span class="idlMemberType"><a href="#idl-def-rtcrtpreceiver" class="internalDFN" data-link-type="dfn"><code>RTCRtpReceiver</code></a></span>, required</dt>
            <dd>
              <p>The <code>receiver</code> attribute represents the
                <code><a href="#idl-def-rtcrtpreceiver" class="internalDFN" data-link-type="dfn"><code>RTCRtpReceiver</code></a>
                </code> object associated with the event.
              </p>
            </dd>
            <dt><dfn data-dfn-for="rtctrackeventinit" data-dfn-type="dfn" id="dom-rtctrackeventinit-track" data-idl=""><code>track</code></dfn> of type <span class="idlMemberType"><a href="#dom-mediastreamtrack" class="internalDFN" data-link-type="dfn"><code>MediaStreamTrack</code></a></span>, required</dt>
            <dd>
              <p>The <code>track</code> attribute represents the
                <code><a href="#dom-mediastreamtrack" class="internalDFN" data-link-type="dfn"><code>MediaStreamTrack</code></a>
                </code> object that is associated with the <code><a href="#idl-def-rtcrtpreceiver" class="internalDFN" data-link-type="dfn"><code>RTCRtpReceiver</code></a>
                </code> identified by
                <code>receiver</code>.</p>
            </dd>
            <dt><dfn data-dfn-for="rtctrackeventinit" data-dfn-type="dfn" id="dom-rtctrackeventinit-streams" data-idl=""><code>streams</code></dfn> of type <span class="idlMemberType">sequence&lt;<a href="#dfn-mediastream" class="internalDFN" data-link-type="dfn">MediaStream</a>&gt;</span>,
            defaulting to <code>[]</code></dt>
            <dd>
              <p>The <code>streams</code> attribute returns an array of
                <code><a href="#dfn-mediastream" class="internalDFN" data-link-type="dfn">MediaStream</a></code> objects representing the
                <code><a href="#dfn-mediastream" class="internalDFN" data-link-type="dfn">MediaStream</a></code>s that this event's
                <code>track</code> is a part of.</p>
            </dd>
            <dt><dfn data-dfn-for="rtctrackeventinit" data-dfn-type="dfn" id="dom-rtctrackeventinit-transceiver" data-idl=""><code>transceiver</code></dfn> of type <span class="idlMemberType"><a href="#idl-def-rtcrtptransceiver" class="internalDFN" data-link-type="dfn"><code>RTCRtpTransceiver</code></a></span>, required</dt>
            <dd>
              <p>The <code>transceiver</code> attribute represents the
                <code><a href="#idl-def-rtcrtptransceiver" class="internalDFN" data-link-type="dfn"><code>RTCRtpTransceiver</code></a>
                </code> object associated with the event.
              </p>
            </dd>
          </dl>
        </section>
      </div>
    </section>
  </section>

  <section id="peer-to-peer-data-api" typeof="bibo:Chapter" resource="#peer-to-peer-data-api" property="bibo:hasPart">
    <!--OddPage-->
    <h2 id="h-peer-to-peer-data-api" resource="#h-peer-to-peer-data-api"><span property="xhv:role" resource="xhv:heading"><span class="secno">6. </span>Peer-to-peer Data API</span>
    </h2>
    <p>The Peer-to-peer Data API lets a web application send and receive generic application data peer-to-peer. The API for sending and receiving data models the behavior of WebSockets [<cite><a class="bibref" href="#bib-WEBSOCKETS-API">WEBSOCKETS-API</a></cite>].</p>

    <section id="rtcpeerconnection-interface-extensions-1" typeof="bibo:Chapter" resource="#rtcpeerconnection-interface-extensions-1" property="bibo:hasPart">
      <h3 id="h-rtcpeerconnection-interface-extensions-1" resource="#h-rtcpeerconnection-interface-extensions-1"><span property="xhv:role" resource="xhv:heading"><span class="secno">6.1 </span>RTCPeerConnection Interface Extensions</span>
      </h3>
      <p>The Peer-to-peer data API extends the
        <code><a href="#dom-rtcpeerconnection" class="internalDFN" data-link-type="dfn"><code>RTCPeerConnection</code></a>
        </code> interface as described below.</p>
      <div>
        <pre class="def idl"><span class="idlInterface" id="idl-def-rtcpeerconnection-partial-4" data-idl="" data-title="RTCPeerConnection">partial interface <span class="idlInterfaceID"><a data-lt="RTCPeerConnection" href="#dom-rtcpeerconnection" class="internalDFN" data-link-type="dfn" data-for=""><code>RTCPeerConnection</code></a></span> {
<span class="idlAttribute" id="idl-def-rtcpeerconnection-sctp" data-idl="" data-title="sctp" data-dfn-for="rtcpeerconnection">    readonly attribute <span class="idlAttrType"><a href="#idl-def-rtcsctptransport" class="internalDFN" data-link-type="dfn"><code>RTCSctpTransport</code></a>?</span> <span class="idlAttrName"><a data-lt="sctp" href="#dom-rtcpeerconnection-sctp" class="internalDFN" data-link-type="dfn" data-for="RTCPeerConnection"><code>sctp</code></a></span>;</span>
<span class="idlMethod" id="idl-def-rtcpeerconnection-createdatachannel(usvstring,optional-rtcdatachannelinit)" data-idl="" data-title="createDataChannel" data-dfn-for="rtcpeerconnection">    <span class="idlMethType"><a href="#idl-def-rtcdatachannel" class="internalDFN" data-link-type="dfn"><code>RTCDataChannel</code></a></span> <span class="idlMethName"><a data-lt="createDataChannel" href="#dom-rtcpeerconnection-createdatachannel" class="internalDFN" data-link-type="dfn" data-for="RTCPeerConnection"><code>createDataChannel</code></a></span>(<span class="idlParam">[<span class="extAttr"><span class="extAttrName">TreatNullAs</span>=<span class="extAttrRhs">EmptyString</span></span>] <span class="idlParamType">USVString</span> <span class="idlParamName">label</span></span>,
                                     <span class="idlParam">optional <span class="idlParamType"><a href="#idl-def-rtcdatachannelinit" class="internalDFN" data-link-type="dfn"><code>RTCDataChannelInit</code></a></span> <span class="idlParamName">dataChannelDict</span></span>);</span>
<span class="idlAttribute" id="idl-def-rtcpeerconnection-ondatachannel" data-idl="" data-title="ondatachannel" data-dfn-for="rtcpeerconnection">             attribute <span class="idlAttrType">EventHandler</span>      <span class="idlAttrName"><a data-lt="ondatachannel" href="#dom-rtcpeerconnection-ondatachannel" class="internalDFN" data-link-type="dfn" data-for="RTCPeerConnection"><code>ondatachannel</code></a></span>;</span>
};</span></pre>

        <section typeof="bibo:Chapter" resource="#attributes-14" property="bibo:hasPart">
          <h4 id="attributes-14" resource="#attributes-14"><span property="xhv:role" resource="xhv:heading">Attributes</span></h4>
          <dl data-link-for="RTCPeerConnection" data-dfn-for="RTCPeerConnection" class="attributes">
            <dt><dfn data-dfn-for="rtcpeerconnection" data-dfn-type="dfn" id="dom-rtcpeerconnection-sctp" data-idl=""><code>sctp</code></dfn> of type <span class="idlAttrType"><a href="#idl-def-rtcsctptransport" class="internalDFN" data-link-type="dfn"><code>RTCSctpTransport</code></a></span>, readonly ,
            nullable</dt>
            <dd>
              <p>The SCTP transport over which SCTP data is sent and received. If SCTP has not been negotiated, the value is null.</p>
            </dd>
            <dt><dfn data-dfn-for="rtcpeerconnection" data-dfn-type="dfn" id="dom-rtcpeerconnection-ondatachannel" data-idl=""><code>ondatachannel</code></dfn> of type <span class="idlAttrType">EventHandler</span></dt>
            <dd>The event type of this event handler is
              <code><a href="#event-datachannel" class="internalDFN" data-link-type="dfn"><code>datachannel</code></a>
              </code>.</dd>
          </dl>
        </section>

        <section typeof="bibo:Chapter" resource="#methods-10" property="bibo:hasPart">
          <h4 id="methods-10" resource="#methods-10"><span property="xhv:role" resource="xhv:heading">Methods</span></h4>
          <dl data-link-for="RTCPeerConnection" data-dfn-for="RTCPeerConnection" class="methods">
            <dt><code>createDataChannel</code></dt>
            <dd>
              <p>Creates a new <code><a href="#idl-def-rtcdatachannel" class="internalDFN" data-link-type="dfn"><code>RTCDataChannel</code></a>
                </code> object with the given label. The <code><a href="#idl-def-rtcdatachannelinit" class="internalDFN" data-link-type="dfn"><code>RTCDataChannelInit</code></a>
                </code>
                dictionary can be used to configure properties of the underlying channel such as
                <!--priority and-->data reliability.</p>
              <p>When the <dfn id="dom-rtcpeerconnection-createdatachannel" data-dfn-for="rtcpeerconnection" data-dfn-type="dfn" data-idl=""><code>createDataChannel</code></dfn> method is invoked, the user agent <em class="rfc2119" title="MUST">MUST</em> run the following steps.
              </p>
              <ol>
                <li>
                  <p>Let <var>connection</var> be the
                    <code><a href="#dom-rtcpeerconnection" class="internalDFN" data-link-type="dfn"><code>RTCPeerConnection</code></a>
                    </code> object on which the method is invoked.</p>
                </li>
                <li>
                  <p>If <var>connection</var>'s [[<a href="#dfn-isclosed" class="internalDFN" data-link-type="dfn">isClosed</a>]] slot is
                    <code>true</code>, throw an <code>InvalidStateError</code> exception and abort these steps.</p>
                </li>
                <li>
                  <p>Let <var>channel</var> be a newly created
                    <code><a href="#idl-def-rtcdatachannel" class="internalDFN" data-link-type="dfn"><code>RTCDataChannel</code></a>
                    </code> object.</p>
                </li>
                <li>
                  <p>Initialize <var>channel</var>'s <code><a data-for="RTCDataChannel" href="#dom-rtcdatachannel-label" class="internalDFN" data-link-type="dfn"><code>label</code></a>
                    </code> attribute to the value of the first argument.</p>
                </li>
                <li>
                  <p>If the second (dictionary) argument is present, set
                    <var>channel</var>'s <code><a data-for="RTCDataChannel" href="#dom-rtcdatachannel-ordered" class="internalDFN" data-link-type="dfn"><code>ordered</code></a>
                    </code>, <code><a data-for="RTCDataChannel" href="#dom-rtcdatachannel-maxpacketlifetime" class="internalDFN" data-link-type="dfn"><code>maxPacketLifeTime</code></a>
                    </code>,
                    <code><a data-for="RTCDataChannel" href="#dom-rtcdatachannel-maxretransmits" class="internalDFN" data-link-type="dfn"><code>maxRetransmits</code></a>
                    </code>,
                    <code><a data-for="RTCDataChannel" href="#dom-rtcdatachannel-protocol" class="internalDFN" data-link-type="dfn"><code>protocol</code></a>
                    </code>,
                    <code><a data-for="RTCDataChannel" href="#dom-rtcdatachannel-negotiated" class="internalDFN" data-link-type="dfn"><code>negotiated</code></a>
                    </code> and
                    <code><a data-for="RTCDataChannel" href="#dom-rtcdatachannel-id" class="internalDFN" data-link-type="dfn"><code>id</code></a>
                    </code> attributes to the values of their corresponding dictionary members (if present in the dictionary).</p>
                </li>
                <li>If <code>negotiated</code> is false and <code>label</code> is longer than 65535 bytes long, <a href="http://heycam.github.io/webidl/#dfn-throw">throw</a> a <code>
                  TypeError</code>.
                </li>
                <li>If <code>negotiated</code> is false and
                  <code>protocol</code> is longer than 65535 bytes long,
                  <a href="http://heycam.github.io/webidl/#dfn-throw">throw</a> a <code>TypeError</code>.
                </li>
                <li>
                  <p>If both the <code><a data-for="RTCDataChannel" href="#dom-rtcdatachannel-maxpacketlifetime" class="internalDFN" data-link-type="dfn"><code>maxPacketLifeTime</code></a>
                    </code> and
                    <code><a data-for="RTCDataChannel" href="#dom-rtcdatachannel-maxretransmits" class="internalDFN" data-link-type="dfn"><code>maxRetransmits</code></a>
                    </code>
                    attributes are set (not null), then throw a
                    <code>SyntaxError</code> exception and abort these steps.</p>
                </li>
                <li>
                  <p>If an attribute, either <code><a data-for="RTCDataChannel" href="#dom-rtcdatachannel-maxpacketlifetime" class="internalDFN" data-link-type="dfn"><code>maxPacketLifeTime</code></a>
                    </code> or
                    <code><a data-for="RTCDataChannel" href="#dom-rtcdatachannel-maxretransmits" class="internalDFN" data-link-type="dfn"><code>maxRetransmits</code></a>
                    </code>, has been set to indicate unreliable mode, and that value exceeds the maximum value supported by the user agent, the value <em class="rfc2119" title="MUST">MUST</em> be set to the user agents maximum value.</p>
                </li>
                <li>
                  <p>If <code><a data-for="RTCDataChannel" href="#dom-rtcdatachannel-id" class="internalDFN" data-link-type="dfn"><code>id</code></a>
                    </code> is equal to 65535, which is greater than the maximum allowed ID of 65534 but still qualifies as an <span class="idlMemberType">unsigned short</span>, throw a
                    <code>TypeError</code> exception and abort these steps.</p>
                </li>
                <li>
                  <p>If <code><a data-for="RTCDataChannel" href="#dom-rtcdatachannel-id" class="internalDFN" data-link-type="dfn"><code>id</code></a>
                    </code>
                    attribute is uninitialized (not set via the dictionary), initialize it to a value generated by the user agent, according to [<cite><a class="bibref" href="#bib-RTCWEB-DATA-PROTOCOL">RTCWEB-DATA-PROTOCOL</a></cite>], and skip to the next step. Otherwise, if the value of the <code><a data-for="RTCDataChannel" href="#dom-rtcdatachannel-id" class="internalDFN" data-link-type="dfn"><code>id</code></a>
                    </code> attribute is taken by an existing <code><a href="#idl-def-rtcdatachannel" class="internalDFN" data-link-type="dfn"><code>RTCDataChannel</code></a>
                    </code>, throw a
                    <code>ResourceInUse</code> exception and abort these steps.
                  </p>
                </li>
                <li>
                  <p>Return <var>channel</var> and continue the following steps in the background.</p>
                </li>
                <li>
                  <p>Create <var>channel</var>'s associated <a href="#dfn-underlying-data-transport" class="internalDFN" data-link-type="dfn">underlying data
                  transport</a> and configure it according to the relevant properties of <var>channel</var>.</p>
                </li>
                <li>
                  <p>If <var>channel</var> was the first
                    <code><a href="#idl-def-rtcdatachannel" class="internalDFN" data-link-type="dfn"><code>RTCDataChannel</code></a>
                    </code> created on
                    <var>connection</var>, <a href="#dfn-update-the-negotiation-needed-flag" class="internalDFN" data-link-type="dfn">update the negotiation-needed
                  flag</a> for <var>connection</var>.</p>
                </li>
              </ol>
              <table class="parameters">
                <tbody>
                  <tr>
                    <th>Parameter</th>
                    <th>Type</th>
                    <th>Nullable</th>
                    <th>Optional</th>
                    <th>Description</th>
                  </tr>
                  <tr>
                    <td class="prmName">label</td>
                    <td class="prmType"><code>USVString</code></td>
                    <td class="prmNullFalse"><span role="img" aria-label="False">âœ˜</span></td>
                    <td class="prmOptFalse"><span role="img" aria-label="False">âœ˜</span></td>
                    <td class="prmDesc"></td>
                  </tr>
                  <tr>
                    <td class="prmName">dataChannelDict</td>
                    <td class="prmType"><code>RTCDataChannelInit</code></td>
                    <td class="prmNullFalse"><span role="img" aria-label="False">âœ˜</span></td>
                    <td class="prmOptTrue"><span role="img" aria-label="True">âœ”</span></td>
                    <td class="prmDesc"></td>
                  </tr>
                </tbody>
              </table>
              <div>
                <em>Return type:</em> <code>RTCDataChannel</code>
              </div>
            </dd>
          </dl>
        </section>
      </div>

      <section id="rtcsctptransport-interface" typeof="bibo:Chapter" resource="#rtcsctptransport-interface" property="bibo:hasPart">
        <h4 id="h-rtcsctptransport-interface" resource="#h-rtcsctptransport-interface"><span property="xhv:role" resource="xhv:heading"><span class="secno">6.1.1 </span>RTCSctpTransport Interface</span>
        </h4>
        <p>The <code><a href="#idl-def-rtcsctptransport" class="internalDFN" data-link-type="dfn"><code>RTCSctpTransport</code></a>
          </code> interface allows an application access to information about the SCTP data channels tied to a particular SCTP association.</p>
        <div>
          <pre class="def idl"><span class="idlInterface" id="idl-def-rtcsctptransport" data-idl="" data-title="RTCSctpTransport">interface <span class="idlInterfaceID">RTCSctpTransport</span> {
<span class="idlAttribute" id="idl-def-rtcsctptransport-transport" data-idl="" data-title="transport" data-dfn-for="rtcsctptransport">    readonly attribute <span class="idlAttrType"><a href="#idl-def-rtcdtlstransport" class="internalDFN" data-link-type="dfn"><code>RTCDtlsTransport</code></a></span> <span class="idlAttrName"><a data-lt="transport" href="#dom-rtcsctptransport-transport" class="internalDFN" data-link-type="dfn" data-for="RTCSctpTransport"><code>transport</code></a></span>;</span>
<span class="idlAttribute" id="idl-def-rtcsctptransport-maxmessagesize" data-idl="" data-title="maxMessageSize" data-dfn-for="rtcsctptransport">    readonly attribute <span class="idlAttrType">unsigned long</span>    <span class="idlAttrName"><a data-lt="maxMessageSize" href="#dom-rtcsctptransport-maxmessagesize" class="internalDFN" data-link-type="dfn" data-for="RTCSctpTransport"><code>maxMessageSize</code></a></span>;</span>
};</span></pre>

          <section typeof="bibo:Chapter" resource="#attributes-15" property="bibo:hasPart">
            <h5 id="attributes-15" resource="#attributes-15"><span property="xhv:role" resource="xhv:heading">Attributes</span></h5>
            <dl data-link-for="RTCSctpTransport" data-dfn-for="RTCSctpTransport" class="attributes">
              <dt><dfn data-dfn-for="rtcsctptransport" data-dfn-type="dfn" id="dom-rtcsctptransport-transport" data-idl=""><code>transport</code></dfn> of type <span class="idlAttrType"><a href="#idl-def-rtcdtlstransport" class="internalDFN" data-link-type="dfn"><code>RTCDtlsTransport</code></a></span>, readonly</dt>
              <dd>
                <p>The transport over which all SCTP packets for data channels will be sent and received.</p>
              </dd>
              <dt><dfn data-dfn-for="rtcsctptransport" data-dfn-type="dfn" id="dom-rtcsctptransport-maxmessagesize" data-idl=""><code>maxMessageSize</code></dfn> of type <span class="idlAttrType">unsigned long</span>, readonly</dt>
              <dd>
                <p>The maximum size of data that can be passed to
                  <code><a href="#idl-def-rtcdatachannel" class="internalDFN" data-link-type="dfn"><code>RTCDataChannel</code></a>
                  </code>'s <code><a data-for="RTCDataChannel" href="#dfn-send" class="internalDFN" data-link-type="dfn"><code>send()</code></a>
                  </code> method.</p>
              </dd>
            </dl>
          </section>
        </div>
      </section>
    </section>

    <section id="rtcdatachannel" typeof="bibo:Chapter" resource="#rtcdatachannel" property="bibo:hasPart">
      <h3 id="h-rtcdatachannel" resource="#h-rtcdatachannel"><span property="xhv:role" resource="xhv:heading"><span class="secno">6.2 </span>RTCDataChannel</span>
      </h3>
      <p>The <code><a href="#idl-def-rtcdatachannel" class="internalDFN" data-link-type="dfn"><code>RTCDataChannel</code></a>
        </code> interface represents a bi-directional data channel between two peers. A
        <code><a href="#idl-def-rtcdatachannel" class="internalDFN" data-link-type="dfn"><code>RTCDataChannel</code></a>
        </code> is created via a factory method on an
        <code><a href="#dom-rtcpeerconnection" class="internalDFN" data-link-type="dfn"><code>RTCPeerConnection</code></a>
        </code> object. The messages sent between the browsers are described in [<cite><a class="bibref" href="#bib-RTCWEB-DATA">RTCWEB-DATA</a></cite>] and [
        <cite><a class="bibref" href="#bib-RTCWEB-DATA-PROTOCOL">RTCWEB-DATA-PROTOCOL</a></cite>].</p>
      <p>There are two ways to establish a connection with
        <code><a href="#idl-def-rtcdatachannel" class="internalDFN" data-link-type="dfn"><code>RTCDataChannel</code></a>
        </code>. The first way is to simply create a
        <code><a href="#idl-def-rtcdatachannel" class="internalDFN" data-link-type="dfn"><code>RTCDataChannel</code></a>
        </code> at one of the peers with the
        <code><a data-for="RTCDataChannelInit" href="#dom-rtcdatachannelinit-negotiated" class="internalDFN" data-link-type="dfn"><code>negotiated</code></a>
        </code>
        <code><a href="#idl-def-rtcdatachannelinit" class="internalDFN" data-link-type="dfn"><code>RTCDataChannelInit</code></a>
        </code> dictionary member unset or set to its default value false. This will announce the new channel in-band and trigger a <code><a href="#dom-rtcdatachannelevent" class="internalDFN" data-link-type="dfn"><code>RTCDataChannelEvent</code></a>
        </code> with the corresponding
        <code><a href="#idl-def-rtcdatachannel" class="internalDFN" data-link-type="dfn"><code>RTCDataChannel</code></a>
        </code> object at the other peer. The second way is to let the application negotiate the
        <code><a href="#idl-def-rtcdatachannel" class="internalDFN" data-link-type="dfn"><code>RTCDataChannel</code></a>
        </code>. To do this, create a
        <code><a href="#idl-def-rtcdatachannel" class="internalDFN" data-link-type="dfn"><code>RTCDataChannel</code></a>
        </code> object with the <code><a data-for="RTCDataChannelInit" href="#dom-rtcdatachannelinit-negotiated" class="internalDFN" data-link-type="dfn"><code>negotiated</code></a>
        </code>
        <code><a href="#idl-def-rtcdatachannelinit" class="internalDFN" data-link-type="dfn"><code>RTCDataChannelInit</code></a>
        </code> dictionary member set to true, and signal out-of-band (e.g. via a web server) to the other side that it
        <em class="rfc2119" title="SHOULD">SHOULD</em> create a corresponding <code><a href="#idl-def-rtcdatachannel" class="internalDFN" data-link-type="dfn"><code>RTCDataChannel</code></a>
        </code> with the
        <code><a data-for="RTCDataChannelInit" href="#dom-rtcdatachannelinit-negotiated" class="internalDFN" data-link-type="dfn"><code>negotiated</code></a>
        </code>
        <code><a href="#idl-def-rtcdatachannelinit" class="internalDFN" data-link-type="dfn"><code>RTCDataChannelInit</code></a>
        </code> dictionary member set to true and the same <code><a data-for="RTCDataChannel" href="#dom-rtcdatachannel-id" class="internalDFN" data-link-type="dfn"><code>id</code></a>
        </code>. This will connect the two separately created <code><a href="#idl-def-rtcdatachannel" class="internalDFN" data-link-type="dfn"><code>RTCDataChannel</code></a>
        </code>
        objects. The second way makes it possible to create channels with asymmetric properties and to create channels in a declarative way by specifying matching <code><a data-for="RTCDataChannelInit" href="#dom-rtcdatachannelinit-id" class="internalDFN" data-link-type="dfn"><code>id</code></a>
        </code>s.</p>
      <p>Each <code><a href="#idl-def-rtcdatachannel" class="internalDFN" data-link-type="dfn"><code>RTCDataChannel</code></a>
        </code> has an associated
        <dfn data-dfn-type="dfn" id="dfn-underlying-data-transport">underlying data transport</dfn> that is used to transport actual data to the other peer. The transport properties of the <a href="#dfn-underlying-data-transport" class="internalDFN" data-link-type="dfn">underlying data transport</a>, such as in order delivery settings and reliability mode, are configured by the peer as the channel is created. The properties of a channel cannot change after the channel has been created. The actual wire protocol between the peers is specified by the WebRTC DataChannel Protocol specification [<cite><a class="bibref" href="#bib-RTCWEB-DATA">RTCWEB-DATA</a></cite>].</p>
      <p>A <code><a href="#idl-def-rtcdatachannel" class="internalDFN" data-link-type="dfn"><code>RTCDataChannel</code></a>
        </code> can be configured to operate in different reliability modes. A reliable channel ensures that the data is delivered at the other peer through retransmissions. An unreliable channel is configured to either limit the number of retransmissions (
        <code><a data-for="RTCDataChannelInit" href="#dom-rtcdatachannelinit-maxretransmits" class="internalDFN" data-link-type="dfn"><code>maxRetransmits</code></a>
        </code> ) or set a time during which transmissions (including retransmissions) are allowed ( <code><a data-for="RTCDataChannelInit" href="#dom-rtcdatachannelinit-maxpacketlifetime" class="internalDFN" data-link-type="dfn"><code>maxPacketLifeTime</code></a>
        </code> ). These properties can not be used simultaneously and an attempt to do so will result in an error. Not setting any of these properties results in a reliable channel.</p>
      <p>A <code><a href="#idl-def-rtcdatachannel" class="internalDFN" data-link-type="dfn"><code>RTCDataChannel</code></a>
        </code>, created with <code><a data-for="RTCPeerConnection" href="#dom-rtcpeerconnection-createdatachannel" class="internalDFN" data-link-type="dfn"><code>createDataChannel</code></a>
        </code> or dispatched via a
        <code><a href="#dom-rtcdatachannelevent" class="internalDFN" data-link-type="dfn"><code>RTCDataChannelEvent</code></a>
        </code>, <em class="rfc2119" title="MUST">MUST</em> initially be in the
        <code>connecting</code> state. When the
        <code><a href="#idl-def-rtcdatachannel" class="internalDFN" data-link-type="dfn"><code>RTCDataChannel</code></a>
        </code> object's <a href="#dfn-underlying-data-transport" class="internalDFN" data-link-type="dfn">underlying data
      transport</a> is ready, the user agent <em class="rfc2119" title="MUST">MUST</em> <a href="#announce-datachannel-open" class="internalDFN" data-link-type="dfn">announce the
      <code>RTCDataChannel</code> as open</a>.</p>
      <p>When the user agent is to <dfn id="announce-datachannel-open" data-dfn-type="dfn">announce a <code>RTCDataChannel</code> as
      open</dfn>, the user agent <em class="rfc2119" title="MUST">MUST</em> queue a task to run the following steps:
      </p>
      <ol>
        <li>
          <p>If the associated <code><a href="#dom-rtcpeerconnection" class="internalDFN" data-link-type="dfn"><code>RTCPeerConnection</code></a>
            </code> object's [[
            <a href="#dfn-isclosed" class="internalDFN" data-link-type="dfn">isClosed</a>]] slot is <code>true</code>, abort these steps.</p>
        </li>
        <li>
          <p>Let <var>channel</var> be the <code><a href="#idl-def-rtcdatachannel" class="internalDFN" data-link-type="dfn"><code>RTCDataChannel</code></a>
            </code>
            object to be announced.</p>
        </li>
        <li>
          <p>Set <var>channel</var>'s <code><a data-for="RTCDataChannel" href="#dom-rtcdatachannel-readystate" class="internalDFN" data-link-type="dfn"><code>readyState</code></a>
            </code> attribute to
            <code>open</code>.</p>
        </li>
        <li>
          <p>Fire a simple event named <code><a href="#event-datachannel-open" class="internalDFN" data-link-type="dfn"><code>open</code></a>
            </code> at
            <var>channel</var>.</p>
        </li>
      </ol>
      <p>When an <a href="#dfn-underlying-data-transport" class="internalDFN" data-link-type="dfn">underlying data transport</a> is to be announced (the other peer created a channel with <code><a data-for="RTCDataChannelInit" href="#dom-rtcdatachannelinit-negotiated" class="internalDFN" data-link-type="dfn"><code>negotiated</code></a>
        </code> unset or set to false), the user agent of the peer that did not initiate the creation process <em class="rfc2119" title="MUST">MUST</em> queue a task to run the following steps:</p>
      <ol>
        <li>
          <p>If the associated <code><a href="#dom-rtcpeerconnection" class="internalDFN" data-link-type="dfn"><code>RTCPeerConnection</code></a>
            </code> object's [[
            <a href="#dfn-isclosed" class="internalDFN" data-link-type="dfn">isClosed</a>]] slot is <code>true</code>, abort these steps.</p>
        </li>
        <li>
          <p>Let <var>channel</var> be a newly created
            <code><a href="#idl-def-rtcdatachannel" class="internalDFN" data-link-type="dfn"><code>RTCDataChannel</code></a>
            </code> object.</p>
        </li>
        <li>
          <p>Let <var>configuration</var> be an information bundle received from the other peer as a part of the process to establish the
            <a href="#dfn-underlying-data-transport" class="internalDFN" data-link-type="dfn">underlying data transport</a> described by the WebRTC DataChannel Protocol specification [<cite><a class="bibref" href="#bib-RTCWEB-DATA-PROTOCOL">RTCWEB-DATA-PROTOCOL</a></cite>].</p>
        </li>
        <li>
          <p>Initialize <var>channel</var>'s <code><a data-for="RTCDataChannel" href="#dom-rtcdatachannel-label" class="internalDFN" data-link-type="dfn"><code>label</code></a>
            </code>, <code><a data-for="RTCDataChannel" href="#dom-rtcdatachannel-ordered" class="internalDFN" data-link-type="dfn"><code>ordered</code></a>
            </code>, <code><a data-for="RTCDataChannel" href="#dom-rtcdatachannel-maxpacketlifetime" class="internalDFN" data-link-type="dfn"><code>maxPacketLifeTime</code></a>
            </code>, <code><a data-for="RTCDataChannel" href="#dom-rtcdatachannel-maxretransmits" class="internalDFN" data-link-type="dfn"><code>maxRetransmits</code></a>
            </code>, <code><a data-for="RTCDataChannel" href="#dom-rtcdatachannel-protocol" class="internalDFN" data-link-type="dfn"><code>protocol</code></a>
            </code>, <code><a data-for="RTCDataChannel" href="#dom-rtcdatachannel-negotiated" class="internalDFN" data-link-type="dfn"><code>negotiated</code></a>
            </code> and <code><a data-for="RTCDataChannel" href="#dom-rtcdatachannel-id" class="internalDFN" data-link-type="dfn"><code>id</code></a>
            </code> attributes to their corresponding values in <var>configuration</var>.</p>
        </li>
        <li>
          <p>Set <var>channel</var>'s <code><a data-for="RTCDataChannel" href="#dom-rtcdatachannel-readystate" class="internalDFN" data-link-type="dfn"><code>readyState</code></a>
            </code> attribute to
            <code>connecting</code>.</p>
        </li>
        <li>
          <p><a href="#fire-a-datachannel-event" class="internalDFN" data-link-type="dfn">Fire a datachannel event</a> named
            <code><a href="#event-datachannel" class="internalDFN" data-link-type="dfn"><code>datachannel</code></a>
            </code> with <var>channel</var> at the
            <code><a href="#dom-rtcpeerconnection" class="internalDFN" data-link-type="dfn"><code>RTCPeerConnection</code></a>
            </code> object.</p>
        </li>
      </ol>
      <p>An <code><a href="#idl-def-rtcdatachannel" class="internalDFN" data-link-type="dfn"><code>RTCDataChannel</code></a>
        </code> object's <a href="#dfn-underlying-data-transport" class="internalDFN" data-link-type="dfn">underlying data
      transport</a> may be torn down in a non-abrupt manner by running the
        <dfn id="data-transport-closing-procedure" data-dfn-type="dfn">closing procedure</dfn>. When that happens the user agent <em class="rfc2119" title="MUST">MUST</em>, unless the procedure was initiated by the <code><a data-for="RTCDataChannel" href="#dom-rtcdatachannel-close" class="internalDFN" data-link-type="dfn"><code>close</code></a>
        </code> method, queue a task that sets the object's <code><a data-for="RTCDataChannel" href="#dom-rtcdatachannel-readystate" class="internalDFN" data-link-type="dfn"><code>readyState</code></a>
        </code> attribute to <code>closing</code>. This will eventually render the <a href="#dfn-underlying-data-transport" class="internalDFN" data-link-type="dfn">data transport</a> <a href="#data-transport-closed" class="internalDFN" data-link-type="dfn">closed</a>.</p>
      <p>When a <code><a href="#idl-def-rtcdatachannel" class="internalDFN" data-link-type="dfn"><code>RTCDataChannel</code></a>
        </code> object's <a href="#dfn-underlying-data-transport" class="internalDFN" data-link-type="dfn">underlying data
      transport</a> has been <dfn id="data-transport-closed" data-dfn-type="dfn">closed</dfn>, the user agent <em class="rfc2119" title="MUST">MUST</em> queue a task to run the following steps:</p>
      <ol>
        <li>
          <p>Let <var>channel</var> be the <code><a href="#idl-def-rtcdatachannel" class="internalDFN" data-link-type="dfn"><code>RTCDataChannel</code></a>
            </code>
            object whose <a data-lt="data transport" href="#dfn-underlying-data-transport" class="internalDFN" data-link-type="dfn">transport</a> was closed.
          </p>
        </li>
        <li>
          <p>Set <var>channel</var>'s <code><a data-for="RTCDataChannel" href="#dom-rtcdatachannel-readystate" class="internalDFN" data-link-type="dfn"><code>readyState</code></a>
            </code> attribute to
            <code>closed</code>.</p>
        </li>
        <li>
          <p>If the <a data-lt="data transport" href="#dfn-underlying-data-transport" class="internalDFN" data-link-type="dfn">transport</a> was closed
            <dfn id="data-transport-closed-error" data-dfn-type="dfn">with an error</dfn>, fire a NetworkError event at <var>channel</var>.</p>
        </li>
        <li>
          <p>Fire a simple event named <code title="event-RTCDataChannel-close"><a href="#event-datachannel-close" class="internalDFN" data-link-type="dfn"><code>close</code></a>
            </code> at
            <var>channel</var>.</p>
        </li>
      </ol>
      <p>In some cases, the user agent may be unable to create an
        <code><a href="#idl-def-rtcdatachannel" class="internalDFN" data-link-type="dfn"><code>RTCDataChannel</code></a>
        </code>'s <a href="#dfn-underlying-data-transport" class="internalDFN" data-link-type="dfn">underlying data transport</a>. For example, the data channel's <code><a data-for="RTCDataChannel" href="#dom-rtcdatachannel-id" class="internalDFN" data-link-type="dfn"><code>id</code></a>
        </code> may be outside the range negotiated by the [
        <cite><a class="bibref" href="#bib-RTCWEB-DATA">RTCWEB-DATA</a></cite>] implementations, or in the case where the user agent generates an id according to [<cite><a class="bibref" href="#bib-RTCWEB-DATA-PROTOCOL">RTCWEB-DATA-PROTOCOL</a></cite>], no more IDs may be available. When the user agent determines that an
        <code><a href="#idl-def-rtcdatachannel" class="internalDFN" data-link-type="dfn"><code>RTCDataChannel</code></a>
        </code>'s <a href="#dfn-underlying-data-transport" class="internalDFN" data-link-type="dfn">underlying data transport</a> cannot be created, the user agent <em class="rfc2119" title="MUST">MUST</em> queue a task to run the following steps:
      </p>
      <ol>
        <li>
          <p>Let <var>channel</var> be the <code><a href="#idl-def-rtcdatachannel" class="internalDFN" data-link-type="dfn"><code>RTCDataChannel</code></a>
            </code>
            object for which the user agent could not create an <a href="#dfn-underlying-data-transport" class="internalDFN" data-link-type="dfn">underlying
          data transport</a>.</p>
        </li>
        <li>
          <p>Set <var>channel</var>'s <code><a data-for="RTCDataChannel" href="#dom-rtcdatachannel-readystate" class="internalDFN" data-link-type="dfn"><code>readyState</code></a>
            </code> attribute to
            <code>closed</code>.</p>
        </li>
        <li>
          <p>Fire a NetworkError event at <var>channel</var>.</p>
        </li>
        <li>
          <p>Fire a simple event named <code title="event-RTCDataChannel-close"><a href="#event-datachannel-close" class="internalDFN" data-link-type="dfn"><code>close</code></a>
            </code> at
            <var>channel</var>.</p>
        </li>
      </ol>
      <div>
        <pre class="def idl"><span class="idlInterface" id="idl-def-rtcdatachannel" data-idl="" data-title="RTCDataChannel">interface <span class="idlInterfaceID">RTCDataChannel</span> : <span class="idlSuperclass">EventTarget</span> {
<span class="idlAttribute" id="idl-def-rtcdatachannel-label" data-idl="" data-title="label" data-dfn-for="rtcdatachannel">    readonly attribute <span class="idlAttrType">USVString</span>           <span class="idlAttrName"><a data-lt="label" href="#dom-rtcdatachannel-label" class="internalDFN" data-link-type="dfn" data-for="RTCDataChannel"><code>label</code></a></span>;</span>
<span class="idlAttribute" id="idl-def-rtcdatachannel-ordered" data-idl="" data-title="ordered" data-dfn-for="rtcdatachannel">    readonly attribute <span class="idlAttrType">boolean</span>             <span class="idlAttrName"><a data-lt="ordered" href="#dom-rtcdatachannel-ordered" class="internalDFN" data-link-type="dfn" data-for="RTCDataChannel"><code>ordered</code></a></span>;</span>
<span class="idlAttribute" id="idl-def-rtcdatachannel-maxpacketlifetime" data-idl="" data-title="maxPacketLifeTime" data-dfn-for="rtcdatachannel">    readonly attribute <span class="idlAttrType">unsigned short?</span>     <span class="idlAttrName"><a data-lt="maxPacketLifeTime" href="#dom-rtcdatachannel-maxpacketlifetime" class="internalDFN" data-link-type="dfn" data-for="RTCDataChannel"><code>maxPacketLifeTime</code></a></span>;</span>
<span class="idlAttribute" id="idl-def-rtcdatachannel-maxretransmits" data-idl="" data-title="maxRetransmits" data-dfn-for="rtcdatachannel">    readonly attribute <span class="idlAttrType">unsigned short?</span>     <span class="idlAttrName"><a data-lt="maxRetransmits" href="#dom-rtcdatachannel-maxretransmits" class="internalDFN" data-link-type="dfn" data-for="RTCDataChannel"><code>maxRetransmits</code></a></span>;</span>
<span class="idlAttribute" id="idl-def-rtcdatachannel-protocol" data-idl="" data-title="protocol" data-dfn-for="rtcdatachannel">    readonly attribute <span class="idlAttrType">USVString</span>           <span class="idlAttrName"><a data-lt="protocol" href="#dom-rtcdatachannel-protocol" class="internalDFN" data-link-type="dfn" data-for="RTCDataChannel"><code>protocol</code></a></span>;</span>
<span class="idlAttribute" id="idl-def-rtcdatachannel-negotiated" data-idl="" data-title="negotiated" data-dfn-for="rtcdatachannel">    readonly attribute <span class="idlAttrType">boolean</span>             <span class="idlAttrName"><a data-lt="negotiated" href="#dom-rtcdatachannel-negotiated" class="internalDFN" data-link-type="dfn" data-for="RTCDataChannel"><code>negotiated</code></a></span>;</span>
<span class="idlAttribute" id="idl-def-rtcdatachannel-id" data-idl="" data-title="id" data-dfn-for="rtcdatachannel">    readonly attribute <span class="idlAttrType">unsigned short</span>      <span class="idlAttrName"><a data-lt="id" href="#dom-rtcdatachannel-id" class="internalDFN" data-link-type="dfn" data-for="RTCDataChannel"><code>id</code></a></span>;</span>
<span class="idlAttribute" id="idl-def-rtcdatachannel-readystate" data-idl="" data-title="readyState" data-dfn-for="rtcdatachannel">    readonly attribute <span class="idlAttrType"><a href="#idl-def-rtcdatachannelstate" class="internalDFN" data-link-type="dfn"><code>RTCDataChannelState</code></a></span> <span class="idlAttrName"><a data-lt="readyState" href="#dom-rtcdatachannel-readystate" class="internalDFN" data-link-type="dfn" data-for="RTCDataChannel"><code>readyState</code></a></span>;</span>
<span class="idlAttribute" id="idl-def-rtcdatachannel-bufferedamount" data-idl="" data-title="bufferedAmount" data-dfn-for="rtcdatachannel">    readonly attribute <span class="idlAttrType">unsigned long</span>       <span class="idlAttrName"><a data-lt="bufferedAmount" href="#dom-rtcdatachannel-bufferedamount" class="internalDFN" data-link-type="dfn" data-for="RTCDataChannel"><code>bufferedAmount</code></a></span>;</span>
<span class="idlAttribute" id="idl-def-rtcdatachannel-bufferedamountlowthreshold" data-idl="" data-title="bufferedAmountLowThreshold" data-dfn-for="rtcdatachannel">             attribute <span class="idlAttrType">unsigned long</span>       <span class="idlAttrName"><a data-lt="bufferedAmountLowThreshold" href="#dom-rtcdatachannel-bufferedamountlowthreshold" class="internalDFN" data-link-type="dfn" data-for="RTCDataChannel"><code>bufferedAmountLowThreshold</code></a></span>;</span>
<span class="idlAttribute" id="idl-def-rtcdatachannel-onopen" data-idl="" data-title="onopen" data-dfn-for="rtcdatachannel">             attribute <span class="idlAttrType">EventHandler</span>        <span class="idlAttrName"><a data-lt="onopen" href="#dom-rtcdatachannel-onopen" class="internalDFN" data-link-type="dfn" data-for="RTCDataChannel"><code>onopen</code></a></span>;</span>
<span class="idlAttribute" id="idl-def-rtcdatachannel-onbufferedamountlow" data-idl="" data-title="onbufferedamountlow" data-dfn-for="rtcdatachannel">             attribute <span class="idlAttrType">EventHandler</span>        <span class="idlAttrName"><a data-lt="onbufferedamountlow" href="#dom-rtcdatachannel-onbufferedamountlow" class="internalDFN" data-link-type="dfn" data-for="RTCDataChannel"><code>onbufferedamountlow</code></a></span>;</span>
<span class="idlAttribute" id="idl-def-rtcdatachannel-onerror" data-idl="" data-title="onerror" data-dfn-for="rtcdatachannel">             attribute <span class="idlAttrType">EventHandler</span>        <span class="idlAttrName"><a data-lt="onerror" href="#dom-rtcdatachannel-onerror" class="internalDFN" data-link-type="dfn" data-for="RTCDataChannel"><code>onerror</code></a></span>;</span>
<span class="idlAttribute" id="idl-def-rtcdatachannel-onclose" data-idl="" data-title="onclose" data-dfn-for="rtcdatachannel">             attribute <span class="idlAttrType">EventHandler</span>        <span class="idlAttrName"><a data-lt="onclose" href="#dom-rtcdatachannel-onclose" class="internalDFN" data-link-type="dfn" data-for="RTCDataChannel"><code>onclose</code></a></span>;</span>
<span class="idlMethod" id="idl-def-rtcdatachannel-close()" data-idl="" data-title="close" data-dfn-for="rtcdatachannel">    <span class="idlMethType">void</span> <span class="idlMethName"><a data-lt="close" href="#dom-rtcdatachannel-close" class="internalDFN" data-link-type="dfn" data-for="RTCDataChannel"><code>close</code></a></span>();</span>
<span class="idlAttribute" id="idl-def-rtcdatachannel-onmessage" data-idl="" data-title="onmessage" data-dfn-for="rtcdatachannel">             attribute <span class="idlAttrType">EventHandler</span>        <span class="idlAttrName"><a data-lt="onmessage" href="#dom-rtcdatachannel-onmessage" class="internalDFN" data-link-type="dfn" data-for="RTCDataChannel"><code>onmessage</code></a></span>;</span>
<span class="idlAttribute" id="idl-def-rtcdatachannel-binarytype" data-idl="" data-title="binaryType" data-dfn-for="rtcdatachannel">             attribute <span class="idlAttrType">DOMString</span>           <span class="idlAttrName"><a data-lt="binaryType" href="#dom-rtcdatachannel-binarytype" class="internalDFN" data-link-type="dfn" data-for="RTCDataChannel"><code>binaryType</code></a></span>;</span>
<span class="idlMethod" id="idl-def-rtcdatachannel-send(usvstring)" data-idl="" data-title="send" data-dfn-for="rtcdatachannel">    <span class="idlMethType">void</span> <span class="idlMethName"><a data-lt="send" href="#dom-rtcdatachannel-send" class="internalDFN" data-link-type="dfn" data-for="RTCDataChannel"><code>send</code></a></span>(<span class="idlParam"><span class="idlParamType">USVString</span> <span class="idlParamName">data</span></span>);</span>
<span class="idlMethod" id="idl-def-rtcdatachannel-send!overload-1(blob)" data-idl="" data-title="send" data-dfn-for="rtcdatachannel">    <span class="idlMethType">void</span> <span class="idlMethName"><a data-lt="send!overload-1" data-lt-nodefault="" href="#dom-rtcdatachannel-send!overload-1" class="internalDFN" data-link-type="dfn" data-for="RTCDataChannel"><code>send</code></a></span>(<span class="idlParam"><span class="idlParamType"><a href="#dfn-blob" class="internalDFN" data-link-type="dfn">Blob</a></span> <span class="idlParamName">data</span></span>);</span>
<span class="idlMethod" id="idl-def-rtcdatachannel-send!overload-2(arraybuffer)" data-idl="" data-title="send" data-dfn-for="rtcdatachannel">    <span class="idlMethType">void</span> <span class="idlMethName"><a data-lt="send!overload-2" data-lt-nodefault="" href="#dom-rtcdatachannel-send!overload-2" class="internalDFN" data-link-type="dfn" data-for="RTCDataChannel"><code>send</code></a></span>(<span class="idlParam"><span class="idlParamType">ArrayBuffer</span> <span class="idlParamName">data</span></span>);</span>
<span class="idlMethod" id="idl-def-rtcdatachannel-send!overload-3(arraybufferview)" data-idl="" data-title="send" data-dfn-for="rtcdatachannel">    <span class="idlMethType">void</span> <span class="idlMethName"><a data-lt="send!overload-3" data-lt-nodefault="" href="#dom-rtcdatachannel-send!overload-3" class="internalDFN" data-link-type="dfn" data-for="RTCDataChannel"><code>send</code></a></span>(<span class="idlParam"><span class="idlParamType">ArrayBufferView</span> <span class="idlParamName">data</span></span>);</span>
};</span></pre>

        <section typeof="bibo:Chapter" resource="#attributes-16" property="bibo:hasPart">
          <h4 id="attributes-16" resource="#attributes-16"><span property="xhv:role" resource="xhv:heading">Attributes</span></h4>
          <dl data-link-for="RTCDataChannel" data-dfn-for="RTCDataChannel" class="attributes">
            <dt><code>label</code> of type <span class="idlAttrType">USVString</span>, readonly</dt>
            <dd>
              <p>The <dfn id="dom-rtcdatachannel-label" data-dfn-for="rtcdatachannel" data-dfn-type="dfn" data-idl=""><code>label</code></dfn> attribute represents a label that can be used to distinguish this
                <code><a href="#idl-def-rtcdatachannel" class="internalDFN" data-link-type="dfn"><code>RTCDataChannel</code></a>
                </code> object from other
                <code><a href="#idl-def-rtcdatachannel" class="internalDFN" data-link-type="dfn"><code>RTCDataChannel</code></a>
                </code> objects. Scripts are allowed to create multiple <code><a href="#idl-def-rtcdatachannel" class="internalDFN" data-link-type="dfn"><code>RTCDataChannel</code></a>
                </code> objects with the same label. The attribute <em class="rfc2119" title="MUST">MUST</em> return the value to which it was set when the <code><a href="#idl-def-rtcdatachannel" class="internalDFN" data-link-type="dfn"><code>RTCDataChannel</code></a>
                </code> object was created.
              </p>
            </dd>
            <dt><code>ordered</code> of type <span class="idlAttrType">boolean</span>, readonly</dt>
            <dd>
              <p>The <dfn id="dom-rtcdatachannel-ordered" data-dfn-for="rtcdatachannel" data-dfn-type="dfn" data-idl=""><code>ordered</code></dfn> attribute returns true if the <code><a href="#idl-def-rtcdatachannel" class="internalDFN" data-link-type="dfn"><code>RTCDataChannel</code></a>
                </code> is ordered, and false if other of order delivery is allowed. The attribute <em class="rfc2119" title="MUST">MUST</em> be initialized to true by default and <em class="rfc2119" title="MUST">MUST</em> return the value to which it was set when the
                <code><a href="#idl-def-rtcdatachannel" class="internalDFN" data-link-type="dfn"><code>RTCDataChannel</code></a>
                </code> was created.</p>
            </dd>
            <dt><code>maxPacketLifeTime</code> of type <span class="idlAttrType">unsigned short</span>, readonly ,
            nullable</dt>
            <dd>
              <p>The <dfn id="dom-rtcdatachannel-maxpacketlifetime" data-dfn-for="rtcdatachannel" data-dfn-type="dfn" data-idl=""><code>maxPacketLifeTime</code></dfn> attribute returns the length of the time window (in milliseconds) during which transmissions and retransmissions may occur in unreliable mode, or null if unset. The attribute <em class="rfc2119" title="MUST">MUST</em> be initialized to null by default and <em class="rfc2119" title="MUST">MUST</em> return the value to which it was set when the <code><a href="#idl-def-rtcdatachannel" class="internalDFN" data-link-type="dfn"><code>RTCDataChannel</code></a>
                </code> was created.
              </p>
            </dd>
            <dt><code>maxRetransmits</code> of type <span class="idlAttrType">unsigned short</span>, readonly ,
            nullable</dt>
            <dd>
              <p>The <dfn id="dom-rtcdatachannel-maxretransmits" data-dfn-for="rtcdatachannel" data-dfn-type="dfn" data-idl=""><code>maxRetransmits</code></dfn> attribute returns the maximum number of retransmissions that are attempted in unreliable mode, or null if unset. The attribute
                <em class="rfc2119" title="MUST">MUST</em> be initialized to null by default and <em class="rfc2119" title="MUST">MUST</em> return the value to which it was set when the <code><a href="#idl-def-rtcdatachannel" class="internalDFN" data-link-type="dfn"><code>RTCDataChannel</code></a>
                </code>
                was created.</p>
            </dd>
            <dt><code>protocol</code> of type <span class="idlAttrType">USVString</span>, readonly</dt>
            <dd>
              <p>The <dfn id="dom-rtcdatachannel-protocol" data-dfn-for="rtcdatachannel" data-dfn-type="dfn" data-idl=""><code>protocol</code></dfn> attribute returns the name of the sub-protocol used with this
                <code><a href="#idl-def-rtcdatachannel" class="internalDFN" data-link-type="dfn"><code>RTCDataChannel</code></a>
                </code> if any, or the empty string otherwise. The attribute <em class="rfc2119" title="MUST">MUST</em> be initialized to the empty string by default and <em class="rfc2119" title="MUST">MUST</em> return the value to which it was set when the
                <code><a href="#idl-def-rtcdatachannel" class="internalDFN" data-link-type="dfn"><code>RTCDataChannel</code></a>
                </code> was created.</p>
            </dd>
            <dt><code>negotiated</code> of type <span class="idlAttrType">boolean</span>, readonly</dt>
            <dd>
              <p>The <dfn id="dom-rtcdatachannel-negotiated" data-dfn-for="rtcdatachannel" data-dfn-type="dfn" data-idl=""><code>negotiated</code></dfn> attribute returns true if this <code><a href="#idl-def-rtcdatachannel" class="internalDFN" data-link-type="dfn"><code>RTCDataChannel</code></a>
                </code>
                was negotiated by the application, or false otherwise. The attribute <em class="rfc2119" title="MUST">MUST</em> be initialized to false by default and <em class="rfc2119" title="MUST">MUST</em> return the value to which it was set when the
                <code><a href="#idl-def-rtcdatachannel" class="internalDFN" data-link-type="dfn"><code>RTCDataChannel</code></a>
                </code> was created.</p>
            </dd>
            <dt><dfn data-dfn-for="rtcdatachannel" data-dfn-type="dfn" id="dom-rtcdatachannel-id" data-idl=""><code>id</code></dfn> of type <span class="idlAttrType">unsigned short</span>, readonly</dt>
            <dd>
              <p>The <code>id</code> attribute returns the id for this
                <code><a href="#idl-def-rtcdatachannel" class="internalDFN" data-link-type="dfn"><code>RTCDataChannel</code></a>
                </code>. The id was either assigned by the user agent at channel creation time or selected by the script. The attribute <em class="rfc2119" title="MUST">MUST</em> return the value to which it was set when the <code><a href="#idl-def-rtcdatachannel" class="internalDFN" data-link-type="dfn"><code>RTCDataChannel</code></a>
                </code> was created.</p>
            </dd>
            <dt><code>readyState</code> of type <span class="idlAttrType"><a href="#idl-def-rtcdatachannelstate" class="internalDFN" data-link-type="dfn"><code>RTCDataChannelState</code></a></span>, readonly</dt>
            <dd>
              <p>The <dfn id="dom-rtcdatachannel-readystate" data-dfn-for="rtcdatachannel" data-dfn-type="dfn" data-idl=""><code>readyState</code></dfn> attribute represents the state of the <code>RTCDataChannel</code> object. It <em class="rfc2119" title="MUST">MUST</em> return the value to which the user agent last set it (as defined by the processing model algorithms).</p>
            </dd>
            <dt><code>bufferedAmount</code> of type <span class="idlAttrType">unsigned long</span>, readonly</dt>
            <dd>
              <p>The <dfn id="dom-rtcdatachannel-bufferedamount" data-dfn-for="rtcdatachannel" data-dfn-type="dfn" data-idl=""><code>bufferedAmount</code></dfn> attribute <em class="rfc2119" title="MUST">MUST</em> return the number of bytes of application data (UTF-8 text and binary data) that have been queued using
                <code><a data-for="RTCDataChannel" href="#dfn-send" class="internalDFN" data-link-type="dfn"><code>send()</code></a>
                </code> but that, as of the last time the event loop started executing a task, had not yet been transmitted to the network. (This thus includes any text sent during the execution of the current task, regardless of whether the user agent is able to transmit text asynchronously with script execution.) This does not include framing overhead incurred by the protocol, or buffering done by the operating system or network hardware. If the channel is closed, this attribute's value will only increase with each call to the
                <code><a data-for="RTCDataChannel" href="#dfn-send" class="internalDFN" data-link-type="dfn"><code>send()</code></a>
                </code> method (the attribute does not reset to zero once the channel closes).</p>
            </dd>
            <dt><code>bufferedAmountLowThreshold</code> of type <span class="idlAttrType">unsigned long</span></dt>
            <dd>
              <p>The <dfn data-dfn-for="rtcdatachannel" data-dfn-type="dfn" id="dom-rtcdatachannel-bufferedamountlowthreshold" data-idl=""><code>bufferedAmountLowThreshold</code></dfn> attribute sets the threshold at which the <code><a data-for="RTCDataChannel" href="#dom-rtcdatachannel-bufferedamount" class="internalDFN" data-link-type="dfn"><code>bufferedAmount</code></a>
                </code> is considered to be low. When the <code><a data-for="RTCDataChannel" href="#dom-rtcdatachannel-bufferedamount" class="internalDFN" data-link-type="dfn"><code>bufferedAmount</code></a>
                </code> decreases from above this threshold to equal or below it, the <code title="event-RTCDataChannel-bufferedamountlow"><a href="#event-datachannel-bufferedamountlow" class="internalDFN" data-link-type="dfn"><code>bufferedamountlow</code></a>
                </code>
                event fires. The <code><a data-for="RTCDataChannel" href="#dom-rtcdatachannel-bufferedamountlowthreshold" class="internalDFN" data-link-type="dfn"><code>bufferedAmountLowThreshold</code></a>
                </code> is initially zero on each new <code><a href="#idl-def-rtcdatachannel" class="internalDFN" data-link-type="dfn"><code>RTCDataChannel</code></a>
                </code>, but the application may change its value at any time.</p>
            </dd>
            <dt><dfn data-dfn-for="rtcdatachannel" data-dfn-type="dfn" id="dom-rtcdatachannel-onopen" data-idl=""><code>onopen</code></dfn> of type <span class="idlAttrType">EventHandler</span></dt>
            <dd>The event type of this event handler is
              <code><a href="#event-datachannel-open" class="internalDFN" data-link-type="dfn"><code>open</code></a>
              </code>.</dd>
            <dt><dfn data-dfn-for="rtcdatachannel" data-dfn-type="dfn" id="dom-rtcdatachannel-onbufferedamountlow" data-idl=""><code>onbufferedamountlow</code></dfn> of type
            <span class="idlAttrType">EventHandler</span></dt>
            <dd>The event type of this event handler is
              <code><a href="#event-datachannel-bufferedamountlow" class="internalDFN" data-link-type="dfn"><code>bufferedamountlow</code></a>
              </code>.</dd>
            <dt><dfn data-dfn-for="rtcdatachannel" data-dfn-type="dfn" id="dom-rtcdatachannel-onerror" data-idl=""><code>onerror</code></dfn> of type <span class="idlAttrType">EventHandler</span></dt>
            <dd>The event type of this event handler is <code><a data-for="RTCDataChannel" href="#event-datachannel-error" class="internalDFN" data-link-type="dfn"><code>error</code></a>
              </code>.</dd>
            <dt><dfn data-dfn-for="rtcdatachannel" data-dfn-type="dfn" id="dom-rtcdatachannel-onclose" data-idl=""><code>onclose</code></dfn> of type <span class="idlAttrType">EventHandler</span></dt>
            <dd>The event type of this event handler is
              <code><a href="#dom-rtcdatachannel-close" class="internalDFN" data-link-type="dfn"><code>close</code></a>
              </code>.</dd>
            <dt><dfn data-dfn-for="rtcdatachannel" data-dfn-type="dfn" id="dom-rtcdatachannel-onmessage" data-idl=""><code>onmessage</code></dfn> of type <span class="idlAttrType">EventHandler</span></dt>
            <dd>The event type of this event handler is
              <code><a href="#event-datachannel-message" class="internalDFN" data-link-type="dfn"><code>message</code></a>
              </code>.</dd>
            <dt><code>binaryType</code> of type <span class="idlAttrType">DOMString</span></dt>
            <dd>
              <p>The <dfn id="dom-rtcdatachannel-binarytype" data-dfn-for="rtcdatachannel" data-dfn-type="dfn" data-idl=""><code>binaryType</code></dfn> attribute <em class="rfc2119" title="MUST">MUST</em>, on getting, return the value to which it was last set. On setting, the user agent <em class="rfc2119" title="MUST">MUST</em> set the IDL attribute to the new value. When a <code><a href="#idl-def-rtcdatachannel" class="internalDFN" data-link-type="dfn"><code>RTCDataChannel</code></a>
                </code> object is created, the <code><a data-for="RTCDataChannel" href="#dom-rtcdatachannel-binarytype" class="internalDFN" data-link-type="dfn"><code>binaryType</code></a>
                </code> attribute <em class="rfc2119" title="MUST">MUST</em> be initialized to the string "<code>blob</code>".</p>
              <p>This attribute controls how binary data is exposed to scripts. See the [<cite><a class="bibref" href="#bib-WEBSOCKETS-API">WEBSOCKETS-API</a></cite>] for more information.</p>
            </dd>
          </dl>
        </section>

        <section typeof="bibo:Chapter" resource="#methods-11" property="bibo:hasPart">
          <h4 id="methods-11" resource="#methods-11"><span property="xhv:role" resource="xhv:heading">Methods</span></h4>
          <dl data-link-for="RTCDataChannel" data-dfn-for="RTCDataChannel" class="methods">
            <dt><code>close</code></dt>
            <dd>
              <p>Closes the <code><a href="#idl-def-rtcdatachannel" class="internalDFN" data-link-type="dfn"><code>RTCDataChannel</code></a>
                </code>. It may be called regardless of whether the
                <code><a href="#idl-def-rtcdatachannel" class="internalDFN" data-link-type="dfn"><code>RTCDataChannel</code></a>
                </code> object was created by this peer or the remote peer.</p>
              <p>When the <dfn data-dfn-for="rtcdatachannel" data-dfn-type="dfn" id="dom-rtcdatachannel-close" data-idl=""><code>close</code></dfn> method is called, the user agent
                <em class="rfc2119" title="MUST">MUST</em> run the following steps:</p>
              <ol>
                <li>
                  <p>Let <var>channel</var> be the
                    <code><a href="#idl-def-rtcdatachannel" class="internalDFN" data-link-type="dfn"><code>RTCDataChannel</code></a>
                    </code> object which is about to be closed.</p>
                </li>
                <li>
                  <p>If <var>channel</var>'s <code><a data-for="RTCDataChannel" href="#dom-rtcdatachannel-readystate" class="internalDFN" data-link-type="dfn"><code>readyState</code></a>
                    </code> is
                    <code>closing</code> or <code>closed</code>, then abort these steps.
                  </p>
                </li>
                <li>
                  <p>Set <var>channel</var>'s <code><a data-for="RTCDataChannel" href="#dom-rtcdatachannel-readystate" class="internalDFN" data-link-type="dfn"><code>readyState</code></a>
                    </code> attribute to
                    <code>closing</code>.</p>
                </li>
                <li>
                  <p>If the <code><a href="#data-transport-closing-procedure" class="internalDFN" data-link-type="dfn">closing procedure</a></code> has not started yet, start it.</p>
                </li>
              </ol>
              <div>
                <em>No parameters.</em>
              </div>
              <div>
                <em>Return type:</em> <code>void</code>
              </div>
            </dd>
            <dt><dfn data-dfn-for="rtcdatachannel" data-dfn-type="dfn" id="dom-rtcdatachannel-send" data-idl=""><code>send</code></dfn></dt>
            <dd>
              <p>Run the steps described by the <code><a data-for="RTCDataChannel" href="#dfn-send" class="internalDFN" data-link-type="dfn"><code>send()</code></a>
                </code> algorithm with argument type
                <code>string</code> object.</p>
              <table class="parameters">
                <tbody>
                  <tr>
                    <th>Parameter</th>
                    <th>Type</th>
                    <th>Nullable</th>
                    <th>Optional</th>
                    <th>Description</th>
                  </tr>
                  <tr>
                    <td class="prmName">data</td>
                    <td class="prmType"><code>USVString</code></td>
                    <td class="prmNullFalse"><span role="img" aria-label="False">âœ˜</span></td>
                    <td class="prmOptFalse"><span role="img" aria-label="False">âœ˜</span></td>
                    <td class="prmDesc"></td>
                  </tr>
                </tbody>
              </table>
              <div>
                <em>Return type:</em> <code>void</code>
              </div>
            </dd>
            <dt><dfn data-lt-nodefault="true" data-dfn-for="rtcdatachannel" data-dfn-type="dfn" id="dom-rtcdatachannel-send!overload-1" data-idl=""><code>send</code></dfn></dt>
            <dd>
              <p>Run the steps described by the <code><a data-for="RTCDataChannel" href="#dfn-send" class="internalDFN" data-link-type="dfn"><code>send()</code></a>
                </code> algorithm with argument type
                <code>Blob</code> object.</p>
              <table class="parameters">
                <tbody>
                  <tr>
                    <th>Parameter</th>
                    <th>Type</th>
                    <th>Nullable</th>
                    <th>Optional</th>
                    <th>Description</th>
                  </tr>
                  <tr>
                    <td class="prmName">data</td>
                    <td class="prmType"><code>Blob</code></td>
                    <td class="prmNullFalse"><span role="img" aria-label="False">âœ˜</span></td>
                    <td class="prmOptFalse"><span role="img" aria-label="False">âœ˜</span></td>
                    <td class="prmDesc"></td>
                  </tr>
                </tbody>
              </table>
              <div>
                <em>Return type:</em> <code>void</code>
              </div>
            </dd>
            <dt><dfn data-lt-nodefault="true" data-dfn-for="rtcdatachannel" data-dfn-type="dfn" id="dom-rtcdatachannel-send!overload-2" data-idl=""><code>send</code></dfn></dt>
            <dd>
              <p>Run the steps described by the <code><a data-for="RTCDataChannel" href="#dfn-send" class="internalDFN" data-link-type="dfn"><code>send()</code></a>
                </code> algorithm with argument type
                <code>ArrayBuffer</code> object.</p>
              <table class="parameters">
                <tbody>
                  <tr>
                    <th>Parameter</th>
                    <th>Type</th>
                    <th>Nullable</th>
                    <th>Optional</th>
                    <th>Description</th>
                  </tr>
                  <tr>
                    <td class="prmName">data</td>
                    <td class="prmType"><code>ArrayBuffer</code></td>
                    <td class="prmNullFalse"><span role="img" aria-label="False">âœ˜</span></td>
                    <td class="prmOptFalse"><span role="img" aria-label="False">âœ˜</span></td>
                    <td class="prmDesc"></td>
                  </tr>
                </tbody>
              </table>
              <div>
                <em>Return type:</em> <code>void</code>
              </div>
            </dd>
            <dt><dfn data-lt-nodefault="true" data-dfn-for="rtcdatachannel" data-dfn-type="dfn" id="dom-rtcdatachannel-send!overload-3" data-idl=""><code>send</code></dfn></dt>
            <dd>
              <p>Run the steps described by the <code><a data-for="RTCDataChannel" href="#dfn-send" class="internalDFN" data-link-type="dfn"><code>send()</code></a>
                </code> algorithm with argument type
                <code>ArrayBufferView</code> object.</p>
              <table class="parameters">
                <tbody>
                  <tr>
                    <th>Parameter</th>
                    <th>Type</th>
                    <th>Nullable</th>
                    <th>Optional</th>
                    <th>Description</th>
                  </tr>
                  <tr>
                    <td class="prmName">data</td>
                    <td class="prmType"><code>ArrayBufferView</code></td>
                    <td class="prmNullFalse"><span role="img" aria-label="False">âœ˜</span></td>
                    <td class="prmOptFalse"><span role="img" aria-label="False">âœ˜</span></td>
                    <td class="prmDesc"></td>
                  </tr>
                </tbody>
              </table>
              <div>
                <em>Return type:</em> <code>void</code>
              </div>
            </dd>
          </dl>
        </section>
      </div>
      <div>
        <pre class="def idl"><span class="idlDictionary" id="idl-def-rtcdatachannelinit" data-idl="" data-title="RTCDataChannelInit">dictionary <span class="idlDictionaryID">RTCDataChannelInit</span> {
<span class="idlMember" id="idl-def-rtcdatachannelinit-ordered" data-idl="" data-title="ordered" data-dfn-for="rtcdatachannelinit">    <span class="idlMemberType">boolean</span>        <span class="idlMemberName"><a data-lt="ordered" href="#dom-rtcdatachannelinit-ordered" class="internalDFN" data-link-type="dfn" data-for="RTCDataChannelInit"><code>ordered</code></a></span> = <span class="idlMemberValue">true</span>;</span>
<span class="idlMember" id="idl-def-rtcdatachannelinit-maxpacketlifetime" data-idl="" data-title="maxPacketLifeTime" data-dfn-for="rtcdatachannelinit">    <span class="idlMemberType">unsigned short</span> <span class="idlMemberName"><a data-lt="maxPacketLifeTime" href="#dom-rtcdatachannelinit-maxpacketlifetime" class="internalDFN" data-link-type="dfn" data-for="RTCDataChannelInit"><code>maxPacketLifeTime</code></a></span>;</span>
<span class="idlMember" id="idl-def-rtcdatachannelinit-maxretransmits" data-idl="" data-title="maxRetransmits" data-dfn-for="rtcdatachannelinit">    <span class="idlMemberType">unsigned short</span> <span class="idlMemberName"><a data-lt="maxRetransmits" href="#dom-rtcdatachannelinit-maxretransmits" class="internalDFN" data-link-type="dfn" data-for="RTCDataChannelInit"><code>maxRetransmits</code></a></span>;</span>
<span class="idlMember" id="idl-def-rtcdatachannelinit-protocol" data-idl="" data-title="protocol" data-dfn-for="rtcdatachannelinit">    <span class="idlMemberType">USVString</span>      <span class="idlMemberName"><a data-lt="protocol" href="#dom-rtcdatachannelinit-protocol" class="internalDFN" data-link-type="dfn" data-for="RTCDataChannelInit"><code>protocol</code></a></span> = <span class="idlMemberValue">""</span>;</span>
<span class="idlMember" id="idl-def-rtcdatachannelinit-negotiated" data-idl="" data-title="negotiated" data-dfn-for="rtcdatachannelinit">    <span class="idlMemberType">boolean</span>        <span class="idlMemberName"><a data-lt="negotiated" href="#dom-rtcdatachannelinit-negotiated" class="internalDFN" data-link-type="dfn" data-for="RTCDataChannelInit"><code>negotiated</code></a></span> = <span class="idlMemberValue">false</span>;</span>
<span class="idlMember" id="idl-def-rtcdatachannelinit-id" data-idl="" data-title="id" data-dfn-for="rtcdatachannelinit">    <span class="idlMemberType">unsigned short</span> <span class="idlMemberName"><a data-lt="id" href="#dom-rtcdatachannelinit-id" class="internalDFN" data-link-type="dfn" data-for="RTCDataChannelInit"><code>id</code></a></span>;</span>
};</span></pre>

        <section typeof="bibo:Chapter" resource="#dictionary-rtcdatachannelinit-members" property="bibo:hasPart">
          <h4 id="dictionary-rtcdatachannelinit-members" resource="#dictionary-rtcdatachannelinit-members"><span property="xhv:role" resource="xhv:heading">Dictionary <a class="idlType internalDFN" href="#idl-def-rtcdatachannelinit" data-link-type="dfn"><code>RTCDataChannelInit</code></a> Members</span></h4>
          <dl data-link-for="RTCDataChannelInit" data-dfn-for="RTCDataChannelInit" class="dictionary-members">
            <dt><dfn data-dfn-for="rtcdatachannelinit" data-dfn-type="dfn" id="dom-rtcdatachannelinit-ordered" data-idl=""><code>ordered</code></dfn> of type <span class="idlMemberType">boolean</span>, defaulting to
            <code>true</code></dt>
            <dd>
              <p>If set to false, data is allowed to be delivered out of order. The default value of true, guarantees that data will be delivered in order.</p>
            </dd>
            <dt><dfn data-dfn-for="rtcdatachannelinit" data-dfn-type="dfn" id="dom-rtcdatachannelinit-maxpacketlifetime" data-idl=""><code>maxPacketLifeTime</code></dfn> of type <span class="idlMemberType">unsigned short</span></dt>
            <dd>
              <p>Limits the time during which the channel will transmit or retransmit data if not acknowledged. This value may be clamped if it exceeds the maximum value supported by the user agent.</p>
            </dd>
            <dt><dfn data-dfn-for="rtcdatachannelinit" data-dfn-type="dfn" id="dom-rtcdatachannelinit-maxretransmits" data-idl=""><code>maxRetransmits</code></dfn> of type <span class="idlMemberType">unsigned short</span></dt>
            <dd>
              <p>Limits the number of times a channel will retransmit data if not successfully delivered. This value may be clamped if it exceeds the maximum value supported by the user agent.</p>
            </dd>
            <dt><dfn data-dfn-for="rtcdatachannelinit" data-dfn-type="dfn" id="dom-rtcdatachannelinit-protocol" data-idl=""><code>protocol</code></dfn> of type <span class="idlMemberType">USVString</span>, defaulting to
            <code>""</code></dt>
            <dd>
              <p>Subprotocol name used for this channel.</p>
            </dd>
            <dt><dfn data-dfn-for="rtcdatachannelinit" data-dfn-type="dfn" id="dom-rtcdatachannelinit-negotiated" data-idl=""><code>negotiated</code></dfn> of type <span class="idlMemberType">boolean</span>, defaulting to
            <code>false</code></dt>
            <dd>
              <p>The default value of false tells the user agent to announce the channel in-band and instruct the other peer to dispatch a corresponding <code><a href="#idl-def-rtcdatachannel" class="internalDFN" data-link-type="dfn"><code>RTCDataChannel</code></a>
                </code> object. If set to true, it is up to the application to negotiate the channel and create a <code><a href="#idl-def-rtcdatachannel" class="internalDFN" data-link-type="dfn"><code>RTCDataChannel</code></a>
                </code> object with the same
                <code><a data-for="RTCDataChannel" href="#dom-rtcdatachannel-id" class="internalDFN" data-link-type="dfn"><code>id</code></a>
                </code> at the other peer.
              </p>
            </dd>
            <dt><dfn data-dfn-for="rtcdatachannelinit" data-dfn-type="dfn" id="dom-rtcdatachannelinit-id" data-idl=""><code>id</code></dfn> of type <span class="idlMemberType">unsigned short</span></dt>
            <dd>
              <p>Overrides the default selection of id for this channel.</p>
            </dd>
          </dl>
        </section>
      </div>
      <p>The <dfn data-dfn-type="dfn" id="dfn-send"><code>send()</code></dfn> method is overloaded to handle different data argument types. When any version of the method is called, the user agent <em class="rfc2119" title="MUST">MUST</em> run the following steps:</p>
      <ol>
        <li>
          <p>Let <var>channel</var> be the <code><a href="#idl-def-rtcdatachannel" class="internalDFN" data-link-type="dfn"><code>RTCDataChannel</code></a>
            </code>
            object on which data is to be sent.</p>
        </li>
        <li>
          <p>If <var>channel</var>'s <a data-for="RTCDataChannel" href="#dom-rtcdatachannel-readystate" class="internalDFN" data-link-type="dfn"><code><code>readyState</code></code></a> attribute is
            <code>connecting</code>, throw an <code>InvalidStateError</code> exception and abort these steps.</p>
        </li>
        <li>
          <p>Execute the sub step that corresponds to the type of the methods argument:
          </p>
          <ul>
            <li>
              <p><code>string</code> object:</p>
              <p>Let <var>data</var> be the object and increase the
                <code><a data-for="RTCDataChannel" href="#dom-rtcdatachannel-bufferedamount" class="internalDFN" data-link-type="dfn"><code>bufferedAmount</code></a>
                </code>
                attribute by the number of bytes needed to express
                <var>data</var> as UTF-8.</p>
            </li>
            <li>
              <p><code>Blob</code> object:</p>
              <p>Let <var>data</var> be the raw data represented by the
                <code>Blob</code> object and increase the <code><a data-for="RTCDataChannel" href="#dom-rtcdatachannel-bufferedamount" class="internalDFN" data-link-type="dfn"><code>bufferedAmount</code></a>
                </code> attribute by the size of data, in bytes.</p>
            </li>
            <li>
              <p><code>ArrayBuffer</code> object:</p>
              <p>Let <var>data</var> be the data stored in the buffer described by the <code>ArrayBuffer</code> object and increase the
                <code><a data-for="RTCDataChannel" href="#dom-rtcdatachannel-bufferedamount" class="internalDFN" data-link-type="dfn"><code>bufferedAmount</code></a>
                </code>
                attribute by the length of the <code>ArrayBuffer</code> in bytes.
              </p>
            </li>
            <li>
              <p><code>ArrayBufferView</code> object:</p>
              <p>Let <var>data</var> be the data stored in the section of the buffer described by the <code>ArrayBuffer</code> object that the
                <code>ArrayBufferView</code> object references and increase the
                <code><a data-for="RTCDataChannel" href="#dom-rtcdatachannel-bufferedamount" class="internalDFN" data-link-type="dfn"><code>bufferedAmount</code></a>
                </code>
                attribute by the length of the <code>ArrayBufferView</code> in bytes.
              </p>
            </li>
          </ul>
        </li>
        <li>
          <p>If <var>channel</var>'s <a href="#dfn-underlying-data-transport" class="internalDFN" data-link-type="dfn">underlying data transport</a> is not established yet, or if the <code><a href="#data-transport-closing-procedure" class="internalDFN" data-link-type="dfn">closing procedure</a></code> has started, then abort these steps.</p>
        </li>
        <li>
          <p>Attempt to send <var>data</var> on <var>channel</var>'s
            <a href="#dfn-underlying-data-transport" class="internalDFN" data-link-type="dfn">underlying data transport</a>; if the data cannot be sent, e.g. because it would need to be buffered but the buffer is full, the user agent <em class="rfc2119" title="MUST">MUST</em> abruptly <a href="#event-datachannel-close" class="internalDFN" data-link-type="dfn"><code>close</code></a> <var>channel</var>'s <a href="#dfn-underlying-data-transport" class="internalDFN" data-link-type="dfn">underlying
          data transport</a> <a href="#data-transport-closed-error" class="internalDFN" data-link-type="dfn">with an error</a>.</p>
        </li>
      </ol>
      <div>
        <pre class="def idl"><span class="idlEnum" id="idl-def-rtcdatachannelstate" data-idl="" data-title="RTCDataChannelState">enum <span class="idlEnumID">RTCDataChannelState</span> {
    "<a href="#dom-rtcdatachannelstate-connecting" class="idlEnumItem">connecting</a>",
    "<a href="#dom-rtcdatachannelstate-open" class="idlEnumItem">open</a>",
    "<a href="#dom-rtcdatachannelstate-closing" class="idlEnumItem">closing</a>",
    "<a href="#dom-rtcdatachannelstate-closed" class="idlEnumItem">closed</a>"
};</span></pre>
        <table data-link-for="RTCDataChannelState" data-dfn-for="RTCDataChannelState" class="simple">
          <tbody>
            <tr>
              <th colspan="2">Enumeration description</th>
            </tr>
            <tr>
              <td><dfn data-dfn-for="rtcdatachannelstate" data-dfn-type="dfn" id="dom-rtcdatachannelstate-connecting" data-idl=""><code>connecting</code></dfn></td>
              <td>
                <p>The user agent is attempting to establish the <a href="#dfn-underlying-data-transport" class="internalDFN" data-link-type="dfn">underlying
                data transport</a>. This is the initial state of a
                  <code><a href="#idl-def-rtcdatachannel" class="internalDFN" data-link-type="dfn"><code>RTCDataChannel</code></a>
                  </code> object created with
                  <code><a data-for="RTCPeerConnection" href="#dom-rtcpeerconnection-createdatachannel" class="internalDFN" data-link-type="dfn"><code>createDataChannel</code></a>
                  </code>.</p>
              </td>
            </tr>
            <tr>
              <td><dfn data-dfn-for="rtcdatachannelstate" data-dfn-type="dfn" id="dom-rtcdatachannelstate-open" data-idl=""><code>open</code></dfn></td>
              <td>
                <p>The <a href="#dfn-underlying-data-transport" class="internalDFN" data-link-type="dfn">underlying data transport</a> is established and communication is possible. This is the initial state of a
                  <code><a href="#idl-def-rtcdatachannel" class="internalDFN" data-link-type="dfn"><code>RTCDataChannel</code></a>
                  </code> object dispatched as a part of a <code><a href="#dom-rtcdatachannelevent" class="internalDFN" data-link-type="dfn"><code>RTCDataChannelEvent</code></a>
                  </code>.</p>
              </td>
            </tr>
            <tr>
              <td><dfn data-dfn-for="rtcdatachannelstate" data-dfn-type="dfn" id="dom-rtcdatachannelstate-closing" data-idl=""><code>closing</code></dfn></td>
              <td>
                <p>The <code><a data-lt="closing procedure" href="#data-transport-closing-procedure" class="internalDFN" data-link-type="dfn">procedure</a></code> to close down the
                  <a href="#dfn-underlying-data-transport" class="internalDFN" data-link-type="dfn">underlying data transport</a> has started.</p>
              </td>
            </tr>
            <tr>
              <td><dfn data-dfn-for="rtcdatachannelstate" data-dfn-type="dfn" id="dom-rtcdatachannelstate-closed" data-idl=""><code>closed</code></dfn></td>
              <td>
                <p>The <a href="#dfn-underlying-data-transport" class="internalDFN" data-link-type="dfn">underlying data transport</a> has been
                  <code><a href="#dom-rtcdatachannelstate-closed" class="internalDFN" data-link-type="dfn"><code>closed</code></a>
                  </code> or could not be established.</p>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </section>

    <section id="rtcdatachannelevent" typeof="bibo:Chapter" resource="#rtcdatachannelevent" property="bibo:hasPart">
      <h3 id="h-rtcdatachannelevent" resource="#h-rtcdatachannelevent"><span property="xhv:role" resource="xhv:heading"><span class="secno">6.3 </span>RTCDataChannelEvent</span>
      </h3>
      <p>The <code><a href="#event-datachannel" class="internalDFN" data-link-type="dfn"><code>datachannel</code></a>
        </code> event uses the
        <code><a href="#dom-rtcdatachannelevent" class="internalDFN" data-link-type="dfn"><code>RTCDataChannelEvent</code></a>
        </code> interface.</p>
      <p><dfn id="fire-a-datachannel-event" data-dfn-type="dfn">Firing a datachannel event named
      <var>e</var></dfn> with a <code><a href="#idl-def-rtcdatachannel" class="internalDFN" data-link-type="dfn"><code>RTCDataChannel</code></a>
        </code>
        <var>channel</var> means that an event with the name <var>e</var>, which does not bubble (except where otherwise stated) and is not cancelable (except where otherwise stated), and which uses the
        <code><a href="#dom-rtcdatachannelevent" class="internalDFN" data-link-type="dfn"><code>RTCDataChannelEvent</code></a>
        </code> interface with the
        <code><a data-for="RTCDataChannelEvent" href="#dom-rtcdatachannelevent-channel" class="internalDFN" data-link-type="dfn"><code>channel</code></a>
        </code> attribute set to <var>channel</var>, <em class="rfc2119" title="MUST">MUST</em> be created and dispatched at the given target.
      </p>
      <div>
        <pre class="def idl"><span class="idlInterface" id="idl-def-rtcdatachannelevent" data-idl="" data-title="RTCDataChannelEvent">[<span class="idlCtor"><span class="extAttrName">Constructor</span>(<span class="idlParam"><span class="idlParamType">DOMString</span> <span class="idlParamName">type</span></span>, <span class="idlParam"><span class="idlParamType"><a href="#idl-def-rtcdatachanneleventinit" class="internalDFN" data-link-type="dfn"><code>RTCDataChannelEventInit</code></a></span> <span class="idlParamName">eventInitDict</span></span>)</span>]
interface <span class="idlInterfaceID"><a data-lt="RTCDataChannelEvent" href="#dom-rtcdatachannelevent" class="internalDFN" data-link-type="dfn" data-for=""><code>RTCDataChannelEvent</code></a></span> : <span class="idlSuperclass"><a href="#dfn-event" class="internalDFN" data-link-type="dfn">Event</a></span> {
<span class="idlAttribute" id="idl-def-rtcdatachannelevent-channel" data-idl="" data-title="channel" data-dfn-for="rtcdatachannelevent">    readonly attribute <span class="idlAttrType"><a href="#idl-def-rtcdatachannel" class="internalDFN" data-link-type="dfn"><code>RTCDataChannel</code></a></span> <span class="idlAttrName"><a data-lt="channel" href="#dom-rtcdatachannelevent-channel" class="internalDFN" data-link-type="dfn" data-for="RTCDataChannelEvent"><code>channel</code></a></span>;</span>
};</span></pre>

        <section typeof="bibo:Chapter" resource="#constructors-6" property="bibo:hasPart">
          <h4 id="constructors-6" resource="#constructors-6"><span property="xhv:role" resource="xhv:heading">Constructors</span></h4>
          <dl data-link-for="RTCDataChannelEvent" data-dfn-for="RTCDataChannelEvent" class="constructors">
            <dt><dfn data-dfn-for="" data-dfn-type="dfn" id="dom-rtcdatachannelevent" data-idl=""><code>RTCDataChannelEvent</code></dfn></dt>
            <dd>
              readonly attribute RTCDataChannel channel
              <table class="parameters">
                <tbody>
                  <tr>
                    <th>Parameter</th>
                    <th>Type</th>
                    <th>Nullable</th>
                    <th>Optional</th>
                    <th>Description</th>
                  </tr>
                  <tr>
                    <td class="prmName">type</td>
                    <td class="prmType"><code>DOMString</code></td>
                    <td class="prmNullFalse"><span role="img" aria-label="False">âœ˜</span></td>
                    <td class="prmOptFalse"><span role="img" aria-label="False">âœ˜</span></td>
                    <td class="prmDesc"></td>
                  </tr>
                  <tr>
                    <td class="prmName">eventInitDict</td>
                    <td class="prmType">
                      <code>RTCDataChannelEventInit</code></td>
                    <td class="prmNullFalse"><span role="img" aria-label="False">âœ˜</span></td>
                    <td class="prmOptFalse"><span role="img" aria-label="False">âœ˜</span></td>
                    <td class="prmDesc"></td>
                  </tr>
                </tbody>
              </table>
            </dd>
          </dl>
        </section>

        <section typeof="bibo:Chapter" resource="#attributes-17" property="bibo:hasPart">
          <h4 id="attributes-17" resource="#attributes-17"><span property="xhv:role" resource="xhv:heading">Attributes</span></h4>
          <dl data-link-for="RTCDataChannelEvent" data-dfn-for="RTCDataChannelEvent" class="attributes">
            <dt><code>channel</code> of type <span class="idlAttrType"><a href="#idl-def-rtcdatachannel" class="internalDFN" data-link-type="dfn"><code>RTCDataChannel</code></a></span>, readonly</dt>
            <dd>
              <p>The <dfn id="dom-rtcdatachannelevent-channel" data-dfn-for="rtcdatachannelevent" data-dfn-type="dfn" data-idl=""><code>channel</code></dfn> attribute represents the <code><a href="#idl-def-rtcdatachannel" class="internalDFN" data-link-type="dfn"><code>RTCDataChannel</code></a>
                </code>
                object associated with the event.</p>
            </dd>
          </dl>
        </section>
      </div>
      <div>
        <pre class="def idl"><span class="idlDictionary" id="idl-def-rtcdatachanneleventinit" data-idl="" data-title="RTCDataChannelEventInit">dictionary <span class="idlDictionaryID">RTCDataChannelEventInit</span> : <span class="idlSuperclass">EventInit</span> {
<span class="idlMember" id="idl-def-rtcdatachanneleventinit-channel" data-idl="" data-title="channel" data-dfn-for="rtcdatachanneleventinit">    required <span class="idlMemberType"><a href="#idl-def-rtcdatachannel" class="internalDFN" data-link-type="dfn"><code>RTCDataChannel</code></a></span> <span class="idlMemberName"><a data-lt="channel" href="#dom-rtcdatachanneleventinit-channel" class="internalDFN" data-link-type="dfn" data-for="RTCDataChannelEventInit"><code>channel</code></a></span>;</span>
};</span></pre>

        <section typeof="bibo:Chapter" resource="#dictionary-rtcdatachanneleventinit-members" property="bibo:hasPart">
          <h4 id="dictionary-rtcdatachanneleventinit-members" resource="#dictionary-rtcdatachanneleventinit-members"><span property="xhv:role" resource="xhv:heading">Dictionary <a class="idlType internalDFN" href="#idl-def-rtcdatachanneleventinit" data-link-type="dfn"><code>RTCDataChannelEventInit</code></a>
          Members</span></h4>
          <dl data-link-for="RTCDataChannelEventInit" data-dfn-for="RTCDataChannelEventInit" class="dictionary-members">
            <dt><dfn data-dfn-for="rtcdatachanneleventinit" data-dfn-type="dfn" id="dom-rtcdatachanneleventinit-channel" data-idl=""><code>channel</code></dfn> of type <span class="idlMemberType"><a href="#idl-def-rtcdatachannel" class="internalDFN" data-link-type="dfn"><code>RTCDataChannel</code></a></span>, required</dt>
            <dd>
              <p>The <code><a href="#idl-def-rtcdatachannel" class="internalDFN" data-link-type="dfn"><code>RTCDataChannel</code></a>
                </code> object to be announced by the event.</p>
            </dd>
          </dl>
        </section>
      </div>
    </section>

    <section id="garbage-collection-1" typeof="bibo:Chapter" resource="#garbage-collection-1" property="bibo:hasPart">
      <h3 id="h-garbage-collection-1" resource="#h-garbage-collection-1"><span property="xhv:role" resource="xhv:heading"><span class="secno">6.4 </span>Garbage Collection</span>
      </h3>
      <p>A <code><a href="#idl-def-rtcdatachannel" class="internalDFN" data-link-type="dfn"><code>RTCDataChannel</code></a>
        </code> object <em class="rfc2119" title="MUST">MUST</em> not be garbage collected if its</p>
      <ul>
        <li>
          <p><code><a data-for="RTCDataChannel" href="#dom-rtcdatachannel-readystate" class="internalDFN" data-link-type="dfn"><code>readyState</code></a>
            </code> is
            <code>connecting</code> and at least one event listener is registered for <code>open</code> events, <code>message</code> events,
            <code>error</code> events, or <code>close</code> events.</p>
        </li>
        <li>
          <p><code><a data-for="RTCDataChannel" href="#dom-rtcdatachannel-readystate" class="internalDFN" data-link-type="dfn"><code>readyState</code></a>
            </code> is
            <code>open</code> and at least one event listener is registered for
            <code>message</code> events, <code>error</code> events, or
            <code>close</code> events.</p>
        </li>
        <li>
          <p><code><a data-for="RTCDataChannel" href="#dom-rtcdatachannel-readystate" class="internalDFN" data-link-type="dfn"><code>readyState</code></a>
            </code> is
            <code>closing</code> and at least one event listener is registered for <code>error</code> events, or <code>close</code> events.</p>
        </li>
        <li>
          <p><a href="#dfn-underlying-data-transport" class="internalDFN" data-link-type="dfn">underlying data transport</a> is established and data is queued to be transmitted.</p>
        </li>
      </ul>
    </section>
  </section>

  <section id="peer-to-peer-dtmf" typeof="bibo:Chapter" resource="#peer-to-peer-dtmf" property="bibo:hasPart">
    <!--OddPage-->
    <h2 id="h-peer-to-peer-dtmf" resource="#h-peer-to-peer-dtmf"><span property="xhv:role" resource="xhv:heading"><span class="secno">7. </span>Peer-to-peer DTMF</span>
    </h2>
    <p>This section describes an interface on <code><a href="#dom-rtcrtpsender" class="internalDFN" data-link-type="dfn"><code>RTCRtpSender</code></a>
      </code>
      to send DTMF (phone keypad) values across an
      <code><a href="#dom-rtcpeerconnection" class="internalDFN" data-link-type="dfn"><code>RTCPeerConnection</code></a>
      </code>. Details of how DTMF is sent to the other peer are described in [<cite><a class="bibref" href="#bib-RTCWEB-AUDIO">RTCWEB-AUDIO</a></cite>].</p>

    <section id="rtcrtpsender-interface-extensions" typeof="bibo:Chapter" resource="#rtcrtpsender-interface-extensions" property="bibo:hasPart">
      <h3 id="h-rtcrtpsender-interface-extensions" resource="#h-rtcrtpsender-interface-extensions"><span property="xhv:role" resource="xhv:heading"><span class="secno">7.1 </span>RTCRtpSender Interface Extensions</span>
      </h3>
      <p>The Peer-to-peer DTMF API extends the <code><a href="#dom-rtcrtpsender" class="internalDFN" data-link-type="dfn"><code>RTCRtpSender</code></a>
        </code>
        interface as described below.</p>
      <div>
        <pre class="def idl"><span class="idlInterface" id="idl-def-rtcrtpsender-partial-1" data-idl="" data-title="RTCRtpSender">partial interface <span class="idlInterfaceID"><a data-lt="RTCRtpSender" href="#dom-rtcrtpsender" class="internalDFN" data-link-type="dfn" data-for=""><code>RTCRtpSender</code></a></span> {
<span class="idlAttribute" id="idl-def-rtcrtpsender-dtmf" data-idl="" data-title="dtmf" data-dfn-for="rtcrtpsender">    readonly attribute <span class="idlAttrType"><a href="#idl-def-rtcdtmfsender" class="internalDFN" data-link-type="dfn"><code>RTCDTMFSender</code></a>?</span> <span class="idlAttrName"><a data-lt="dtmf" href="#dom-rtcrtpsender-dtmf" class="internalDFN" data-link-type="dfn" data-for="RTCRtpSender"><code>dtmf</code></a></span>;</span>
};</span></pre>

        <section typeof="bibo:Chapter" resource="#attributes-18" property="bibo:hasPart">
          <h4 id="attributes-18" resource="#attributes-18"><span property="xhv:role" resource="xhv:heading">Attributes</span></h4>
          <dl data-link-for="RTCRtpSender" data-dfn-for="RTCRtpSender" class="attributes">
            <dt><code>dtmf</code> of type <span class="idlAttrType"><a href="#idl-def-rtcdtmfsender" class="internalDFN" data-link-type="dfn"><code>RTCDTMFSender</code></a></span>, readonly , nullable</dt>
            <dd>
              <p>The <dfn data-dfn-for="rtcrtpsender" data-dfn-type="dfn" id="dom-rtcrtpsender-dtmf" data-idl=""><code>dtmf</code></dfn> attribute returns a RTCDTMFSender which can be used to send DTMF. A null value indicates that this RTCRtpSender cannot send DTMF.</p>
            </dd>
          </dl>
        </section>
      </div>
    </section>

    <section id="rtcdtmfsender" typeof="bibo:Chapter" resource="#rtcdtmfsender" property="bibo:hasPart">
      <h3 id="h-rtcdtmfsender" resource="#h-rtcdtmfsender"><span property="xhv:role" resource="xhv:heading"><span class="secno">7.2 </span>RTCDTMFSender</span>
      </h3>
      <div>
        <pre class="def idl"><span class="idlInterface" id="idl-def-rtcdtmfsender" data-idl="" data-title="RTCDTMFSender">interface <span class="idlInterfaceID">RTCDTMFSender</span> : <span class="idlSuperclass">EventTarget</span> {
<span class="idlMethod" id="idl-def-rtcdtmfsender-insertdtmf(domstring,optional-unsigned_long,optional-unsigned_long)" data-idl="" data-title="insertDTMF" data-dfn-for="rtcdtmfsender">    <span class="idlMethType">void</span> <span class="idlMethName"><a data-lt="insertDTMF" href="#dom-rtcdtmfsender-insertdtmf" class="internalDFN" data-link-type="dfn" data-for="RTCDTMFSender"><code>insertDTMF</code></a></span>(<span class="idlParam"><span class="idlParamType">DOMString</span> <span class="idlParamName">tones</span></span>,
                    <span class="idlParam">optional <span class="idlParamType">unsigned long</span> <span class="idlParamName">duration</span> = <span class="idlDefaultValue">100</span></span>,
                    <span class="idlParam">optional <span class="idlParamType">unsigned long</span> <span class="idlParamName">interToneGap</span> = <span class="idlDefaultValue">70</span></span>);</span>
<span class="idlAttribute" id="idl-def-rtcdtmfsender-ontonechange" data-idl="" data-title="ontonechange" data-dfn-for="rtcdtmfsender">             attribute <span class="idlAttrType">EventHandler</span> <span class="idlAttrName"><a data-lt="ontonechange" href="#dom-rtcdtmfsender-ontonechange" class="internalDFN" data-link-type="dfn" data-for="RTCDTMFSender"><code>ontonechange</code></a></span>;</span>
<span class="idlAttribute" id="idl-def-rtcdtmfsender-tonebuffer" data-idl="" data-title="toneBuffer" data-dfn-for="rtcdtmfsender">    readonly attribute <span class="idlAttrType">DOMString</span>    <span class="idlAttrName"><a data-lt="toneBuffer" href="#dom-rtcdtmfsender-tonebuffer" class="internalDFN" data-link-type="dfn" data-for="RTCDTMFSender"><code>toneBuffer</code></a></span>;</span>
};</span></pre>

        <section typeof="bibo:Chapter" resource="#attributes-19" property="bibo:hasPart">
          <h4 id="attributes-19" resource="#attributes-19"><span property="xhv:role" resource="xhv:heading">Attributes</span></h4>
          <dl data-link-for="RTCDTMFSender" data-dfn-for="RTCDTMFSender" class="attributes">
            <dt><dfn data-dfn-for="rtcdtmfsender" data-dfn-type="dfn" id="dom-rtcdtmfsender-ontonechange" data-idl=""><code>ontonechange</code></dfn> of type <span class="idlAttrType">EventHandler</span></dt>
            <dd>
              <p>The event type of this event handler is
                <code><a href="#event-RTCDTMFSender-tonechange" class="internalDFN" data-link-type="dfn"><code>tonechange</code></a>
                </code>.</p>
            </dd>
            <dt><code>toneBuffer</code> of type <span class="idlAttrType">DOMString</span>, readonly</dt>
            <dd>
              <p>The <dfn id="dom-rtcdtmfsender-tonebuffer" data-dfn-for="rtcdtmfsender" data-dfn-type="dfn" data-idl=""><code>toneBuffer</code></dfn> attribute <em class="rfc2119" title="MUST">MUST</em> return a list of the tones remaining to be played out. For the syntax, content, and interpretation of this list, see <code><a href="#dom-rtcdtmfsender-insertdtmf" class="internalDFN" data-link-type="dfn"><code>insertDTMF</code></a>
                </code>.</p>
            </dd>
          </dl>
        </section>

        <section typeof="bibo:Chapter" resource="#methods-12" property="bibo:hasPart">
          <h4 id="methods-12" resource="#methods-12"><span property="xhv:role" resource="xhv:heading">Methods</span></h4>
          <dl data-link-for="RTCDTMFSender" data-dfn-for="RTCDTMFSender" class="methods">
            <dt><code>insertDTMF</code></dt>
            <dd>
              <p>An <code><a href="#idl-def-rtcdtmfsender" class="internalDFN" data-link-type="dfn"><code>RTCDTMFSender</code></a>
                </code> object's <dfn id="dom-rtcdtmfsender-insertdtmf" data-dfn-for="rtcdtmfsender" data-dfn-type="dfn" data-idl=""><code>insertDTMF</code></dfn> method is used to send DTMF tones.</p>
              <p>The tones parameter is treated as a series of characters. The characters 0 through 9, A through D, #, and * generate the associated DTMF tones. The characters a to d <em class="rfc2119" title="MUST">MUST</em> be normalized to uppercase on entry and are equivalent to A to D. As noted in [
                <cite><a class="bibref" href="#bib-RTCWEB-AUDIO">RTCWEB-AUDIO</a></cite>] Section 3, support for the characters 0 through 9, A through D, #, and * are required. The character ',' <em class="rfc2119" title="MUST">MUST</em> be supported, and indicates a delay of 2 seconds before processing the next character in the tones parameter. All other characters (and only those other characters) <em class="rfc2119" title="MUST">MUST</em> be considered <dfn id="dtmf-unrecognized" data-dfn-type="dfn">unrecognized</dfn>.</p>
              <p>The duration parameter indicates the duration in ms to use for each character passed in the tones parameters. The duration cannot be more than 6000 ms or less than 40 ms. The default duration is 100 ms for each tone.</p>
              <p>The interToneGap parameter indicates the gap between tones in ms. The user agent clamps it to at least 30 ms. The default value is 70 ms.</p>
              <p>The browser <em class="rfc2119" title="MAY">MAY</em> increase the duration and interToneGap times to cause the times that DTMF start and stop to align with the boundaries of RTP packets but it <em class="rfc2119" title="MUST">MUST</em> not increase either of them by more than the duration of a single RTP audio packet.</p>
              <p>When the <code>insertDTMF()</code> method is invoked, the user agent <em class="rfc2119" title="MUST">MUST</em> run the following steps:</p>
              <ol>
                <li>let <var>sender</var> be the
                  <code><a href="#dom-rtcrtpsender" class="internalDFN" data-link-type="dfn"><code>RTCRtpSender</code></a>
                  </code> used to send DTMF.</li>
                <li>If <var>sender</var> has been stopped, throw an
                  <code>InvalidStateError</code> exception.</li>
                <li>Let <var>tones</var> be the method's first argument.</li>
                <li>If <var>tones</var> contains any <a href="#dtmf-unrecognized" class="internalDFN" data-link-type="dfn">unrecognized</a> characters, throw an <code>InvalidCharacterError</code> exception and abort these steps.
                </li>
                <li>Set the object's <code><a data-for="RTCDTMFSender" href="#dom-rtcdtmfsender-tonebuffer" class="internalDFN" data-link-type="dfn"><code>toneBuffer</code></a>
                  </code> attribute to
                  <var>tones</var>.</li>
                <li>If the value of the <code>duration</code> parameter is less than 40, set it to 40. If, on the other hand, the value is greater than 6000, set it to 6000.</li>
                <li>If the value of the <code>interToneGap</code> parameter is less than 30, set it to 30.</li>
                <li>If <code><a data-for="RTCDTMFSender" href="#dom-rtcdtmfsender-tonebuffer" class="internalDFN" data-link-type="dfn"><code>toneBuffer</code></a>
                  </code>
                  is an empty string, abort these steps.</li>
                <li>If a <em>Playout task</em> is scheduled to be run; abort these steps; otherwise queue a task that runs the following steps (<em>Playout task</em>):
                  <ol>
                    <li>If <var>sender</var> has been stopped, abort these steps.
                    </li>
                    <li>If <code><a data-for="RTCDTMFSender" href="#dom-rtcdtmfsender-tonebuffer" class="internalDFN" data-link-type="dfn"><code>toneBuffer</code></a>
                      </code> is an empty string, fire an event named <code><a href="#event-RTCDTMFSender-tonechange" class="internalDFN" data-link-type="dfn"><code>tonechange</code></a>
                      </code> with an empty string at the <code><a href="#idl-def-rtcdtmfsender" class="internalDFN" data-link-type="dfn"><code>RTCDTMFSender</code></a>
                      </code>
                      object and abort these steps.</li>
                    <li>Remove the first character from <code><a data-for="RTCDTMFSender" href="#dom-rtcdtmfsender-tonebuffer" class="internalDFN" data-link-type="dfn"><code>toneBuffer</code></a>
                      </code> and let that character be <var>tone</var>.</li>
                    <li>Start playout of <var>tone</var> for <code>duration</code> ms on the associated RTP media stream, using the appropriate codec.</li>
                    <li>Queue a task to be executed in <code>duration</code> + <code>interToneGap</code> ms from now that runs the steps labelled <em>Playout task</em>.</li>
                    <li>Fire an event named <code><a href="#event-RTCDTMFSender-tonechange" class="internalDFN" data-link-type="dfn"><code>tonechange</code></a>
                      </code> with a string consisting of <var>tone</var> at the
                      <code><a href="#idl-def-rtcdtmfsender" class="internalDFN" data-link-type="dfn"><code>RTCDTMFSender</code></a>
                      </code> object.</li>
                  </ol>
                </li>
              </ol>
              <p>Calling <code><a data-for="RTCDTMFSender" href="#dom-rtcdtmfsender-insertdtmf" class="internalDFN" data-link-type="dfn"><code>insertDTMF</code></a>
                </code> with an empty tones parameter can be used to cancel all tones queued to play after the currently playing tone.</p>
              <table class="parameters">
                <tbody>
                  <tr>
                    <th>Parameter</th>
                    <th>Type</th>
                    <th>Nullable</th>
                    <th>Optional</th>
                    <th>Description</th>
                  </tr>
                  <tr>
                    <td class="prmName">tones</td>
                    <td class="prmType"><code>DOMString</code></td>
                    <td class="prmNullFalse"><span role="img" aria-label="False">âœ˜</span></td>
                    <td class="prmOptFalse"><span role="img" aria-label="False">âœ˜</span></td>
                    <td class="prmDesc"></td>
                  </tr>
                  <tr>
                    <td class="prmName">duration</td>
                    <td class="prmType"><code>unsigned long = 100</code></td>
                    <td class="prmNullFalse"><span role="img" aria-label="False">âœ˜</span></td>
                    <td class="prmOptTrue"><span role="img" aria-label="True">âœ”</span></td>
                    <td class="prmDesc"></td>
                  </tr>
                  <tr>
                    <td class="prmName">interToneGap</td>
                    <td class="prmType"><code>unsigned long = 70</code></td>
                    <td class="prmNullFalse"><span role="img" aria-label="False">âœ˜</span></td>
                    <td class="prmOptTrue"><span role="img" aria-label="True">âœ”</span></td>
                    <td class="prmDesc"></td>
                  </tr>
                </tbody>
              </table>
              <div>
                <em>Return type:</em> <code>void</code>
              </div>
            </dd>
          </dl>
        </section>
      </div>
    </section>

    <section id="rtcdtmftonechangeevent" typeof="bibo:Chapter" resource="#rtcdtmftonechangeevent" property="bibo:hasPart">
      <h3 id="h-rtcdtmftonechangeevent" resource="#h-rtcdtmftonechangeevent"><span property="xhv:role" resource="xhv:heading"><span class="secno">7.3 </span>RTCDTMFToneChangeEvent</span>
      </h3>
      <p>The <code><a href="#event-RTCDTMFSender-tonechange" class="internalDFN" data-link-type="dfn"><code>tonechange</code></a>
        </code> event uses the
        <code><a href="#dom-rtcdtmftonechangeevent" class="internalDFN" data-link-type="dfn"><code>RTCDTMFToneChangeEvent</code></a>
        </code> interface.</p>
      <p><dfn id="fire-a-tonechange-event" data-dfn-type="dfn">Firing a tonechange event named
      <var>e</var></dfn> with a <code>DOMString</code> <var>tone</var> means that an event with the name <var>e</var>, which does not bubble (except where otherwise stated) and is not cancelable (except where otherwise stated), and which uses the <code><a href="#dom-rtcdtmftonechangeevent" class="internalDFN" data-link-type="dfn"><code>RTCDTMFToneChangeEvent</code></a>
        </code>
        interface with the <code><a data-for="RTCDTMFToneChangeEvent" href="#dom-rtcdtmftonechangeevent-tone" class="internalDFN" data-link-type="dfn"><code>tone</code></a>
        </code> attribute set to
        <var>tone</var>, <em class="rfc2119" title="MUST">MUST</em> be created and dispatched at the given target.</p>
      <div>
        <pre class="def idl"><span class="idlInterface" id="idl-def-rtcdtmftonechangeevent" data-idl="" data-title="RTCDTMFToneChangeEvent">[<span class="idlCtor"><span class="extAttrName">Constructor</span>(<span class="idlParam"><span class="idlParamType">DOMString</span> <span class="idlParamName">type</span></span>, <span class="idlParam"><span class="idlParamType"><a href="#idl-def-rtcdtmftonechangeeventinit" class="internalDFN" data-link-type="dfn"><code>RTCDTMFToneChangeEventInit</code></a></span> <span class="idlParamName">eventInitDict</span></span>)</span>]
interface <span class="idlInterfaceID"><a data-lt="RTCDTMFToneChangeEvent" href="#dom-rtcdtmftonechangeevent" class="internalDFN" data-link-type="dfn" data-for=""><code>RTCDTMFToneChangeEvent</code></a></span> : <span class="idlSuperclass"><a href="#dfn-event" class="internalDFN" data-link-type="dfn">Event</a></span> {
<span class="idlAttribute" id="idl-def-rtcdtmftonechangeevent-tone" data-idl="" data-title="tone" data-dfn-for="rtcdtmftonechangeevent">    readonly attribute <span class="idlAttrType">DOMString</span> <span class="idlAttrName"><a data-lt="tone" href="#dom-rtcdtmftonechangeevent-tone" class="internalDFN" data-link-type="dfn" data-for="RTCDTMFToneChangeEvent"><code>tone</code></a></span>;</span>
};</span></pre>

        <section typeof="bibo:Chapter" resource="#constructors-7" property="bibo:hasPart">
          <h4 id="constructors-7" resource="#constructors-7"><span property="xhv:role" resource="xhv:heading">Constructors</span></h4>
          <dl data-link-for="RTCDTMFToneChangeEvent" data-dfn-for="RTCDTMFToneChangeEvent" class="constructors">
            <dt><dfn data-dfn-for="" data-dfn-type="dfn" id="dom-rtcdtmftonechangeevent" data-idl=""><code>RTCDTMFToneChangeEvent</code></dfn></dt>
            <dd>
              readonly attribute DOMString tone
              <table class="parameters">
                <tbody>
                  <tr>
                    <th>Parameter</th>
                    <th>Type</th>
                    <th>Nullable</th>
                    <th>Optional</th>
                    <th>Description</th>
                  </tr>
                  <tr>
                    <td class="prmName">type</td>
                    <td class="prmType"><code>DOMString</code></td>
                    <td class="prmNullFalse"><span role="img" aria-label="False">âœ˜</span></td>
                    <td class="prmOptFalse"><span role="img" aria-label="False">âœ˜</span></td>
                    <td class="prmDesc"></td>
                  </tr>
                  <tr>
                    <td class="prmName">eventInitDict</td>
                    <td class="prmType">
                      <code>RTCDTMFToneChangeEventInit</code></td>
                    <td class="prmNullFalse"><span role="img" aria-label="False">âœ˜</span></td>
                    <td class="prmOptFalse"><span role="img" aria-label="False">âœ˜</span></td>
                    <td class="prmDesc"></td>
                  </tr>
                </tbody>
              </table>
            </dd>
          </dl>
        </section>

        <section typeof="bibo:Chapter" resource="#attributes-20" property="bibo:hasPart">
          <h4 id="attributes-20" resource="#attributes-20"><span property="xhv:role" resource="xhv:heading">Attributes</span></h4>
          <dl data-link-for="RTCDTMFToneChangeEvent" data-dfn-for="RTCDTMFToneChangeEvent" class="attributes">
            <dt><code>tone</code> of type <span class="idlAttrType">DOMString</span>, readonly</dt>
            <dd>
              <p>The <dfn data-dfn-for="rtcdtmftonechangeevent" data-dfn-type="dfn" id="dom-rtcdtmftonechangeevent-tone" data-idl=""><code>tone</code></dfn> attribute contains the character for the tone that has just begun playout (see
                <code>insertDTMF</code> ). If the value is the empty string, it indicates that the <code><a data-for="RTCDTMFSender" href="#dom-rtcdtmfsender-tonebuffer" class="internalDFN" data-link-type="dfn"><code>toneBuffer</code></a>
                </code> is an empty string and that the previous tones have completed playback.</p>
            </dd>
          </dl>
        </section>
      </div>
      <div>
        <pre class="def idl"><span class="idlDictionary" id="idl-def-rtcdtmftonechangeeventinit" data-idl="" data-title="RTCDTMFToneChangeEventInit">dictionary <span class="idlDictionaryID">RTCDTMFToneChangeEventInit</span> : <span class="idlSuperclass">EventInit</span> {
<span class="idlMember" id="idl-def-rtcdtmftonechangeeventinit-tone" data-idl="" data-title="tone" data-dfn-for="rtcdtmftonechangeeventinit">    required <span class="idlMemberType">DOMString</span> <span class="idlMemberName"><a data-lt="tone" href="#dom-rtcdtmftonechangeeventinit-tone" class="internalDFN" data-link-type="dfn" data-for="RTCDTMFToneChangeEventInit"><code>tone</code></a></span>;</span>
};</span></pre>

        <section typeof="bibo:Chapter" resource="#dictionary-rtcdtmftonechangeeventinit-members" property="bibo:hasPart">
          <h4 id="dictionary-rtcdtmftonechangeeventinit-members" resource="#dictionary-rtcdtmftonechangeeventinit-members"><span property="xhv:role" resource="xhv:heading">Dictionary <a class="idlType internalDFN" href="#idl-def-rtcdtmftonechangeeventinit" data-link-type="dfn"><code>RTCDTMFToneChangeEventInit</code></a>
          Members</span></h4>
          <dl data-link-for="RTCDTMFToneChangeEventInit" data-dfn-for="RTCDTMFToneChangeEventInit" class="dictionary-members">
            <dt><dfn data-dfn-for="rtcdtmftonechangeeventinit" data-dfn-type="dfn" id="dom-rtcdtmftonechangeeventinit-tone" data-idl=""><code>tone</code></dfn> of type <span class="idlMemberType">DOMString</span></dt>
            <dd>
              <p>The <code>tone</code> attribute contains the character for the tone that has just begun playout (see
                <code>insertDTMF</code> ). If the value is the empty string, it indicates that the previous tone has completed playback.
              </p>
            </dd>
          </dl>
        </section>
      </div>
    </section>
  </section>

  <section typeof="bibo:Chapter" resource="#sec.stats-model" property="bibo:hasPart">
    <!--OddPage-->
    <h2 id="sec.stats-model" resource="#sec.stats-model"><span property="xhv:role" resource="xhv:heading"><span class="secno">8. </span>Statistics Model</span>
    </h2>

    <section id="introduction-1" typeof="bibo:Chapter" resource="#introduction-1" property="bibo:hasPart">
      <h3 id="h-introduction-1" resource="#h-introduction-1"><span property="xhv:role" resource="xhv:heading"><span class="secno">8.1 </span>Introduction</span>
      </h3>
      <p>The basic statistics model is that the browser maintains a set of statistics referenced by a <dfn id="stats-selector" data-dfn-type="dfn">selector</dfn>. The selector may, for example, be a <code>MediaStreamTrack</code>. For a track to be a valid selector, it <em class="rfc2119" title="MUST">MUST</em> be a <code>MediaStreamTrack</code> that is sent or received by the <code><a href="#dom-rtcpeerconnection" class="internalDFN" data-link-type="dfn"><code>RTCPeerConnection</code></a>
        </code>
        object on which the stats request was issued. The calling Web application provides the selector to the <code><a data-for="RTCPeerConnection" href="#widl-RTCPeerConnection-getStats-Promise-RTCStatsReport--MediaStreamTrack-selector" class="internalDFN" data-link-type="dfn">getStats()</a></code> method and the browser emits (in the JavaScript) a set of statistics that it believes is relevant to the selector.</p>
      <div class="issue" id="issue-2">
        <div class="issue-title marker" aria-level="4" role="heading" id="h-issue2"><span>Issue 2</span></div>
        <div class="">
          Evaluate the need for other selectors than MediaStreamTrack.
        </div>
      </div>
      <p>The statistics returned are designed in such a way that repeated queries can be linked by the <code><a href="#idl-def-rtcstats" class="internalDFN" data-link-type="dfn"><code>RTCStats</code></a>
        </code> <a data-for="RTCStats" href="#dom-rtcstats-id" class="internalDFN" data-link-type="dfn"><code>id</code></a> dictionary member. Thus, a Web application can make measurements over a given time period by requesting measurements at the beginning and end of that period.</p>
    </section>

    <section id="rtcpeerconnection-interface-extensions-2" typeof="bibo:Chapter" resource="#rtcpeerconnection-interface-extensions-2" property="bibo:hasPart">
      <h3 id="h-rtcpeerconnection-interface-extensions-2" resource="#h-rtcpeerconnection-interface-extensions-2"><span property="xhv:role" resource="xhv:heading"><span class="secno">8.2 </span>RTCPeerConnection Interface Extensions</span>
      </h3>
      <p>The Statistics API extends the <code><a href="#dom-rtcpeerconnection" class="internalDFN" data-link-type="dfn"><code>RTCPeerConnection</code></a>
        </code>
        interface as described below.</p>
      <div>
        <pre class="def idl"><span class="idlInterface" id="idl-def-rtcpeerconnection-partial-5" data-idl="" data-title="RTCPeerConnection">partial interface <span class="idlInterfaceID"><a data-lt="RTCPeerConnection" href="#dom-rtcpeerconnection" class="internalDFN" data-link-type="dfn" data-for=""><code>RTCPeerConnection</code></a></span> {
<span class="idlMethod" id="idl-def-rtcpeerconnection-getstats!overload-1(optional-mediastreamtrack?)" data-idl="" data-title="getStats" data-dfn-for="rtcpeerconnection">    <span class="idlMethType">Promise&lt;<a href="#idl-def-rtcstatsreport" class="internalDFN" data-link-type="dfn"><code>RTCStatsReport</code></a>&gt;</span> <span class="idlMethName">getStats</span>(<span class="idlParam">optional <span class="idlParamType"><a href="#dom-mediastreamtrack" class="internalDFN" data-link-type="dfn"><code>MediaStreamTrack</code></a>?</span> <span class="idlParamName">selector</span> = <span class="idlDefaultValue">null</span></span>);</span>
};</span></pre>

        <section typeof="bibo:Chapter" resource="#methods-13" property="bibo:hasPart">
          <h4 id="methods-13" resource="#methods-13"><span property="xhv:role" resource="xhv:heading">Methods</span></h4>
          <dl data-link-for="RTCPeerConnection" data-dfn-for="RTCPeerConnection" class="methods">
            <dt><code>getStats</code></dt>
            <dd>
              <p>Gathers stats for the given <a href="#stats-selector" class="internalDFN" data-link-type="dfn">selector</a> and reports the result asynchronously.</p>
              <p>When the <dfn id="widl-RTCPeerConnection-getStats-Promise-RTCStatsReport--MediaStreamTrack-selector" data-dfn-type="dfn">
              <code>getStats()</code></dfn> method is invoked, the user agent
                <em class="rfc2119" title="MUST">MUST</em> run the following steps:</p>
              <ol>
                <li>
                  <p>Let <var>selectorArg</var> be the methods first argument.
                  </p>
                </li>
                <li>
                  <p>If <var>selectorArg</var> is neither <code>null</code> nor a valid <a href="#stats-selector" class="internalDFN" data-link-type="dfn">selector</a>, return a promise rejected with a
                    <code>TypeError</code>.</p>
                </li>
                <li>
                  <p>Let <var>p</var> be a new promise.</p>
                </li>
                <li>
                  <p>Run the following steps in parallel:</p>
                  <ol>
                    <li>
                      <p>Start gathering the stats indicated by
                        <var>selectorArg</var>. If <var>selectorArg</var> is null, stats <em class="rfc2119" title="MUST">MUST</em> be gathered for the whole
                        <code><a href="#dom-rtcpeerconnection" class="internalDFN" data-link-type="dfn"><code>RTCPeerConnection</code></a>
                        </code> object.</p>
                    </li>
                    <li>
                      <p>When the relevant stats have been gathered, resolve
                        <var>p</var> with a new
                        <code><a href="#idl-def-rtcstatsreport" class="internalDFN" data-link-type="dfn"><code>RTCStatsReport</code></a>
                        </code> object, representing the gathered stats.</p>
                    </li>
                  </ol>
                </li>
                <li>
                  <p>Return <var>p</var>.</p>
                </li>
              </ol>
              <table class="parameters">
                <tbody>
                  <tr>
                    <th>Parameter</th>
                    <th>Type</th>
                    <th>Nullable</th>
                    <th>Optional</th>
                    <th>Description</th>
                  </tr>
                  <tr>
                    <td class="prmName">selector</td>
                    <td class="prmType"><code>MediaStreamTrack =
                    null</code></td>
                    <td class="prmNullTrue"><span role="img" aria-label="True">âœ”</span></td>
                    <td class="prmOptTrue"><span role="img" aria-label="True">âœ”</span></td>
                    <td class="prmDesc"></td>
                  </tr>
                </tbody>
              </table>
              <div>
                <em>Return type:</em>
                <code>Promise&lt;RTCStatsReport&gt;</code>
              </div>
            </dd>
          </dl>
        </section>
      </div>
    </section>

    <section id="rtcstatscallback" typeof="bibo:Chapter" resource="#rtcstatscallback" property="bibo:hasPart">
      <h3 id="h-rtcstatscallback" resource="#h-rtcstatscallback"><span property="xhv:role" resource="xhv:heading"><span class="secno">8.3 </span>RTCStatsCallback</span>
      </h3>
      <div>
        <pre class="def idl"><span class="idlCallback" id="idl-def-rtcstatscallback" data-idl="" data-title="RTCStatsCallback">callback <span class="idlCallbackID">RTCStatsCallback</span> = <span class="idlCallbackType">void</span> (<span class="idlParam"><span class="idlParamType"><a href="#idl-def-rtcstatsreport" class="internalDFN" data-link-type="dfn"><code>RTCStatsReport</code></a></span> <span class="idlParamName">report</span></span>);</span></pre>

        <section typeof="bibo:Chapter" resource="#callback-rtcstatscallback-parameters" property="bibo:hasPart">
          <h4 id="callback-rtcstatscallback-parameters" resource="#callback-rtcstatscallback-parameters"><span property="xhv:role" resource="xhv:heading">Callback <a class="idlType internalDFN" href="#idl-def-rtcstatscallback" data-link-type="dfn"><code>RTCStatsCallback</code></a> Parameters</span></h4>
          <dl data-link-for="RTCStatsCallback" data-dfn-for="RTCStatsCallback" class="callback-members">
            <dt><code>report</code> of type <span class="idlMemberType"><a href="#idl-def-rtcstatsreport" class="internalDFN" data-link-type="dfn"><code>RTCStatsReport</code></a></span></dt>
            <dd>
              <p>A <code><a href="#idl-def-rtcstatsreport" class="internalDFN" data-link-type="dfn"><code>RTCStatsReport</code></a>
                </code> representing the gathered stats.
              </p>
            </dd>
          </dl>
        </section>
      </div>
    </section>

    <section id="rtcstatsreport-object" typeof="bibo:Chapter" resource="#rtcstatsreport-object" property="bibo:hasPart">
      <h3 id="h-rtcstatsreport-object" resource="#h-rtcstatsreport-object"><span property="xhv:role" resource="xhv:heading"><span class="secno">8.4 </span>RTCStatsReport Object</span>
      </h3>
      <p>The <code><a data-for="RTCPeerConnection" href="#widl-RTCPeerConnection-getStats-Promise-RTCStatsReport--MediaStreamTrack-selector" class="internalDFN" data-link-type="dfn">getStats()</a></code> method delivers a successful result in the form of an
        <code><a href="#idl-def-rtcstatsreport" class="internalDFN" data-link-type="dfn"><code>RTCStatsReport</code></a>
        </code> object. An
        <code><a href="#idl-def-rtcstatsreport" class="internalDFN" data-link-type="dfn"><code>RTCStatsReport</code></a>
        </code> object is a map between strings that identify the inspected objects (<a data-for="RTCStats" href="#dom-rtcstats-id" class="internalDFN" data-link-type="dfn"><code><code>id</code></code></a> attribute in <code>RTCStats</code> instances), and their corresponding <code><a href="#idl-def-rtcstats" class="internalDFN" data-link-type="dfn"><code>RTCStats</code></a>
        </code>-derived dictionaries.
      </p>
      <p>An <code><a href="#idl-def-rtcstatsreport" class="internalDFN" data-link-type="dfn"><code>RTCStatsReport</code></a>
        </code> may be composed of several
        <code><a href="#idl-def-rtcstats" class="internalDFN" data-link-type="dfn"><code>RTCStats</code></a>
        </code>-derived dictionaries, each reporting stats for one underlying object that the implementation thinks is relevant for the <a href="#stats-selector" class="internalDFN" data-link-type="dfn">selector</a>. One achieves the total for the <a href="#stats-selector" class="internalDFN" data-link-type="dfn">selector</a> by summing over all the stats of a certain type; for instance, if a
        <code>MediaStreamTrack</code> is carried by multiple SSRCs over the network, the <code><a href="#idl-def-rtcstatsreport" class="internalDFN" data-link-type="dfn"><code>RTCStatsReport</code></a>
        </code> may contain one
        <code>RTCStats</code>-derived dictionary per SSRC (which can be distinguished by the value of the "ssrc" stats attribute).</p>
      <div>
        <pre class="def idl"><span class="idlInterface" id="idl-def-rtcstatsreport" data-idl="" data-title="RTCStatsReport">interface <span class="idlInterfaceID">RTCStatsReport</span> {
<span class="idlMaplike" id="idl-def-rtcstatsreport-maplike" data-idl="" data-title="maplike" data-dfn-for="rtcstatsreport">    readonly maplike&lt;DOMString, object&gt;;</span>
};</span></pre>
        <p>This interface has "entries", "forEach", "get", "has", "keys", "values", @@iterator methods and a "size" getter brought by
          <code>readonly maplike</code>.</p>
        <p>Use these to retrieve the various dictionaries descended from
          <code><a href="#idl-def-rtcstats" class="internalDFN" data-link-type="dfn"><code>RTCStats</code></a>
          </code> that this stats report is composed of. The set of supported property names [<cite><a class="bibref" href="#bib-WEBIDL-1">WEBIDL-1</a></cite>] is defined as the ids of all the <code><a href="#idl-def-rtcstats" class="internalDFN" data-link-type="dfn"><code>RTCStats</code></a>
          </code>-derived dictionaries that have been generated for this stats report.</p>
      </div>
    </section>

    <section id="rtcstats-dictionary" typeof="bibo:Chapter" resource="#rtcstats-dictionary" property="bibo:hasPart">
      <h3 id="h-rtcstats-dictionary" resource="#h-rtcstats-dictionary"><span property="xhv:role" resource="xhv:heading"><span class="secno">8.5 </span>RTCStats Dictionary</span>
      </h3>
      <p>An <code><a href="#idl-def-rtcstats" class="internalDFN" data-link-type="dfn"><code>RTCStats</code></a>
        </code> dictionary represents the stats gathered by inspecting a specific object relevant to a <a href="#stats-selector" class="internalDFN" data-link-type="dfn">selector</a>. The <code><a href="#idl-def-rtcstats" class="internalDFN" data-link-type="dfn"><code>RTCStats</code></a>
        </code> dictionary is a base type that specifies as set of default attributes, such as <a data-for="RTCStats" href="#dom-rtcstats-timestamp" class="internalDFN" data-link-type="dfn"><code>timestamp</code></a> and <a data-for="RTCStats" href="#dom-rtcstats-type" class="internalDFN" data-link-type="dfn"><code>type</code></a>. Specific stats are added by extending the <code><a href="#idl-def-rtcstats" class="internalDFN" data-link-type="dfn"><code>RTCStats</code></a>
        </code>
        dictionary.</p>
      <p>Note that while stats names are standardized, any given implementation may be using experimental values or values not yet known to the Web application. Thus, applications <em class="rfc2119" title="MUST">MUST</em> be prepared to deal with unknown stats.
      </p>
      <p>Statistics need to be synchronized with each other in order to yield reasonable values in computation; for instance, if "bytesSent" and "packetsSent" are both reported, they both need to be reported over the same interval, so that "average packet size" can be computed as "bytes / packets" - if the intervals are different, this will yield errors. Thus implementations <em class="rfc2119" title="MUST">MUST</em> return synchronized values for all stats in an
        <code><a href="#idl-def-rtcstats" class="internalDFN" data-link-type="dfn"><code>RTCStats</code></a>
        </code>-derived dictionary.</p>
      <div>
        <pre class="def idl"><span class="idlDictionary" id="idl-def-rtcstats" data-idl="" data-title="RTCStats">dictionary <span class="idlDictionaryID">RTCStats</span> {
<span class="idlMember" id="idl-def-rtcstats-timestamp" data-idl="" data-title="timestamp" data-dfn-for="rtcstats">    <span class="idlMemberType">DOMHighResTimeStamp</span> <span class="idlMemberName"><a data-lt="timestamp" href="#dom-rtcstats-timestamp" class="internalDFN" data-link-type="dfn" data-for="RTCStats"><code>timestamp</code></a></span>;</span>
<span class="idlMember" id="idl-def-rtcstats-type" data-idl="" data-title="type" data-dfn-for="rtcstats">    <span class="idlMemberType"><a href="#idl-def-rtcstatstype" class="internalDFN" data-link-type="dfn"><code>RTCStatsType</code></a></span>        <span class="idlMemberName"><a data-lt="type" href="#dom-rtcstats-type" class="internalDFN" data-link-type="dfn" data-for="RTCStats"><code>type</code></a></span>;</span>
<span class="idlMember" id="idl-def-rtcstats-id" data-idl="" data-title="id" data-dfn-for="rtcstats">    <span class="idlMemberType">DOMString</span>           <span class="idlMemberName"><a data-lt="id" href="#dom-rtcstats-id" class="internalDFN" data-link-type="dfn" data-for="RTCStats"><code>id</code></a></span>;</span>
};</span></pre>

        <section typeof="bibo:Chapter" resource="#dictionary-rtcstats-members" property="bibo:hasPart">
          <h4 id="dictionary-rtcstats-members" resource="#dictionary-rtcstats-members"><span property="xhv:role" resource="xhv:heading">Dictionary <a class="idlType internalDFN" href="#idl-def-rtcstats" data-link-type="dfn"><code>RTCStats</code></a> Members</span></h4>
          <dl data-link-for="RTCStats" data-dfn-for="RTCStats" class="dictionary-members">
            <dt><code>timestamp</code> of type <span class="idlMemberType">DOMHighResTimeStamp</span></dt>
            <dd>
              <p>The <dfn data-dfn-for="rtcstats" data-dfn-type="dfn" id="dom-rtcstats-timestamp" data-idl=""><code>timestamp</code></dfn>, of type
                <code>DOMHighResTimeStamp</code> [<cite><a class="bibref" href="#bib-HIGHRES-TIME">HIGHRES-TIME</a></cite>], associated with this object. The time is relative to the UNIX epoch (Jan 1, 1970, UTC).</p>
            </dd>
            <dt><code>type</code> of type <span class="idlMemberType"><a href="#idl-def-rtcstatstype" class="internalDFN" data-link-type="dfn"><code>RTCStatsType</code></a></span></dt>
            <dd>
              <p>The type of this object.</p>
              <p>The <dfn data-dfn-for="rtcstats" data-dfn-type="dfn" id="dom-rtcstats-type" data-idl=""><code>type</code></dfn> attribute <em class="rfc2119" title="MUST">MUST</em> be initialized to the name of the most specific type this
                <code><a href="#idl-def-rtcstats" class="internalDFN" data-link-type="dfn"><code>RTCStats</code></a>
                </code> dictionary represents.</p>
            </dd>
            <dt><code>id</code> of type <span class="idlMemberType">DOMString</span></dt>
            <dd>
              <p>A unique <dfn data-dfn-for="rtcstats" data-dfn-type="dfn" id="dom-rtcstats-id" data-idl=""><code>id</code></dfn> that is associated with the object that was inspected to produce this
                <code><a href="#idl-def-rtcstats" class="internalDFN" data-link-type="dfn"><code>RTCStats</code></a>
                </code> object. Two
                <code><a href="#idl-def-rtcstats" class="internalDFN" data-link-type="dfn"><code>RTCStats</code></a>
                </code> objects, extracted from two different <code><a href="#idl-def-rtcstatsreport" class="internalDFN" data-link-type="dfn"><code>RTCStatsReport</code></a>
                </code> objects, <em class="rfc2119" title="MUST">MUST</em> have the same id if they were produced by inspecting the same underlying object. User agents are free to pick any format for the id as long as it meets the requirements above.</p>
              <div class="issue" id="issue-3">
                <div class="issue-title marker" aria-level="5" role="heading" id="h-issue3"><span>Issue 3</span></div>
                <div class="">
                  Consider naming id something that indicates that the id refers to the underlying object that was inspected to produce the stats, instead of being an id for the JavaScript object. Suggestions: statsObjectId, reporterId, srcId.
                </div>
              </div>
            </dd>
          </dl>
        </section>
      </div>
      <div>
        <pre class="def idl"><span class="idlEnum" id="idl-def-rtcstatstype" data-idl="" data-title="RTCStatsType">enum <span class="idlEnumID">RTCStatsType</span> {
    "<a href="#dom-rtcstatstype-inboundrtp" class="idlEnumItem">inboundrtp</a>",
    "<a href="#dom-rtcstatstype-outboundrtp" class="idlEnumItem">outboundrtp</a>"
};</span></pre>
        <table data-link-for="RTCStatsType" data-dfn-for="RTCStatsType" class="simple">
          <tbody>
            <tr>
              <th colspan="2">Enumeration description</th>
            </tr>
            <tr>
              <td><dfn data-dfn-for="rtcstatstype" data-dfn-type="dfn" id="dom-rtcstatstype-inboundrtp" data-idl=""><code>inboundrtp</code></dfn></td>
              <td>Inbound RTP.</td>
            </tr>
            <tr>
              <td><dfn data-dfn-for="rtcstatstype" data-dfn-type="dfn" id="dom-rtcstatstype-outboundrtp" data-idl=""><code>outboundrtp</code></dfn></td>
              <td>Outbound RTP.</td>
            </tr>
          </tbody>
        </table>
      </div>
    </section>

    <section id="derived-stats-dictionaries" typeof="bibo:Chapter" resource="#derived-stats-dictionaries" property="bibo:hasPart">
      <h3 id="h-derived-stats-dictionaries" resource="#h-derived-stats-dictionaries"><span property="xhv:role" resource="xhv:heading"><span class="secno">8.6 </span>Derived Stats Dictionaries</span>
      </h3>
      <div>
        <pre class="def idl"><span class="idlDictionary" id="idl-def-rtcrtpstreamstats" data-idl="" data-title="RTCRTPStreamStats">dictionary <span class="idlDictionaryID">RTCRTPStreamStats</span> : <span class="idlSuperclass"><a href="#idl-def-rtcstats" class="internalDFN" data-link-type="dfn"><code>RTCStats</code></a></span> {
<span class="idlMember" id="idl-def-rtcrtpstreamstats-ssrc" data-idl="" data-title="ssrc" data-dfn-for="rtcrtpstreamstats">    <span class="idlMemberType">unsigned long</span> <span class="idlMemberName"><a data-lt="ssrc" href="#dom-rtcrtpstreamstats-ssrc" class="internalDFN" data-link-type="dfn" data-for="RTCRTPStreamStats"><code>ssrc</code></a></span>;</span>
<span class="idlMember" id="idl-def-rtcrtpstreamstats-remoteid" data-idl="" data-title="remoteId" data-dfn-for="rtcrtpstreamstats">    <span class="idlMemberType">DOMString</span>     <span class="idlMemberName"><a data-lt="remoteId" href="#dom-rtcrtpstreamstats-remoteid" class="internalDFN" data-link-type="dfn" data-for="RTCRTPStreamStats"><code>remoteId</code></a></span>;</span>
};</span></pre>

        <section typeof="bibo:Chapter" resource="#dictionary-rtcrtpstreamstats-members" property="bibo:hasPart">
          <h4 id="dictionary-rtcrtpstreamstats-members" resource="#dictionary-rtcrtpstreamstats-members"><span property="xhv:role" resource="xhv:heading">Dictionary <a class="idlType internalDFN" href="#idl-def-rtcrtpstreamstats" data-link-type="dfn"><code>RTCRTPStreamStats</code></a> Members</span></h4>
          <dl data-link-for="RTCRTPStreamStats" data-dfn-for="RTCRTPStreamStats" class="dictionary-members">
            <dt><dfn data-dfn-for="rtcrtpstreamstats" data-dfn-type="dfn" id="dom-rtcrtpstreamstats-ssrc" data-idl=""><code>ssrc</code></dfn> of type <span class="idlMemberType">unsigned long</span></dt>
            <dd>
              <p>...</p>
            </dd>
            <dt><dfn data-dfn-for="rtcrtpstreamstats" data-dfn-type="dfn" id="dom-rtcrtpstreamstats-remoteid" data-idl=""><code>remoteId</code></dfn> of type <span class="idlMemberType">DOMString</span></dt>
            <dd>
              <p>The <code>remoteId</code> can be used to look up the corresponding <code><a href="#idl-def-rtcstats" class="internalDFN" data-link-type="dfn"><code>RTCStats</code></a>
                </code> object that represents stats reported by the other peer.</p>
            </dd>
          </dl>
        </section>
      </div>
      <div>
        <pre class="def idl"><span class="idlDictionary" id="idl-def-rtcinboundrtpstreamstats" data-idl="" data-title="RTCInboundRTPStreamStats">dictionary <span class="idlDictionaryID">RTCInboundRTPStreamStats</span> : <span class="idlSuperclass"><a href="#idl-def-rtcrtpstreamstats" class="internalDFN" data-link-type="dfn"><code>RTCRTPStreamStats</code></a></span> {
<span class="idlMember" id="idl-def-rtcinboundrtpstreamstats-packetsreceived" data-idl="" data-title="packetsReceived" data-dfn-for="rtcinboundrtpstreamstats">    <span class="idlMemberType">unsigned long</span> <span class="idlMemberName"><a data-lt="packetsReceived" href="#dom-rtcinboundrtpstreamstats-packetsreceived" class="internalDFN" data-link-type="dfn" data-for="RTCInboundRTPStreamStats"><code>packetsReceived</code></a></span>;</span>
<span class="idlMember" id="idl-def-rtcinboundrtpstreamstats-bytesreceived" data-idl="" data-title="bytesReceived" data-dfn-for="rtcinboundrtpstreamstats">    <span class="idlMemberType">unsigned long</span> <span class="idlMemberName"><a data-lt="bytesReceived" href="#dom-rtcinboundrtpstreamstats-bytesreceived" class="internalDFN" data-link-type="dfn" data-for="RTCInboundRTPStreamStats"><code>bytesReceived</code></a></span>;</span>
};</span></pre>

        <section typeof="bibo:Chapter" resource="#dictionary-rtcinboundrtpstreamstats-members" property="bibo:hasPart">
          <h4 id="dictionary-rtcinboundrtpstreamstats-members" resource="#dictionary-rtcinboundrtpstreamstats-members"><span property="xhv:role" resource="xhv:heading">Dictionary <a class="idlType internalDFN" href="#idl-def-rtcinboundrtpstreamstats" data-link-type="dfn"><code>RTCInboundRTPStreamStats</code></a>
          Members</span></h4>
          <dl data-link-for="RTCInboundRTPStreamStats" data-dfn-for="RTCInboundRTPStreamStats" class="dictionary-members">
            <dt><dfn data-dfn-for="rtcinboundrtpstreamstats" data-dfn-type="dfn" id="dom-rtcinboundrtpstreamstats-packetsreceived" data-idl=""><code>packetsReceived</code></dfn> of type <span class="idlMemberType">unsigned long</span></dt>
            <dd>
              <p>...</p>
            </dd>
            <dt><dfn data-dfn-for="rtcinboundrtpstreamstats" data-dfn-type="dfn" id="dom-rtcinboundrtpstreamstats-bytesreceived" data-idl=""><code>bytesReceived</code></dfn> of type <span class="idlMemberType">unsigned long</span></dt>
            <dd>
              <p>...</p>
            </dd>
          </dl>
        </section>
      </div>
      <div>
        <pre class="def idl"><span class="idlDictionary" id="idl-def-rtcoutboundrtpstreamstats" data-idl="" data-title="RTCOutboundRTPStreamStats">dictionary <span class="idlDictionaryID">RTCOutboundRTPStreamStats</span> : <span class="idlSuperclass"><a href="#idl-def-rtcrtpstreamstats" class="internalDFN" data-link-type="dfn"><code>RTCRTPStreamStats</code></a></span> {
<span class="idlMember" id="idl-def-rtcoutboundrtpstreamstats-packetssent" data-idl="" data-title="packetsSent" data-dfn-for="rtcoutboundrtpstreamstats">    <span class="idlMemberType">unsigned long</span> <span class="idlMemberName"><a data-lt="packetsSent" href="#dom-rtcoutboundrtpstreamstats-packetssent" class="internalDFN" data-link-type="dfn" data-for="RTCOutboundRTPStreamStats"><code>packetsSent</code></a></span>;</span>
<span class="idlMember" id="idl-def-rtcoutboundrtpstreamstats-bytessent" data-idl="" data-title="bytesSent" data-dfn-for="rtcoutboundrtpstreamstats">    <span class="idlMemberType">unsigned long</span> <span class="idlMemberName"><a data-lt="bytesSent" href="#dom-rtcoutboundrtpstreamstats-bytessent" class="internalDFN" data-link-type="dfn" data-for="RTCOutboundRTPStreamStats"><code>bytesSent</code></a></span>;</span>
};</span></pre>

        <section typeof="bibo:Chapter" resource="#dictionary-rtcoutboundrtpstreamstats-members" property="bibo:hasPart">
          <h4 id="dictionary-rtcoutboundrtpstreamstats-members" resource="#dictionary-rtcoutboundrtpstreamstats-members"><span property="xhv:role" resource="xhv:heading">Dictionary <a class="idlType internalDFN" href="#idl-def-rtcoutboundrtpstreamstats" data-link-type="dfn"><code>RTCOutboundRTPStreamStats</code></a>
          Members</span></h4>
          <dl data-link-for="RTCOutboundRTPStreamStats" data-dfn-for="RTCOutboundRTPStreamStats" class="dictionary-members">
            <dt><dfn data-dfn-for="rtcoutboundrtpstreamstats" data-dfn-type="dfn" id="dom-rtcoutboundrtpstreamstats-packetssent" data-idl=""><code>packetsSent</code></dfn> of type <span class="idlMemberType">unsigned long</span></dt>
            <dd>
              <p>...</p>
            </dd>
            <dt><dfn data-dfn-for="rtcoutboundrtpstreamstats" data-dfn-type="dfn" id="dom-rtcoutboundrtpstreamstats-bytessent" data-idl=""><code>bytesSent</code></dfn> of type <span class="idlMemberType">unsigned long</span></dt>
            <dd>
              <p>...</p>
            </dd>
          </dl>
        </section>
      </div>
    </section>

    <section id="example" typeof="bibo:Chapter" resource="#example" property="bibo:hasPart">
      <h3 id="h-example" resource="#h-example"><span property="xhv:role" resource="xhv:heading"><span class="secno">8.7 </span>Example</span>
      </h3>
      <p>Consider the case where the user is experiencing bad sound and the application wants to determine if the cause of it is packet loss. The following example code might be used:</p>
      <div class="example">
        <div class="example-title marker"><span>Example 7</span></div><pre class="highlight hljs javascript"><span class="hljs-keyword">var</span> baselineReport, currentReport;
<span class="hljs-keyword">var</span> selector = pc.getSenders()[<span class="hljs-number">0</span>].track;

pc.getStats(selector).then(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">report</span>) </span>{
    baselineReport = report;
})
.then(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Promise</span>(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">resolve</span>) </span>{
        setTimeout(resolve, aBit); <span class="hljs-comment">// ... wait a bit</span>
    });
})
.then(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">return</span> pc.getStats(selector);
})
.then(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">report</span>) </span>{
    currentReport = report;
    processStats();
})
.catch(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">error</span>) </span>{
  log(error.toString());
});

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">processStats</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-comment">// compare the elements from the current report with the baseline</span>
    currentReport.forEach (<span class="hljs-function"><span class="hljs-params">now</span> =&gt;</span> {
        <span class="hljs-keyword">if</span> (now.type != <span class="hljs-string">"outboundrtp"</span>)
            <span class="hljs-keyword">return</span>;

        <span class="hljs-comment">// get the corresponding stats from the baseline report</span>
        base = baselineReport.get(now.id);

        <span class="hljs-keyword">if</span> (base) {
            remoteNow = currentReport.get(now.remoteId);
            remoteBase = baselineReport.get(base.remoteId);

            <span class="hljs-keyword">var</span> packetsSent = now.packetsSent - base.packetsSent;
            <span class="hljs-keyword">var</span> packetsReceived = remoteNow.packetsReceived - remoteBase.packetsReceived;

            <span class="hljs-comment">// if fractionLost is &gt; 0.3, we have probably found the culprit</span>
            <span class="hljs-keyword">var</span> fractionLost = (packetsSent - packetsReceived) / packetsSent;
        }
    }
}</pre></div>
    </section>
  </section>

  <section typeof="bibo:Chapter" resource="#sec.identity-proxy" property="bibo:hasPart">
    <!--OddPage-->
    <h2 id="sec.identity-proxy" resource="#sec.identity-proxy"><span property="xhv:role" resource="xhv:heading"><span class="secno">9. </span>Identity</span>
    </h2>

    <section id="identity-provider-interaction" typeof="bibo:Chapter" resource="#identity-provider-interaction" property="bibo:hasPart">
      <h3 id="h-identity-provider-interaction" resource="#h-identity-provider-interaction"><span property="xhv:role" resource="xhv:heading"><span class="secno">9.1 </span>Identity Provider Interaction</span>
      </h3>
      <p>WebRTC offers and answers (and hence the channels established by
        <code><a href="#dom-rtcpeerconnection" class="internalDFN" data-link-type="dfn"><code>RTCPeerConnection</code></a>
        </code> objects) can be authenticated by using a web-based Identity Provider (IdP). The idea is that the entity sending an offer or answer acts as the Authenticating Party (AP) and obtains an identity assertion from the IdP which it attaches to the session description. The consumer of the session description (i.e., the
        <code><a href="#dom-rtcpeerconnection" class="internalDFN" data-link-type="dfn"><code>RTCPeerConnection</code></a>
        </code> on which
        <code>setRemoteDescription</code> is called) acts as the Relying Party (RP) and verifies the assertion.</p>
      <p>The interaction with the IdP is designed to decouple the browser from any particular identity provider; the browser need only know how to load the IdP's JavaScript, the location of which is determined by the IdP's identity, and the generic interface to generating and validating assertions. The IdP provides whatever logic is necessary to bridge the generic protocol to the IdP's specific requirements. Thus, a single browser can support any number of identity protocols, including being forward compatible with IdPs which did not exist at the time the browser was written.</p>

      <section typeof="bibo:Chapter" resource="#sec.identity-proxy-communications" property="bibo:hasPart">
        <h4 id="sec.identity-proxy-communications" resource="#sec.identity-proxy-communications"><span property="xhv:role" resource="xhv:heading"><span class="secno">9.1.1 </span>Identity Provider Selection
          </span>
        </h4>
        <p>An IdP is used to generate an identity assertion as follows:</p>
        <ol>
          <li>If the <code>setIdentityProvider()</code> method has been called, the IdP provided shall be used.</li>
          <li>If the <code>setIdentityProvider()</code> method has not been called, then the user agent <em class="rfc2119" title="MAY">MAY</em> use an IdP configured into the browser.
          </li>
        </ol>
        <p>In order to verify assertions, the IdP domain name and protocol are taken from the <code>domain</code> and <code>protocol</code> fields of the identity assertion.</p>
      </section>

      <section typeof="bibo:Chapter" resource="#sec.create-identity-proxy" property="bibo:hasPart">
        <h4 id="sec.create-identity-proxy" resource="#sec.create-identity-proxy"><span property="xhv:role" resource="xhv:heading"><span class="secno">9.1.2 </span>Instantiating an IdP Proxy</span>
        </h4>
        <p>In order to communicate with the IdP, the user agent loads the IdP JavaScript from the IdP. The URI for the IdP script is a well-known URI formed from the <q>domain</q> and <q>protocol</q> fields, as specified in [<cite><a class="bibref" href="#bib-RTCWEB-SECURITY-ARCH">RTCWEB-SECURITY-ARCH</a></cite>].</p>
        <p>The IdP <em class="rfc2119" title="MAY">MAY</em> generate an HTTP redirect to another "https" origin, the browser <em class="rfc2119" title="MUST">MUST</em> treat a redirect to any other scheme as a fatal error.</p>
        <p>The user agent instantiates an isolated interpreted context, a JavaScript <a href="http://people.mozilla.org/~jorendorff/es6-draft.html#sec-code-realms"><dfn data-dfn-type="dfn" id="dfn-realm">
        realm</dfn></a> that operates in the origin of the loaded JavaScript. Note that a redirect will change the origin of the loaded script.</p>
        <p>The <a href="#dfn-realm" class="internalDFN" data-link-type="dfn">realm</a> is populated with a global that implements both the
          <code><a href="#idl-def-rtcidentityproviderglobalscope" class="internalDFN" data-link-type="dfn"><code>RTCIdentityProviderGlobalScope</code></a>
          </code> and
          <code>WorkerGlobalScope</code> [<cite><a class="bibref" href="#bib-WEBWORKERS">WEBWORKERS</a></cite>] interfaces.</p>
        <p>The user agent provides an instance of
          <code><a href="#idl-def-rtcidentityproviderregistrar" class="internalDFN" data-link-type="dfn"><code>RTCIdentityProviderRegistrar</code></a>
          </code> named
          <var>rtcIdentityProvider</var> in the global scope of the <a href="#dfn-realm" class="internalDFN" data-link-type="dfn">realm</a>. This object is used by the IdP to interact with the user agent.</p>
        <div>
          <pre class="def idl"><span class="idlInterface" id="idl-def-rtcidentityproviderglobalscope" data-idl="" data-title="RTCIdentityProviderGlobalScope">[<span class="extAttr"><span class="extAttrName">Global</span></span>,
 <span class="extAttr"><span class="extAttrName">Exposed</span>=<span class="extAttrRhs">RTCIdentityProviderGlobalScope</span></span>]
interface <span class="idlInterfaceID">RTCIdentityProviderGlobalScope</span> : <span class="idlSuperclass">WorkerGlobalScope</span> {
<span class="idlAttribute" id="idl-def-rtcidentityproviderglobalscope-rtcidentityprovider" data-idl="" data-title="rtcIdentityProvider" data-dfn-for="rtcidentityproviderglobalscope">    readonly attribute <span class="idlAttrType"><a href="#idl-def-rtcidentityproviderregistrar" class="internalDFN" data-link-type="dfn"><code>RTCIdentityProviderRegistrar</code></a></span> <span class="idlAttrName"><a data-lt="rtcIdentityProvider" href="#dom-rtcidentityproviderglobalscope-rtcidentityprovider" class="internalDFN" data-link-type="dfn" data-for="RTCIdentityProviderGlobalScope"><code>rtcIdentityProvider</code></a></span>;</span>
};</span></pre>

          <section typeof="bibo:Chapter" resource="#attributes-21" property="bibo:hasPart">
            <h5 id="attributes-21" resource="#attributes-21"><span property="xhv:role" resource="xhv:heading">Attributes</span></h5>
            <dl data-link-for="RTCIdentityProviderGlobalScope" data-dfn-for="RTCIdentityProviderGlobalScope" class="attributes">
              <dt><dfn data-dfn-for="rtcidentityproviderglobalscope" data-dfn-type="dfn" id="dom-rtcidentityproviderglobalscope-rtcidentityprovider" data-idl=""><code>rtcIdentityProvider</code></dfn> of type
              <span class="idlAttrType"><a href="#idl-def-rtcidentityproviderregistrar" class="internalDFN" data-link-type="dfn"><code>RTCIdentityProviderRegistrar</code></a></span>,
              readonly</dt>
              <dd>This object is used by the IdP to register an
                <code><a href="#dom-rtcidentityproviderglobalscope-rtcidentityprovider" class="internalDFN" data-link-type="dfn"><code>RTCIdentityProvider</code></a>
                </code> instance with the browser.
              </dd>
            </dl>
          </section>
        </div>

        <section typeof="bibo:Chapter" resource="#sec.implement-idp" property="bibo:hasPart">
          <h5 id="sec.implement-idp" resource="#sec.implement-idp"><span property="xhv:role" resource="xhv:heading"><span class="secno">9.1.2.1 </span>Implementing an IdP Securely</span>
          </h5>
          <p>An environment that mimics the identity provider realm can be provided by any script. However, only scripts running in the origin of the IdP are able to generate an identical environment. Other origins can load and run the IdP proxy code, but they will be unable to replicate data that is unique to the origin of the IdP.</p>
          <p>This means that it is critical that an IdP use data that is restricted to its own origin when generating identity assertions. Otherwise, another origin could load the IdP script and use it to impersonate users.</p>
          <p>The data that the IdP script uses could be stored on the client (for example, in <a href="http://www.w3.org/TR/IndexedDB/">IndexedDB</a>) or loaded from servers. Data that is acquired from a server <em class="rfc2119" title="SHOULD">SHOULD</em> require credentials and be protected from cross-origin access.</p>
          <p>There is no risk to the integrity of identity assertions if an IdP validates an identity assertion without using origin-private data.
          </p>
        </section>
      </section>
    </section>

    <section typeof="bibo:Chapter" resource="#sec.register-idp" property="bibo:hasPart">
      <h3 id="sec.register-idp" resource="#sec.register-idp"><span property="xhv:role" resource="xhv:heading"><span class="secno">9.2 </span>Registering an IdP Proxy</span>
      </h3>
      <p>An IdP proxy implements the <code><a href="#idl-def-rtcidentityprovider" class="internalDFN" data-link-type="dfn"><code>RTCIdentityProvider</code></a>
        </code>
        methods, which are the means by which the user agent is able to request that an identity assertion be generated or validated.</p>
      <p>Once instantiated, the IdP script is executed. The IdP <em class="rfc2119" title="MUST">MUST</em> call the
        <code>register()</code> function on the
        <code><a href="#idl-def-rtcidentityproviderregistrar" class="internalDFN" data-link-type="dfn"><code>RTCIdentityProviderRegistrar</code></a>
        </code> instance during script execution. If an IdP is not registered during this script execution, the user agent cannot use the IdP proxy and <em class="rfc2119" title="MUST">MUST</em> fail any future attempt to interact with the IdP.</p>
      <div>
        <pre class="def idl"><span class="idlInterface" id="idl-def-rtcidentityproviderregistrar" data-idl="" data-title="RTCIdentityProviderRegistrar">[<span class="extAttr"><span class="extAttrName">Exposed</span>=<span class="extAttrRhs">RTCIdentityProviderGlobalScope</span></span>]
interface <span class="idlInterfaceID">RTCIdentityProviderRegistrar</span> {
<span class="idlMethod" id="idl-def-rtcidentityproviderregistrar-register(rtcidentityprovider)" data-idl="" data-title="register" data-dfn-for="rtcidentityproviderregistrar">    <span class="idlMethType">void</span> <span class="idlMethName"><a data-lt="register" href="#dom-rtcidentityproviderregistrar-register" class="internalDFN" data-link-type="dfn" data-for="RTCIdentityProviderRegistrar"><code>register</code></a></span>(<span class="idlParam"><span class="idlParamType"><a href="#idl-def-rtcidentityprovider" class="internalDFN" data-link-type="dfn"><code>RTCIdentityProvider</code></a></span> <span class="idlParamName">idp</span></span>);</span>
};</span></pre>

        <section typeof="bibo:Chapter" resource="#methods-14" property="bibo:hasPart">
          <h4 id="methods-14" resource="#methods-14"><span property="xhv:role" resource="xhv:heading">Methods</span></h4>
          <dl data-link-for="RTCIdentityProviderRegistrar" data-dfn-for="RTCIdentityProviderRegistrar" class="methods">
            <dt><dfn data-dfn-for="rtcidentityproviderregistrar" data-dfn-type="dfn" id="dom-rtcidentityproviderregistrar-register" data-idl=""><code>register</code></dfn></dt>
            <dd>
              <p>This method is invoked by the IdP when its script is first executed. This registers <code><a href="#idl-def-rtcidentityprovider" class="internalDFN" data-link-type="dfn"><code>RTCIdentityProvider</code></a>
                </code>
                methods with the user agent.</p>
              <table class="parameters">
                <tbody>
                  <tr>
                    <th>Parameter</th>
                    <th>Type</th>
                    <th>Nullable</th>
                    <th>Optional</th>
                    <th>Description</th>
                  </tr>
                  <tr>
                    <td class="prmName">idp</td>
                    <td class="prmType"><code>RTCIdentityProvider</code></td>
                    <td class="prmNullFalse"><span role="img" aria-label="False">âœ˜</span></td>
                    <td class="prmOptFalse"><span role="img" aria-label="False">âœ˜</span></td>
                    <td class="prmDesc"></td>
                  </tr>
                </tbody>
              </table>
              <div>
                <em>Return type:</em> <code>void</code>
              </div>
            </dd>
          </dl>
        </section>
      </div>

      <section id="interface-exposed-by-identity-providers" typeof="bibo:Chapter" resource="#interface-exposed-by-identity-providers" property="bibo:hasPart">
        <h4 id="h-interface-exposed-by-identity-providers" resource="#h-interface-exposed-by-identity-providers"><span property="xhv:role" resource="xhv:heading"><span class="secno">9.2.1 </span>Interface Exposed by Identity Providers</span>
        </h4>
        <p>The callback functions in <code>RTCIdentityProvider</code> are exposed by identity providers and is called by
          <code>RTCPeerConnection</code> to acquire or validate identity assertions.
        </p>
        <div>
          <pre class="def idl"><span class="idlDictionary" id="idl-def-rtcidentityprovider" data-idl="" data-title="RTCIdentityProvider">dictionary <span class="idlDictionaryID">RTCIdentityProvider</span> {
<span class="idlMember" id="idl-def-rtcidentityprovider-generateassertion" data-idl="" data-title="generateAssertion" data-dfn-for="rtcidentityprovider">    required <span class="idlMemberType"><a href="#idl-def-generateassertioncallback" class="internalDFN" data-link-type="dfn"><code>GenerateAssertionCallback</code></a></span> <span class="idlMemberName"><a data-lt="generateAssertion" href="#dom-rtcidentityprovider-generateassertion" class="internalDFN" data-link-type="dfn" data-for="RTCIdentityProvider"><code>generateAssertion</code></a></span>;</span>
<span class="idlMember" id="idl-def-rtcidentityprovider-validateassertion" data-idl="" data-title="validateAssertion" data-dfn-for="rtcidentityprovider">    required <span class="idlMemberType"><a href="#idl-def-validateassertioncallback" class="internalDFN" data-link-type="dfn"><code>ValidateAssertionCallback</code></a></span> <span class="idlMemberName"><a data-lt="validateAssertion" href="#dom-rtcidentityprovider-validateassertion" class="internalDFN" data-link-type="dfn" data-for="RTCIdentityProvider"><code>validateAssertion</code></a></span>;</span>
};</span></pre>

          <section typeof="bibo:Chapter" resource="#dictionary-rtcidentityprovider-members" property="bibo:hasPart">
            <h5 id="dictionary-rtcidentityprovider-members" resource="#dictionary-rtcidentityprovider-members"><span property="xhv:role" resource="xhv:heading">Dictionary <a class="idlType internalDFN" href="#idl-def-rtcidentityprovider" data-link-type="dfn"><code>RTCIdentityProvider</code></a>
            Members</span></h5>
            <dl data-link-for="RTCIdentityProvider" data-dfn-for="RTCIdentityProvider" class="dictionary-members">
              <dt><dfn data-dfn-for="rtcidentityprovider" data-dfn-type="dfn" id="dom-rtcidentityprovider-generateassertion" data-idl=""><code>generateAssertion</code></dfn> of type
              <span class="idlMemberType"><a href="#idl-def-generateassertioncallback" class="internalDFN" data-link-type="dfn"><code>GenerateAssertionCallback</code></a></span>,
              required</dt>
              <dd>
                <p>A user agent invokes this method on the IdP to request the generation of an identity assertion.</p>
                <p>The IdP provides a promise that resolves to an
                  <code><a href="#idl-def-rtcidentityassertionresult" class="internalDFN" data-link-type="dfn"><code>RTCIdentityAssertionResult</code></a>
                  </code> to successfully generate an identity assertion. Any other value, or a rejected promise, is treated as an error.</p>
              </dd>
              <dt><dfn data-dfn-for="rtcidentityprovider" data-dfn-type="dfn" id="dom-rtcidentityprovider-validateassertion" data-idl=""><code>validateAssertion</code></dfn> of type
              <span class="idlMemberType"><a href="#idl-def-validateassertioncallback" class="internalDFN" data-link-type="dfn"><code>ValidateAssertionCallback</code></a></span>,
              required</dt>
              <dd>
                <p>A user agent invokes this method on the IdP to request the validation of an identity assertion.</p>
                <p>The IdP returns a Promise that resolves to an
                  <code><a href="#idl-def-rtcidentityvalidationresult" class="internalDFN" data-link-type="dfn"><code>RTCIdentityValidationResult</code></a>
                  </code> to successfully validate an identity assertion and to provide the actual identity. Any other value, or a rejected promise, is treated as an error.</p>
              </dd>
            </dl>
          </section>
        </div>
        <div>
          <pre class="def idl"><span class="idlCallback" id="idl-def-generateassertioncallback" data-idl="" data-title="GenerateAssertionCallback">callback <span class="idlCallbackID">GenerateAssertionCallback</span> = <span class="idlCallbackType">Promise&lt;<a href="#idl-def-rtcidentityassertionresult" class="internalDFN" data-link-type="dfn"><code>RTCIdentityAssertionResult</code></a>&gt;</span> (<span class="idlParam"><span class="idlParamType">DOMString</span> <span class="idlParamName">contents</span></span>,
                                                                          <span class="idlParam"><span class="idlParamType">DOMString</span> <span class="idlParamName">origin</span></span>,
                                                                          <span class="idlParam"><span class="idlParamType"><a href="#idl-def-rtcidentityprovideroptions" class="internalDFN" data-link-type="dfn"><code>RTCIdentityProviderOptions</code></a></span> <span class="idlParamName">options</span></span>);</span></pre>

          <section typeof="bibo:Chapter" resource="#callback-generateassertioncallback-parameters" property="bibo:hasPart">
            <h5 id="callback-generateassertioncallback-parameters" resource="#callback-generateassertioncallback-parameters"><span property="xhv:role" resource="xhv:heading">Callback <a class="idlType internalDFN" href="#idl-def-generateassertioncallback" data-link-type="dfn"><code>GenerateAssertionCallback</code></a>
            Parameters</span></h5>
            <dl data-link-for="GenerateAssertionCallback" data-dfn-for="GenerateAssertionCallback" class="callback-members">
              <dt><code>contents</code> of type <span class="idlMemberType">DOMString</span></dt>
              <dd>The <var>contents</var> parameter includes the information that the user agent wants covered by the identity assertion. A successful validation of the provided assertion <em class="rfc2119" title="MUST">MUST</em> produce this string.
              </dd>
              <dt><code>origin</code> of type <span class="idlMemberType">DOMString</span></dt>
              <dd>
                The <var>origin</var> parameter identifies the origin of the
                <code><a href="#dom-rtcpeerconnection" class="internalDFN" data-link-type="dfn"><code>RTCPeerConnection</code></a>
                </code> that triggered this request. An IdP can use this information as input to policy decisions about use. This value is generated by the <a href="#dfn-user-agent" class="internalDFN" data-link-type="dfn">user
                agent</a> based on the origin of the document that created the
                <code>RTCPeerConnection</code> and therefore can be trusted to be correct.
              </dd>
              <dt><code>options</code> of type <span class="idlMemberType"><a href="#idl-def-rtcidentityprovideroptions" class="internalDFN" data-link-type="dfn"><code>RTCIdentityProviderOptions</code></a></span></dt>
              <dd>This includes the options provided by the application when calling <code>setIdentityProvider</code>. Though the dictionary is an optional argument to
                <code>setIdentityProvider</code>, default values are used as necessary when passing the value to the identity provider; see the definition of <code><a href="#idl-def-rtcidentityprovideroptions" class="internalDFN" data-link-type="dfn"><code>RTCIdentityProviderOptions</code></a>
                </code>
                for details.</dd>
            </dl>
          </section>
        </div>
        <div>
          <pre class="def idl"><span class="idlCallback" id="idl-def-validateassertioncallback" data-idl="" data-title="ValidateAssertionCallback">callback <span class="idlCallbackID">ValidateAssertionCallback</span> = <span class="idlCallbackType">Promise&lt;<a href="#idl-def-rtcidentityvalidationresult" class="internalDFN" data-link-type="dfn"><code>RTCIdentityValidationResult</code></a>&gt;</span> (<span class="idlParam"><span class="idlParamType">DOMString</span> <span class="idlParamName">assertion</span></span>,
                                                                           <span class="idlParam"><span class="idlParamType">DOMString</span> <span class="idlParamName">origin</span></span>);</span></pre>

          <section typeof="bibo:Chapter" resource="#callback-validateassertioncallback-parameters" property="bibo:hasPart">
            <h5 id="callback-validateassertioncallback-parameters" resource="#callback-validateassertioncallback-parameters"><span property="xhv:role" resource="xhv:heading">Callback <a class="idlType internalDFN" href="#idl-def-validateassertioncallback" data-link-type="dfn"><code>ValidateAssertionCallback</code></a>
            Parameters</span></h5>
            <dl data-link-for="ValidateAssertionCallback" data-dfn-for="ValidateAssertionCallback" class="callback-members">
              <dt><code>assertion</code> of type <span class="idlMemberType">DOMString</span></dt>
              <dd>The <var>assertion</var> parameter includes the assertion that was recovered from an <code>a=identity</code> in the session description; that is, the value that was part of the
                <code><a href="#idl-def-rtcidentityassertionresult" class="internalDFN" data-link-type="dfn"><code>RTCIdentityAssertionResult</code></a>
                </code> provided by the IdP that generated the assertion.</dd>
              <dt><code>origin</code> of type <span class="idlMemberType">DOMString</span></dt>
              <dd>The <var>origin</var> parameter identifies the origin of the
                <code><a href="#dom-rtcpeerconnection" class="internalDFN" data-link-type="dfn"><code>RTCPeerConnection</code></a>
                </code> that triggered this request. An IdP can use this information as input to policy decisions about use.</dd>
            </dl>
          </section>
        </div>
      </section>

      <section id="identity-assertion-and-validation-results" typeof="bibo:Chapter" resource="#identity-assertion-and-validation-results" property="bibo:hasPart">
        <h4 id="h-identity-assertion-and-validation-results" resource="#h-identity-assertion-and-validation-results"><span property="xhv:role" resource="xhv:heading"><span class="secno">9.2.2 </span>Identity Assertion and Validation Results</span>
        </h4>
        <div>
          <pre class="def idl"><span class="idlDictionary" id="idl-def-rtcidentityassertionresult" data-idl="" data-title="RTCIdentityAssertionResult">dictionary <span class="idlDictionaryID">RTCIdentityAssertionResult</span> {
<span class="idlMember" id="idl-def-rtcidentityassertionresult-idp" data-idl="" data-title="idp" data-dfn-for="rtcidentityassertionresult">    required <span class="idlMemberType"><a href="#idl-def-rtcidentityproviderdetails" class="internalDFN" data-link-type="dfn"><code>RTCIdentityProviderDetails</code></a></span> <span class="idlMemberName"><a data-lt="idp" href="#dom-rtcidentityassertionresult-idp" class="internalDFN" data-link-type="dfn" data-for="RTCIdentityAssertionResult"><code>idp</code></a></span>;</span>
<span class="idlMember" id="idl-def-rtcidentityassertionresult-assertion" data-idl="" data-title="assertion" data-dfn-for="rtcidentityassertionresult">    required <span class="idlMemberType">DOMString</span>                  <span class="idlMemberName"><a data-lt="assertion" href="#dom-rtcidentityassertionresult-assertion" class="internalDFN" data-link-type="dfn" data-for="RTCIdentityAssertionResult"><code>assertion</code></a></span>;</span>
};</span></pre>

          <section typeof="bibo:Chapter" resource="#dictionary-rtcidentityassertionresult-members" property="bibo:hasPart">
            <h5 id="dictionary-rtcidentityassertionresult-members" resource="#dictionary-rtcidentityassertionresult-members"><span property="xhv:role" resource="xhv:heading">Dictionary <a class="idlType internalDFN" href="#idl-def-rtcidentityassertionresult" data-link-type="dfn"><code>RTCIdentityAssertionResult</code></a>
            Members</span></h5>
            <dl data-link-for="RTCIdentityAssertionResult" data-dfn-for="RTCIdentityAssertionResult" class="dictionary-members">
              <dt><dfn data-dfn-for="rtcidentityassertionresult" data-dfn-type="dfn" id="dom-rtcidentityassertionresult-idp" data-idl=""><code>idp</code></dfn> of type <span class="idlMemberType"><a href="#idl-def-rtcidentityproviderdetails" class="internalDFN" data-link-type="dfn"><code>RTCIdentityProviderDetails</code></a></span>,
              required</dt>
              <dd>
                <p>An IdP provides these details to identify the IdP that validates the identity assertion. This struct contains the same information that is provided to
                  <code>setIdentityProvider</code>.</p>
              </dd>
              <dt><dfn data-dfn-for="rtcidentityassertionresult" data-dfn-type="dfn" id="dom-rtcidentityassertionresult-assertion" data-idl=""><code>assertion</code></dfn> of type <span class="idlMemberType">DOMString</span>, required</dt>
              <dd>
                <p>An identity assertion. This is an opaque string that <em class="rfc2119" title="MUST">MUST</em> contain all information necessary to assert identity. This value is consumed by the validating IdP.</p>
              </dd>
            </dl>
          </section>
        </div>
        <div>
          <pre class="def idl"><span class="idlDictionary" id="idl-def-rtcidentityproviderdetails" data-idl="" data-title="RTCIdentityProviderDetails">dictionary <span class="idlDictionaryID">RTCIdentityProviderDetails</span> {
<span class="idlMember" id="idl-def-rtcidentityproviderdetails-domain" data-idl="" data-title="domain" data-dfn-for="rtcidentityproviderdetails">    required <span class="idlMemberType">DOMString</span> <span class="idlMemberName"><a data-lt="domain" href="#dom-rtcidentityproviderdetails-domain" class="internalDFN" data-link-type="dfn" data-for="RTCIdentityProviderDetails"><code>domain</code></a></span>;</span>
<span class="idlMember" id="idl-def-rtcidentityproviderdetails-protocol" data-idl="" data-title="protocol" data-dfn-for="rtcidentityproviderdetails">             <span class="idlMemberType">DOMString</span> <span class="idlMemberName"><a data-lt="protocol" href="#dom-rtcidentityproviderdetails-protocol" class="internalDFN" data-link-type="dfn" data-for="RTCIdentityProviderDetails"><code>protocol</code></a></span> = <span class="idlMemberValue">"default"</span>;</span>
};</span></pre>

          <section typeof="bibo:Chapter" resource="#dictionary-rtcidentityproviderdetails-members" property="bibo:hasPart">
            <h5 id="dictionary-rtcidentityproviderdetails-members" resource="#dictionary-rtcidentityproviderdetails-members"><span property="xhv:role" resource="xhv:heading">Dictionary <a class="idlType internalDFN" href="#idl-def-rtcidentityproviderdetails" data-link-type="dfn"><code>RTCIdentityProviderDetails</code></a>
            Members</span></h5>
            <dl data-link-for="RTCIdentityProviderDetails" data-dfn-for="RTCIdentityProviderDetails" class="dictionary-members">
              <dt><dfn data-dfn-for="rtcidentityproviderdetails" data-dfn-type="dfn" id="dom-rtcidentityproviderdetails-domain" data-idl=""><code>domain</code></dfn> of type <span class="idlMemberType">DOMString</span>, required</dt>
              <dd>
                <p>The domain name of the IdP that validated the associated identity assertion.</p>
              </dd>
              <dt><dfn data-dfn-for="rtcidentityproviderdetails" data-dfn-type="dfn" id="dom-rtcidentityproviderdetails-protocol" data-idl=""><code>protocol</code></dfn> of type <span class="idlMemberType">DOMString</span>, defaulting to
              <code>"default"</code></dt>
              <dd>
                <p>The protocol parameter used for the IdP.</p>
              </dd>
            </dl>
          </section>
        </div>
        <div>
          <pre class="def idl"><span class="idlDictionary" id="idl-def-rtcidentityvalidationresult" data-idl="" data-title="RTCIdentityValidationResult">dictionary <span class="idlDictionaryID">RTCIdentityValidationResult</span> {
<span class="idlMember" id="idl-def-rtcidentityvalidationresult-identity" data-idl="" data-title="identity" data-dfn-for="rtcidentityvalidationresult">    required <span class="idlMemberType">DOMString</span> <span class="idlMemberName"><a data-lt="identity" href="#dom-rtcidentityvalidationresult-identity" class="internalDFN" data-link-type="dfn" data-for="RTCIdentityValidationResult"><code>identity</code></a></span>;</span>
<span class="idlMember" id="idl-def-rtcidentityvalidationresult-contents" data-idl="" data-title="contents" data-dfn-for="rtcidentityvalidationresult">    required <span class="idlMemberType">DOMString</span> <span class="idlMemberName"><a data-lt="contents" href="#dom-rtcidentityvalidationresult-contents" class="internalDFN" data-link-type="dfn" data-for="RTCIdentityValidationResult"><code>contents</code></a></span>;</span>
};</span></pre>

          <section typeof="bibo:Chapter" resource="#dictionary-rtcidentityvalidationresult-members" property="bibo:hasPart">
            <h5 id="dictionary-rtcidentityvalidationresult-members" resource="#dictionary-rtcidentityvalidationresult-members"><span property="xhv:role" resource="xhv:heading">Dictionary <a class="idlType internalDFN" href="#idl-def-rtcidentityvalidationresult" data-link-type="dfn"><code>RTCIdentityValidationResult</code></a>
            Members</span></h5>
            <dl data-link-for="RTCIdentityValidationResult" data-dfn-for="RTCIdentityValidationResult" class="dictionary-members">
              <dt><dfn data-dfn-for="rtcidentityvalidationresult" data-dfn-type="dfn" id="dom-rtcidentityvalidationresult-identity" data-idl=""><code>identity</code></dfn> of type <span class="idlMemberType">DOMString</span>, required</dt>
              <dd>
                <p>The validated identity of the peer.</p>
              </dd>
              <dt><dfn data-dfn-for="rtcidentityvalidationresult" data-dfn-type="dfn" id="dom-rtcidentityvalidationresult-contents" data-idl=""><code>contents</code></dfn> of type <span class="idlMemberType">DOMString</span>, required</dt>
              <dd>
                <p>The payload of the identity assertion. An IdP that validates an identity assertion <em class="rfc2119" title="MUST">MUST</em> return the same string that was provided to the original IdP that generated the assertion.</p>
                <p>The user agent uses the <var>contents</var> string to determine if the identity assertion matches the session description.
                </p>
              </dd>
            </dl>
          </section>
        </div>
      </section>
    </section>

    <section typeof="bibo:Chapter" resource="#sec.identity-proxy-assertion-request" property="bibo:hasPart">
      <h3 id="sec.identity-proxy-assertion-request" resource="#sec.identity-proxy-assertion-request"><span property="xhv:role" resource="xhv:heading"><span class="secno">9.3 </span>Requesting Identity Assertions
        </span>
      </h3>
      <p>The identity assertion request process is triggered by a call to
        <code>createOffer</code>, <code>createAnswer</code>, or
        <code>getIdentityAssertion</code>. When these calls are invoked and an identity provider has been set, the following steps are executed:</p>
      <ol>
        <li>
          <p>The <code>RTCPeerConnection</code> instantiates an IdP as described in <a href="#sec.identity-proxy-communications">Identity
          Provider Selection</a> and <a href="#sec.register-idp">Registering an
          IdP Proxy</a>. If the IdP cannot be loaded, instantiated, or the IdP proxy is not registered, this process fails.</p>
        </li>
        <li>
          <p>The <code>RTCPeerConnection</code> invokes the <code><a data-for="RTCIdentityProvider" href="#dom-rtcidentityprovider-generateassertion" class="internalDFN" data-link-type="dfn"><code>generateAssertion</code></a>
            </code> method on the
            <code><a href="#idl-def-rtcidentityprovider" class="internalDFN" data-link-type="dfn"><code>RTCIdentityProvider</code></a>
            </code> methods registered by the IdP.
          </p>
          <p>The <code>RTCPeerConnection</code> generates the
            <var>contents</var> parameter to this method as described in [
            <cite><a class="bibref" href="#bib-RTCWEB-SECURITY-ARCH">RTCWEB-SECURITY-ARCH</a></cite>]. The value of <var>contents</var> includes the fingerprint of the certificate that was selected or generated during the construction of the <code>RTCPeerConnection</code>. The
            <var>origin</var> parameter contains the origin of the script that calls the <code>RTCPeerConnection</code> method that triggers this behavior. The <var>usernameHint</var> value is the same value that is provided to <code>setIdentityProvider</code>, if any such value was provided.</p>
        </li>
        <li>
          <p>The IdP proxy returns a Promise to the
            <code>RTCPeerConnection</code>. The IdP proxy is expected to generate the identity assertion asynchronously.</p>
          <p>If the user has been authenticated by the IdP, and the IdP is able to generate an identity assertion, the IdP resolves the promise with an identity assertion in the form of an
            <code><a href="#idl-def-rtcidentityassertionresult" class="internalDFN" data-link-type="dfn"><code>RTCIdentityAssertionResult</code></a>
            </code>.</p>
          <p>This step depends entirely on the IdP. The methods by which an IdP authenticates users or generates assertions is not specified, though they could involve interacting with the IdP server or other servers.
          </p>
        </li>
        <li>
          <p>If the IdP proxy produces an error or returns a promise that does not resolve to a valid
            <code><a href="#idl-def-rtcidentityvalidationresult" class="internalDFN" data-link-type="dfn"><code>RTCIdentityValidationResult</code></a>
            </code> (see <a href="#sec.idp-error-handling" class="sec-ref"><span class="secno">9.5</span> <span class="sec-title">IdP Error Handling</span></a>), then identity validation fails.</p>
        </li>
        <li>
          <p>The <code>RTCPeerConnection</code> <em class="rfc2119" title="MAY">MAY</em> store the identity assertion for use with future offers or answers. If a fresh identity assertion is needed for any reason, applications can create a new
            <code>RTCPeerConnection</code>.</p>
        </li>
        <li>
          <p>If the identity request was triggered by a
            <code>createOffer()</code> or <code>createAnswer()</code>, then the assertion is converted to a JSON string, base64-encoded and inserted into an <code>a=identity</code> attribute in the session description.
          </p>
        </li>
      </ol>
      <p>If assertion generation fails, then the promise for the corresponding function call is rejected with a <code>DOMException</code> that has the name <code>OperationError</code>.</p>

      <section typeof="bibo:Chapter" resource="#sec.idp-loginneeded" property="bibo:hasPart">
        <h4 id="sec.idp-loginneeded" resource="#sec.idp-loginneeded"><span property="xhv:role" resource="xhv:heading"><span class="secno">9.3.1 </span>User Login Procedure</span>
        </h4>
        <p>An IdP <em class="rfc2119" title="MAY">MAY</em> reject an attempt to generate an identity assertion if it is unable to verify that a user is authenticated. This might be due to the IdP not having the necessary authentication information available to it (such as cookies).</p>
        <p>Rejecting the promise returned by <code><a data-for="RTCIdentityProvider" href="#dom-rtcidentityprovider-generateassertion" class="internalDFN" data-link-type="dfn"><code>generateAssertion</code></a>
          </code> will cause the error to propagate to the application. Login errors are indicated by rejecting the promise with an object that has a <code>name</code> attribute set to "IdpLoginError".</p>
        <p>If the rejection object also contains a <code>loginUrl</code> attribute, this value will be passed to the application in the
          <code>idpLoginUrl</code> attribute. This URL might link to page where a user can enter their (IdP) username and password, or otherwise provide any information the IdP needs to authorize a assertion request.</p>
        <p>An application can load the login URL in an IFRAME or popup window; the resulting page then <em class="rfc2119" title="SHOULD">SHOULD</em> provide the user with an opportunity to enter any information necessary to complete the authorization process.
        </p>
        <p>Once the authorization process is complete, the page loaded in the IFRAME or popup sends a message using <var>postMessage</var> [
          <cite><a class="bibref" href="#bib-webmessaging">webmessaging</a></cite>] to the page that loaded it (through the <var><a href="http://www.w3.org/html/wg/drafts/html/master/browsers.html#dom-opener">
        window.opener</a></var> attribute for popups, or through <var><a href="http://www.w3.org/html/wg/drafts/html/master/browsers.html#dom-parent">
        window.parent</a></var> for pages loaded in an IFRAME). The message
          <em class="rfc2119" title="MUST">MUST</em> consist of the <var>DOMString</var> "LOGINDONE". This message informs the application that another attempt at generating an identity assertion is likely to be successful.</p>
      </section>
    </section>

    <section typeof="bibo:Chapter" resource="#sec.identity-verify-assertion" property="bibo:hasPart">
      <h3 id="sec.identity-verify-assertion" resource="#sec.identity-verify-assertion"><span property="xhv:role" resource="xhv:heading"><span class="secno">9.4 </span>Verifying Identity Assertions</span>
      </h3>
      <p>Identity assertion validation happens when <code><a data-for="RTCPeerConnection" href="#dom-rtcpeerconnection-setremotedescription" class="internalDFN" data-link-type="dfn"><code>setRemoteDescription</code></a>
        </code> is invoked on
        <code><a href="#dom-rtcpeerconnection" class="internalDFN" data-link-type="dfn"><code>RTCPeerConnection</code></a>
        </code>. The process runs asynchronously, meaning that validation of an identity assertion might not block the completion of <code>setRemoteDescription</code>.</p>
      <p>The identity assertion request process involves the following asynchronous steps:</p>
      <ol>
        <li>
          <p>The <code>RTCPeerConnection</code> awaits any prior identity validation. Only one identity validation can run at a time for an
            <code>RTCPeerConnection</code>. This can happen because the resolution of <code>setRemoteDescription</code> is not blocked by identity validation unless there is a <a href="#target-peer-identity" class="internalDFN" data-link-type="dfn">target peer
          identity</a>.</p>
        </li>
        <li>
          <p>The <code>RTCPeerConnection</code> loads the identity assertion from the session description and decodes the base64 value, then parses the resulting JSON. The <var>idp</var> parameter of the resulting dictionary contains a <var>domain</var> and an optional
            <var>protocol</var> value that identifies the IdP, as described in [
            <cite><a class="bibref" href="#bib-RTCWEB-SECURITY-ARCH">RTCWEB-SECURITY-ARCH</a></cite>].</p>
        </li>
        <li>
          <p>The <code>RTCPeerConnection</code> instantiates the identified IdP as described in <a href="#sec.identity-proxy-communications" class="sec-ref"><span class="secno">9.1.1</span> <span class="sec-title">Identity Provider
        Selection</span></a> and
            <a href="#sec.register-idp" class="sec-ref"><span class="secno">9.2</span> <span class="sec-title">Registering an IdP Proxy</span></a>. If the IdP cannot be loaded, instantiated or the IdP proxy is not registered, this process fails.
          </p>
        </li>
        <li>
          <p>The <code>RTCPeerConnection</code> invokes the <code><a data-for="RTCIdentityProvider" href="#dom-rtcidentityprovider-validateassertion" class="internalDFN" data-link-type="dfn"><code>validateAssertion</code></a>
            </code> method registered by the IdP.</p>
          <p>The <var>assertion</var> parameter is taken from the decoded identity assertion. The <var>origin</var> parameter contains the origin of the script that calls the <code>RTCPeerConnection</code> method that triggers this behavior.</p>
        </li>
        <li>
          <p>The IdP proxy returns a promise and performs the validation process asynchronously.</p>
          <p>The IdP proxy verifies the identity assertion using whatever means necessary. Depending on the authentication protocol this could involve interacting with the IdP server.</p>
        </li>
        <li>
          <p>If the IdP proxy produces an error or returns a promise that does not resolve to a valid
            <code><a href="#idl-def-rtcidentityvalidationresult" class="internalDFN" data-link-type="dfn"><code>RTCIdentityValidationResult</code></a>
            </code> (see <a href="#sec.idp-error-handling" class="sec-ref"><span class="secno">9.5</span> <span class="sec-title">IdP Error Handling</span></a>), then identity validation fails.</p>
        </li>
        <li>
          <p>Once the assertion is successfully verified, the IdP proxy resolves the promise with an
            <code><a href="#idl-def-rtcidentityvalidationresult" class="internalDFN" data-link-type="dfn"><code>RTCIdentityValidationResult</code></a>
            </code> containing the validated identity and the original contents that are the payload of the assertion.</p>
        </li>
        <li>
          <p>The <code>RTCPeerConnection</code> decodes the <code><a data-for="RTCIdentityValidationResult" href="#dom-rtcidentityvalidationresult-contents" class="internalDFN" data-link-type="dfn"><code>contents</code></a>
            </code> and validates that it contains a fingerprint value for every <code>a=fingerprint</code> attribute in the session description. This ensures that the certificate used by the remote peer for communications is covered by the identity assertion.</p>
          <div class="note">
            <div class="note-title marker" aria-level="4" role="heading" id="h-note12"><span>Note</span></div>
            <p class="">A <a href="#dfn-user-agent" class="internalDFN" data-link-type="dfn">user agent</a> is required to fail to communicate with peers that offer a certificate that doesn't match an
              <code>a=fingerprint</code> line in the negotiated session description.
            </p>
          </div>
        </li>
        <li>
          <p>The <code>RTCPeerConnection</code> validates that the domain portion of the identity matches the domain of the IdP as described in [
            <cite><a class="bibref" href="#bib-RTCWEB-SECURITY-ARCH">RTCWEB-SECURITY-ARCH</a></cite>]. If this check fails then the identity validation fails.</p>
        </li>
        <li>
          <p>The <code>RTCPeerConnection</code> resolves the <code><a data-for="RTCPeerConnection" href="#dom-rtcpeerconnection-peeridentity" class="internalDFN" data-link-type="dfn"><code>peerIdentity</code></a>
            </code> attribute with a new instance of <code>RTCIdentityAssertion</code> that includes the IdP domain and peer identity.</p>
        </li>
        <li>
          <p>The <a href="#dfn-user-agent" class="internalDFN" data-link-type="dfn">user agent</a> <em class="rfc2119" title="MAY">MAY</em> display identity information to a user in its UI. Any user identity information that is displayed in this fashion <em class="rfc2119" title="MUST">MUST</em> use a mechanism that cannot be spoofed by content.</p>
        </li>
      </ol>
      <p>If identity validation fails, the <code><a data-for="RTCPeerConnection" href="#dom-rtcpeerconnection-peeridentity" class="internalDFN" data-link-type="dfn"><code>peerIdentity</code></a>
        </code> promise is rejected with a
        <code>DOMException</code> that has a name of
        <code>OperationError</code>.</p>
      <p>If identity validation fails and there is a <a href="#target-peer-identity" class="internalDFN" data-link-type="dfn">target peer
      identity</a> for the <code>RTCPeerConnection</code>, the promise returned by <code>setRemoteDescription</code> <em class="rfc2119" title="MUST">MUST</em> be rejected with the same
        <code>DOMException</code>.</p>
      <p>If identity validation fails and there is no a <a href="#target-peer-identity" class="internalDFN" data-link-type="dfn">target peer
      identity</a>, the value of the <code><a data-for="RTCPeerConnection" href="#dom-rtcpeerconnection-peeridentity" class="internalDFN" data-link-type="dfn"><code>peerIdentity</code></a>
        </code> <em class="rfc2119" title="MUST">MUST</em> be set to a new, unresolved promise instance. This permits the use of renegotiation (or a subsequent answer, if the session description was a provisional answer) to resolve or reject the identity.</p>
    </section>

    <section typeof="bibo:Chapter" resource="#sec.idp-error-handling" property="bibo:hasPart">
      <h3 id="sec.idp-error-handling" resource="#sec.idp-error-handling"><span property="xhv:role" resource="xhv:heading"><span class="secno">9.5 </span>IdP Error Handling</span>
      </h3>
      <p>Errors in IdP processing will - in most cases - result in the failure of the procedure that invoked the IdP proxy. This will result in the rejection of the promise returned by <code><a data-for="RTCPeerConnection" href="#dom-rtcpeerconnection-getidentityassertion" class="internalDFN" data-link-type="dfn"><code>getIdentityAssertion</code></a>
        </code>, <code><a data-for="RTCPeerConnection" href="#dom-rtcpeerconnection-createoffer" class="internalDFN" data-link-type="dfn"><code>createOffer</code></a>
        </code>, or <code><a data-for="RTCPeerConnection" href="#dom-rtcpeerconnection-createanswer" class="internalDFN" data-link-type="dfn"><code>createAnswer</code></a>
        </code>. An IdP proxy error causes a
        <code><a data-for="RTCPeerConnection" href="#dom-rtcpeerconnection-setremotedescription" class="internalDFN" data-link-type="dfn"><code>setRemoteDescription</code></a>
        </code>
        promise to be rejected if there is a <a href="#target-peer-identity" class="internalDFN" data-link-type="dfn">target peer identity</a>; IdP errors in calls to <code><a data-for="RTCPeerConnection" href="#dom-rtcpeerconnection-setremotedescription" class="internalDFN" data-link-type="dfn"><code>setRemoteDescription</code></a>
        </code> where there is no
        <a href="#target-peer-identity" class="internalDFN" data-link-type="dfn">target peer identity</a> cause the <code><a data-for="RTCPeerConnection" href="#dom-rtcpeerconnection-peeridentity" class="internalDFN" data-link-type="dfn"><code>peerIdentity</code></a>
        </code> promise to be rejected instead.
      </p>
      <p>If an error occurs these promises are rejected with a
        <code>DOMException</code> that has a name of <code>OperationError</code> if an error occurs in interacting with the IdP proxy. The following scenarios result in errors:</p>
      <ul>
        <li>
          <p>A <code>RTCPeerConnection</code> might be configured with an identity provider, but that identity provider could register a
            <code>RTCIdentityProvider</code> with invalid methods. Any procedure that attempts to invoke such an identity provider fails.</p>
        </li>
        <li>
          <p>An apparently valid identity provider might fail in several ways. If an identity provider throws an exception or returns a promise that is ultimately rejected, then the procedure that depends on the IdP
            <em class="rfc2119" title="MUST">MUST</em> also fail.</p>
        </li>
        <li>
          <p>The <a href="#dfn-user-agent" class="internalDFN" data-link-type="dfn">user agent</a> <em class="rfc2119" title="SHOULD">SHOULD</em> limit the time that allows for an IdP to run. This includes both the loading of the <a href="#sec.identity-proxy-communications">IdP proxy</a> and the identity assertion generation or validation. Failure to do so potentially causes the corresponding operation to take an indefinite amount of time. This timer can be cancelled when the IdP proxy produces a response. Expiration of this timer is treated like any other type of IdP failure.</p>
        </li>
        <li>
          <p>Even when the IdP proxy produces a positive result, the procedure that uses this information might still fail. Additional validation of a <a href="#idl-def-rtcidentityvalidationresult" class="internalDFN" data-link-type="dfn"><code>RTCIdentityValidationResult</code></a> value is still necessary. The procedure for <a href="#sec.identity-verify-assertion">validation of
          identity assertions</a> describes additional steps that are required to successfully validate the output of the IdP proxy.</p>
        </li>
      </ul>
    </section>

    <section id="rtcpeerconnection-interface-extensions-3" typeof="bibo:Chapter" resource="#rtcpeerconnection-interface-extensions-3" property="bibo:hasPart">
      <h3 id="h-rtcpeerconnection-interface-extensions-3" resource="#h-rtcpeerconnection-interface-extensions-3"><span property="xhv:role" resource="xhv:heading"><span class="secno">9.6 </span>RTCPeerConnection Interface Extensions</span>
      </h3>
      <p>The Identity API extends the <code><a href="#dom-rtcpeerconnection" class="internalDFN" data-link-type="dfn"><code>RTCPeerConnection</code></a>
        </code>
        interface as described below.</p>
      <div>
        <pre class="def idl"><span class="idlInterface" id="idl-def-rtcpeerconnection-partial-6" data-idl="" data-title="RTCPeerConnection">partial interface <span class="idlInterfaceID"><a data-lt="RTCPeerConnection" href="#dom-rtcpeerconnection" class="internalDFN" data-link-type="dfn" data-for=""><code>RTCPeerConnection</code></a></span> {
<span class="idlMethod" id="idl-def-rtcpeerconnection-setidentityprovider(domstring,optional-rtcidentityprovideroptions)" data-idl="" data-title="setIdentityProvider" data-dfn-for="rtcpeerconnection">    <span class="idlMethType">void</span>               <span class="idlMethName"><a data-lt="setIdentityProvider" href="#dom-rtcpeerconnection-setidentityprovider" class="internalDFN" data-link-type="dfn" data-for="RTCPeerConnection"><code>setIdentityProvider</code></a></span>(<span class="idlParam"><span class="idlParamType">DOMString</span> <span class="idlParamName">provider</span></span>,
                                           <span class="idlParam">optional <span class="idlParamType"><a href="#idl-def-rtcidentityprovideroptions" class="internalDFN" data-link-type="dfn"><code>RTCIdentityProviderOptions</code></a></span> <span class="idlParamName">options</span></span>);</span>
<span class="idlMethod" id="idl-def-rtcpeerconnection-getidentityassertion()" data-idl="" data-title="getIdentityAssertion" data-dfn-for="rtcpeerconnection">    <span class="idlMethType">Promise&lt;DOMString&gt;</span> <span class="idlMethName"><a data-lt="getIdentityAssertion" href="#dom-rtcpeerconnection-getidentityassertion" class="internalDFN" data-link-type="dfn" data-for="RTCPeerConnection"><code>getIdentityAssertion</code></a></span>();</span>
<span class="idlAttribute" id="idl-def-rtcpeerconnection-peeridentity" data-idl="" data-title="peerIdentity" data-dfn-for="rtcpeerconnection">    readonly attribute <span class="idlAttrType">Promise&lt;<a href="#idl-def-rtcidentityassertion" class="internalDFN" data-link-type="dfn"><code>RTCIdentityAssertion</code></a>&gt;</span> <span class="idlAttrName"><a data-lt="peerIdentity" href="#dom-rtcpeerconnection-peeridentity" class="internalDFN" data-link-type="dfn" data-for="RTCPeerConnection"><code>peerIdentity</code></a></span>;</span>
<span class="idlAttribute" id="idl-def-rtcpeerconnection-idploginurl" data-idl="" data-title="idpLoginUrl" data-dfn-for="rtcpeerconnection">    readonly attribute <span class="idlAttrType">DOMString?</span>                    <span class="idlAttrName"><a data-lt="idpLoginUrl" href="#dom-rtcpeerconnection-idploginurl" class="internalDFN" data-link-type="dfn" data-for="RTCPeerConnection"><code>idpLoginUrl</code></a></span>;</span>
};</span></pre>

        <section typeof="bibo:Chapter" resource="#attributes-22" property="bibo:hasPart">
          <h4 id="attributes-22" resource="#attributes-22"><span property="xhv:role" resource="xhv:heading">Attributes</span></h4>
          <dl data-link-for="RTCPeerConnection" data-dfn-for="RTCPeerConnection" class="attributes">
            <dt><dfn data-dfn-for="rtcpeerconnection" data-dfn-type="dfn" id="dom-rtcpeerconnection-peeridentity" data-idl=""><code>peerIdentity</code></dfn> of type <span class="idlAttrType">Promise&lt;<a href="#idl-def-rtcidentityassertion" class="internalDFN" data-link-type="dfn"><code>RTCIdentityAssertion</code></a>&gt;</span>,
            readonly</dt>
            <dd>
              <p>A promise that resolves with the identity of the peer if the identity is successfully validated.</p>
              <p>This promise is rejected if an identity assertion is present in a remote session description and validation of that assertion fails for any reason. If the promise is rejected, a new unresolved value is created, unless a <a href="#target-peer-identity" class="internalDFN" data-link-type="dfn">target peer identity</a> has been established. If this promise successfully resolves, the value will not change.</p>
            </dd>
            <dt><dfn data-dfn-for="rtcpeerconnection" data-dfn-type="dfn" id="dom-rtcpeerconnection-idploginurl" data-idl=""><code>idpLoginUrl</code></dfn> of type <span class="idlAttrType">DOMString</span>, readonly , nullable</dt>
            <dd>
              <p>The URL that an application can navigate to so that the user can login to the IdP, as described in <a href="#sec.idp-loginneeded" class="sec-ref"><span class="secno">9.3.1</span> <span class="sec-title">User Login Procedure</span></a>.</p>
            </dd>
          </dl>
        </section>

        <section typeof="bibo:Chapter" resource="#methods-15" property="bibo:hasPart">
          <h4 id="methods-15" resource="#methods-15"><span property="xhv:role" resource="xhv:heading">Methods</span></h4>
          <dl data-link-for="RTCPeerConnection" data-dfn-for="RTCPeerConnection" class="methods">
            <dt><code>setIdentityProvider</code></dt>
            <dd>
              <p>Sets the identity provider to be used for a given
                <code>RTCPeerConnection</code> object. Applications need not make this call; if the browser is already configured for an IdP, then that configured IdP might be used to get an assertion.</p>
              <p>When the <dfn data-dfn-for="rtcpeerconnection" data-dfn-type="dfn" id="dom-rtcpeerconnection-setidentityprovider" data-idl=""><code>setIdentityProvider</code></dfn> method is invoked, the user agent <em class="rfc2119" title="MUST">MUST</em> run the following steps:</p>
              <ol>
                <li>
                  <p>If the <code><a href="#dom-rtcpeerconnection" class="internalDFN" data-link-type="dfn"><code>RTCPeerConnection</code></a>
                    </code> object's [[
                    <a href="#dfn-isclosed" class="internalDFN" data-link-type="dfn">isClosed</a>]] slot is <code>true</code>, throw an
                    <code>InvalidStateError</code> exception and abort these steps.
                  </p>
                </li>
                <li>
                  <p>Set the current identity provider values to the tuple (<code>provider</code>, <code>options</code>).</p>
                </li>
                <li>
                  <p>If any identity provider value has changed, discard any stored identity assertion.</p>
                </li>
              </ol>
              <p>Identity provider information is not used until an identity assertion is required, either in response to a call to
                <code>getIdentityAssertion</code>, or a session description is requested with a call to either <code>createOffer</code> or
                <code>createAnswer</code>.</p>
              <table class="parameters">
                <tbody>
                  <tr>
                    <th>Parameter</th>
                    <th>Type</th>
                    <th>Nullable</th>
                    <th>Optional</th>
                    <th>Description</th>
                  </tr>
                  <tr>
                    <td class="prmName">provider</td>
                    <td class="prmType"><code>DOMString</code></td>
                    <td class="prmNullFalse"><span role="img" aria-label="False">âœ˜</span></td>
                    <td class="prmOptFalse"><span role="img" aria-label="False">âœ˜</span></td>
                    <td class="prmDesc"></td>
                  </tr>
                  <tr>
                    <td class="prmName">options</td>
                    <td class="prmType">
                      <code>RTCIdentityProviderOptions</code></td>
                    <td class="prmNullFalse"><span role="img" aria-label="False">âœ˜</span></td>
                    <td class="prmOptTrue"><span role="img" aria-label="True">âœ”</span></td>
                    <td class="prmDesc"></td>
                  </tr>
                </tbody>
              </table>
              <div>
                <em>Return type:</em> <code>void</code>
              </div>
            </dd>
            <dt><dfn data-dfn-for="rtcpeerconnection" data-dfn-type="dfn" id="dom-rtcpeerconnection-getidentityassertion" data-idl=""><code>getIdentityAssertion</code></dfn></dt>
            <dd>
              <p>Initiates the process of obtaining an identity assertion. Applications need not make this call. It is merely intended to allow them to start the process of obtaining identity assertions before a call is initiated. If an identity is needed, either because the browser has been configured with a default identity provider or because the <code><a href="#dom-rtcpeerconnection-setidentityprovider" class="internalDFN" data-link-type="dfn"><code>setIdentityProvider</code></a>
                </code> method was called, then an identity will be automatically requested when an offer or answer is created.</p>
              <p>When <code>getIdentityAssertion</code> is invoked, queue a task to run the following steps:</p>
              <ol>
                <li>
                  <p>If the <code><a href="#dom-rtcpeerconnection" class="internalDFN" data-link-type="dfn"><code>RTCPeerConnection</code></a>
                    </code> object's [[
                    <a href="#dfn-isclosed" class="internalDFN" data-link-type="dfn">isClosed</a>]] slot is <code>true</code>, throw an
                    <code>InvalidStateError</code> exception and abort these steps.
                  </p>
                </li>
                <li>
                  <p><a href="#sec.identity-proxy-assertion-request">Request an
                  identity assertion</a> from the IdP.</p>
                </li>
                <li>
                  <p>Resolve the promise with the base64 and JSON encoded assertion.
                  </p>
                </li>
              </ol>
              <div>
                <em>No parameters.</em>
              </div>
              <div>
                <em>Return type:</em> <code>Promise&lt;DOMString&gt;</code>
              </div>
            </dd>
          </dl>
        </section>
      </div>
      <div>
        <pre class="def idl"><span class="idlDictionary" id="idl-def-rtcidentityprovideroptions" data-idl="" data-title="RTCIdentityProviderOptions">dictionary <span class="idlDictionaryID">RTCIdentityProviderOptions</span> {
<span class="idlMember" id="idl-def-rtcidentityprovideroptions-protocol" data-idl="" data-title="protocol" data-dfn-for="rtcidentityprovideroptions">    <span class="idlMemberType">DOMString</span> <span class="idlMemberName"><a data-lt="protocol" href="#dom-rtcidentityprovideroptions-protocol" class="internalDFN" data-link-type="dfn" data-for="RTCIdentityProviderOptions"><code>protocol</code></a></span> = <span class="idlMemberValue">"default"</span>;</span>
<span class="idlMember" id="idl-def-rtcidentityprovideroptions-usernamehint" data-idl="" data-title="usernameHint" data-dfn-for="rtcidentityprovideroptions">    <span class="idlMemberType">DOMString</span> <span class="idlMemberName"><a data-lt="usernameHint" href="#dom-rtcidentityprovideroptions-usernamehint" class="internalDFN" data-link-type="dfn" data-for="RTCIdentityProviderOptions"><code>usernameHint</code></a></span>;</span>
<span class="idlMember" id="idl-def-rtcidentityprovideroptions-peeridentity" data-idl="" data-title="peerIdentity" data-dfn-for="rtcidentityprovideroptions">    <span class="idlMemberType">DOMString</span> <span class="idlMemberName"><a data-lt="peerIdentity" href="#dom-rtcidentityprovideroptions-peeridentity" class="internalDFN" data-link-type="dfn" data-for="RTCIdentityProviderOptions"><code>peerIdentity</code></a></span>;</span>
};</span></pre>

        <section typeof="bibo:Chapter" resource="#rtcidentityprovideroptions-members" property="bibo:hasPart">
          <h4 id="rtcidentityprovideroptions-members" resource="#rtcidentityprovideroptions-members"><span property="xhv:role" resource="xhv:heading"><code>RTCIdentityProviderOptions</code> Members</span></h4>
          <dl data-link-for="RTCIdentityProviderOptions" data-dfn-for="RTCIdentityProviderOptions" class="attributes">
            <dt><dfn data-dfn-for="rtcidentityprovideroptions" data-dfn-type="dfn" id="dom-rtcidentityprovideroptions-protocol" data-idl=""><code>protocol</code></dfn> of type <span class="idlAttrType">DOMString</span></dt>
            <dd>
              <p>The name of the protocol that is used by the identity provider. This <em class="rfc2119" title="MUST NOT">MUST NOT</em> include '/' (U+002F) or '\' (U+005C) characters. This value defaults to "default" if not provided.</p>
            </dd>
            <dt><dfn data-dfn-for="rtcidentityprovideroptions" data-dfn-type="dfn" id="dom-rtcidentityprovideroptions-usernamehint" data-idl=""><code>usernameHint</code></dfn> of type <span class="idlAttrType">DOMString</span></dt>
            <dd>
              <p>A hint to the identity provider about the identity of the principal for which it should generate an identity assertion. If absent, the value <code>undefined</code> is used.</p>
            </dd>
            <dt><dfn data-dfn-for="rtcidentityprovideroptions" data-dfn-type="dfn" id="dom-rtcidentityprovideroptions-peeridentity" data-idl=""><code>peerIdentity</code></dfn> of type <span class="idlAttrType">DOMString</span></dt>
            <dd>
              <p>The identity of the peer. For identity providers that bind their assertions to a particular pair of communication peers, this allows them to generate an assertion that includes both local and remote identities. If this value is omitted, but a value is provided for the <code><a href="#dom-rtcconfiguration-peeridentity">peerIdentity</a></code> member of <code><a href="#idl-def-rtcconfiguration" class="internalDFN" data-link-type="dfn"><code>RTCConfiguration</code></a>
                </code>, the value from
                <code><a href="#idl-def-rtcconfiguration" class="internalDFN" data-link-type="dfn"><code>RTCConfiguration</code></a>
                </code> is used.</p>
            </dd>
          </dl>
        </section>
      </div>
      <div>
        <pre class="def idl"><span class="idlInterface" id="idl-def-rtcidentityassertion" data-idl="" data-title="RTCIdentityAssertion">[<span class="idlCtor"><span class="extAttrName">Constructor</span>(<span class="idlParam"><span class="idlParamType">DOMString</span> <span class="idlParamName">idp</span></span>, <span class="idlParam"><span class="idlParamType">DOMString</span> <span class="idlParamName">name</span></span>)</span>]
interface <span class="idlInterfaceID">RTCIdentityAssertion</span> {
<span class="idlAttribute" id="idl-def-rtcidentityassertion-idp" data-idl="" data-title="idp" data-dfn-for="rtcidentityassertion">    attribute <span class="idlAttrType">DOMString</span> <span class="idlAttrName"><a data-lt="idp" href="#dom-rtcidentityassertion-idp" class="internalDFN" data-link-type="dfn" data-for="RTCIdentityAssertion"><code>idp</code></a></span>;</span>
<span class="idlAttribute" id="idl-def-rtcidentityassertion-name" data-idl="" data-title="name" data-dfn-for="rtcidentityassertion">    attribute <span class="idlAttrType">DOMString</span> <span class="idlAttrName"><a data-lt="name" href="#dom-rtcidentityassertion-name" class="internalDFN" data-link-type="dfn" data-for="RTCIdentityAssertion"><code>name</code></a></span>;</span>
};</span></pre>

        <section typeof="bibo:Chapter" resource="#attributes-23" property="bibo:hasPart">
          <h4 id="attributes-23" resource="#attributes-23"><span property="xhv:role" resource="xhv:heading">Attributes</span></h4>
          <dl data-link-for="RTCIdentityAssertion" data-dfn-for="RTCIdentityAssertion" class="attributes">
            <dt><dfn data-dfn-for="rtcidentityassertion" data-dfn-type="dfn" id="dom-rtcidentityassertion-idp" data-idl=""><code>idp</code></dfn> of type <span class="idlAttrType">DOMString</span></dt>
            <dd>
              <p>The domain name of the identity provider that validated this identity.
              </p>
            </dd>
            <dt><dfn data-dfn-for="rtcidentityassertion" data-dfn-type="dfn" id="dom-rtcidentityassertion-name" data-idl=""><code>name</code></dfn> of type <span class="idlAttrType">DOMString</span></dt>
            <dd>
              <p>An RFC5322-conformant [<cite><a class="bibref" href="#bib-RFC5322">RFC5322</a></cite>] representation of the verified peer identity. This identity will have been verified via the procedures described in [<cite><a class="bibref" href="#bib-RTCWEB-SECURITY-ARCH">RTCWEB-SECURITY-ARCH</a></cite>].</p>
            </dd>
          </dl>
        </section>
      </div>
    </section>

    <section id="examples" typeof="bibo:Chapter" resource="#examples" property="bibo:hasPart">
      <h3 id="h-examples" resource="#h-examples"><span property="xhv:role" resource="xhv:heading"><span class="secno">9.7 </span>Examples</span>
      </h3>
      <p>The identity system is designed so that applications need not take any special action in order for users to generate and verify identity assertions; if a user has configured an IdP into their browser, then the browser will automatically request/generate assertions and the other side will automatically verify them and display the results. However, applications may wish to exercise tighter control over the identity system as shown by the following examples.</p>
      <div>
        <p>This example shows how to configure the identity provider.</p>
        <div class="example">
          <div class="example-title marker"><span>Example 8</span></div><pre class="highlight hljs css"><span class="hljs-selector-tag">pc</span><span class="hljs-selector-class">.setIdentityProvider</span>("<span class="hljs-selector-tag">example</span><span class="hljs-selector-class">.com</span>");</pre></div>
      </div>
      <div>
        <p>This example shows how to configure the identity provider with all the options.</p>
        <div class="example">
          <div class="example-title marker"><span>Example 9</span></div><pre class="highlight hljs css"><span class="hljs-selector-tag">pc</span><span class="hljs-selector-class">.setIdentityProvider</span>("<span class="hljs-selector-tag">example</span><span class="hljs-selector-class">.com</span>", {
    <span class="hljs-attribute">protocol</span>: <span class="hljs-string">"default"</span>,
    usernameHint: <span class="hljs-string">"alice@example.com"</span>,
    peerIdentity: <span class="hljs-string">"bob@example.net"</span>
});</pre></div>
      </div>
      <div>
        <p>This example shows how to consume identity assertions inside a Web application.
        </p>
        <div class="example">
          <div class="example-title marker"><span>Example 10</span></div><pre class="highlight hljs javascript">pc.peerIdentity.then(<span class="hljs-function"><span class="hljs-params">identity</span> =&gt;</span>
  <span class="hljs-built_in">console</span>.log(<span class="hljs-string">"IdP= "</span> + identity.idp + <span class="hljs-string">" identity="</span> + identity.name));</pre></div>
      </div>
    </section>
  </section>

  <section id="media-stream-api-extensions-for-network-use" typeof="bibo:Chapter" resource="#media-stream-api-extensions-for-network-use" property="bibo:hasPart">
    <!--OddPage-->
    <h2 id="h-media-stream-api-extensions-for-network-use" resource="#h-media-stream-api-extensions-for-network-use"><span property="xhv:role" resource="xhv:heading"><span class="secno">10. </span>Media Stream API Extensions for Network Use</span>
    </h2>

    <section id="introduction-2" typeof="bibo:Chapter" resource="#introduction-2" property="bibo:hasPart">
      <h3 id="h-introduction-2" resource="#h-introduction-2"><span property="xhv:role" resource="xhv:heading"><span class="secno">10.1 </span>Introduction</span>
      </h3>
      <p>The <code>MediaStreamTrack</code> interface, as defined in the [
        <cite><a class="bibref" href="#bib-GETUSERMEDIA">GETUSERMEDIA</a></cite>] specification, typically represents a stream of data of audio or video. One or more <code>MediaStreamTrack</code>s can be collected in a <code>MediaStream</code> (strictly speaking, a
        <code>MediaStream</code> as defined in [<cite><a class="bibref" href="#bib-GETUSERMEDIA">GETUSERMEDIA</a></cite>] may contain zero or more <code>MediaStreamTrack</code> objects).</p>
      <p>A <code>MediaStreamTrack</code> may be extended to represent a media flow that either comes from or is sent to a remote peer (and not just the local camera, for instance). The extensions required to enable this capability on the <code>MediaStreamTrack</code> object will be described in this section. How the media is transmitted to the peer is described in [
        <cite><a class="bibref" href="#bib-RTCWEB-RTP">RTCWEB-RTP</a></cite>], [<cite><a class="bibref" href="#bib-RTCWEB-AUDIO">RTCWEB-AUDIO</a></cite>], and [<cite><a class="bibref" href="#bib-RTCWEB-TRANSPORT">RTCWEB-TRANSPORT</a></cite>].</p>
      <p>A <code>MediaStreamTrack</code> sent to another peer will appear as one and only one <code>MediaStreamTrack</code> to the recipient. A peer is defined as a user agent that supports this specification. In addition, the sending side application can indicate what <code>MediaStream</code> object(s) the <code>MediaStreamTrack</code> is member of. The corresponding <code>MediaStream</code> object(s) on the receiver side will be created (if not already present) and populated accordingly.</p>
      <p>As also described earlier in this document, the objects
        <code>RTCRtpSender</code> and <code>RTCRtpReceiver</code> can be used by the application to get more fine grained control over the transmission and reception of <code>MediaStreamTrack</code>s.</p>
      <p>Channels are the smallest unit considered in the
        <code>MediaStream</code> specification. Channels are intended to be encoded together for transmission as, for instance, an RTP payload type. All of the channels that a codec needs to encode jointly <em class="rfc2119" title="MUST">MUST</em> be in the same <code>MediaStreamTrack</code> and the codecs <em class="rfc2119" title="SHOULD">SHOULD</em> be able to encode, or discard, all the channels in the track.</p>
      <p>The concepts of an input and output to a given
        <code>MediaStreamTrack</code> apply in the case of
        <code>MediaStreamTrack</code> objects transmitted over the network as well. A <code><a href="#dom-mediastreamtrack" class="internalDFN" data-link-type="dfn"><code>MediaStreamTrack</code></a>
        </code> created by an
        <code><a href="#dom-rtcpeerconnection" class="internalDFN" data-link-type="dfn"><code>RTCPeerConnection</code></a>
        </code> object (as described previously in this document) will take as input the data received from a remote peer. Similarly, a <code>MediaStreamTrack</code> from a local source, for instance a camera via [<cite><a class="bibref" href="#bib-GETUSERMEDIA">GETUSERMEDIA</a></cite>], will have an output that represents what is transmitted to a remote peer if the object is used with an <code><a href="#dom-rtcpeerconnection" class="internalDFN" data-link-type="dfn"><code>RTCPeerConnection</code></a>
        </code> object.</p>
      <p>The concept of duplicating <code>MediaStream</code> and
        <code>MediaStreamTrack</code> objects as described in [<cite><a class="bibref" href="#bib-GETUSERMEDIA">GETUSERMEDIA</a></cite>] is also applicable here. This feature can be used, for instance, in a video-conferencing scenario to display the local video from the user's camera and microphone in a local monitor, while only transmitting the audio to the remote peer (e.g. in response to the user using a "video mute" feature). Combining different <code>MediaStreamTrack</code> objects into new <code>MediaStream</code> objects is useful in certain situations.
      </p>
      <div class="note">
        <div class="note-title marker" aria-level="4" role="heading" id="h-note13"><span>Note</span></div>
        <p class="">In this document, we only specify aspects of the following objects that are relevant when used along with an
          <code><a href="#dom-rtcpeerconnection" class="internalDFN" data-link-type="dfn"><code>RTCPeerConnection</code></a>
          </code>. Please refer to the original definitions of the objects in the [<cite><a class="bibref" href="#bib-GETUSERMEDIA">GETUSERMEDIA</a></cite>] document for general information on using <code>MediaStream</code> and
          <code>MediaStreamTrack</code>.</p>
      </div>
    </section>

    <section id="mediastream" typeof="bibo:Chapter" resource="#mediastream" property="bibo:hasPart">
      <h3 id="h-mediastream" resource="#h-mediastream"><span property="xhv:role" resource="xhv:heading"><span class="secno">10.2 </span>MediaStream</span>
      </h3>

      <section id="id" typeof="bibo:Chapter" resource="#id" property="bibo:hasPart">
        <h4 id="h-id" resource="#h-id"><span property="xhv:role" resource="xhv:heading"><span class="secno">10.2.1 </span>id</span>
        </h4>
        <p>The <code><a href="https://w3c.github.io/mediacapture-main/#dom-mediastream-id">id</a></code> attribute specified in <code>MediaStream</code> returns an id that is unique to this stream, so that streams can be recognized at the remote end of the <code><a href="#dom-rtcpeerconnection" class="internalDFN" data-link-type="dfn"><code>RTCPeerConnection</code></a>
          </code> API.</p>
        <p>When a <code><a href="#dfn-mediastream" class="internalDFN" data-link-type="dfn">MediaStream</a></code> is created to represent a stream obtained from a remote peer, the <code><a href="https://w3c.github.io/mediacapture-main/#dom-mediastream-id">id</a></code> attribute is initialized from information provided by the remote source.
        </p>
        <div class="note">
          <div class="note-title marker" aria-level="5" role="heading" id="h-note14"><span>Note</span></div>
          <p class="">The id of a <code><a href="#dfn-mediastream" class="internalDFN" data-link-type="dfn">MediaStream</a></code> object is unique to the source of the stream, but that does not mean it is not possible to end up with duplicates. For example, the tracks of a locally generated stream could be sent from one user agent to a remote peer using <code><a href="#dom-rtcpeerconnection" class="internalDFN" data-link-type="dfn"><code>RTCPeerConnection</code></a>
            </code> and then sent back to the original user agent in the same manner, in which case the original user agent will have multiple streams with the same id (the locally-generated one and the one received from the remote peer).</p>
        </div>
      </section>
    </section>

    <section id="mediastreamtrack" typeof="bibo:Chapter" resource="#mediastreamtrack" property="bibo:hasPart">
      <h3 id="h-mediastreamtrack" resource="#h-mediastreamtrack"><span property="xhv:role" resource="xhv:heading"><span class="secno">10.3 </span>MediaStreamTrack</span>
      </h3>
      <p>A <code>MediaStreamTrack</code> object's reference to its
        <code>MediaStream</code> in the non-local media source case (an RTP source, as is the case for <code>MediaStreamTrack</code>s received over an <code><a href="#dom-rtcpeerconnection" class="internalDFN" data-link-type="dfn"><code>RTCPeerConnection</code></a>
        </code> ) is always strong.</p>
      <p>When an <code><a href="#dom-rtcpeerconnection" class="internalDFN" data-link-type="dfn"><code>RTCPeerConnection</code></a>
        </code> receives data on an RTP source for the first time, it <em class="rfc2119" title="MUST">MUST</em> <a href="#update-track-muted" class="internalDFN" data-link-type="dfn">update the muted state</a> of the corresponding <code><a href="#dom-mediastreamtrack" class="internalDFN" data-link-type="dfn"><code>MediaStreamTrack</code></a>
        </code> with the value
        <code>false</code>.</p>
      <p>When an <code><a href="#dom-rtcpeerconnection" class="internalDFN" data-link-type="dfn"><code>RTCPeerConnection</code></a>
        </code>'s RTP source is temporarily unable to receive media due to a loss of connection or if a mute signal has been received, it <em class="rfc2119" title="MUST">MUST</em> <a href="#update-track-muted" class="internalDFN" data-link-type="dfn">update the muted state</a> of the corresponding <code><a href="#dom-mediastreamtrack" class="internalDFN" data-link-type="dfn"><code>MediaStreamTrack</code></a>
        </code> with the value
        <code>true</code>. When media data is available again, the <a data-lt="update the muted state" href="#update-track-muted" class="internalDFN" data-link-type="dfn">muted state <em class="rfc2119" title="MUST">MUST</em> be updated</a> with the value
        <code>false</code>.</p>
      <div class="issue" id="issue-4">
        <div class="issue-title marker" aria-level="4" role="heading" id="h-issue4"><span>Issue 4</span></div>
        <p class="">The mute signal mentioned in the previous paragraph is yet to be defined.</p>
      </div>
      <p>The procedure <dfn id="update-track-muted" data-dfn-type="dfn">update a track's muted state</dfn> is specified in [
        <cite><a class="bibref" href="#bib-GETUSERMEDIA">GETUSERMEDIA</a></cite>].</p>
      <p>When a track comes from a remote peer and the remote peer has permanently stopped sending data the <code>ended</code> event <em class="rfc2119" title="MUST">MUST</em> be fired on the track, as specified in [<cite><a class="bibref" href="#bib-GETUSERMEDIA">GETUSERMEDIA</a></cite>].</p>
      <div class="issue" id="issue-5">
        <div class="issue-title marker" aria-level="4" role="heading" id="h-issue5"><span>Issue 5</span></div>
        <p class="">How do you know when it has stopped? This seems like an SDP question, not a media-level question. (Suggestion: when the track is ended, either through port 0, or removing the a=msid attrib)</p>
      </div>
      <p>When a <a href="#dfn-remote-source" class="internalDFN" data-link-type="dfn">remote source</a> is notified that a
        <code><a href="#dom-mediastreamtrack" class="internalDFN" data-link-type="dfn"><code>MediaStreamTrack</code></a>
        </code>, using the source, has
        <code>ended</code> [<cite><a class="bibref" href="#bib-GETUSERMEDIA">GETUSERMEDIA</a></cite>] the User Agent <em class="rfc2119" title="MAY">MAY</em> choose to free resources allocated for the incoming stream, for instance turn off the decoder.
      </p>

      <section id="mediatracksupportedconstraints-mediatrackcapabilities-mediatrackconstraints-and-mediatracksettings" typeof="bibo:Chapter" resource="#mediatracksupportedconstraints-mediatrackcapabilities-mediatrackconstraints-and-mediatracksettings" property="bibo:hasPart">
        <h4 id="h-mediatracksupportedconstraints-mediatrackcapabilities-mediatrackconstraints-and-mediatracksettings" resource="#h-mediatracksupportedconstraints-mediatrackcapabilities-mediatrackconstraints-and-mediatracksettings"><span property="xhv:role" resource="xhv:heading"><span class="secno">10.3.1 </span>MediaTrackSupportedConstraints, MediaTrackCapabilities, MediaTrackConstraints and MediaTrackSettings</span>
        </h4>
        <p>The basics of <code>MediaTrackSupportedConstraints</code>,
          <code>MediaTrackCapabilites</code>, <code>MediaTrackConstraints</code> and <code>MediaTrackSettings</code> is outlined in [<cite><a class="bibref" href="#bib-GETUSERMEDIA">GETUSERMEDIA</a></cite>]. However, the <code>MediaTrackSettings</code> for a
          <code>MediaStreamTrack</code> sourced by a
          <code><a href="#dom-rtcpeerconnection" class="internalDFN" data-link-type="dfn"><code>RTCPeerConnection</code></a>
          </code> will only be populated with members to the extent that data is supplied by means of the remote
          <code><a href="#idl-def-rtcsessiondescription" class="internalDFN" data-link-type="dfn"><code>RTCSessionDescription</code></a>
          </code> applied via
          <code>setRemoteDescription</code> and the actual RTP data. This means that certain members, such as <code>facingMode</code>,
          <code>echoCancellation</code> , <code>latency</code>,
          <code>deviceId</code> and <code>groupId</code>, will always be missing.
        </p>
      </section>
    </section>

    <section id="isolated-media-streams" typeof="bibo:Chapter" resource="#isolated-media-streams" property="bibo:hasPart">
      <h3 id="h-isolated-media-streams" resource="#h-isolated-media-streams"><span property="xhv:role" resource="xhv:heading"><span class="secno">10.4 </span>Isolated Media Streams</span>
      </h3>
      <p>A MediaStream acquired using <code>getUserMedia()</code> is, by default, accessible to an application. This means that the application is able to access the contents of tracks, modify their content, and send that media to any peer it chooses.</p>
      <p>WebRTC supports calling scenarios where media is sent to a specifically identified peer, without the contents of media streams being accessible to applications. This is enabled by use of the
        <code>peerIdentity</code> parameter to <code>getUserMedia()</code>.</p>
      <p>An application willingly relinquishes access to media by including a
        <code>peerIdentity</code> parameter in the
        <code>MediaStreamConstraints</code>. This attribute is set to a
        <code>DOMString</code> containing the identity of a specific peer.</p>
      <p>The <code>MediaStreamConstraints</code> dictionary is expanded to include the <code>peerIdentity</code> parameter.</p>
      <div>
        <pre class="def idl"><span class="idlDictionary" id="idl-def-mediastreamconstraints-partial-1" data-idl="" data-title="MediaStreamConstraints">partial dictionary <span class="idlDictionaryID"><a data-lt="MediaStreamConstraints" href="#dom-mediastreamconstraints" class="internalDFN" data-link-type="dfn" data-for=""><code>MediaStreamConstraints</code></a></span> {
<span class="idlMember" id="idl-def-mediastreamconstraints-peeridentity" data-idl="" data-title="peerIdentity" data-dfn-for="mediastreamconstraints">    <span class="idlMemberType">DOMString</span> <span class="idlMemberName"><a data-lt="peerIdentity" href="#dom-mediastreamconstraints-peeridentity" class="internalDFN" data-link-type="dfn" data-for="MediaStreamConstraints"><code>peerIdentity</code></a></span>;</span>
};</span></pre>

        <section typeof="bibo:Chapter" resource="#dictionary-mediastreamconstraints-members" property="bibo:hasPart">
          <h4 id="dictionary-mediastreamconstraints-members" resource="#dictionary-mediastreamconstraints-members"><span property="xhv:role" resource="xhv:heading">Dictionary <a class="idlType internalDFN" href="#dom-mediastreamconstraints" data-link-type="dfn"><code>MediaStreamConstraints</code></a>
          Members</span></h4>
          <dl data-link-for="MediaStreamConstraints" data-dfn-for="MediaStreamConstraints" class="dictionary-members">
            <dt><dfn data-dfn-for="mediastreamconstraints" data-dfn-type="dfn" id="dom-mediastreamconstraints-peeridentity" data-idl=""><code>peerIdentity</code></dfn> of type <span class="idlMemberType">DOMString</span></dt>
            <dd>
              <p>If set, <code>peerIdentity</code> isolates media from the application. Media can only be sent to the identified peer.</p>
            </dd>
          </dl>
        </section>
      </div>
      <p>A user that is prompted to provide consent for access to a camera or microphone can be shown the value of the <code>peerIdentity</code> parameter, so that they can be informed that the consent is more narrowly restricted.
      </p>
      <p>When the <code><dfn data-dfn-type="dfn" id="dfn-peeridentity">peerIdentity</dfn></code> option is supplied to
        <code>getUserMedia()</code>, all of the <code>MediaStreamTrack</code>s in the resulting <code>MediaStream</code> are isolated so that content is not accessible to any application. Isolated
        <code>MediaStreamTrack</code>s can be used for two purposes:</p>
      <ul>
        <li>
          <p>Displayed in an appropriate media tag (e.g., a video or audio element). The browser <em class="rfc2119" title="MUST">MUST</em> ensure that content is inaccessible to the application by ensuring that the resulting content is given the same protections as content that is <a href="http://www.w3.org/html/wg/drafts/html/master/infrastructure.html#cors-cross-origin">
          CORS cross-origin</a>, as described in the relevant <a href="http://www.w3.org/html/wg/drafts/html/master/semantics.html#security-and-privacy-considerations">
          Security and privacy considerations section</a> of [<cite><a class="bibref" href="#bib-HTML5">HTML5</a></cite>].</p>
        </li>
        <li>
          <p>Used as the argument to <a data-for="RTCPeerConnection" href="#dom-rtcpeerconnection-addtrack" class="internalDFN" data-link-type="dfn"><code>addTrack</code></a> on an
            <code><a href="#dom-rtcpeerconnection" class="internalDFN" data-link-type="dfn"><code>RTCPeerConnection</code></a>
            </code> instance, subject to the restrictions in <a href="#isolated-pc">isolated streams and
          RTCPeerConnection</a>.</p>
        </li>
      </ul>
      <p>A <code>MediaStreamTrack</code> that is added to another
        <code>MediaStream</code> remains isolated. When an isolated
        <code>MediaStreamTrack</code> is added to a <code>MediaStream</code> with a different peerIdentity, the <code>MediaStream</code> gets a combination of isolation restrictions. A <code>MediaStream</code> containing
        <code>MediaStreamTrack</code> instances with mixed isolation properties can be displayed, but cannot be sent using
        <code><a href="#dom-rtcpeerconnection" class="internalDFN" data-link-type="dfn"><code>RTCPeerConnection</code></a>
        </code>.</p>
      <p>Any <code>peerIdentity</code> property <em class="rfc2119" title="MUST">MUST</em> be retained on cloned copies of <code>MediaStreamTrack</code>s.</p>
      <!-- Any stream or track that might be derived from an isolated stream,
           such as
           through <a href="https://www.w3.org/TR/streamproc/#media-element-extensions">captureStreamUntilEnded
           or captureStream</a>, MUST also retain any isolation protections.
        -->

      <section id="isolated-track" typeof="bibo:Chapter" resource="#isolated-track" property="bibo:hasPart">
        <h4 id="h-isolated-track" resource="#h-isolated-track"><span property="xhv:role" resource="xhv:heading"><span class="secno">10.4.1 </span>Extended MediaStreamTrack Properties</span>
        </h4>
        <p><code>MediaStreamTrack</code> is expanded to include an
          <var>isolated</var> attribute and a corresponding event. This allows an application to quickly and easily determine whether a track is accessible.
        </p>
        <div>
          <pre class="def idl"><span class="idlInterface" id="idl-def-mediastreamtrack-partial-1" data-idl="" data-title="MediaStreamTrack">partial interface <span class="idlInterfaceID"><a data-lt="MediaStreamTrack" href="#dom-mediastreamtrack" class="internalDFN" data-link-type="dfn" data-for=""><code>MediaStreamTrack</code></a></span> {
<span class="idlAttribute" id="idl-def-mediastreamtrack-isolated" data-idl="" data-title="isolated" data-dfn-for="mediastreamtrack">    readonly attribute <span class="idlAttrType">boolean</span>      <span class="idlAttrName"><a data-lt="isolated" href="#dom-mediastreamtrack-isolated" class="internalDFN" data-link-type="dfn" data-for="MediaStreamTrack"><code>isolated</code></a></span>;</span>
<span class="idlAttribute" id="idl-def-mediastreamtrack-onisolationchange" data-idl="" data-title="onisolationchange" data-dfn-for="mediastreamtrack">             attribute <span class="idlAttrType">EventHandler</span> <span class="idlAttrName"><a data-lt="onisolationchange" href="#dom-mediastreamtrack-onisolationchange" class="internalDFN" data-link-type="dfn" data-for="MediaStreamTrack"><code>onisolationchange</code></a></span>;</span>
};</span></pre>

          <section typeof="bibo:Chapter" resource="#attributes-24" property="bibo:hasPart">
            <h5 id="attributes-24" resource="#attributes-24"><span property="xhv:role" resource="xhv:heading">Attributes</span></h5>
            <dl data-link-for="MediaStreamTrack" data-dfn-for="MediaStreamTrack" class="attributes">
              <dt><dfn data-dfn-for="mediastreamtrack" data-dfn-type="dfn" id="dom-mediastreamtrack-isolated" data-idl=""><code>isolated</code></dfn> of type <span class="idlAttrType">boolean</span>, readonly</dt>
              <dd>
                <p>A <code>MediaStreamTrack</code> is isolated (and the corresponding <var>isolated</var> attribute set to
                  <var>true</var>) when content is inaccessible to the owning document. This occurs as a result of setting the
                  <var>peerIdentity</var> option. A track is also isolated if it comes from a cross origin source.</p>
              </dd>
              <dt><dfn data-dfn-for="mediastreamtrack" data-dfn-type="dfn" id="dom-mediastreamtrack-onisolationchange" data-idl=""><code>onisolationchange</code></dfn> of type
              <span class="idlAttrType">EventHandler</span></dt>
              <dd>
                <p>This event handler, of type <a href="#event-isolationchange" class="internalDFN" data-link-type="dfn"><code>isolationchange</code></a>, is fired when the value of the <var>isolated</var> attribute changes.
                </p>
              </dd>
            </dl>
          </section>
        </div>
      </section>

      <section id="isolated-pc" typeof="bibo:Chapter" resource="#isolated-pc" property="bibo:hasPart">
        <h4 id="h-isolated-pc" resource="#h-isolated-pc"><span property="xhv:role" resource="xhv:heading"><span class="secno">10.4.2 </span>Isolated Streams and RTCPeerConnection</span>
        </h4>
        <p>A <code>MediaStreamTrack</code> with a <var>peerIdentity</var> option set can be added to any <code><a href="#dom-rtcpeerconnection" class="internalDFN" data-link-type="dfn"><code>RTCPeerConnection</code></a>
          </code>. However, the content of an isolated track <em class="rfc2119" title="MUST NOT">MUST NOT</em> be transmitted unless all of the following constraints are met:</p>
        <ul>
          <li>
            <p>A <code>MediaStreamTrack</code> from a stream acquired using the
              <var>peerIdentity</var> option can be transmitted if the
              <code><a href="#dom-rtcpeerconnection" class="internalDFN" data-link-type="dfn"><code>RTCPeerConnection</code></a>
              </code> has successfully <a href="#sec.identity-verify-assertion">validated the identity</a> of the peer AND that identity is the same identity that was used in the
              <var>peerIdentity</var> option associated with the track. That is, the <code>name</code> attribute of the <code>peerIdentity</code> attribute of the <code><a href="#dom-rtcpeerconnection" class="internalDFN" data-link-type="dfn"><code>RTCPeerConnection</code></a>
              </code> instance
              <em class="rfc2119" title="MUST">MUST</em> match the value of the <code>peerIdentity</code> option passed to <code>getUserMedia()</code>.</p>
            <p>Rules for matching identity are described in [
              <cite><a class="bibref" href="#bib-RTCWEB-SECURITY-ARCH">RTCWEB-SECURITY-ARCH</a></cite>].</p>
          </li>
          <li>
            <p>The peer has indicated that it will respect the isolation properties of streams. That is, a DTLS connection with a promise to respect stream confidentiality, as defined in [<cite><a class="bibref" href="#bib-RTCWEB-ALPN">RTCWEB-ALPN</a></cite>] has been established.</p>
          </li>
        </ul>
        <p>Failing to meet these conditions means that no media can be sent for the affected <code>MediaStreamTrack</code>. Video <em class="rfc2119" title="MUST">MUST</em> be replaced by black frames, audio <em class="rfc2119" title="MUST">MUST</em> be replaced by silence, and equivalently information-free content <em class="rfc2119" title="MUST">MUST</em> be provided for other media types.</p>
        <p>Remotely sourced <code>MediaStreamTrack</code>s <em class="rfc2119" title="MUST">MUST</em> be isolated if they are received over a DTLS connection that has been negotiated with track isolation. This protects isolated media from the application in the receiving browser. These tracks <em class="rfc2119" title="MUST">MUST</em> only be displayed to a user using the appropriate media element (e.g., &lt;video&gt; or &lt;audio&gt;).
        </p>
        <p>Any <code>MediaStreamTrack</code> that has the
          <var>peerIdentity</var> option set causes all tracks sent using the same <code><a href="#dom-rtcpeerconnection" class="internalDFN" data-link-type="dfn"><code>RTCPeerConnection</code></a>
          </code> to be isolated at the receiving peer. All DTLS connections created for a
          <code><a href="#dom-rtcpeerconnection" class="internalDFN" data-link-type="dfn"><code>RTCPeerConnection</code></a>
          </code> with isolated local streams <em class="rfc2119" title="MUST">MUST</em> be negotiated so that media remains isolated at the remote peer. This causes non-isolated media to become isolated at the receiving peer if any isolated tracks are added to the same
          <code><a href="#dom-rtcpeerconnection" class="internalDFN" data-link-type="dfn"><code>RTCPeerConnection</code></a>
          </code>.</p>
        <div class="note">
          <div class="note-title marker" aria-level="5" role="heading" id="h-note15"><span>Note</span></div>
          <p class="">Tracks that are not bound to a particular
            <var>peerIdentity</var> do not cause other streams to be isolated, these tracks simply do not have their content transmitted.</p>
        </div>
        <p>If a stream becomes isolated after initially being accessible, or an isolated stream is added to an active session, then media for that stream is replaced by information-free content (e.g., black frames or silence).
        </p>
      </section>

      <section id="isolation-protection" typeof="bibo:Chapter" resource="#isolation-protection" property="bibo:hasPart">
        <h4 id="h-isolation-protection" resource="#h-isolation-protection"><span property="xhv:role" resource="xhv:heading"><span class="secno">10.4.3 </span>Protection Afforded by Media Isolation</span>
        </h4>
        <p>Media isolation ensures that the content of a
          <code>MediaStreamTrack</code> is not accessible to web applications. However, to ensure that media with a <var>peerIdentity</var> option set can be sent to peers, some meta-information about the media will be exposed to applications.</p>
        <p>Applications will be able to observe the parameters of the media that affect session negotiation and conversion into RTP. This includes the codecs that might be supported by the track, the bitrate, the number of packets, and the current settings that are set on the
          <code>MediaStreamTrack</code>.</p>
        <p>In particular, the <a href="#sec.stats-model">statistics</a> that
          <code><a href="#dom-rtcpeerconnection" class="internalDFN" data-link-type="dfn"><code>RTCPeerConnection</code></a>
          </code> records are not reduced in capability. New statistics that might compromise isolation <em class="rfc2119" title="MUST">MUST</em> be avoided, or explicitly suppressed for isolated streams.</p>
        <p>Most of these data are exposed to the network when the media is transmitted. Only the settings for the <code>MediaStreamTrack</code> present a new source of information. This can includes the frame rate and resolution of video tracks, the bandwidth of audio tracks, and other information about the source, which would not otherwise be revealed to a network observer. Since settings don't change at a high frequency or in response to changes in media content, settings only reveal limited reveal information about the content of a track. However, any setting that might change dynamically in response to the content of an isolated <code>MediaStreamTrack</code> <em class="rfc2119" title="MUST">MUST</em> have changes suppressed.
        </p>
      </section>
    </section>
  </section>

  <section class="informative" id="examples-and-call-flows" typeof="bibo:Chapter" resource="#examples-and-call-flows" property="bibo:hasPart">
    <!--OddPage-->
    <h2 id="h-examples-and-call-flows" resource="#h-examples-and-call-flows"><span property="xhv:role" resource="xhv:heading"><span class="secno">11. </span>Examples and Call Flows</span>
    </h2>
    <p><em>This section is non-normative.</em></p>

    <section id="simple-peer-to-peer-example" typeof="bibo:Chapter" resource="#simple-peer-to-peer-example" property="bibo:hasPart">
      <h3 id="h-simple-peer-to-peer-example" resource="#h-simple-peer-to-peer-example"><span property="xhv:role" resource="xhv:heading"><span class="secno">11.1 </span>Simple Peer-to-peer Example</span>
      </h3>
      <div>
        <p>When two peers decide they are going to set up a connection to each other, they both go through these steps. The STUN/TURN server configuration describes a server they can use to get things like their public IP address or to set up NAT traversal. They also have to send data for the signaling channel to each other using the same out-of-band mechanism they used to establish that they were going to communicate in the first place.</p>
        <div class="example">
          <div class="example-title marker"><span>Example 11</span></div><pre class="highlight hljs javascript"><span class="hljs-keyword">var</span> signalingChannel = <span class="hljs-keyword">new</span> SignalingChannel();
<span class="hljs-keyword">var</span> configuration = { <span class="hljs-string">"iceServers"</span>: [{ <span class="hljs-string">"urls"</span>: <span class="hljs-string">"stuns:stun.example.org"</span> }] };
<span class="hljs-keyword">var</span> pc;

<span class="hljs-comment">// call start() to initiate</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">start</span>(<span class="hljs-params"></span>) </span>{
    pc = <span class="hljs-keyword">new</span> RTCPeerConnection(configuration);

    <span class="hljs-comment">// send any ice candidates to the other peer</span>
    pc.onicecandidate = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">evt</span>) </span>{
        signalingChannel.send(<span class="hljs-built_in">JSON</span>.stringify({ <span class="hljs-string">"candidate"</span>: evt.candidate }));
    };

    <span class="hljs-comment">// let the "negotiationneeded" event trigger offer generation</span>
    pc.onnegotiationneeded = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
        pc.createOffer().then(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">offer</span>) </span>{
            <span class="hljs-keyword">return</span> pc.setLocalDescription(offer);
        })
        .then(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
            <span class="hljs-comment">// send the offer to the other peer</span>
            signalingChannel.send(<span class="hljs-built_in">JSON</span>.stringify({ <span class="hljs-string">"desc"</span>: pc.localDescription }));
        })
        .catch(logError);
    };

    <span class="hljs-comment">// once remote video track arrives, show it in the remote video element</span>
    pc.ontrack = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">evt</span>) </span>{
        <span class="hljs-keyword">if</span> (evt.track.kind === <span class="hljs-string">"video"</span>)
          remoteView.srcObject = evt.streams[<span class="hljs-number">0</span>];
    };

    <span class="hljs-comment">// get a local stream, show it in a self-view and add it to be sent</span>
    navigator.mediaDevices.getUserMedia({ <span class="hljs-string">"audio"</span>: <span class="hljs-literal">true</span>, <span class="hljs-string">"video"</span>: <span class="hljs-literal">true</span> })
        .then(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">stream</span>) </span>{
            selfView.srcObject = stream;
            pc.addTrack(stream.getAudioTracks()[<span class="hljs-number">0</span>], stream);
            pc.addTrack(stream.getVideoTracks()[<span class="hljs-number">0</span>], stream);
        })
        .catch(logError);
}

signalingChannel.onmessage = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">evt</span>) </span>{
    <span class="hljs-keyword">if</span> (!pc)
        start();

    <span class="hljs-keyword">var</span> message = <span class="hljs-built_in">JSON</span>.parse(evt.data);
    <span class="hljs-keyword">if</span> (message.desc) {
        <span class="hljs-keyword">var</span> desc = message.desc;

        <span class="hljs-comment">// if we get an offer, we need to reply with an answer</span>
        <span class="hljs-keyword">if</span> (desc.type == <span class="hljs-string">"offer"</span>) {
            pc.setRemoteDescription(desc).then(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
                <span class="hljs-keyword">return</span> pc.createAnswer();
            })
            .then(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">answer</span>) </span>{
                <span class="hljs-keyword">return</span> pc.setLocalDescription(answer);
            })
            .then(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
                <span class="hljs-keyword">var</span> str = <span class="hljs-built_in">JSON</span>.stringify({ <span class="hljs-string">"desc"</span>: pc.localDescription });
                signalingChannel.send(str);
            })
            .catch(logError);
        } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (desc.type == <span class="hljs-string">"answer"</span>) {
            pc.setRemoteDescription(desc).catch(logError);
        } <span class="hljs-keyword">else</span> {
            log(<span class="hljs-string">"Unsupported SDP type. Your code may differ here."</span>);
        }
    } <span class="hljs-keyword">else</span>
        pc.addIceCandidate(message.candidate).catch(logError);
};

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">logError</span>(<span class="hljs-params">error</span>) </span>{
    log(error.name + <span class="hljs-string">": "</span> + error.message);
}</pre></div>
      </div>
    </section>

    <section id="simple-peer-to-peer-example-with-warm-up" typeof="bibo:Chapter" resource="#simple-peer-to-peer-example-with-warm-up" property="bibo:hasPart">
      <h3 id="h-simple-peer-to-peer-example-with-warm-up" resource="#h-simple-peer-to-peer-example-with-warm-up"><span property="xhv:role" resource="xhv:heading"><span class="secno">11.2 </span>Simple Peer-to-peer Example with Warm-up</span>
      </h3>
      <div>
        <p>When two peers decide they are going to set up a connection to each other and want to have the ICE, DTLS, and media connections "warmed up" such that they are ready to send and receive media immediately, they both go through these steps.</p>
        <div class="example">
          <div class="example-title marker"><span>Example 12</span></div><pre class="highlight hljs javascript"><span class="hljs-keyword">var</span> signalingChannel = <span class="hljs-keyword">new</span> SignalingChannel();
<span class="hljs-keyword">var</span> configuration = { <span class="hljs-string">"iceServers"</span>: [{ <span class="hljs-string">"urls"</span>: <span class="hljs-string">"stuns:stun.example.org"</span> }] };
<span class="hljs-keyword">var</span> pc;
<span class="hljs-keyword">var</span> audio = <span class="hljs-literal">null</span>;
<span class="hljs-keyword">var</span> audioSendTrack = <span class="hljs-literal">null</span>;
<span class="hljs-keyword">var</span> video = <span class="hljs-literal">null</span>;
<span class="hljs-keyword">var</span> videoSendTrack = <span class="hljs-literal">null</span>;
<span class="hljs-keyword">var</span> started = <span class="hljs-literal">false</span>;

<span class="hljs-comment">// Call warmp() to warm-up ICE, DTLS, and media, but not send media yet.</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">warmup</span>(<span class="hljs-params">answerer</span>) </span>{
    pc = <span class="hljs-keyword">new</span> RTCPeerConnection(configuration);
    <span class="hljs-keyword">if</span> (!answerer) {
      audio = pc.addTransceiver(<span class="hljs-string">"audio"</span>);
      video = pc.addTransceiver(<span class="hljs-string">"video"</span>);
    }

    <span class="hljs-comment">// send any ice candidates to the other peer</span>
    pc.onicecandidate = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">evt</span>) </span>{
        signalingChannel.send(<span class="hljs-built_in">JSON</span>.stringify({ <span class="hljs-string">"candidate"</span>: evt.candidate }));
    };

    <span class="hljs-comment">// let the "negotiationneeded" event trigger offer generation</span>
    pc.onnegotiationneeded = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
        pc.createOffer().then(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">offer</span>) </span>{
            <span class="hljs-keyword">return</span> pc.setLocalDescription(offer);
        })
        .then(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
            <span class="hljs-comment">// send the offer to the other peer</span>
            signalingChannel.send(<span class="hljs-built_in">JSON</span>.stringify({ <span class="hljs-string">"desc"</span>: pc.localDescription }));
        })
        .catch(logError);
    };

    <span class="hljs-comment">// once remote video track arrives, show it in the remote video element</span>
    pc.ontrack = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">evt</span>) </span>{
        <span class="hljs-keyword">if</span> (evt.track.kind === <span class="hljs-string">"audio"</span>) {
          <span class="hljs-keyword">if</span> (answerer) {
            audio = evt.transceiver;
            audio.setDirection(<span class="hljs-string">"sendrecv"</span>);
            <span class="hljs-keyword">if</span> (started &amp;&amp; audioSendTrack) {
              audio.sender.replaceTrack(audioSendTrack);
            }
          }
        } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (evt.track.kind === <span class="hljs-string">"video"</span>) {
          <span class="hljs-keyword">if</span> (answerer) {
            video = evt.transceiver;
            video.setDirection(<span class="hljs-string">"sendrecv"</span>);
            <span class="hljs-keyword">if</span> (started &amp;&amp; videoSendTrack) {
              video.sender.replaceTrack(videoSendTrack);
            }
          }
          remoteView.srcObject = evt.streams[<span class="hljs-number">0</span>];
        }
    };

    <span class="hljs-comment">// get a local stream, show it in a self-view and add it to be sent</span>
    navigator.mediaDevices.getUserMedia({ <span class="hljs-string">"audio"</span>: <span class="hljs-literal">true</span>, <span class="hljs-string">"video"</span>: <span class="hljs-literal">true</span> })
      .then(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">stream</span>) </span>{
        selfView.srcObject = stream;
        audioSendTrack = stream.getAudioTracks()[<span class="hljs-number">0</span>];
        <span class="hljs-keyword">if</span> (started) {
          audio.sender.replaceTrack(audioSendTrack);
        }
        videoSendTrack = stream.getVideoTracks()[<span class="hljs-number">0</span>];
        <span class="hljs-keyword">if</span> (started) {
          video.sender.replaceTrack(videoSendTrack);
        }
      })
      .catch(logError);
}

<span class="hljs-comment">// Call start() to start sending media.</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">start</span>(<span class="hljs-params"></span>) </span>{
  started = <span class="hljs-literal">true</span>;
  signalingChannel.send(<span class="hljs-built_in">JSON</span>.stringify({ <span class="hljs-string">"start"</span>: <span class="hljs-literal">true</span> }));
}

signalingChannel.onmessage = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">evt</span>) </span>{
    <span class="hljs-keyword">if</span> (!pc)
        warmup(<span class="hljs-literal">true</span>);

    <span class="hljs-keyword">var</span> message = <span class="hljs-built_in">JSON</span>.parse(evt.data);
    <span class="hljs-keyword">if</span> (message.desc) {
        <span class="hljs-keyword">var</span> desc = message.desc;

        <span class="hljs-comment">// if we get an offer, we need to reply with an answer</span>
        <span class="hljs-keyword">if</span> (desc.type == <span class="hljs-string">"offer"</span>) {
            pc.setRemoteDescription(desc).then(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
                <span class="hljs-keyword">return</span> pc.createAnswer();
            })
            .then(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">answer</span>) </span>{
                <span class="hljs-keyword">return</span> pc.setLocalDescription(answer);
            })
            .then(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
                <span class="hljs-keyword">var</span> str = <span class="hljs-built_in">JSON</span>.stringify({ <span class="hljs-string">"desc"</span>: pc.localDescription });
                signalingChannel.send(str);
            })
            .catch(logError);
        } <span class="hljs-keyword">else</span>
            pc.setRemoteDescription(desc).catch(logError);
    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (message.start) {
      started = <span class="hljs-literal">true</span>;
      <span class="hljs-keyword">if</span> (audio &amp;&amp; audioSendTrack) {
        audio.sender.replaceTrack(audioSendTrack);
      }
      <span class="hljs-keyword">if</span> (video &amp;&amp; videoSendTrack) {
        video.sender.replaceTrack(videoSendTrack);
      }
    } <span class="hljs-keyword">else</span>
        pc.addIceCandidate(message.candidate).catch(logError);
};

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">logError</span>(<span class="hljs-params">error</span>) </span>{
    log(error.name + <span class="hljs-string">": "</span> + error.message);
}</pre></div>
      </div>
    </section>

    <section id="simple-peer-to-peer-example-with-media-before-signaling" typeof="bibo:Chapter" resource="#simple-peer-to-peer-example-with-media-before-signaling" property="bibo:hasPart">
      <h3 id="h-simple-peer-to-peer-example-with-media-before-signaling" resource="#h-simple-peer-to-peer-example-with-media-before-signaling"><span property="xhv:role" resource="xhv:heading"><span class="secno">11.3 </span>Simple Peer-to-peer Example with media before signaling</span>
      </h3>
      <div>
        <p>The answerer may wish to send media in parallel with sending the answer, and the offerer may wish to render the media before the answer arrives.
        </p>
        <div class="example">
          <div class="example-title marker"><span>Example 13</span></div><pre class="highlight hljs javascript"><span class="hljs-keyword">var</span> signalingChannel = <span class="hljs-keyword">new</span> SignalingChannel();
<span class="hljs-keyword">var</span> configuration = { <span class="hljs-string">"iceServers"</span>: [{ <span class="hljs-string">"urls"</span>: <span class="hljs-string">"stuns:stun.example.org"</span> }] };
<span class="hljs-keyword">var</span> pc;

<span class="hljs-comment">// call start() to initiate</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">start</span>(<span class="hljs-params"></span>) </span>{
    pc = <span class="hljs-keyword">new</span> RTCPeerConnection(configuration);

    <span class="hljs-comment">// send any ice candidates to the other peer</span>
    pc.onicecandidate = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">evt</span>) </span>{
        signalingChannel.send(<span class="hljs-built_in">JSON</span>.stringify({ <span class="hljs-string">"candidate"</span>: evt.candidate }));
    };

    <span class="hljs-comment">// let the "negotiationneeded" event trigger offer generation</span>
    pc.onnegotiationneeded = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
        pc.createOffer().then(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">offer</span>) </span>{
            <span class="hljs-keyword">return</span> pc.setLocalDescription(offer);
        })
        .then(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
            <span class="hljs-comment">// send the offer to the other peer</span>
            signalingChannel.send(<span class="hljs-built_in">JSON</span>.stringify({ <span class="hljs-string">"desc"</span>: pc.localDescription }));
        })
        .catch(logError);
    };

    <span class="hljs-comment">// get a local stream, show it in a self-view and add it to be sent</span>
    navigator.mediaDevices.getUserMedia({ <span class="hljs-string">"audio"</span>: <span class="hljs-literal">true</span>, <span class="hljs-string">"video"</span>: <span class="hljs-literal">true</span> })
        .then(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">stream</span>) </span>{
            selfView.srcObject = stream;
            <span class="hljs-keyword">var</span> remoteStream = <span class="hljs-keyword">new</span> MediaStream();
            <span class="hljs-keyword">var</span> audioSender = pc.addTrack(stream.getAudioTracks()[<span class="hljs-number">0</span>], stream);
            <span class="hljs-keyword">var</span> videoSender = pc.addTrack(stream.getVideoTracks()[<span class="hljs-number">0</span>], stream);
            [audioSender, videoSender].forEach(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">sender</span>) </span>{
                remoteStream.addTrack(pc.getReceivers.find(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">receiver</span>) </span>{
                    <span class="hljs-keyword">return</span> receiver.mid == sender.mid;
                }).track);
            });

            <span class="hljs-comment">// Render the media even before ontrack fires.</span>
            remoteView.srcObject = remoteStream;
        })
        .catch(logError);
}

signalingChannel.onmessage = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">evt</span>) </span>{
    <span class="hljs-keyword">if</span> (!pc)
        start();

    <span class="hljs-keyword">var</span> message = <span class="hljs-built_in">JSON</span>.parse(evt.data);
    <span class="hljs-keyword">if</span> (message.desc) {
        <span class="hljs-keyword">var</span> desc = message.desc;

        <span class="hljs-comment">// if we get an offer, we need to reply with an answer</span>
        <span class="hljs-keyword">if</span> (desc.type == <span class="hljs-string">"offer"</span>) {
            pc.setRemoteDescription(desc).then(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
                <span class="hljs-keyword">return</span> pc.createAnswer();
            })
            .then(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">answer</span>) </span>{
                <span class="hljs-keyword">return</span> pc.setLocalDescription(answer);
            })
            .then(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
                <span class="hljs-keyword">var</span> str = <span class="hljs-built_in">JSON</span>.stringify({ <span class="hljs-string">"desc"</span>: pc.localDescription });
                signalingChannel.send(str);
            })
            .catch(logError);
        } <span class="hljs-keyword">else</span>
            pc.setRemoteDescription(desc).catch(logError);
    } <span class="hljs-keyword">else</span>
        pc.addIceCandidate(message.candidate).catch(logError);
};

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">logError</span>(<span class="hljs-params">error</span>) </span>{
    log(error.name + <span class="hljs-string">": "</span> + error.message);
}</pre></div>
      </div>
    </section>

    <section id="simple-simulcast-example" typeof="bibo:Chapter" resource="#simple-simulcast-example" property="bibo:hasPart">
      <h3 id="h-simple-simulcast-example" resource="#h-simple-simulcast-example"><span property="xhv:role" resource="xhv:heading"><span class="secno">11.4 </span>Simple Simulcast Example</span>
      </h3>
      <div>
        <p>A client wants to send multiple RTP encodings (simulcast) to a server.
        </p>
        <div class="example">
          <div class="example-title marker"><span>Example 14</span></div><pre class="highlight hljs javascript"><span class="hljs-keyword">var</span> signalingChannel = <span class="hljs-keyword">new</span> SignalingChannel();
<span class="hljs-keyword">var</span> configuration = { <span class="hljs-string">"iceServers"</span>: [{ <span class="hljs-string">"urls"</span>: <span class="hljs-string">"stuns:stun.example.org"</span> }] };
<span class="hljs-keyword">var</span> pc;

<span class="hljs-comment">// call start() to initiate</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">start</span>(<span class="hljs-params"></span>) </span>{
    pc = <span class="hljs-keyword">new</span> RTCPeerConnection(configuration);

    <span class="hljs-comment">// let the "negotiationneeded" event trigger offer generation</span>
    pc.onnegotiationneeded = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
        pc.createOffer().then(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">offer</span>) </span>{
            <span class="hljs-keyword">return</span> pc.setLocalDescription(offer);
        })
        .then(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
            <span class="hljs-comment">// send the offer to the other peer</span>
            signalingChannel.send(<span class="hljs-built_in">JSON</span>.stringify({ <span class="hljs-string">"desc"</span>: pc.localDescription }));
        })
        .catch(logError);
    };

    <span class="hljs-comment">// get a local stream, show it in a self-view and add it to be sent</span>
    navigator.mediaDevices.getUserMedia({ <span class="hljs-string">"audio"</span>: <span class="hljs-literal">true</span>, <span class="hljs-string">"video"</span>: <span class="hljs-literal">true</span> })
        .then(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">stream</span>) </span>{
            selfView.srcObject = stream;
            pc.addTransceiver(stream.getAudioTracks()[<span class="hljs-number">0</span>], {<span class="hljs-attr">direction</span>: <span class="hljs-string">"sendonly"</span>});
            pc.addTransceiver(stream.getVideoTracks()[<span class="hljs-number">0</span>], {
                <span class="hljs-attr">direction</span>: <span class="hljs-string">"sendonly"</span>,
                <span class="hljs-attr">sendEncodings</span>: [
                    {
                      <span class="hljs-attr">rid</span>: <span class="hljs-string">"f"</span>,
                    },
                    {
                      <span class="hljs-attr">rid</span>: <span class="hljs-string">"h"</span>,
                      <span class="hljs-attr">scaleDownResolutionBy</span>: <span class="hljs-number">2.0</span>
                    },
                    {
                      <span class="hljs-attr">rid</span>: <span class="hljs-string">"q"</span>,
                      <span class="hljs-attr">scaleDownResolutionBy</span>: <span class="hljs-number">4.0</span>
                    }
                ]
            });
        })
        .catch(logError);
}

signalingChannel.onmessage = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">evt</span>) </span>{
    <span class="hljs-keyword">var</span> message = <span class="hljs-built_in">JSON</span>.parse(evt.data);
    <span class="hljs-keyword">if</span> (message.desc)
        pc.setRemoteDescription(message.desc).catch(logError);
    <span class="hljs-keyword">else</span>
        pc.addIceCandidate(message.candidate).catch(logError);
};

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">logError</span>(<span class="hljs-params">error</span>) </span>{
    log(error.name + <span class="hljs-string">": "</span> + error.message);
}</pre></div>
      </div>
    </section>

    <section id="advanced-peer-to-peer-example" typeof="bibo:Chapter" resource="#advanced-peer-to-peer-example" property="bibo:hasPart">
      <h3 id="h-advanced-peer-to-peer-example" resource="#h-advanced-peer-to-peer-example"><span property="xhv:role" resource="xhv:heading"><span class="secno">11.5 </span>Advanced Peer-to-peer Example</span>
      </h3>
      <div>
        <p>This example shows the more complete functionality.</p>
        <div class="issue" id="issue-6">
          <div class="issue-title marker" aria-level="4" role="heading" id="h-issue6"><span>Issue 6</span></div>
          <p class="">TODO</p>
        </div>
        <div class="example">
          <div class="example-title marker"><span>Example 15</span></div><pre class="highlight hljs"></pre></div>
      </div>
    </section>

    <section id="peer-to-peer-data-example" typeof="bibo:Chapter" resource="#peer-to-peer-data-example" property="bibo:hasPart">
      <h3 id="h-peer-to-peer-data-example" resource="#h-peer-to-peer-data-example"><span property="xhv:role" resource="xhv:heading"><span class="secno">11.6 </span>Peer-to-peer Data Example</span>
      </h3>
      <div>
        <p>This example shows how to create a
          <code><a href="#idl-def-rtcdatachannel" class="internalDFN" data-link-type="dfn"><code>RTCDataChannel</code></a>
          </code> object and perform the offer/answer exchange required to connect the channel to the other peer. The
          <code><a href="#idl-def-rtcdatachannel" class="internalDFN" data-link-type="dfn"><code>RTCDataChannel</code></a>
          </code> is used in the context of a simple chat application and listeners are attached to monitor when the channel is ready, messages are received and when the channel is closed.</p>
        <div class="example">
          <div class="example-title marker"><span>Example 16</span></div><pre class="highlight hljs javascript"><span class="hljs-keyword">var</span> signalingChannel = <span class="hljs-keyword">new</span> SignalingChannel();
<span class="hljs-keyword">var</span> configuration = { <span class="hljs-string">"iceServers"</span>: [{ <span class="hljs-string">"urls"</span>: <span class="hljs-string">"stuns:stun.example.org"</span> }] };
<span class="hljs-keyword">var</span> pc;
<span class="hljs-keyword">var</span> channel;

<span class="hljs-comment">// call start(true) to initiate</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">start</span>(<span class="hljs-params">isInitiator</span>) </span>{
    pc = <span class="hljs-keyword">new</span> RTCPeerConnection(configuration);

    <span class="hljs-comment">// send any ice candidates to the other peer</span>
    pc.onicecandidate = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">evt</span>) </span>{
        signalingChannel.send(<span class="hljs-built_in">JSON</span>.stringify({ <span class="hljs-string">"candidate"</span>: evt.candidate }));
    };

    <span class="hljs-comment">// let the "negotiationneeded" event trigger offer generation</span>
    pc.onnegotiationneeded = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
        pc.createOffer().then(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">offer</span>) </span>{
            <span class="hljs-keyword">return</span> pc.setLocalDescription(offer);
        })
        .then(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
            <span class="hljs-comment">// send the offer to the other peer</span>
            signalingChannel.send(<span class="hljs-built_in">JSON</span>.stringify({ <span class="hljs-string">"desc"</span>: pc.localDescription }));
        })
        .catch(logError);
    };

    <span class="hljs-keyword">if</span> (isInitiator) {
        <span class="hljs-comment">// create data channel and setup chat</span>
        channel = pc.createDataChannel(<span class="hljs-string">"chat"</span>);
        setupChat();
    } <span class="hljs-keyword">else</span> {
        <span class="hljs-comment">// setup chat on incoming data channel</span>
        pc.ondatachannel = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">evt</span>) </span>{
            channel = evt.channel;
            setupChat();
        };
    }
}

signalingChannel.onmessage = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">evt</span>) </span>{
    <span class="hljs-keyword">if</span> (!pc)
        start(<span class="hljs-literal">false</span>);

    <span class="hljs-keyword">var</span> message = <span class="hljs-built_in">JSON</span>.parse(evt.data);
    <span class="hljs-keyword">if</span> (message.desc) {
        <span class="hljs-keyword">var</span> desc = message.desc;

        <span class="hljs-comment">// if we get an offer, we need to reply with an answer</span>
        <span class="hljs-keyword">if</span> (desc.type == <span class="hljs-string">"offer"</span>) {
            pc.setRemoteDescription(desc).then(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
                <span class="hljs-keyword">return</span> pc.createAnswer();
            })
            .then(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">answer</span>) </span>{
                <span class="hljs-keyword">return</span> pc.setLocalDescription(answer);
            })
            .then(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
                <span class="hljs-keyword">var</span> str = <span class="hljs-built_in">JSON</span>.stringify({ <span class="hljs-string">"desc"</span>: pc.localDescription });
                signalingChannel.send(str);
            })
            .catch(logError);
        } <span class="hljs-keyword">else</span>
            pc.setRemoteDescription(desc).catch(logError);
    } <span class="hljs-keyword">else</span>
        pc.addIceCandidate(message.candidate).catch(logError);
};

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">setupChat</span>(<span class="hljs-params"></span>) </span>{
    channel.onopen = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
        <span class="hljs-comment">// e.g. enable send button</span>
        enableChat(channel);
    };

    channel.onmessage = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">evt</span>) </span>{
        showChatMessage(evt.data);
    };
}

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">sendChatMessage</span>(<span class="hljs-params">msg</span>) </span>{
    channel.send(msg);
}

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">logError</span>(<span class="hljs-params">error</span>) </span>{
    log(error.name + <span class="hljs-string">": "</span> + error.message);
}</pre></div>
      </div>
      <!--div>
    <p>This simple example shows how configure two RTCDataChannel objects for different purposes.</p>
<p><pre   class='example highlight'>
// the chat channel is reliable and not as prioritized as game data
var chatChan = peerConn.createDataChannel("chat", { "priority": 1 });

// the game data channel is prioritized and unreliable low latency channel for high performance
var gameDataChan = peerConn.createDataChannel("data", { "reliable": false, "priority": 10 });
    </pre></p>
  </div-->
    </section>

    <section id="call-flow-browser-to-browser" typeof="bibo:Chapter" resource="#call-flow-browser-to-browser" property="bibo:hasPart">
      <h3 id="h-call-flow-browser-to-browser" resource="#h-call-flow-browser-to-browser"><span property="xhv:role" resource="xhv:heading"><span class="secno">11.7 </span>Call Flow Browser to Browser</span>
      </h3>
      <div class="issue" id="issue-7">
        <div class="issue-title marker" aria-level="4" role="heading" id="h-issue7"><span>Issue 7</span></div>
        <p class="">Editors' Note: This example flow needs to be discussed on the list and is likely wrong in many ways.</p>
      </div>
      <p>This shows an example of one possible call flow between two browsers. This does not show the procedure to get access to local media or every callback that gets fired but instead tries to reduce it down to only show the key events and messages.</p>
      <p><img alt="A message sequence chart detailing a call flow between two browsers" src="images/ladder-2party-simple.svg" style="width:100%"></p>
      <!--
      <p>The following flow shows a more complete set of the callbacks and
      events that happen.</p>

      <p><img alt=
      "A more complete message sequence chart detailing a call flow between two browsers"
      src="images/ladder-2party-full.svg" style="width:100%"></p>
      -->
    </section>

    <section id="dtmf-example" typeof="bibo:Chapter" resource="#dtmf-example" property="bibo:hasPart">
      <h3 id="h-dtmf-example" resource="#h-dtmf-example"><span property="xhv:role" resource="xhv:heading"><span class="secno">11.8 </span>DTMF Example</span>
      </h3>
      <p>Examples assume that <var>sender</var> is an RTCRtpSender.</p>
      <p>Sending the DTMF signal "1234" with 500 ms duration per tone:</p>
      <div class="example">
        <div class="example-title marker"><span>Example 17</span></div><pre class="highlight hljs javascript"><span class="hljs-keyword">if</span> (sender.dtmf) {
    <span class="hljs-keyword">var</span> duration = <span class="hljs-number">500</span>;
    sender.dtmf.insertDTMF(<span class="hljs-string">"1234"</span>, duration);
} <span class="hljs-keyword">else</span>
    log(<span class="hljs-string">"DTMF function not available"</span>);</pre></div>
      <p>Send the DTMF signal "1234", and light up the active key using
        <code>lightKey(key)</code> while the tone is playing (assuming that
        <code>lightKey("")</code> will darken all the keys):</p>
      <div class="example">
        <div class="example-title marker"><span>Example 18</span></div><pre class="highlight hljs javascript"><span class="hljs-keyword">if</span> (sender.dtmf) {
  sender.dtmf.ontonechange = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">e</span>) </span>{
      <span class="hljs-keyword">if</span> (!e.tone)
          <span class="hljs-keyword">return</span>;
      <span class="hljs-comment">// light up the key when playout starts</span>
      lightKey(e.tone);
      <span class="hljs-comment">// turn off the light after tone duration</span>
      setTimeout(lightKey, sender.duration, <span class="hljs-string">""</span>);
  };
  sender.dtmf.insertDTMF(<span class="hljs-string">"1234"</span>);
} <span class="hljs-keyword">else</span>
    log(<span class="hljs-string">"DTMF function not available"</span>);</pre></div>
      <p>Send a 1-second "1" tone followed by a 2-second "2" tone:</p>
      <div class="example">
        <div class="example-title marker"><span>Example 19</span></div><pre class="highlight hljs javascript"><span class="hljs-keyword">if</span> (sender.dtmf) {
  sender.dtmf.ontonechange = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">e</span>) </span>{
      <span class="hljs-keyword">if</span> (e.tone == <span class="hljs-string">"1"</span>)
          sender.dtmf.insertDTMF(<span class="hljs-string">"2"</span>, <span class="hljs-number">2000</span>);
  };
  sender.dtmf.isertDTMF(<span class="hljs-string">"1"</span>, <span class="hljs-number">1000</span>);
} <span class="hljs-keyword">else</span>
    log(<span class="hljs-string">"DTMF function not available"</span>);</pre></div>
      <p>It is always safe to append to the tone buffer. This example appends before any tone playout has started as well as during playout.</p>
      <div class="example">
        <div class="example-title marker"><span>Example 20</span></div><pre class="highlight hljs javascript"><span class="hljs-keyword">if</span> (sender.dtmf) {
  sender.dtmf.insertDTMF(<span class="hljs-string">"123"</span>);
  <span class="hljs-comment">// append more tones to the tone buffer before playout has begun</span>
  sender.dtmf.insertDTMF(sender.toneBuffer + <span class="hljs-string">"456"</span>);

  sender.dtmf.ontonechange = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">e</span>) </span>{
      <span class="hljs-keyword">if</span> (e.tone == <span class="hljs-string">"1"</span>)
          <span class="hljs-comment">// append more tones when playout has begun</span>
          sender.dtmf.insertDTMF(sender.toneBuffer + <span class="hljs-string">"789"</span>);
  };
} <span class="hljs-keyword">else</span>
    log(<span class="hljs-string">"DTMF function not available"</span>);</pre></div>
      <p>Send the DTMF signal "123" and abort after sending "2".</p>
      <div class="example">
        <div class="example-title marker"><span>Example 21</span></div><pre class="highlight hljs javascript"><span class="hljs-keyword">if</span> (sender.dtmf) {
  sender.dtmf.ontonechange = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">e</span>) </span>{
      <span class="hljs-keyword">if</span> (e.tone == <span class="hljs-string">"2"</span>)
          <span class="hljs-comment">// empty the buffer to not play any tone after "2"</span>
          sender.dtmf.insertDTMF(<span class="hljs-string">""</span>);
  };
  sender.dtmf.insertDTMF(<span class="hljs-string">"123"</span>);
} <span class="hljs-keyword">else</span>
    log(<span class="hljs-string">"DTMF function not available"</span>);</pre></div>
    </section>
    <!--
    <section>
      <h3>Call Flow Browser to MCU</h3>

      <p class="note">Editors' Note: This example flow needs to be discussed on
      the list and is likely wrong in many ways.</p>

      <p>This shows an example of one possible call flow between a centralized
      conferencing server and a browser. This does not show every callback that
      gets fired but instead tries to reduce it down to only show the key
      events and messages.</p>

      <p><img alt=
      "A message sequence chart detailing a call flow between a browser and a centralized conferencing server"
      src="images/ladder-mcu-simple.svg" style="width:100%"></p>
    </section>
-->
  </section>

  <section class="informative" id="event-summary" typeof="bibo:Chapter" resource="#event-summary" property="bibo:hasPart">
    <!--OddPage-->
    <h2 id="h-event-summary" resource="#h-event-summary"><span property="xhv:role" resource="xhv:heading"><span class="secno">12. </span>Event summary</span>
    </h2>
    <p><em>This section is non-normative.</em></p>
    <p>The following events fire on <code><a href="#idl-def-rtcdatachannel" class="internalDFN" data-link-type="dfn"><code>RTCDataChannel</code></a>
      </code>
      objects:</p>
    <table>
      <tbody>
        <tr>
          <th>Event name</th>
          <th>Interface</th>
          <th>Fired when...</th>
        </tr>
      </tbody>
      <tbody>
        <tr>
          <td><dfn id="event-datachannel-open" data-dfn-type="dfn"><code>open</code></dfn></td>
          <td><code><a href="#dfn-event" class="internalDFN" data-link-type="dfn">Event</a></code></td>
          <td>
            The <code><a href="#idl-def-rtcdatachannel" class="internalDFN" data-link-type="dfn"><code>RTCDataChannel</code></a>
            </code> object's <a href="#dfn-underlying-data-transport" class="internalDFN" data-link-type="dfn">underlying data
            transport</a> has been established (or re-established).
          </td>
        </tr>
        <tr>
          <td><dfn id="event-datachannel-message" data-dfn-type="dfn"><code>message</code></dfn></td>
          <td><code><a href="http://www.w3.org/TR/webmessaging/#the-messageevent-interfaces">MessageEvent</a></code> [
            <cite><a class="bibref" href="#bib-webmessaging">webmessaging</a></cite>]</td>
          <td>A message was successfully received.</td>
        </tr>
        <tr>
          <td><dfn id="event-datachannel-bufferedamountlow" data-dfn-type="dfn"><code>bufferedamountlow</code></dfn></td>
          <td><code><a href="#dfn-event" class="internalDFN" data-link-type="dfn">Event</a></code></td>
          <td>The <code><a href="#idl-def-rtcdatachannel" class="internalDFN" data-link-type="dfn"><code>RTCDataChannel</code></a>
            </code> object's
            <code><a data-for="RTCDataChannel" href="#dom-rtcdatachannel-bufferedamount" class="internalDFN" data-link-type="dfn"><code>bufferedAmount</code></a>
            </code>
            decreases from above its <code><a data-for="RTCDataChannel" href="#dom-rtcdatachannel-bufferedamountlowthreshold" class="internalDFN" data-link-type="dfn"><code>bufferedAmountLowThreshold</code></a>
            </code> to less than or equal to its <code><a data-for="RTCDataChannel" href="#dom-rtcdatachannel-bufferedamountlowthreshold" class="internalDFN" data-link-type="dfn"><code>bufferedAmountLowThreshold</code></a>
            </code>.</td>
        </tr>
        <tr>
          <td><dfn id="event-datachannel-error" data-dfn-type="dfn"><code>error</code></dfn></td>
          <td><code><a href="#dfn-errorevent" class="internalDFN" data-link-type="dfn"><code>ErrorEvent</code></a>
            </code>
          </td>
          <td>Any error occured from the data channel.</td>
        </tr>
        <tr>
          <td><dfn id="event-datachannel-close" data-dfn-type="dfn"><code>close</code></dfn></td>
          <td><code><a href="#dfn-event" class="internalDFN" data-link-type="dfn">Event</a></code></td>
          <td>
            The <code><a href="#idl-def-rtcdatachannel" class="internalDFN" data-link-type="dfn"><code>RTCDataChannel</code></a>
            </code> object's <a href="#dfn-underlying-data-transport" class="internalDFN" data-link-type="dfn">underlying data
            transport</a> has bee closed.
          </td>
        </tr>
      </tbody>
    </table>
    <p>The following events fire on <code><a href="#dom-rtcpeerconnection" class="internalDFN" data-link-type="dfn"><code>RTCPeerConnection</code></a>
      </code>
      objects:</p>
    <table>
      <tbody>
        <tr>
          <th>Event name</th>
          <th>Interface</th>
          <th>Fired when...</th>
        </tr>
      </tbody>
      <tbody>
        <tr>
          <td><dfn id="event-mediastream-connecting" data-dfn-type="dfn"><code>connecting</code></dfn></td>
          <td><code>Event</code></td>
          <td>
            <div class="issue" id="issue-8">
              <div class="issue-title marker" aria-level="3" role="heading" id="h-issue8"><span>Issue 8</span></div>
              <p class="">TODO</p>
            </div>
          </td>
        </tr>
        <!--
        <tr>
          <td><dfn title="event-MediaStream-error"><code>error</code></dfn></td>
          <td><code>Event</code></td>
          <td></td>
        </tr>
        <tr>
          <td><dfn title="event-MediaStream-close"><code>close</code></dfn></td>
          <td><code>Event</code></td>
          <td>The <code title="dom-RTCPeerConnection-close">close()</code> method was
            called. </td>
        </tr>
        <tr>
          <td>
            <dfn id="event-mediastream-message">
              <code>message</code>
            </dfn>
          </td>

          <td>
            <code>MessageEvent</code>
          </td>

          <td>A <a href="#data-udp-media-stream">data UDP media
          stream</a> message was received.</td>
        </tr>
        -->
        <tr>
          <td><dfn id="event-track" data-dfn-type="dfn"><code>track</code></dfn></td>
          <td><code><a href="#dom-rtctrackevent" class="internalDFN" data-link-type="dfn"><code>RTCTrackEvent</code></a>
            </code>
          </td>
          <td>A new incoming <code>MediaStreamTrack</code> has been created, and an associated <code>RTCRtpReceiver</code> has been added to the set of receivers.</td>
        </tr>
        <tr>
          <td><dfn id="event-negotiation" data-dfn-type="dfn"><code>negotiationneeded</code></dfn></td>
          <td><code><a href="#dfn-event" class="internalDFN" data-link-type="dfn">Event</a></code></td>
          <td>The browser wishes to inform the application that session negotiation needs to be done (i.e. a createOffer call followed by setLocalDescription).
          </td>
        </tr>
        <tr>
          <td><dfn id="event-signalingstatechange" data-dfn-type="dfn"><code>signalingstatechange</code></dfn></td>
          <td><code><a href="#dfn-event" class="internalDFN" data-link-type="dfn">Event</a></code></td>
          <td>
            The <a href="#dfn-signaling-state" class="internalDFN" data-link-type="dfn">signaling state</a> has changed. This state change is the result of either <code><a data-for="RTCPeerConnection" href="#dom-rtcpeerconnection-setlocaldescription" class="internalDFN" data-link-type="dfn"><code>setLocalDescription</code></a>
            </code> or
            <code><a data-for="RTCPeerConnection" href="#dom-rtcpeerconnection-setremotedescription" class="internalDFN" data-link-type="dfn"><code>setRemoteDescription</code></a>
            </code> being invoked.
          </td>
        </tr>
        <tr>
          <td><dfn id="event-iceconnectionstatechange" data-dfn-type="dfn"><code>iceconnectionstatechange</code></dfn></td>
          <td><code><a href="#dfn-event" class="internalDFN" data-link-type="dfn">Event</a></code></td>
          <td>
            The <code>RTCPeerConnection</code>'s <a href="#dfn-ice-connection-state" class="internalDFN" data-link-type="dfn">ICE connection state</a> has changed.
          </td>
        </tr>
        <tr>
          <td><dfn id="event-icegatheringstatechange" data-dfn-type="dfn"><code>icegatheringstatechange</code></dfn></td>
          <td><code><a href="#dfn-event" class="internalDFN" data-link-type="dfn">Event</a></code></td>
          <td>
            The <code>RTCPeerConnection</code>'s <a href="#dfn-ice-gathering-state" class="internalDFN" data-link-type="dfn">ICE gathering state</a> has changed.
          </td>
        </tr>
        <tr>
          <td><dfn id="event-icecandidate" data-dfn-type="dfn"><code>icecandidate</code></dfn></td>
          <td><code><a href="#dom-rtcpeerconnectioniceevent" class="internalDFN" data-link-type="dfn"><code>RTCPeerConnectionIceEvent</code></a>
            </code>
          </td>
          <td>A new <code><a href="#idl-def-rtcicecandidate" class="internalDFN" data-link-type="dfn"><code>RTCIceCandidate</code></a>
            </code> is made available to the script.</td>
        </tr>
        <tr>
          <td><dfn id="event-connectionstatechange" data-dfn-type="dfn"><code>connectionstatechange</code></dfn></td>
          <td><code><a href="#dfn-event" class="internalDFN" data-link-type="dfn">Event</a></code></td>
          <td>
            The <code>RTCPeerConnection</code> <a data-for="RTCPeerConnection" data-link-for="RTCPeerConnection" href="#dom-rtcpeerconnection-connectionstate" class="internalDFN" data-link-type="dfn"><code>connectionState</code></a> has changed.
          </td>
        </tr>
        <tr>
          <td><dfn id="event-icecandidateerror" data-dfn-type="dfn"><code>icecandidateerror</code></dfn></td>
          <td><code><a href="#dom-rtcpeerconnectioniceerrorevent" class="internalDFN" data-link-type="dfn"><code>RTCPeerConnectionIceErrorEvent</code></a>
            </code>
          </td>
          <td>A failure occured when gathering ICE candidates.</td>
        </tr>
        <tr>
          <td><dfn id="event-datachannel" data-dfn-type="dfn"><code>datachannel</code></dfn></td>
          <td><code><a href="#dom-rtcdatachannelevent" class="internalDFN" data-link-type="dfn"><code>RTCDataChannelEvent</code></a>
            </code>
          </td>
          <td>A new <code><a href="#idl-def-rtcdatachannel" class="internalDFN" data-link-type="dfn"><code>RTCDataChannel</code></a>
            </code> is dispatched to the script in response to the other peer creating a channel.</td>
        </tr>
        <tr>
          <td><dfn id="event-isolationchange" data-dfn-type="dfn"><code>isolationchange</code></dfn></td>
          <td><code><a href="#dfn-event" class="internalDFN" data-link-type="dfn">Event</a></code></td>
          <td>A new <code><a href="#dfn-event" class="internalDFN" data-link-type="dfn">Event</a></code> is dispatched to the script when the <var>isolated</var> attribute on a <code>MediaStreamTrack</code> changes.
          </td>
        </tr>
      </tbody>
    </table>
    <p>The following events fire on <code><a href="#idl-def-rtcdtmfsender" class="internalDFN" data-link-type="dfn"><code>RTCDTMFSender</code></a>
      </code>
      objects:</p>
    <table>
      <tbody>
        <tr>
          <th>Event name</th>
          <th>Interface</th>
          <th>Fired when...</th>
        </tr>
      </tbody>
      <tbody>
        <tr>
          <td><dfn id="event-RTCDTMFSender-tonechange" data-dfn-type="dfn"><code>tonechange</code></dfn></td>
          <td><code><a href="#dom-rtcdtmftonechangeevent" class="internalDFN" data-link-type="dfn"><code>RTCDTMFToneChangeEvent</code></a>
            </code>
          </td>
          <td>The <code><a href="#idl-def-rtcdtmfsender" class="internalDFN" data-link-type="dfn"><code>RTCDTMFSender</code></a>
            </code> object has either just begun playout of a tone (returned as the <code><a data-link-for="RTCDTMFToneChangeEvent" href="#dom-rtcdtmftonechangeevent-tone" class="internalDFN" data-link-type="dfn"><code>tone</code></a>
            </code> attribute) or just ended playout of a tone (returned as an empty value in the
            <code><a data-link-for="RTCDTMFToneChangeEvent" href="#dom-rtcdtmftonechangeevent-tone" class="internalDFN" data-link-type="dfn"><code>tone</code></a>
            </code>
            attribute).</td>
        </tr>
      </tbody>
    </table>
    <p>The following events fire on <code><a href="#idl-def-rtcicetransport" class="internalDFN" data-link-type="dfn"><code>RTCIceTransport</code></a>
      </code>
      objects:</p>
    <table>
      <tbody>
        <tr>
          <th>Event name</th>
          <th>Interface</th>
          <th>Fired when...</th>
        </tr>
      </tbody>
      <tbody>
        <tr>
          <td><dfn id="event-icetransport-statechange" data-dfn-type="dfn"><code>statechange</code></dfn></td>
          <td><code><a href="#dfn-event" class="internalDFN" data-link-type="dfn">Event</a></code></td>
          <td>The <code><a href="#idl-def-rtcicetransport" class="internalDFN" data-link-type="dfn"><code>RTCIceTransport</code></a>
            </code> state changes.</td>
        </tr>
        <tr>
          <td><dfn id="event-icetransport-gatheringstatechange" data-dfn-type="dfn"><code>gatheringstatechange</code></dfn></td>
          <td><code><a href="#dfn-event" class="internalDFN" data-link-type="dfn">Event</a></code></td>
          <td>The <code><a href="#idl-def-rtcicetransport" class="internalDFN" data-link-type="dfn"><code>RTCIceTransport</code></a>
            </code> gathering state changes.
          </td>
        </tr>
        <tr>
          <td><dfn id="event-icetransport-selectedcandidatepairchange" data-dfn-type="dfn"><code>selectedcandidatepairchange</code></dfn></td>
          <td><code><a href="#dfn-event" class="internalDFN" data-link-type="dfn">Event</a></code></td>
          <td>The <code><a href="#idl-def-rtcicetransport" class="internalDFN" data-link-type="dfn"><code>RTCIceTransport</code></a>
            </code>'s selected candidate pair changes.
          </td>
        </tr>
      </tbody>
    </table>
    <p>The following events fire on <code><a href="#idl-def-rtcdtlstransport" class="internalDFN" data-link-type="dfn"><code>RTCDtlsTransport</code></a>
      </code>
      objects:</p>
    <table>
      <tbody>
        <tr>
          <th>Event name</th>
          <th>Interface</th>
          <th>Fired when...</th>
        </tr>
      </tbody>
      <tbody>
        <tr>
          <td><dfn id="event-dtlstransport-statechange" data-lt-nodefault="" data-dfn-type="dfn"><code>statechange</code></dfn></td>
          <td><code><a href="#dfn-event" class="internalDFN" data-link-type="dfn">Event</a></code></td>
          <td>The <code><a href="#idl-def-rtcdtlstransport" class="internalDFN" data-link-type="dfn"><code>RTCDtlsTransport</code></a>
            </code> state changes.</td>
        </tr>
      </tbody>
    </table>
  </section>

  <section class="informative" id="privacy-and-security-considerations" typeof="bibo:Chapter" resource="#privacy-and-security-considerations" property="bibo:hasPart">
    <!--OddPage-->
    <h2 id="h-privacy-and-security-considerations" resource="#h-privacy-and-security-considerations"><span property="xhv:role" resource="xhv:heading"><span class="secno">13. </span>Privacy and Security Considerations</span>
    </h2>
    <p><em>This section is non-normative.</em></p>
    <p>This section is non-normative; it specifies no new behaviour, but instead summarizes information already present in other parts of the specification. The overall security considerations of the general set of APIs and protocols used in WebRTC are described in [
      <cite><a class="bibref" href="#bib-RTCWEB-SECURITY-ARCH">RTCWEB-SECURITY-ARCH</a></cite>].</p>

    <section id="impact-on-same-origin-policy" typeof="bibo:Chapter" resource="#impact-on-same-origin-policy" property="bibo:hasPart">
      <h3 id="h-impact-on-same-origin-policy" resource="#h-impact-on-same-origin-policy"><span property="xhv:role" resource="xhv:heading"><span class="secno">13.1 </span>Impact on same origin policy</span>
      </h3>
      <p>This document extends the Web platform with the ability to set up real time, direct communication between browsers and other devices, including other browsers.</p>
      <p>This means that data and media can be shared between applications running in different browsers, or between an application running in the same browser and something that is not a browser, something that is an extension to the usual barriers in the Web model against sending data between entities with different origins.</p>
      <p>The WebRTC specification provides no user prompts or chrome indicators for communication; it assumes that once the Web page has been allowed to access media, it is free to share that media with other entities as it chooses. Peer-to-peer exchanges of data view WebRTC datachannels can thus occur without any user explicit consent or involvement, similarly as a server-mediated exchange (e.g. via Web Sockets) could occur without user involvement.
      </p>
      <p>The <code><a href="#dfn-peeridentity" class="internalDFN" data-link-type="dfn"><code>peerIdentity</code></a>
        </code> mechanism loads and executes JavaScript code from a third-party server acting as an identity provider. That code is executed in a separate JavaScript realm and does not affect the protections afforded by the same origin policy.</p>
    </section>

    <section id="revealing-ip-addresses" typeof="bibo:Chapter" resource="#revealing-ip-addresses" property="bibo:hasPart">
      <h3 id="h-revealing-ip-addresses" resource="#h-revealing-ip-addresses"><span property="xhv:role" resource="xhv:heading"><span class="secno">13.2 </span>Revealing IP addresses</span>
      </h3>
      <p>Even without WebRTC, the Web server providing a Web application will know the public IP address to which the application is delivered. Setting up communications exposes additional information about the browserâ€™s network context to the web application, and may include the set of (possibly private) IP addresses available to the browser for WebRTC use. Some of this information has to be passed to the corresponding party to enable the establishment of a communication session.
      </p>
      <p>Revealing IP addresses can leak location and means of connection; this can be sensitive. Depending on the network environment, it can also increase the fingerprinting surface and create persistent cross-origin state that cannot easily be cleared by the user.</p>
      <p>A connection will always reveal the IP addresses proposed for communication to the corresponding party. The application can limit this exposure by choosing not to use certain addresses using the settings exposed by the <a href="#idl-def-rtcicetransportpolicy" class="internalDFN" data-link-type="dfn"><code>RTCIceTransportPolicy</code></a> dictionary, and by using relays (for instance TURN servers) rather than direct connections between participants. One will normally assume that the IP address of TURN servers is not sensitive information. These choices can for instance be made by the application based on whether the user has indicated consent to start a media connection with the other party.</p>
      <p>Mitigating the exposure of IP addresses to the application itself requires limiting the IP addresses that can be used, which will impact the ability to communicate on the most direct path between endpoints. Browsers are encouraged to provide appropriate controls for deciding which IP addresses are made available to applications, based on the security posture desired by the user. The choice of which addresses to expose is controlled by local policy (see [<cite><a class="bibref" href="#bib-RTCWEB-IP-HANDLING">RTCWEB-IP-HANDLING</a></cite>] for details).
      </p>
    </section>

    <section id="impact-on-local-network" typeof="bibo:Chapter" resource="#impact-on-local-network" property="bibo:hasPart">
      <h3 id="h-impact-on-local-network" resource="#h-impact-on-local-network"><span property="xhv:role" resource="xhv:heading"><span class="secno">13.3 </span>Impact on local network</span>
      </h3>
      <p>Since the browser is an active platform executing in a trusted network environment (inside the firewall), it is important to limit the damage that the browser can do to other elements on the local network, and it is important to protect data from interception, manipulation and modification by untrusted participants.</p>
      <p>Mitigations include:</p>
      <ul>
        <li>An UA will always request permission from the correspondent UA to communicate using ICE. This ensures that the UA can only send to partners who you have shared credentials with.</li>
        <li>An UA will always request ongoing permission to continue sending using ICE continued consent. This enables a receiver to withdraw consent to receive.</li>
        <li>An UA will always encrypt data, with strong per-session keying (DTLS-SRTP).
        </li>
        <li>An UA wil always use congestion control. This ensures that WebRTC cannot be used to flood the network.</li>
      </ul>
      <p>These measures are specified in the relevant IETF documents.</p>
    </section>

    <section id="confidentiality-of-communications" typeof="bibo:Chapter" resource="#confidentiality-of-communications" property="bibo:hasPart">
      <h3 id="h-confidentiality-of-communications" resource="#h-confidentiality-of-communications"><span property="xhv:role" resource="xhv:heading"><span class="secno">13.4 </span>Confidentiality of Communications</span>
      </h3>
      <p>The fact that communication is taking place cannot be hidden from adversaries that can observe the network, so this has to be regarded as public information.</p>
      <p>A mechanism, <code><a href="#dfn-peeridentity" class="internalDFN" data-link-type="dfn"><code>peerIdentity</code></a>
        </code>, is provided that gives Javascript the option of requesting media that the same javascript cannot access, but can only be sent to certain other entities.</p>
    </section>

    <section id="persistent-information-exposed-by-webrtc" typeof="bibo:Chapter" resource="#persistent-information-exposed-by-webrtc" property="bibo:hasPart">
      <h3 id="h-persistent-information-exposed-by-webrtc" resource="#h-persistent-information-exposed-by-webrtc"><span property="xhv:role" resource="xhv:heading"><span class="secno">13.5 </span>Persistent information exposed by WebRTC</span>
      </h3>
      <p>As described above, the list of IP addresses exposed by the WebRTC API can be used as a persistent cross-origin state.</p>
      <p>Beyond IP addresses, the WebRTC API exposes information about the underlying media system via the <code>RTCRtpSender.getCapabilities</code> and <code>RTCRtpReceiver.getCapabilities</code> methods, including detailed and ordered information about the codecs that the system is able to produce and consume. A subset of that information is likely to be represented in the SDP session descriptions generated, exposed and transmitted during <a href="#session-negotiation-model">session
      negotiation</a>. That information is in most cases persistent across time and origins, and increases the fingerprint surface of a given device.</p>
      <p>If set, the configured default ICE servers exposed by <a data-for="RTCPeerConnection" href="#dom-rtcpeerconnection-defaulticeservers" class="internalDFN" data-link-type="dfn"><code>defaultIceServers</code></a> on
        <code>RTCPeerConnection</code> instances also provides persistent across time and origins information which increases the fingerprinting surface of a given browser.</p>
      <p>When establishing DTLS connections, the WebRTC API can generate certificates that can be persisted by the application (e.g. in IndexedDB). These certificates are not shared across origins, and get cleared when persistent storage is cleared for the origin.</p>
    </section>
  </section>
  <!--section>
    <h2 id="sec-iana">IANA Registrations</h2>



    <p>IANA is requested to register the constraints defined in <a href=
    "#sec-constraints">Constraints Section</a> as specified in
    [[!RTCWEB-CONSTRAINTS]].</p>


    <section>
      <h3 id="sec-constraints">Constraints</h3>


      <p>TOOD: Need to change the naming and declaration of these constraints
      to match the constraints draft once that is a bit further along. The
      names here now are likely not quite right but they serve as a place
      holder.</p>


      <p class="issue">ISSUE: there are multiple ways to add constraints. How
      are multiple values reconciled?</p>


      <p>The following new constraints are defined that can be used with an
      <code>RTCPeerConnection</code> object:</p>


      <p>TODO items - need to register with IANA.</p>
    </section>
  </section-->

  <section id="change-log" typeof="bibo:Chapter" resource="#change-log" property="bibo:hasPart">
    <!--OddPage-->
    <h2 id="h-change-log" resource="#h-change-log"><span property="xhv:role" resource="xhv:heading"><span class="secno">14. </span>Change Log</span>
    </h2>
    <p>This section will be removed before publication.</p>
    <!-- Why do the first two headings automatically convert to <h2>? -->
    <!-- Because you haven't added a <section> element around them
         and respec rewrites h? elements based on the section depth -->
    <h2 id="changes-since-september-13-2016">Changes since September 13, 2016</h2>
    <ol>
      <li>[#738] Add ability to get fingerprints of an RTCCertificate
      </li>
      <li>[#783] Clarify supported DTMF characters</li>
      <li>[#785] Reject invalid DTMF characters when inserted</li>
      <li>[#786] If track is ended or muted, send silence for audio or black frame for video</li>
      <li>[#790] Add checks that verify that a candidate matches a remote media decription</li>
      <li>[#791] Add text that fires the 'connectionstatechange' event
      </li>
      <li>[#793] Define DTMF tone attribute and make it required</li>
      <li>[#796] Language cleanup around use of MediaTrackSettings
      </li>
      <li>[#797] Clarify when negotiation-needed flag is cleared</li>
      <li>[#804] Clarify that JSEP is normative in some cases; also numerous small editorial fixes</li>
      <li>[#805] Reduce insertDTMF max duration from 8000 ms to 6000 ms
      </li>
      <li>[#807] Clarify that empty string in DTMFToneChangeEvent indicates that the previous tones (plural) have completed.</li>
      <li>[#809] Clarify that InvalidStateError is thrown if insertDTMF is called on a stopped sender.</li>
      <li>[#815] Change IceConnectionState to match PeerConnection state in certain edge cases.</li>
      <li>[#833, #865, #884, #904] Editorial: update JSEP references
      </li>
      <li>[#835] Add definition link for NN and disallow SDP modification
      </li>
      <li>[#837] Have insertDTMF validate toneBuffer before returning.
      </li>
      <li>[#840] Remove reference to IANA registry for Statistics</li>
      <li>[#844] Throw InvalidAccessError if removeTrack is called with invalid sender</li>
      <li>[#847] Specify how to handle invalid data channel IDs, or lack of IDs.</li>
      <li>[#851] Editorial: Fix wording for insertDTMF</li>
      <li>[#852] Remove insertDTMF's duration and interToneGap attributes
      </li>
      <li>[#853] Make insertDTMF tone string normalization mandatory
      </li>
      <li>[#855] Clarify that insertDTMF's DTMFToneChangeEvent also requires toneBuffer to be empty in order to fire</li>
      <li>[#860] More clarification around when removeTrack should throw an exception, now considering rollback as well</li>
      <li>[#861] Clarify what setConfiguration changes</li>
      <li>[#864] Define channel member of RTCDataChannelEventInit and make it required</li>
      <li>[#871] Remove ability to modify RID via addTrack()</li>
      <li>[#872] Pass peer identity to IdP via new RTCIdentityProviderOptions
      </li>
      <li>[#875, #893] Major restructuring of createOffer and createAnswer to eliminate race conditions</li>
      <li>[#877] Store RTCConfiguration so getConfiguration can return it
      </li>
      <li>[#880, #896] Clean up definition of expires in certificates
      </li>
      <li>[#882] Split gathering state variables into two types, gathering and gatherer, and clean up descriptions of values for each
      </li>
      <li>[#883] Clarify that insertDTMF interToneGap is in milliseconds
      </li>
      <li>[#895] Add steps in "setting a description" for rolling back transceivers.
      </li>
      <li>[#900] Reject incoming tracks using transceiver.stop()</li>
      <li>[#913] Overhaul NN text while adjusting it to key off transceivers
      </li>
      <li>[#919] Remove incorrect statement related to IP leaking issue
      </li>
      <li>[#929] Have RTCSessionDescription's sdp member default to "" </li>
      <li>[#863, #870, #890, #892, #911, #912, #915, #926, #928, #935] Editorial: typos, links, dead text, WebIDL, Travis, etc.</li>
    </ol>
    <h2 id="changes-since-july-22-2016">Changes since July 22, 2016</h2>
    <ol>
      <li>[#713] Missing destruction sequence for ICE Agent</li>
      <li>[#730] Revised WebRTC 1.0 RTCIceTransportState transition diagram
      </li>
      <li>[#722] How setDirection interacts with active/inactive sender/receivers
      </li>
      <li>[#716] Improve error handling for IdP proxy interactions</li>
      <li>[#719] The IdP environment can be spoofed</li>
      <li>[#733] Clarification on RTX in Codec Capabilities/Parameters</li>
      <li>[#734] RTCRtpEncodingParameters attribute to turn on/off sending CN/DTX
      </li>
      <li>[#737] Fix mistakes in examples</li>
      <li>[#739] Replace set of senders/receivers/transceivers with algorithms
      </li>
      <li>[#721] Specify the synchronous and queued steps for addIceCandidate
      </li>
      <li>[#759] Clarification on receipt of multiple RTP encodings</li>
      <li>[#758] Support replaceTrack with the previous track ended</li>
      <li>[#745] Add steps to createOffer and explicitly specify what is queued
      </li>
      <li>[#762] Remove closed check from addIceCandidate steps (covered by enqueue steps)</li>
      <li>[#750] RTCIdentityProviderGlobalScope needs Exposed attributes</li>
      <li>[#752] Add steps to createAnswer and explicitly specify what is queued
      </li>
      <li>[#756] Integrate queueing into the setLocal/RemoteDescription steps
      </li>
      <li>[#765] Adding more detail to the definition of the ICE `disconnected` state.
      </li>
      <li>[#778] Remove void conformance requirement on interToneGap</li>
      <li>[#779] Make duration and interToneGap attributes unsigned long</li>
    </ol>
    <h3 id="changes-since-may-13-2016">Changes since May 13, 2016</h3>
    <ol>
      <li>[#640, #641, #659, #679, #680, #681, #682, #686, #694, #696, #697, #707, #708, #711] General editorial fixes</li>
      <li>[#642] Editorial: make last arg of addTransceiver optional</li>
      <li>[#643] Document defaultIceServers as source of fingerprinting</li>
      <li>[#646] Create table of RTCRtpEncodingParameters for RtpSender/RtpReceiver
      </li>
      <li>[#648] Clarify MIME (media/sub-) type</li>
      <li>[#649] Example of how to do hold</li>
      <li>[#662] Clarify effect of RTCRtpReceiver.track.stop()</li>
      <li>[#663] Define a 7XX STUN error code</li>
      <li>[#665] Clarify when setDirection() acts</li>
      <li>[#666] Clarify that transports can be null</li>
      <li>[#676] Transceiver.stop() causes negotiationneeded to be set</li>
      <li>[#677] Clean up rtcpTransport description</li>
      <li>[#701] In addTrack, mention that MSID of new track is added</li>
      <li>[#702, #704] Define algs for creating sender/receiver/transceiver, then use them in addTrack() and addTransceiver()</li>
      <li>[#725] Change 'process to apply candidate' to 'add the ICE candidate'
      </li>
    </ol>
    <h3 id="changes-since-february-15-2016">Changes since February 15, 2016</h3>
    <ol>
      <li>[#475] Definition of Active for an RTCRtpReceiver</li>
      <li>[#500] Reserve and use RangeError for scaleResolutionDownBy &lt; 1.0
      </li>
      <li>[#504] Add getParameters() method to RTCRtpReceiver</li>
      <li>[#509] RID unmodifiable in setParameters()</li>
      <li>[#510] Gather spec text about the ICE Agent at one place</li>
      <li>[#512] Use 'connection' as configuration target instead of User Agent
      </li>
      <li>[#505] Add activateReceiver method to RTCRtpTransceiver</li>
      <li>[#516] Support for DTMF tones A-D</li>
      <li>[#499] Certificate API: add getAlgorithm method</li>
      <li>[#507] Make the definition of addIceCandidate() more explicit</li>
      <li>[#525] Add STUN Error Code reference</li>
      <li>[#524] Add error codes reference (RTCPeerConnectionIceErrorEvent)
      </li>
      <li>[#522] Let setting ice candidate pool size trigger start of gathering
      </li>
      <li>[#519] Relation between local track and outgoing encoding</li>
      <li>[#520] Add text about 'remote sources' and how they are stopped</li>
      <li>[#527] Enable trickling of end-of-candidates through addIceCandidate
      </li>
      <li>[#544] Remove "public" from ice transport policy</li>
      <li>[#547] Datachannel label and protocol are USVString</li>
      <li>[#552] Never close the RTCPeerConnection if setting a local/remote description fails</li>
      <li>[#535] Update MID to be random values when not received in offer</li>
      <li>[#553] Move 'closed' state from RTCSignalingState to RTCPeerConnectionState
      </li>
      <li>[#557] Splitting apart RTCIceConnectionState and RTCIceTransportState
      </li>
      <li>[#560] Changing from callback interface to dictionary for RTCIdentityProvider
      </li>
      <li>[#574] Make RTCSessionDescription readonly, and createOffer return dictionary
      </li>
      <li>[#577] Make RtpSender.track nullable</li>
      <li>[#587] Defining how track settings are set for remote tracks</li>
      <li>[#603] Add closed state and same state checks to update ice connection/gathering state steps</li>
      <li>[#604] ReplaceTrack: Use sender's transceiver to determine if a 'simple track swap' is enough</li>
      <li>[#606] RTCIceCandidate: Use nullable members in init dictionary to describe constructor behavior</li>
      <li>[#466] Use an enum to describe directionality of RTP Stream</li>
      <li>[#602] addTransceiver(): Throw a TypeError on a bogus track kind</li>
      <li>[#610] Server cannot be reached - Issues with IPv6</li>
      <li>[#611] Clarify ICE consent freshness feedback</li>
      <li>[#618] Fix RTCPeerConnection legacy overloads</li>
      <li>[#620] RTCRtpTransceiver: add setDirection and readonly direction attribute
      </li>
      <li>[#625] Unifiy DTMF time with rtcweb WG</li>
      <li>[#630] Add ICE candidate type references</li>
      <li>[#635] pc.addTrack: Add kind check when reusing a sender and skip early returns</li>
      <li>[#636] replaceTrack: Use 'transceiver kind' instead of track.kind (track may be null)</li>
    </ol>
    <h3 id="changes-since-january-26-2016">Changes since January 26, 2016</h3>
    <ol>
      <li>[#485] Update SOTD as the document is now quite stable and the group is looking for wide review</li>
      <li>[#468, #335] Replace DOMError with DOMException</li>
      <li>[#472, #319] Update error reports to align with existing DOM Errors
      </li>
      <li>[#491, #479] Specify error when rejecting invalid SDP changes</li>
      <li>[#462] Add PeerConnection.activateSender() and update early media example
      </li>
      <li>[#434] Change setParameters call to be Async</li>
    </ol>
    <h3 id="changes-since-december-22-2015">Changes since December 22, 2015</h3>
    <ol>
      <li>[#179, #439] Document IP address leakage in RTCIceCandidate</li>
      <li>[#439] Complete security considerations based on security questionnaire and IP address discussions #439</li>
      <li>[#446] Non-nullable RTCTrackEvent args means Init dict members are required
      </li>
      <li>[#449] Clarify flow of SDP exchanges (Update simple p2p example)</li>
      <li>[#451] Clean up event handler attribute descriptions</li>
      <li>[#452, #438] Make replaceTrack() handle "not sending yet" case</li>
      <li>[#454] Add contributing source voice activity flag</li>
      <li>[#455, #439] Add references to parsing stun/turn URLs section</li>
      <li>[#456, #338] SDP changes between the createOffer and setLocalDescription (add JSEP reference)</li>
      <li>[#459] Add non-normative ICE state transitions</li>
      <li>[#460, #461] getRemoteCertificates() behavior in "new" and "connecting" states</li>
      <li>[#465, #140] Use ErrorEvent as interface for events emitted by RTCDataChannel.onerror
      </li>
      <li>[#469, #382, #373] Reject changes to peerIdentity and certificates in setConfiguration
      </li>
      <li>[#474, #406] Define RTCIceTransport.component when RTP/RTCP mux is in use
      </li>
    </ol>
    <h3 id="changes-since-november-23-2015">Changes since November 23, 2015</h3>
    <ol>
      <li>[#353] Plan X: Add an API for using RID to do simulcast</li>
      <li>[#365] Adding an accessor for the browser-configured ICE servers</li>
      <li>[#398] Make RtpTransceiver.mid nullable and remove RtpSender.mid and RtpReceiver.mid
      </li>
      <li>[#402, #391] Remove requirement about DTMF tones A-D</li>
      <li>[#403, #377] Use positive values for AudioLevel</li>
      <li>[#401, #267] Add bitrate definition</li>
      <li>[#404] Remove 'Events on MediaStream' section (duplicates new text in Media Capture spec)</li>
      <li>[#410, #328] Make RTCBundlePolicy Enum section normative</li>
      <li>[#411, #408] Clarify component for IceTransport when RTP/RTCP mux is used
      </li>
      <li>[#414] Define ReSpec processor for cross-reference to JSEP</li>
      <li>[#418] Make degradationPreference per-sender instead of per-encoding
      </li>
      <li>[#416] RTCRtpSender.replaceTrack() fixes (e.g. handle closed RTCPeerConnection)
      </li>
      <li>[#421] Require sdp in RTCSessionDescription{,Init}</li>
      <li>[#422] Remove confusing paragraph on fourth party interception</li>
      <li>[#423] Add specific references to JSEP where possible</li>
      <li>[#428] Don't create a default stream in 'dispatch a receiver' steps
      </li>
      <li>[#429] Adding expires attribute to generateCertificate</li>
      <li>[#430] Add maxFramerate knob for simulcast</li>
      <li>[#432] Update RTCIceTransportPolicy</li>
      <li>[#433] Use unsigned long ssrc in stats</li>
      <li>[#424] Editorial: Distinguish states from their attribute representation
      </li>
    </ol>
    <h3 id="changes-since-october-6-2015">Changes since October 6, 2015</h3>
    <ol>
      <li>[#325] Adding additional members to RTCIceCandidate dictionary</li>
      <li>[#327] Adding sha-256 to the certificate management options for RSA
      </li>
      <li>[#342] Using DOMTimestamp for RTCCertificate::expires</li>
      <li>[#293] Add RTCRtpTransceiver and PeerConnection.addMedia</li>
      <li>[#366, #343] Use RTCDegradationPreference</li>
      <li>[#374] Throw on too long label/protocol in createDataChannel()</li>
      <li>[#266] Tidy up setLocal/RemoteDescription processing model</li>
      <li>[#361] Adding setCodecPreferences to RTCRtpTransceiver</li>
      <li>[#371] Add RtcpMuxPolicy</li>
      <li>[#385, #312] Don't invoke public API in legacy function section</li>
      <li>[#394, #393] don't throw on empty iceServers list</li>
    </ol>
    <h3 id="changes-since-september-22-2015">Changes since September 22, 2015</h3>
    <ol>
      <li>[#289, #153] Add way to set size of ICE candidate pool</li>
      <li>[#256] Fix prose on getStats() wo/selector + move type check to sync section
      </li>
      <li>[#242] Remove SyntaxError on malformed ICE candidate</li>
      <li>[#284] Add icecandidateerror event for indicating ICE gathering errors
      </li>
      <li>[#298] Add support for codec reordering and removal in RtpParameters
      </li>
      <li>[#311] Fixing syntax for required RTCCertificate arguments</li>
      <li>[#280] Add extra IceTransport read-only attributes and methods</li>
      <li>[#291] Add PeerConnection.connectionState</li>
      <li>[#300, #4, #6, #276] Add API to get SSRC and audio levels</li>
      <li>[#301] Fix RTCStatsReport with object and maplike instead of getter
      </li>
      <li>[#302] (Partly) removing interface use for RTCSessionDescription and RTCIceCandidate
      </li>
      <li>[#314, #299] Update the operations queue to handle promises and closed signalling</li>
      <li>[#273] Add a bunch of fields to RtpParameters and RtpEncodingParameters
      </li>
    </ol>
    <h3 id="changes-since-june-11-2015">Changes since June 11, 2015</h3>
    <ol>
      <li>[#234] Add RTCRtpParameters, RTCRtpSender.getParameters, and RTCRtpSender.setParameters
      </li>
      <li>[#225] Support for pending and current SDP</li>
      <li>[#229] Removing the weird optionality from RTCSessionDescription and its constructor.</li>
      <li>[#235] Modernize getStats() with promises</li>
      <li>[#243] Mark candidate property of RTCIceCandidateInit required</li>
      <li>[#248] Fix error handling for certificate management</li>
      <li>[#259] Change type of RtpEncodingParameters.priority to an enum</li>
      <li>[#21, #262] Sort out 2119 MUSTs and SHOULDs</li>
      <li>[#268] Add RtpEncodingParameters.maxBitrate</li>
      <li>[#241] Add RtpSender.transport, RtpReceiver.transport, RTCDtlsTransport, RTCIceTransport, etc</li>
      <li>[#224, #261] Sort out when responding PeerConnection reaches iceConnetionState completed</li>
      <li>[#303] Replace track without renegotiation</li>
      <li>[#269] Add RTCRtpSender.getCapabilities and RTCRtpReceiver.getCapabilities
      </li>
    </ol>
    <h3 id="changes-since-march-6-2015">Changes since March 6, 2015</h3>
    <ol>
      <li>[PR #167] Removed RTCPeerConnection.createDTMFSender and added RTCRtpSender.dtmf, along with corresponding examples.</li>
      <li>[PR #184] RTCPeerConnection will NOT connect unless identity is verified.
      </li>
      <li>[PR #27] Documenting practice with candidate events</li>
      <li>[PR #203] Rewrote mitigations text for security considerations section
      </li>
      <li>[PR #192] Added support for auth tokens. Fixes #190</li>
      <li>[PR #207] Update ice config examples to use multiple urls and *s schemes
      </li>
      <li>[PR #210] Optional RTCConfiguration in RTCPC constructor</li>
      <li>[PR #171] Add RTCAnswerOptions (with common RTCOfferAnswerOptions dictionary)
      </li>
      <li>[PR #178] Identity provider interface redesign</li>
      <li>[PR #193] Add .mid property to sender/receiver. Fixes #191</li>
      <li>[PR #218] Enqueue addIceCandidate</li>
      <li>[PR #213 (1)] Rename updateIce() to setConfiguration()</li>
      <li>[PR #213 (2)] Make RTCPeerConnection.setConfiguration() replace the existing configuration</li>
      <li>[PR #214] Certificate management API (Bug 21880)</li>
      <li>[PR #220] Clarify muted state (proposed fix for issue #139)</li>
      <li>[PR #221] Define when RTCRtpReceivers are created and dispatced (issue #198)</li>
      <li>[PR #215] Adding expires attribute to certificate management</li>
      <li>[PR #233] Add a "bufferedamountlow" event</li>
    </ol>
    <h3 id="changes-since-december-5-2014">Changes since December 5, 2014</h3>
    <ol>
      <li>Properly define the negotiationneeded event, and its interactions with other API calls.</li>
      <li>Add support for RTCRtpSender and RTCRtpReceiver.</li>
      <li>Update misleading local/RemoteDescription attribute text.</li>
      <li>Add RTCBundlePolicy.</li>
      <li>All callback-based methods have been moved to a legacy section, and replaced by same-named overloads using Promises instead.</li>
      <li>[PR #194] Added first version of Security Considerations (more work needed)
      </li>
      <li>Updated identity provider structure.</li>
    </ol>
    <h3 id="changes-since-june-4-2014">Changes since June 4, 2014</h3>
    <ol>
      <li>Bug 25724: Allow garbage collection of closed PeerConnections</li>
      <li>Bug 27214: Add onicegatheringstatechange event</li>
      <li>Bug 26644: Fixing end of candidates event</li>
    </ol>
    <h3 id="changes-since-april-10-2014">Changes since April 10, 2014</h3>
    <ol>
      <li>Bug 25774: Mixed isolation</li>
    </ol>
    <h3 id="changes-since-april-10-2014-1">Changes since April 10, 2014</h3>
    <ol>
      <li>Bug 25855: Clarification about conformance requirements phrased as algorithms
      </li>
      <li>Bug 25892: SignalingStateChange event should be fired only if there is a change in signaling state.</li>
      <li>Bug 25152: createObjectURL used in examples is no longer supported by Media Capture and Streams.</li>
      <li>Bug 25976: DTMFSender.insertDTMF steps should validate the values of duration and interToneGap.</li>
      <li>Bug 25189: Mandatory errorCallback is missing in examples for getStats.
      </li>
      <li>Bug 25840: Creating DataChannel with same label.</li>
      <li>Updated comment above example ice state transitions (discussed in Bug 25257).
      </li>
      <li>Updated insertDTMF() algorithm to ignore unrecognized characters (as discussed in bug 25977).</li>
      <li>Made formatting of references to ice connection state consistent.
      </li>
      <li>Made insertDTMF() throw on unrecognized characters (used to ignore).
      </li>
      <li>Removed requestIdentity from RTCConfiguration and RTCOfferAnswerOptions. Removed RTCOfferAnswerOptions as a result.</li>
      <li>Adding isolated property and associated event to MediaStreamTrack.
      </li>
    </ol>
    <h3 id="changes-since-march-21-2014">Changes since March 21, 2014</h3>
    <ol>
      <li>Changes to identity-related text:
        <ul>
          <li>Removed noaccess constraint</li>
          <li>Add the ability to peerIdentity constrain RTCPeerConnection, which limits communication to a single peer</li>
          <li>Change the way that the browser communicates with IdP to a message channel (http://www.w3.org/TR/webmessaging/#message-channels)
          </li>
          <li>Improved error feedback from IdP interactions (added new events with more detailed context)</li>
          <li>Changed the way that an IdP is able to request user login (LOGINNEEDED message)</li>
        </ul>
      </li>
      <li>Bug 25155: maxRetransmitTime is not the name of the SCTP concept it points to.</li>
    </ol>
    <h3 id="changes-since-january-27-2014">Changes since January 27, 2014</h3>
    <ol>
      <li>Refined identity assertion generation and validation.</li>
      <li>Default DTMF gap changed from 50 to 70 ms.</li>
      <li>Bug 24875: Examples in the WebRTC spec are not updated As per the modified API.</li>
    </ol>
    <h3 id="changes-since-august-30-2013">Changes since August 30, 2013</h3>
    <ol>
      <li>Make RTCPeerConnection close method be idempotent.</li>
      <li>Clarified ICE server configuration could contain URI types other than STUN and TURN.</li>
      <li>Changed the DTMF timing values.</li>
      <li>Allow offerToReceiveAudio/video indicate number of streams to offer.
      </li>
      <li>ACTION-98: Added text about clamping of maxRetransmitTime and maxRetransmits.
      </li>
      <li>ACTION-88: Removed nullable types from dictionaries (added attribute default values for attributes that would be left uninitialized without the init dictionary present.</li>
      <li>InvalidMediaStreamTrackError changed to InvalidParameter.</li>
      <li>Fire NetworkError when the data transport is closed with an error.
      </li>
      <li>Add an exception for data channel with trying to use existing code.
      </li>
      <li>Change maxRetransmits to be an unsigned type.</li>
      <li>Clarify state changes when ICE restarts.</li>
      <li>Added InvalidStateError exception for operations on a RTCPeerConnection that is closed.</li>
      <li>Major changes to Identity Proxy section.</li>
      <li>(ACTION: 95) Moved IceTransports (constraint) to RTCConfiguration dictionary.
      </li>
      <li>(ACTION: 95) Introduced RTCOfferAnswerOptions and RTCOfferOptions dictionaries.
      </li>
      <li>(ACTION: 95) Removed constraints argument from addStream() (and removed IANA Constraints section).</li>
      <li>Added validation of the RTCConfiguration dictionary argument(s).</li>
      <li>Added getConfiguration() on RTCPeerConnection.</li>
    </ol>
    <h3 id="changes-since-june-3-2013">Changes since June 3, 2013</h3>
    <ol>
      <li>Removed synchronous section left-overs.</li>
      <li>RTCIceServer now accepts multiple URLs.</li>
      <li>Redefined the meaning of negotiated for DataChannel.</li>
      <li>Made iceServers a sequence (instead of an Array).</li>
      <li>Updated error reporting (to use DOMError and camel cased names).</li>
      <li>Added success and failure callbacks to addIceCandidate().</li>
      <li>Made local/remoteDescription attributes nullable.</li>
      <li>Added username member to RTCIceServer dictionary.</li>
    </ol>
    <h3 id="changes-since-march-22-2013">Changes since March 22, 2013</h3>
    <ol>
      <li>Added IceRestart constraint.</li>
      <li>Big updates on DataChannel API to use new channel setup procedures.
      </li>
    </ol>
    <h3 id="changes-since-feb-22-2013">Changes since Feb 22, 2013</h3>
    <ol>
      <li>Example review: Updated DTMF and Stats examples. Added text about when to fire "negotiationneeded" event to align with examples.</li>
      <li>Updated RTCPeerConnection state machine. Added a shared processing model for setLocalDescription()/setRemoteDescription().</li>
      <li>Updated simple callflow to match the current API.</li>
    </ol>
    <h3 id="changes-since-jan-16-2013">Changes since Jan 16, 2013</h3>
    <ol>
      <li>Initial import of Statistics API to version 2.</li>
      <li>Integration of Statistics API version 2.5 started.</li>
      <li>Updated Statistics API to match Boston/list discussions.</li>
      <li>Extracted API extensions introduced by features, such as the P2P Data API, from the RTCPeerConnection API.</li>
      <li>Updated DTMF algorithm to dispatch an event when insertDTMF() is called with an empty string to cancel future tones.</li>
      <li>Updated DTMF algorithm to not cancel and reschedule if a playout task is running (only update toneBuffer and other values).</li>
    </ol>
    <h3 id="changes-since-dec-12-2012">Changes since Dec 12, 2012</h3>
    <ol>
      <li>Changed AudioMediaStreamTrack to RTCDTMFSender and gave it its own section. Updated text to reflect most recent agreements. Also added examples section.</li>
      <li>Replaced the localStreams and remoteStreams attributes with functions returning sequences of MediaStream objects.</li>
      <li>Added spec text for attributes and methods adopted from the WebSocket interface.
      </li>
      <li>Changed the state ENUMs and transition diagrams.</li>
      <li>Aligned the data channel processing model a bit more with WebSockets (mainly closing the underlying transport).</li>
    </ol>
    <h3 id="changes-since-nov-13-2012">Changes since Nov 13, 2012</h3>
    <ol>
      <li>Made some clarifications as to how operation queuing works, and fixed a few errors with the error handling description.</li>
      <li>Introduced new representation of tracks in a stream (removed MediaStreamTrackList). Added algorithm for creating a track to represent an incoming network media component.</li>
      <li>Renamed MediaStream.label to MediaStream.id (the definition needs some more work).</li>
    </ol>
    <h3 id="changes-since-nov-03-2012">Changes since Nov 03, 2012</h3>
    <ol>
      <li>Added text describing the queuing mechanism for RTCPeerConnection.
      </li>
      <li>Updated simple P2P example to include all mandatory (error) callbacks.
      </li>
      <li>Updated P2P data example to include all mandatory (error) callbacks. Also added some missing RTC prefixes.</li>
    </ol>
    <h3 id="changes-since-oct-19-2012">Changes since Oct 19, 2012</h3>
    <ol>
      <li>Clarified how createOffer() and createAnswer() use their callbacks.
      </li>
      <li>Made all failure callbacks mandatory.</li>
      <li>Added error object types, general error handling principles, and rules for when errors should be thrown.</li>
    </ol>
    <h3 id="changes-since-sept-23-2012">Changes since Sept 23, 2012</h3>
    <ol>
      <li>Restructured the document layout and created separate sections for features like Peer-to-peer Data API, Statistics and Identity.</li>
    </ol>
    <h3 id="changes-since-aug-16-2012">Changes since Aug 16, 2012</h3>
    <ol>
      <li>Replaced stringifier with serializer on RTCSessionDescription and RTCIceCandidate (used when JSON.stringify() is called).</li>
      <li>Removed offer and createProvisionalAnswer arguments from the createAnswer() method.</li>
      <li>Removed restart argument from the updateIce() method.</li>
      <li>Made RTCDataChannel an EventTarget</li>
      <li>Updated simple RTCPeerConnection example to match spec changes.</li>
      <li>Added section about RTCDataChannel garbage collection.</li>
      <li>Added stuff for identity proxy.</li>
      <li>Added stuff for stats.</li>
      <li>Added stuff peer and ice state reporting.</li>
      <li>Minor changes to sequence diagrams.</li>
      <li>Added a more complete RTCDataChannel example</li>
      <li>Various fixes from Dan's Idp API review.</li>
      <li>Patched the Stats API.</li>
    </ol>
    <h3 id="changes-since-aug-13-2012">Changes since Aug 13, 2012</h3>
    <ol>
      <li>Made the RTCSessionDescription and RTCIceCandidate constructors take dictionaries instead of a strings. Also added detailed stringifier algorithm.
      </li>
      <li>Went through the list of issues (issue numbers are only valid with HEAD at fcda53c460). Closed (fixed/wontfix): 1, 8, 10, 13, 14, 16, 18, 19, 22, 23, 24. Converted to notes: 4, 12. Updated: 9.</li>
      <li>Incorporate <a href="http://lists.w3.org/Archives/Public/www-archive/2012Aug/0015.html">changes
      proposed</a> by Li Li.
      </li>
      <li>Use an enum for DataChannelState and fix IDLs where using an optional argument also requires all previous optional arguments to have a default value.
      </li>
    </ol>
    <h3 id="changes-since-jul-20-2012">Changes since Jul 20, 2012</h3>
    <ol>
      <li>Added RTC Prefix to names (including the notes below).</li>
      <li>Moved to new definition of configuration and ice servers object.</li>
      <li>Added correlating lines to candidate structure.</li>
      <li>Converted setLocalDescription and setRemoteDescription to be asynchronous.
      </li>
      <li>Added call flows.</li>
    </ol>
    <h3 id="changes-since-jul-13-2012">Changes since Jul 13, 2012</h3>
    <ol>
      <li>Removed peer attribute from RTCPeerConnectionIceEvent (duplicates functionality of Event.target attribute).</li>
      <li>Removed RTCIceCandidateCallback (no longer used).</li>
      <li>Removed RTCPeerConnectionEvent (we use a simple event instead).</li>
      <li>Removed RTCSdpType argument from setLocalDescription() and setRemoteDescription(). Updated simple example to match.</li>
    </ol>
    <h3 id="changes-since-may-28-2012">Changes since May 28, 2012</h3>
    <ol>
      <li>Changed names to use RTC Prefix.</li>
      <li>Changed the data structure used to pass in STUN and TURN servers in configuration.
      </li>
      <li>Updated simple RTCPeerConnection example (RTCPeerConnection constructor arguments; use icecandidate event).</li>
      <li>Initial import of new Data API.</li>
      <li>Removed some left-overs from the old Data Stream API.</li>
      <li>Renamed "underlying data channel" to "underlying data transport". Fixed closing procedures. Fixed some typos.</li>
    </ol>
    <h3 id="changes-since-april-27-2012">Changes since April 27, 2012</h3>
    <ol>
      <li>Major rewrite of RTCPeerConnection section to line up with IETF JSEP draft.
      </li>
      <li>Added simple RTCPeerConnection example. Initial update of RTCSessionDescription and RTCIceCandidate to support serialization and construction.
      </li>
    </ol>
    <h3 id="changes-since-21-april-2012">Changes since 21 April 2012</h3>
    <ol>
      <li>Moved MediaStream and related definitions to getUserMedia.</li>
      <li>Removed section "Obtaining local multimedia content".</li>
      <li>Updated getUserMedia() calls in examples (changes in Media Capture TF spec).
      </li>
      <li>Introduced MediaStreamTrackList interface with support for adding and removing tracks.</li>
      <li>Updated the algorithm that is run when RTCPeerConnection receives a stream (create new stream when negotiated instead of when data arrives).
      </li>
    </ol>
    <h3 id="changes-since-12-january-2012">Changes since 12 January 2012</h3>
    <ol>
      <li>Clarified the relation of Stream, Track, and Channel.</li>
    </ol>
    <h3 id="changes-since-17-october-2011">Changes since 17 October 2011</h3>
    <ol>
      <li>Tweak the introduction text and add a reference to the IETF RTCWEB group.
      </li>
      <li>Changed the first argument to getUserMedia to be an object.</li>
      <li>Added a MediaStreamHints object as a second argument to RTCPeerConnection.addStream.
      </li>
      <li>Added AudioMediaStreamTrack class and DTMF interface.</li>
    </ol>
    <h3 id="changes-since-23-august-2011">Changes since 23 August 2011</h3>
    <ol>
      <li>Separated the SDP and ICE Agent into separate agents and added explicit state attributes for each.</li>
      <li>Removed the send method from PeerConenction and associated callback function.
      </li>
      <li>Modified MediaStream() constructor to take a list of MediaStreamTrack objects instead of a MediaStream. Removed text about MediaStream parent and child relationship.</li>
      <li>Added abstract.</li>
      <li>Moved a few paragraphs from the MediaStreamTrack.label section to the MediaStream.label section (where they belong).</li>
      <li>Split MediaStream.tracks into MediaStream.audioTracks and MediaStream.videoTracks.
      </li>
      <li>Removed a sentence that implied that track access is limited to LocalMediaStream.
      </li>
      <li>Updated a few getUserMedia()-examples to use MediaStreamOptions.</li>
      <li>Replaced calls to URL.getObjectURL() with URL.createObjectURL() in example code.</li>
      <li>Fixed some broken getUserMedia() links.</li>
      <li>Introduced state handling on MediaStreamTrack (removed state handling from MediaStream).</li>
      <li>Reintroduced onended on MediaStream to simplify checking if all tracks are ended.</li>
      <li>Aligned the MediaStreamTrack ended event dispatching behavior with that of MediaStream.</li>
      <li>Updated the LocalMediaStream.stop() algorithm to implicitly use the end track algorithm.</li>
      <li>Replaced an occurrence the term finished track with ended track (to align with rest of spec).</li>
      <li>Moved (and extended) the explanation about track references and media sources from LocalMediaStream to MediaStreamTrack.</li>
    </ol>
  </section>

  <section class="appendix" id="acknowledgements" typeof="bibo:Chapter" resource="#acknowledgements" property="bibo:hasPart">
    <!--OddPage-->
    <h2 id="h-acknowledgements" resource="#h-acknowledgements"><span property="xhv:role" resource="xhv:heading"><span class="secno">A. </span>Acknowledgements</span>
    </h2>
    <p>The editors wish to thank the Working Group chairs and Team Contact, Harald Alvestrand, Stefan HÃ¥kansson, Erik Lagerway and Dominique HazaÃ«l-Massieux, for their support. Substantial text in this specification was provided by many people including Martin Thomson, Harald Alvestrand, Justin Uberti, Eric Rescorla, Peter Thatcher, Jan-Ivar Bruaroey and Peter Saint-Andre. Dan Burnett would like to acknowledge the significant support received from Voxeo and Aspect during the development of this specification.</p>
    <p>The RTCRtpSender and RTCRtpReceiver objects were initially described in the <a href="https://www.w3.org/community/ortc/"><abbr title="World Wide Web Consortium">W3C</abbr> ORTC CG</a>, and have been adapted for use in this specification.</p>
  </section>


  <section id="references" class="appendix" typeof="bibo:Chapter" resource="#references" property="bibo:hasPart">
    <!--OddPage-->
    <h2 id="h-references" resource="#h-references"><span property="xhv:role" resource="xhv:heading"><span class="secno">B. </span>References</span>
    </h2>

    <section id="normative-references" typeof="bibo:Chapter" resource="#normative-references" property="bibo:hasPart">
      <h3 id="h-normative-references" resource="#h-normative-references"><span property="xhv:role" resource="xhv:heading"><span class="secno">B.1 </span>Normative references</span>
      </h3>
      <dl class="bibliography" resource=""><dt id="bib-FILEAPI">[FILEAPI]</dt>
        <dd>Arun Ranganathan; Jonas Sicking. W3C. <a href="https://www.w3.org/TR/FileAPI/" property="dc:requires"><cite>File API</cite></a>. 21 April 2015. W3C Working Draft. URL: <a href="https://www.w3.org/TR/FileAPI/" property="dc:requires">https://www.w3.org/TR/FileAPI/</a>
        </dd><dt id="bib-FIPS-180-4">[FIPS-180-4]</dt>
        <dd>U.S. Department of Commerce/National Institute of Standards and Technology. <a href="http://nvlpubs.nist.gov/nistpubs/FIPS/NIST.FIPS.180-4.pdf" property="dc:requires"><cite>FIPS PUB 180-4 Secure Hash Standard</cite></a>. URL: <a href="http://nvlpubs.nist.gov/nistpubs/FIPS/NIST.FIPS.180-4.pdf" property="dc:requires">http://nvlpubs.nist.gov/nistpubs/FIPS/NIST.FIPS.180-4.pdf</a>
        </dd><dt id="bib-GETUSERMEDIA">[GETUSERMEDIA]</dt>
        <dd>Daniel Burnett; Adam Bergkvist; Cullen Jennings; Anant Narayanan; Bernard Aboba. W3C. <a href="https://www.w3.org/TR/mediacapture-streams/" property="dc:requires"><cite>Media Capture and Streams</cite></a>. 19 May 2016. W3C Candidate Recommendation. URL: <a href="https://www.w3.org/TR/mediacapture-streams/" property="dc:requires">https://www.w3.org/TR/mediacapture-streams/</a>
        </dd><dt id="bib-HIGHRES-TIME">[HIGHRES-TIME]</dt>
        <dd>Ilya Grigorik; James Simonsen; Jatinder Mann. W3C. <a href="https://www.w3.org/TR/hr-time-2/" property="dc:requires"><cite>High Resolution Time Level 2</cite></a>. 1 November 2016. W3C Candidate Recommendation. URL: <a href="https://www.w3.org/TR/hr-time-2/" property="dc:requires">https://www.w3.org/TR/hr-time-2/</a>
        </dd><dt id="bib-HTML">[HTML]</dt>
        <dd>Anne van Kesteren; Domenic Denicola; Ian Hickson; Philip JÃ¤genstedt; Simon Pieters. WHATWG. <a href="https://html.spec.whatwg.org/multipage/" property="dc:requires"><cite>HTML Standard</cite></a>. Living Standard. URL: <a href="https://html.spec.whatwg.org/multipage/" property="dc:requires">https://html.spec.whatwg.org/multipage/</a>
        </dd><dt id="bib-HTML5">[HTML5]</dt>
        <dd>Ian Hickson; Robin Berjon; Steve Faulkner; Travis Leithead; Erika Doyle Navara; Theresa O'Connor; Silvia Pfeiffer. W3C. <a href="https://www.w3.org/TR/html5/" property="dc:requires"><cite>HTML5</cite></a>. 28 October 2014. W3C Recommendation. URL: <a href="https://www.w3.org/TR/html5/" property="dc:requires">https://www.w3.org/TR/html5/</a>
        </dd><dt id="bib-ICE">[ICE]</dt>
        <dd>J. Rosenberg. IETF. <a href="https://tools.ietf.org/html/rfc5245" property="dc:requires"><cite>Interactive Connectivity Establishment (ICE): A Protocol for Network Address Translator (NAT) Traversal for Offer/Answer Protocols</cite></a>. April 2010. Proposed Standard. URL: <a href="https://tools.ietf.org/html/rfc5245" property="dc:requires">https://tools.ietf.org/html/rfc5245</a>
        </dd><dt id="bib-JSEP">[JSEP]</dt>
        <dd>Justin Uberti; Cullen Jennings; Eric Rescorla. IETF. <a href="http://datatracker.ietf.org/doc/draft-ietf-rtcweb-jsep/" property="dc:requires"><cite>Javascript Session Establishment Protocol</cite></a>. 20 September 2016. Active Internet-Draft. URL: <a href="http://datatracker.ietf.org/doc/draft-ietf-rtcweb-jsep/" property="dc:requires">http://datatracker.ietf.org/doc/draft-ietf-rtcweb-jsep/</a>
        </dd><dt id="bib-RFC2119">[RFC2119]</dt>
        <dd>S. Bradner. IETF. <a href="https://tools.ietf.org/html/rfc2119" property="dc:requires"><cite>Key words for use in RFCs to Indicate Requirement Levels</cite></a>. March 1997. Best Current Practice. URL: <a href="https://tools.ietf.org/html/rfc2119" property="dc:requires">https://tools.ietf.org/html/rfc2119</a>
        </dd><dt id="bib-RFC4566">[RFC4566]</dt>
        <dd>M. Handley; V. Jacobson; C. Perkins. IETF. <a href="https://tools.ietf.org/html/rfc4566" property="dc:requires"><cite>SDP: Session Description Protocol</cite></a>. July 2006. Proposed Standard. URL: <a href="https://tools.ietf.org/html/rfc4566" property="dc:requires">https://tools.ietf.org/html/rfc4566</a>
        </dd><dt id="bib-RFC4572">[RFC4572]</dt>
        <dd>J. Lennox. IETF. <a href="https://tools.ietf.org/html/rfc4572" property="dc:requires"><cite>Connection-Oriented Media Transport over the Transport Layer Security (TLS) Protocol in the Session Description Protocol (SDP)</cite></a>. July 2006. Proposed Standard. URL: <a href="https://tools.ietf.org/html/rfc4572" property="dc:requires">https://tools.ietf.org/html/rfc4572</a>
        </dd><dt id="bib-RFC5389">[RFC5389]</dt>
        <dd>J. Rosenberg; R. Mahy; P. Matthews; D. Wing. IETF. <a href="https://tools.ietf.org/html/rfc5389" property="dc:requires"><cite>Session Traversal Utilities for NAT (STUN)</cite></a>. October 2008. Proposed Standard. URL: <a href="https://tools.ietf.org/html/rfc5389" property="dc:requires">https://tools.ietf.org/html/rfc5389</a>
        </dd><dt id="bib-RFC5888">[RFC5888]</dt>
        <dd>G. Camarillo; H. Schulzrinne. IETF. <a href="https://tools.ietf.org/html/rfc5888" property="dc:requires"><cite>The Session Description Protocol (SDP) Grouping Framework</cite></a>. June 2010. Proposed Standard. URL: <a href="https://tools.ietf.org/html/rfc5888" property="dc:requires">https://tools.ietf.org/html/rfc5888</a>
        </dd><dt id="bib-RFC6236">[RFC6236]</dt>
        <dd>I. Johansson; K. Jung. IETF. <a href="https://tools.ietf.org/html/rfc6236" property="dc:requires"><cite>Negotiation of Generic Image Attributes in the Session Description Protocol (SDP)</cite></a>. May 2011. Proposed Standard. URL: <a href="https://tools.ietf.org/html/rfc6236" property="dc:requires">https://tools.ietf.org/html/rfc6236</a>
        </dd><dt id="bib-RFC6464">[RFC6464]</dt>
        <dd>J. Lennox, Ed.; E. Ivov; E. Marocco. IETF. <a href="https://tools.ietf.org/html/rfc6464" property="dc:requires"><cite>A Real-time Transport Protocol (RTP) Header Extension for Client-to-Mixer Audio Level Indication</cite></a>. December 2011. Proposed Standard. URL: <a href="https://tools.ietf.org/html/rfc6464" property="dc:requires">https://tools.ietf.org/html/rfc6464</a>
        </dd><dt id="bib-RFC6465">[RFC6465]</dt>
        <dd>E. Ivov, Ed.; E. Marocco, Ed.; J. Lennox. IETF. <a href="https://tools.ietf.org/html/rfc6465" property="dc:requires"><cite>A Real-time Transport Protocol (RTP) Header Extension for Mixer-to-Client Audio Level Indication</cite></a>. December 2011. Proposed Standard. URL: <a href="https://tools.ietf.org/html/rfc6465" property="dc:requires">https://tools.ietf.org/html/rfc6465</a>
        </dd><dt id="bib-RFC6544">[RFC6544]</dt>
        <dd>J. Rosenberg; A. Keranen; B. B. Lowekamp; A. B. Roach. IETF. <a href="https://tools.ietf.org/html/rfc6544" property="dc:requires"><cite>TCP Candidates with Interactive Connectivity Establishment (ICE)</cite></a>. March 2012. Proposed Standard. URL: <a href="https://tools.ietf.org/html/rfc6544" property="dc:requires">https://tools.ietf.org/html/rfc6544</a>
        </dd><dt id="bib-RFC7064">[RFC7064]</dt>
        <dd>S. Nandakumar; G. Salgueiro; P. Jones; M. Petit-Huguenin. IETF. <a href="https://tools.ietf.org/html/rfc7064" property="dc:requires"><cite>URI Scheme for the Session Traversal Utilities for NAT (STUN) Protocol</cite></a>. November 2013. Proposed Standard. URL: <a href="https://tools.ietf.org/html/rfc7064" property="dc:requires">https://tools.ietf.org/html/rfc7064</a>
        </dd><dt id="bib-RFC7065">[RFC7065]</dt>
        <dd>M. Petit-Huguenin; S. Nandakumar; G. Salgueiro; P. Jones. IETF. <a href="https://tools.ietf.org/html/rfc7065" property="dc:requires"><cite>Traversal Using Relays around NAT (TURN) Uniform Resource Identifiers</cite></a>. November 2013. Proposed Standard. URL: <a href="https://tools.ietf.org/html/rfc7065" property="dc:requires">https://tools.ietf.org/html/rfc7065</a>
        </dd><dt id="bib-RFC7675">[RFC7675]</dt>
        <dd>M. Perumal; D. Wing; R. Ravindranath; T. Reddy; M. Thomson. IETF. <a href="https://tools.ietf.org/html/rfc7675" property="dc:requires"><cite>Session Traversal Utilities for NAT (STUN) Usage for Consent Freshness</cite></a>. October 2015. Proposed Standard. URL: <a href="https://tools.ietf.org/html/rfc7675" property="dc:requires">https://tools.ietf.org/html/rfc7675</a>
        </dd><dt id="bib-RTCWEB-ALPN">[RTCWEB-ALPN]</dt>
        <dd>M. Thomson. IETF. <a href="http://datatracker.ietf.org/doc/draft-ietf-rtcweb-alpn/" property="dc:requires"><cite>Application Layer Protocol Negotiation for Web Real-Time Communications</cite></a>. 23 July 2014. Active Internet-Draft. URL: <a href="http://datatracker.ietf.org/doc/draft-ietf-rtcweb-alpn/" property="dc:requires">http://datatracker.ietf.org/doc/draft-ietf-rtcweb-alpn/</a>
        </dd><dt id="bib-RTCWEB-AUDIO">[RTCWEB-AUDIO]</dt>
        <dd>JM. Valin; C. Bran. IETF. <a href="http://datatracker.ietf.org/doc/draft-ietf-rtcweb-audio/" property="dc:requires"><cite>WebRTC Audio Codec and Processing Requirements</cite></a>. 27 January 2014. Active Internet-Draft. URL: <a href="http://datatracker.ietf.org/doc/draft-ietf-rtcweb-audio/" property="dc:requires">http://datatracker.ietf.org/doc/draft-ietf-rtcweb-audio/</a>
        </dd><dt id="bib-RTCWEB-DATA">[RTCWEB-DATA]</dt>
        <dd>R. Jesup; S. Loreto; M. Tuexen. IETF. <a href="http://datatracker.ietf.org/doc/draft-ietf-rtcweb-data-channel/" property="dc:requires"><cite>RTCWeb Data Channels</cite></a>. 21 October 2013. Active Internet-Draft. URL: <a href="http://datatracker.ietf.org/doc/draft-ietf-rtcweb-data-channel/" property="dc:requires">http://datatracker.ietf.org/doc/draft-ietf-rtcweb-data-channel/</a>
        </dd><dt id="bib-RTCWEB-DATA-PROTOCOL">[RTCWEB-DATA-PROTOCOL]</dt>
        <dd>R. Jesup; S. Loreto; M. Tuexen. IETF. <a href="http://datatracker.ietf.org/doc/draft-ietf-rtcweb-data-protocol/" property="dc:requires"><cite>RTCWeb Data Channel Protocol</cite></a>. 21 October 2013. Active Internet-Draft. URL: <a href="http://datatracker.ietf.org/doc/draft-ietf-rtcweb-data-protocol/" property="dc:requires">http://datatracker.ietf.org/doc/draft-ietf-rtcweb-data-protocol/</a>
        </dd><dt id="bib-RTCWEB-RTP">[RTCWEB-RTP]</dt>
        <dd>C. Perkins; M. Westerlund; J. Ott. IETF. <a href="http://datatracker.ietf.org/doc/draft-ietf-rtcweb-rtp-usage/" property="dc:requires"><cite>Web Real-Time Communication (WebRTC): Media Transport and Use of RTP</cite></a>. 16 December 2013. Active Internet-Draft. URL: <a href="http://datatracker.ietf.org/doc/draft-ietf-rtcweb-rtp-usage/" property="dc:requires">http://datatracker.ietf.org/doc/draft-ietf-rtcweb-rtp-usage/</a>
        </dd><dt id="bib-RTCWEB-SECURITY-ARCH">[RTCWEB-SECURITY-ARCH]</dt>
        <dd>Eric Rescorla. IETF. <a href="http://datatracker.ietf.org/doc/draft-ietf-rtcweb-security-arch/" property="dc:requires"><cite>WebRTC Security Architecture</cite></a>. 22 January 2014. Active Internet-Draft. URL: <a href="http://datatracker.ietf.org/doc/draft-ietf-rtcweb-security-arch/" property="dc:requires">http://datatracker.ietf.org/doc/draft-ietf-rtcweb-security-arch/</a>
        </dd><dt id="bib-RTCWEB-TRANSPORT">[RTCWEB-TRANSPORT]</dt>
        <dd>H. Alvestrand. IETF. <a href="http://datatracker.ietf.org/doc/draft-ietf-rtcweb-transports/" property="dc:requires"><cite>Transports for RTCWEB</cite></a>. 22 January 2014. Active Internet-Draft. URL: <a href="http://datatracker.ietf.org/doc/draft-ietf-rtcweb-transports/" property="dc:requires">http://datatracker.ietf.org/doc/draft-ietf-rtcweb-transports/</a>
        </dd><dt id="bib-SDP">[SDP]</dt>
        <dd>J. Rosenberg; H. Schulzrinne. IETF. <a href="https://tools.ietf.org/html/rfc3264" property="dc:requires"><cite>An Offer/Answer Model with Session Description Protocol (SDP)</cite></a>. June 2002. Proposed Standard. URL: <a href="https://tools.ietf.org/html/rfc3264" property="dc:requires">https://tools.ietf.org/html/rfc3264</a>
        </dd><dt id="bib-TRAM-TURN-THIRD-PARTY-AUTHZ">[TRAM-TURN-THIRD-PARTY-AUTHZ]</dt>
        <dd>T. Reddy; P. Patil; R. Ravindranath; J. Uberti. IETF. <a property="dc:requires" href="https://tools.ietf.org/html/rfc7635"><cite>Session Traversal Utilities for NAT (STUN) Extension for Third Party Authorization</cite></a>. August 2015. Proposed Standard URL: <a property="dc:requires" href="https://tools.ietf.org/html/rfc7635">https://tools.ietf.org/html/rfc7635</a>
        </dd><dt id="bib-TSVWG-RTCWEB-QOS">[TSVWG-RTCWEB-QOS]</dt>
        <dd>S. Dhesikan; C. Jennings; D. Druta; P. Jones; J. Polk. IETF. <a href="https://datatracker.ietf.org/doc/draft-ietf-tsvwg-rtcweb-qos" property="dc:requires"><cite>DSCP and other packet markings for RTCWeb QoS</cite></a>. 12 November 2014. Internet Draft (work in progress). URL: <a href="https://datatracker.ietf.org/doc/draft-ietf-tsvwg-rtcweb-qos" property="dc:requires">https://datatracker.ietf.org/doc/draft-ietf-tsvwg-rtcweb-qos</a>
        </dd><dt id="bib-WEBIDL-1">[WEBIDL-1]</dt>
        <dd>Cameron McCormack; Boris Zbarsky; Tobie Langel. W3C. <a href="https://www.w3.org/TR/WebIDL-1/" property="dc:requires"><cite>Web IDL</cite></a>. 15 September 2016. W3C Working Draft. URL: <a href="https://www.w3.org/TR/WebIDL-1/" property="dc:requires">https://www.w3.org/TR/WebIDL-1/</a>
        </dd><dt id="bib-WEBWORKERS">[WEBWORKERS]</dt>
        <dd>Ian Hickson. W3C. <a href="https://www.w3.org/TR/workers/" property="dc:requires"><cite>Web Workers</cite></a>. 24 September 2015. W3C Working Draft. URL: <a href="https://www.w3.org/TR/workers/" property="dc:requires">https://www.w3.org/TR/workers/</a>
        </dd><dt id="bib-WebCryptoAPI">[WebCryptoAPI]</dt>
        <dd>Ryan Sleevi; Mark Watson. W3C. <a href="https://www.w3.org/TR/WebCryptoAPI/" property="dc:requires"><cite>Web Cryptography API</cite></a>. 11 December 2014. W3C Candidate Recommendation. URL: <a href="https://www.w3.org/TR/WebCryptoAPI/" property="dc:requires">https://www.w3.org/TR/WebCryptoAPI/</a>
        </dd><dt id="bib-X509V3">[X509V3]</dt>
        <dd><cite>ITU-T Recommendation X.509 version 3 (1997). "Information Technology - Open Systems Interconnection - The Directory Authentication Framework"&nbsp; ISO/IEC 9594-8:1997</cite>.
        </dd><dt id="bib-X690">[X690]</dt>
        <dd><cite><a href="http://www.itu.int/ITU-T/studygroups/com17/languages/X.690-0207.pdf">Recommendation X.690 â€” Information Technology â€” ASN.1 Encoding Rules â€” Specification of Basic Encoding Rules (BER), Canonical Encoding Rules (CER), and Distinguished Encoding Rules (DER)</a></cite>. International Telecommunication Union.
        </dd><dt id="bib-webmessaging">[webmessaging]</dt>
        <dd>Ian Hickson. W3C. <a href="https://www.w3.org/TR/webmessaging/" property="dc:requires"><cite>HTML5 Web Messaging</cite></a>. 19 May 2015. W3C Recommendation. URL: <a href="https://www.w3.org/TR/webmessaging/" property="dc:requires">https://www.w3.org/TR/webmessaging/</a>
        </dd>
      </dl>
    </section>

    <section id="informative-references" typeof="bibo:Chapter" resource="#informative-references" property="bibo:hasPart">
      <h3 id="h-informative-references" resource="#h-informative-references"><span property="xhv:role" resource="xhv:heading"><span class="secno">B.2 </span>Informative references</span>
      </h3>
      <dl class="bibliography" resource=""><dt id="bib-IANA-RTP-2">[IANA-RTP-2]</dt>
        <dd>IANA. <a href="http://www.iana.org/assignments/rtp-parameters/rtp-parameters.xhtml#rtp-parameters-2" property="dc:references"><cite>RTP Payload Format media types</cite></a>. URL: <a href="http://www.iana.org/assignments/rtp-parameters/rtp-parameters.xhtml#rtp-parameters-2" property="dc:references">http://www.iana.org/assignments/rtp-parameters/rtp-parameters.xhtml#rtp-parameters-2</a>
        </dd><dt id="bib-INDEXEDDB">[INDEXEDDB]</dt>
        <dd>Nikunj Mehta; Jonas Sicking; Eliot Graff; Andrei Popescu; Jeremy Orlow; Joshua Bell. W3C. <a href="https://www.w3.org/TR/IndexedDB/" property="dc:references"><cite>Indexed Database API</cite></a>. 8 January 2015. W3C Recommendation. URL: <a href="https://www.w3.org/TR/IndexedDB/" property="dc:references">https://www.w3.org/TR/IndexedDB/</a>
        </dd><dt id="bib-RFC3550">[RFC3550]</dt>
        <dd>H. Schulzrinne; S. Casner; R. Frederick; V. Jacobson. IETF. <a href="https://tools.ietf.org/html/rfc3550" property="dc:references"><cite>RTP: A Transport Protocol for Real-Time Applications</cite></a>. July 2003. Internet Standard. URL: <a href="https://tools.ietf.org/html/rfc3550" property="dc:references">https://tools.ietf.org/html/rfc3550</a>
        </dd><dt id="bib-RFC3890">[RFC3890]</dt>
        <dd>M. Westerlund. IETF. <a href="https://tools.ietf.org/html/rfc3890" property="dc:references"><cite>A Transport Independent Bandwidth Modifier for the Session Description Protocol (SDP)</cite></a>. September 2004. Proposed Standard. URL: <a href="https://tools.ietf.org/html/rfc3890" property="dc:references">https://tools.ietf.org/html/rfc3890</a>
        </dd><dt id="bib-RFC5285">[RFC5285]</dt>
        <dd>D. Singer; H. Desineni. IETF. <a href="https://tools.ietf.org/html/rfc5285" property="dc:references"><cite>A General Mechanism for RTP Header Extensions</cite></a>. July 2008. Proposed Standard. URL: <a href="https://tools.ietf.org/html/rfc5285" property="dc:references">https://tools.ietf.org/html/rfc5285</a>
        </dd><dt id="bib-RFC5322">[RFC5322]</dt>
        <dd>P. Resnick, Ed.. IETF. <a href="https://tools.ietf.org/html/rfc5322" property="dc:references"><cite>Internet Message Format</cite></a>. October 2008. Draft Standard. URL: <a href="https://tools.ietf.org/html/rfc5322" property="dc:references">https://tools.ietf.org/html/rfc5322</a>
        </dd><dt id="bib-RFC5506">[RFC5506]</dt>
        <dd>I. Johansson; M. Westerlund. IETF. <a href="https://tools.ietf.org/html/rfc5506" property="dc:references"><cite>Support for Reduced-Size Real-Time Transport Control Protocol (RTCP): Opportunities and Consequences</cite></a>. April 2009. Proposed Standard. URL: <a href="https://tools.ietf.org/html/rfc5506" property="dc:references">https://tools.ietf.org/html/rfc5506</a>
        </dd><dt id="bib-RTCWEB-IP-HANDLING">[RTCWEB-IP-HANDLING]</dt>
        <dd>Guo-wei Shieh; Justin Uberti. IETF. <a href="https://datatracker.ietf.org/doc/draft-ietf-rtcweb-ip-handling/" property="dc:references"><cite>WebRTC IP Address Handling Recommendations</cite></a>. 20 March 2016. Active Internet-Draft. URL: <a href="https://datatracker.ietf.org/doc/draft-ietf-rtcweb-ip-handling/" property="dc:references">https://datatracker.ietf.org/doc/draft-ietf-rtcweb-ip-handling/</a>
        </dd><dt id="bib-RTCWEB-OVERVIEW">[RTCWEB-OVERVIEW]</dt>
        <dd>H. Alvestrand. IETF. <a href="http://datatracker.ietf.org/doc/draft-ietf-rtcweb-overview/" property="dc:references"><cite>Overview: Real Time Protocols for Brower-based Applications</cite></a>. 14 February 2014. Active Internet-Draft. URL: <a href="http://datatracker.ietf.org/doc/draft-ietf-rtcweb-overview/" property="dc:references">http://datatracker.ietf.org/doc/draft-ietf-rtcweb-overview/</a>
        </dd><dt id="bib-RTCWEB-SECURITY">[RTCWEB-SECURITY]</dt>
        <dd>Eric Rescorla. IETF. <a href="http://datatracker.ietf.org/doc/draft-ietf-rtcweb-security/" property="dc:references"><cite>Security Considerations for WebRTC</cite></a>. 22 January 2014. Active Internet-Draft. URL: <a href="http://datatracker.ietf.org/doc/draft-ietf-rtcweb-security/" property="dc:references">http://datatracker.ietf.org/doc/draft-ietf-rtcweb-security/</a>
        </dd><dt id="bib-STUN-PARAMETERS">[STUN-PARAMETERS]</dt>
        <dd>IETF. IANA. <a href="http://www.iana.org/assignments/stun-parameters/stun-parameters.xhtml#stun-parameters-6" property="dc:references"><cite>STUN Error Codes</cite></a>. April 2011. IANA Parameter Assignment. URL: <a href="http://www.iana.org/assignments/stun-parameters/stun-parameters.xhtml#stun-parameters-6" property="dc:references">http://www.iana.org/assignments/stun-parameters/stun-parameters.xhtml#stun-parameters-6</a>
        </dd><dt id="bib-TRICKLE-ICE">[TRICKLE-ICE]</dt>
        <dd>E. Ivov; E. Rescorla; J. Uberti. IETF. <a href="http://datatracker.ietf.org/doc/draft-ietf-mmusic-trickle-ice" property="dc:references"><cite>Trickle ICE: Incremental Provisioning of Candidates for the Interactive Connectivity Establishment (ICE) Protocol</cite></a>. 7 February 2014. Internet Draft (work in progress). URL: <a href="http://datatracker.ietf.org/doc/draft-ietf-mmusic-trickle-ice" property="dc:references">http://datatracker.ietf.org/doc/draft-ietf-mmusic-trickle-ice</a>
        </dd><dt id="bib-WEBSOCKETS-API">[WEBSOCKETS-API]</dt>
        <dd>Ian Hickson. W3C. <a href="https://www.w3.org/TR/websockets/" property="dc:references"><cite>The WebSocket API</cite></a>. 20 September 2012. W3C Candidate Recommendation. URL: <a href="https://www.w3.org/TR/websockets/" property="dc:references">https://www.w3.org/TR/websockets/</a>
        </dd><dt id="bib-XMLHttpRequest">[XMLHttpRequest]</dt>
        <dd>Anne van Kesteren; Julian Aubourg; Jungkee Song; Hallvord Steen et al. W3C. <a href="https://www.w3.org/TR/XMLHttpRequest/" property="dc:references"><cite>XMLHttpRequest Level 1</cite></a>. 6 October 2016. W3C Note. URL: <a href="https://www.w3.org/TR/XMLHttpRequest/" property="dc:references">https://www.w3.org/TR/XMLHttpRequest/</a>
        </dd>
      </dl>
    </section>
  </section>
  <p role="navigation" id="back-to-top"><a href="#toc"><abbr title="Back to Top">â†‘</abbr></a></p>
  <script src="https://www.w3.org/scripts/TR/2016/fixup.js"></script>
</body>
</html>
