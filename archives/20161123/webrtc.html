<!DOCTYPE html>
<html typeof="bibo:Document " prefix="bibo: http://purl.org/ontology/bibo/ w3p: http://www.w3.org/2001/02pd/rec54#" lang="en-us">
<head>
  <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta property="dc:language" content="en" lang="">
  <style>
    /*

github.com style (c) Vasily Polovnyov <vast@whiteants.net>

*/
    
    .hljs {
      display: block;
      overflow-x: auto;
      padding: 0.5em;
      color: #333;
      background: #f8f8f8;
    }
    
    .hljs-comment,
    .hljs-quote {
      color: #998;
      font-style: italic;
    }
    
    .hljs-keyword,
    .hljs-selector-tag,
    .hljs-subst {
      color: #333;
      font-weight: bold;
    }
    
    .hljs-number,
    .hljs-literal,
    .hljs-variable,
    .hljs-template-variable,
    .hljs-tag .hljs-attr {
      color: #008080;
    }
    
    .hljs-string,
    .hljs-doctag {
      color: #d14;
    }
    
    .hljs-title,
    .hljs-section,
    .hljs-selector-id {
      color: #900;
      font-weight: bold;
    }
    
    .hljs-subst {
      font-weight: normal;
    }
    
    .hljs-type,
    .hljs-class .hljs-title {
      color: #458;
      font-weight: bold;
    }
    
    .hljs-tag,
    .hljs-name,
    .hljs-attribute {
      color: #000080;
      font-weight: normal;
    }
    
    .hljs-regexp,
    .hljs-link {
      color: #009926;
    }
    
    .hljs-symbol,
    .hljs-bullet {
      color: #990073;
    }
    
    .hljs-built_in,
    .hljs-builtin-name {
      color: #0086b3;
    }
    
    .hljs-meta {
      color: #999;
      font-weight: bold;
    }
    
    .hljs-deletion {
      background: #fdd;
    }
    
    .hljs-addition {
      background: #dfd;
    }
    
    .hljs-emphasis {
      font-style: italic;
    }
    
    .hljs-strong {
      font-weight: bold;
    }
  </style>
  <style>
    /* --- EXAMPLES --- */
    
    div.example-title {
      min-width: 7.5em;
      color: #b9ab2d;
    }
    
    div.example-title span {
      text-transform: uppercase;
    }
    
    aside.example,
    div.example,
    div.illegal-example {
      padding: 0.5em;
      margin: 1em 0;
      position: relative;
      clear: both;
    }
    
    div.illegal-example {
      color: red
    }
    
    div.illegal-example p {
      color: black
    }
    
    aside.example,
    div.example {
      padding: .5em;
      border-left-width: .5em;
      border-left-style: solid;
      border-color: #e0cb52;
      background: #fcfaee;
    }
    
    aside.example div.example {
      border-left-width: .1em;
      border-color: #999;
      background: #fff;
    }
    
    aside.example div.example div.example-title {
      color: #999;
    }
  </style>
  <style>
    /* --- ISSUES/NOTES --- */
    
    div.issue-title,
    div.note-title,
    div.ednote-title,
    div.warning-title {
      padding-right: 1em;
      min-width: 7.5em;
      color: #b9ab2d;
    }
    
    div.issue-title {
      color: #e05252;
    }
    
    div.note-title,
    div.ednote-title {
      color: #2b2;
    }
    
    div.warning-title {
      color: #f22;
    }
    
    div.issue-title span,
    div.note-title span,
    div.ednote-title span,
    div.warning-title span {
      text-transform: uppercase;
    }
    
    div.note,
    div.issue,
    div.ednote,
    div.warning {
      margin-top: 1em;
      margin-bottom: 1em;
    }
    
    .note>p:first-child,
    .ednote>p:first-child,
    .issue>p:first-child,
    .warning>p:first-child {
      margin-top: 0
    }
    
    .issue,
    .note,
    .ednote,
    .warning {
      padding: .5em;
      border-left-width: .5em;
      border-left-style: solid;
    }
    
    div.issue,
    div.note,
    div.ednote,
    div.warning {
      padding: 1em 1.2em 0.5em;
      margin: 1em 0;
      position: relative;
      clear: both;
    }
    
    span.note,
    span.ednote,
    span.issue,
    span.warning {
      padding: .1em .5em .15em;
    }
    
    .issue {
      border-color: #e05252;
      background: #fbe9e9;
    }
    
    .note,
    .ednote {
      border-color: #52e052;
      background: #e9fbe9;
    }
    
    .warning {
      border-color: #f11;
      border-width: .2em;
      border-style: solid;
      background: #fbe9e9;
    }
    
    .warning-title:before {
      content: "⚠";
      /*U+26A0 WARNING SIGN*/
      font-size: 3em;
      float: left;
      height: 100%;
      padding-right: .3em;
      vertical-align: top;
      margin-top: -0.5em;
    }
    
    li.task-list-item {
      list-style: none;
    }
    
    input.task-list-item-checkbox {
      margin: 0 0.35em 0.25em -1.6em;
      vertical-align: middle;
    }
  </style>
  <style>
    /* --- Best Practices --- */
    
    div.practice {
      border: solid #bebebe 1px;
      margin: 2em 1em 1em 2em;
    }
    
    span.practicelab {
      margin: 1.5em 0.5em 1em 1em;
      font-weight: bold;
      font-style: italic;
      background: #dfffff;
      position: relative;
      padding: 0 0.5em;
      top: -1.5em;
    }
    
    p.practicedesc {
      margin: 1.5em 0.5em 1em 1em;
    }
    
    @media screen {
      p.practicedesc {
        position: relative;
        top: -2em;
        padding: 0;
        margin: 1.5em 0.5em -1em 1em;
      }
    }
  </style>
  <style>
    /* --- WEB IDL --- */
    
    pre.idl {
      border-top: 1px solid #90b8de;
      border-bottom: 1px solid #90b8de;
      padding: 1em;
      line-height: 120%;
    }
    
    @media print {
      pre.idl {
        white-space: pre-wrap;
      }
    }
    
    pre.idl::before {
      content: "WebIDL";
      display: block;
      width: 150px;
      background: #90b8de;
      color: #fff;
      font-family: sans-serif;
      padding: 3px;
      font-weight: bold;
      margin: -1em 0 1em -1em;
    }
    
    .idlType {
      color: #ff4500;
      font-weight: bold;
      text-decoration: none;
    }
    /*.idlModule*/
    /*.idlModuleID*/
    /*.idlInterface*/
    
    .idlInterfaceID,
    .idlDictionaryID,
    .idlCallbackID,
    .idlEnumID {
      font-weight: bold;
      color: #005a9c;
    }
    
    a.idlEnumItem {
      color: #000;
      border-bottom: 1px dotted #ccc;
      text-decoration: none;
    }
    
    .idlSuperclass {
      font-style: italic;
      color: #005a9c;
    }
    /*.idlAttribute*/
    
    .idlAttrType,
    .idlFieldType,
    .idlMemberType {
      color: #005a9c;
    }
    
    .idlAttrName,
    .idlFieldName,
    .idlMemberName {
      color: #ff4500;
    }
    
    .idlAttrName a,
    .idlFieldName a,
    .idlMemberName a {
      color: #ff4500;
      border-bottom: 1px dotted #ff4500;
      text-decoration: none;
    }
    /*.idlMethod*/
    
    .idlMethType,
    .idlCallbackType {
      color: #005a9c;
    }
    
    .idlMethName {
      color: #ff4500;
    }
    
    .idlMethName a {
      color: #ff4500;
      border-bottom: 1px dotted #ff4500;
      text-decoration: none;
    }
    /*.idlCtor*/
    
    .idlCtorName {
      color: #ff4500;
    }
    
    .idlCtorName a {
      color: #ff4500;
      border-bottom: 1px dotted #ff4500;
      text-decoration: none;
    }
    /*.idlParam*/
    
    .idlParamType {
      color: #005a9c;
    }
    
    .idlParamName,
    .idlDefaultValue {
      font-style: italic;
    }
    
    .extAttr {
      color: #666;
    }
    /*.idlSectionComment*/
    
    .idlSectionComment {
      color: gray;
    }
    /*.idlIterable*/
    
    .idlIterableKeyType,
    .idlIterableValueType {
      color: #005a9c;
    }
    /*.idlMaplike*/
    
    .idlMaplikeKeyType,
    .idlMaplikeValueType {
      color: #005a9c;
    }
    /*.idlConst*/
    
    .idlConstType {
      color: #005a9c;
    }
    
    .idlConstName {
      color: #ff4500;
    }
    
    .idlConstName a {
      color: #ff4500;
      border-bottom: 1px dotted #ff4500;
      text-decoration: none;
    }
    /*.idlException*/
    
    .idlExceptionID {
      font-weight: bold;
      color: #c00;
    }
    
    .idlTypedefID,
    .idlTypedefType {
      color: #005a9c;
    }
    
    .idlRaises,
    .idlRaises a.idlType,
    .idlRaises a.idlType code,
    .excName a,
    .excName a code {
      color: #c00;
      font-weight: normal;
    }
    
    .excName a {
      font-family: monospace;
    }
    
    .idlRaises a.idlType,
    .excName a.idlType {
      border-bottom: 1px dotted #c00;
    }
    
    .excGetSetTrue,
    .excGetSetFalse,
    .prmNullTrue,
    .prmNullFalse,
    .prmOptTrue,
    .prmOptFalse {
      width: 45px;
      text-align: center;
    }
    
    .excGetSetTrue,
    .prmNullTrue,
    .prmOptTrue {
      color: #0c0;
    }
    
    .excGetSetFalse,
    .prmNullFalse,
    .prmOptFalse {
      color: #c00;
    }
    
    .idlImplements a {
      font-weight: bold;
    }
    
    dl.attributes,
    dl.methods,
    dl.constants,
    dl.constructors,
    dl.fields,
    dl.dictionary-members {
      margin-left: 2em;
    }
    
    .attributes dt,
    .methods dt,
    .constants dt,
    .constructors dt,
    .fields dt,
    .dictionary-members dt {
      font-weight: normal;
    }
    
    .attributes dt code,
    .methods dt code,
    .constants dt code,
    .constructors dt code,
    .fields dt code,
    .dictionary-members dt code {
      font-weight: bold;
      color: #000;
      font-family: monospace;
    }
    
    .attributes dt code,
    .fields dt code,
    .dictionary-members dt code {
      background: #ffffd2;
    }
    
    .attributes dt .idlAttrType code,
    .fields dt .idlFieldType code,
    .dictionary-members dt .idlMemberType code {
      color: #005a9c;
      background: transparent;
      font-family: inherit;
      font-weight: normal;
      font-style: italic;
    }
    
    .methods dt code {
      background: #d9e6f8;
    }
    
    .constants dt code {
      background: #ddffd2;
    }
    
    .constructors dt code {
      background: #cfc;
    }
    
    .attributes dd,
    .methods dd,
    .constants dd,
    .constructors dd,
    .fields dd,
    .dictionary-members dd {
      margin-bottom: 1em;
    }
    
    table.parameters,
    table.exceptions {
      border-spacing: 0;
      border-collapse: collapse;
      margin: 0.5em 0;
      width: 100%;
    }
    
    table.parameters {
      border-bottom: 1px solid #90b8de;
    }
    
    table.exceptions {
      border-bottom: 1px solid #deb890;
    }
    
    .parameters th,
    .exceptions th {
      color: inherit;
      padding: 3px 5px;
      text-align: left;
      font-weight: normal;
    }
    
    .parameters th {
      color: #fff;
      background: #005a9c;
    }
    
    .exceptions th {
      background: #deb890;
    }
    
    .parameters td,
    .exceptions td {
      padding: 3px 10px;
      border-top: 1px solid #ddd;
      vertical-align: top;
    }
    
    .parameters tr:first-child td,
    .exceptions tr:first-child td {
      border-top: none;
    }
    
    .parameters td.prmName,
    .exceptions td.excName,
    .exceptions td.excCodeName {
      width: 100px;
    }
    
    .parameters td.prmType {
      width: 120px;
    }
    
    table.exceptions table {
      border-spacing: 0;
      border-collapse: collapse;
      width: 100%;
    }
  </style>
  <style id="respec-mainstyle">
    /*****************************************************************
 * ReSpec 3 CSS
 * Robin Berjon - http://berjon.com/
 *****************************************************************/
    /* Override code highlighter background */
    
    .hljs {
      background: transparent !important;
    }
    /* --- INLINES --- */
    
    em.rfc2119 {
      text-transform: lowercase;
      font-variant: small-caps;
      font-style: normal;
      color: #900;
    }
    
    h1 acronym,
    h2 acronym,
    h3 acronym,
    h4 acronym,
    h5 acronym,
    h6 acronym,
    a acronym,
    h1 abbr,
    h2 abbr,
    h3 abbr,
    h4 abbr,
    h5 abbr,
    h6 abbr,
    a abbr {
      border: none;
    }
    
    dfn {
      font-weight: bold;
    }
    
    a.internalDFN {
      color: inherit;
      border-bottom: 1px solid #99c;
      text-decoration: none;
    }
    
    a.externalDFN {
      color: inherit;
      border-bottom: 1px dotted #ccc;
      text-decoration: none;
    }
    
    a.bibref {
      text-decoration: none;
    }
    
    cite .bibref {
      font-style: normal;
    }
    
    code {
      color: #C83500;
    }
    
    th code {
      color: inherit;
    }
    /* --- TOC --- */
    
    .toc a,
    .tof a {
      text-decoration: none;
    }
    
    a .secno,
    a .figno {
      color: #000;
    }
    
    ul.tof,
    ol.tof {
      list-style: none outside none;
    }
    
    .caption {
      margin-top: 0.5em;
      font-style: italic;
    }
    /* --- TABLE --- */
    
    table.simple {
      border-spacing: 0;
      border-collapse: collapse;
      border-bottom: 3px solid #005a9c;
    }
    
    .simple th {
      background: #005a9c;
      color: #fff;
      padding: 3px 5px;
      text-align: left;
    }
    
    .simple th[scope="row"] {
      background: inherit;
      color: inherit;
      border-top: 1px solid #ddd;
    }
    
    .simple td {
      padding: 3px 10px;
      border-top: 1px solid #ddd;
    }
    
    .simple tr:nth-child(even) {
      background: #f0f6ff;
    }
    /* --- DL --- */
    
    .section dd>p:first-child {
      margin-top: 0;
    }
    
    .section dd>p:last-child {
      margin-bottom: 0;
    }
    
    .section dd {
      margin-bottom: 1em;
    }
    
    .section dl.attrs dd,
    .section dl.eldef dd {
      margin-bottom: 0;
    }
    
    .respec-hidden {
      display: none;
    }
    
    #respec-ui {
      position: fixed;
      top: 20px;
      right: 20px;
      width: 202px;
      text-align: right;
    }
    
    #respec-pill,
    .respec-info-button {
      background: #fff;
      height: 2.5em;
      color: rgb(120, 120, 120);
      border: 1px solid #ccc;
      box-shadow: 1px 1px 8px 0 rgba(100, 100, 100, .5);
    }
    
    .respec-info-button {
      border: none;
      border-radius: 2em;
      margin-right: 1em;
      min-width: 3.5em;
    }
    
    #respec-pill:disabled {
      margin: 10px auto;
      font-size: 2.8px;
      position: relative;
      text-indent: -9999em;
      border-top: 1.1em solid rgba(40, 40, 40, 0.2);
      border-right: 1.1em solid rgba(40, 40, 40, 0.2);
      border-bottom: 1.1em solid rgba(40, 40, 40, 0.2);
      border-left: 1.1em solid #ffffff;
      transform: translateZ(0);
      animation: respec-spin 1.1s infinite linear;
      box-shadow: none;
    }
    
    #respec-pill:disabled,
    #respec-pill:disabled:after {
      border-radius: 50%;
      width: 10em;
      height: 10em;
    }
    
    @keyframes respec-spin {
      0% {
        transform: rotate(0deg);
      }
      100% {
        transform: rotate(360deg);
      }
    }
    
    #respec-pill:hover,
    #respec-pill:focus {
      color: rgb(0, 0, 0);
      transition: color .2s
    }
    
    #respec-menu {
      font-family: sans-serif;
      background: #fff;
      box-shadow: 1px 1px 8px 0 rgba(100, 100, 100, .5);
      width: 200px;
      display: none;
      text-align: left;
      margin-top: 5px;
      font-size: .8em;
    }
    
    .respec-save-button {
      background: #fff;
      border: 1px solid #000;
      border-radius: 5px;
      padding: 5px;
      margin: 5px;
      display: block;
      width: 100%;
      color: #000;
      text-decoration: none;
      text-align: center;
      font-size: inherit;
    }
    
    #respec-ui button:focus,
    #respec-pill:focus,
    .respec-option:focus {
      outline: 0;
      outline-style: none;
    }
    
    #respec-ui button.respec-pill-error {
      background-color: red;
      color: white;
    }
    
    #respec-ui button.respec-pill-warning {
      background-color: orange;
      color: white;
    }
    
    #respec-menu button.respec-option {
      background: white;
      border: none;
      width: 100%;
      text-align: left;
      font-size: inherit;
      padding: 1.2em 1.2em;
    }
    
    #respec-menu button.respec-option:hover {
      background-color: #eeeeee;
    }
    
    .respec-cmd-icon {
      padding-right: .5em;
    }
    
    #respec-ui button.respec-option:last-child {
      border: none;
      border-radius: inherit;
    }
    
    @media print {
      .removeOnSave {
        display: none;
      }
    }
  </style>
  <link href="getusermedia.css" rel="stylesheet" type="text/css">
  <title>Media Capture and Streams</title>



  <link rel="stylesheet" href="https://www.w3.org/StyleSheets/TR/2016/W3C-ED">
  <!--[if lt IE 9]><script src='https://www.w3.org/2008/site/js/html5shiv.js'></script><![endif]-->
  <link rel="canonical" href="https://www.w3.org/TR/mediacapture-streams/">
  <meta name="generator" content="ReSpec 6.1.4">
  <script id="initialUserConfig" type="application/json">
    {
      "specStatus": "ED",
      "shortName": "mediacapture-streams",
      "overrideCopyright": "<p class='copyright'>Initial Author of this Specification was Ian Hickson, Google Inc., with the following copyright statement:<br /> &#169; Copyright 2004-2011 Apple Computer, Inc., Mozilla Foundation, and Opera Software ASA. You are granted a license to use, reproduce and create derivative works of this document.</p> <p class='copyright'>All subsequent changes since 26 July 2011 done by the W3C WebRTC Working Group and the Device APIs Working Group are under the following <a href='https://www.w3.org/Consortium/Legal/ipr-notice#Copyright'>Copyright</a>:<br />&#169; 2011-2016 <a href='https://www.w3.org/'><abbr title='World Wide Web Consortium'>W3C</abbr></a><sup>&#174;</sup> (<a href='https://www.csail.mit.edu/'><abbr title='Massachusetts Institute of Technology'>MIT</abbr></a>, <a href='https://www.ercim.eu/'><abbr title='European Research Consortium for Informatics and Mathematics'>ERCIM</abbr></a>, <a href='https://www.keio.ac.jp/'>Keio</a>, <a href='http://ev.buaa.edu.cn/'>Beihang</a>). <a href='https://www.w3.org/Consortium/Legal/copyright-documents'>Document use</a>  rules apply.</p> <p class='copyright'>For the entire publication on the W3C site the <a href='https://wwws.w3.org/Consortium/Legal/ipr-notice#Legal_Disclaimer'>liability</a> and <a href='https://www.w3.org/Consortium/Legal/ipr-notice#W3C_Trademarks'>trademark</a> rules apply.</p>",
      "prevED": "http://w3c.github.io/mediacapture-main/archives/20160624/getusermedia.html",
      "edDraftURI": "https://w3c.github.io/mediacapture-main/",
      "editors": [
      {
        "w3cid": "85118",
        "name": "Daniel C. Burnett",
        "company": "Invited Expert"
      },
      {
        "w3cid": "45507",
        "name": "Adam Bergkvist",
        "company": "Ericsson"
      },
      {
        "w3cid": "25254",
        "name": "Cullen Jennings",
        "company": "Cisco"
      },
      {
        "w3cid": "47326",
        "name": "Anant Narayanan",
        "company": "Mozilla",
        "note": "until November 2012"
      },
      {
        "w3cid": "65611",
        "name": "Bernard Aboba",
        "company": "Microsoft Corporation"
      }],
      "wg": [
        "Web Real-Time Communication Working Group",
        "Device APIs Working Group"
      ],
      "wgURI": [
        "https://www.w3.org/2011/04/webrtc/",
        "https://www.w3.org/2009/dap"
      ],
      "wgPublicList": "public-media-capture",
      "wgPatentURI": [
        "https://www.w3.org/2004/01/pp-impl/47318/status",
        "https://www.w3.org/2004/01/pp-impl/43696/status"
      ],
      "otherLinks": [
      {
        "key": "Participate",
        "data": [
        {
          "value": "Mailing list",
          "href": "https://lists.w3.org/Archives/Public/public-media-capture/"
        },
        {
          "value": "Browse open issues",
          "href": "https://github.com/w3c/mediacapture-main/issues"
        },
        {
          "value": "File a bug",
          "href": "https://github.com/w3c/mediacapture-main/issues/new"
        }]
      }],
      "localBiblio":
      {
        "ES6":
        {
          "title": "ECMAScript 2015",
          "href": "http://www.ecma-international.org/ecma-262/6.0/",
          "authors": [
            "Allen Wirfs-Brock"
          ],
          "status": "Standard",
          "publisher": "Ecma International"
        }
      }
    }
  </script>
</head>
<body class="h-entry toc-inline" role="document" id="respecDocument">
  <div class="head" role="contentinfo" id="respecHeader">
    <p>
      <a class="logo" href="https://www.w3.org/"><img src="https://www.w3.org/StyleSheets/TR/2016/logos/W3C" alt="W3C" width="72" height="48"></a>
    </p>
    <h1 class="title p-name" id="title" property="dcterms:title">Media Capture and Streams</h1>
    <h2 id="w3c-editor-s-draft-23-november-2016"><abbr title="World Wide Web Consortium">W3C</abbr> Editor's Draft <time property="dcterms:issued" class="dt-published" datetime="2016-11-23">23 November 2016</time></h2>
    <dl>
      <dt>This version:</dt>
      <dd><a class="u-url" href="https://w3c.github.io/webrtc-pc/archives/20161123/webrtc.html">https://w3c.github.io/webrtc-pc/archives/20161123/webrtc.html</a></dd>
      <dt>Latest published version:</dt>
      <dd><a href="https://www.w3.org/TR/mediacapture-streams/">https://www.w3.org/TR/mediacapture-streams/</a></dd>
      <dt>Latest editor's draft:</dt>
      <dd><a href="https://w3c.github.io/mediacapture-main/">https://w3c.github.io/mediacapture-main/</a></dd>
      <dt>Previous editor's draft:</dt>
      <dd><a href="http://w3c.github.io/mediacapture-main/archives/20160624/getusermedia.html">http://w3c.github.io/mediacapture-main/archives/20160624/getusermedia.html</a></dd>
      <dt>Editors:</dt>
      <dd class="p-author h-card vcard" property="bibo:editor" resource="_:editor0" data-editor-id="85118"><span property="rdf:first" typeof="foaf:Person"><span property="foaf:name" class="p-name fn">Daniel C. Burnett</span>, Invited Expert</span>
        <span property="rdf:rest" resource="_:editor1"></span>
      </dd>
      <dd class="p-author h-card vcard" resource="_:editor1" data-editor-id="45507"><span property="rdf:first" typeof="foaf:Person"><span property="foaf:name" class="p-name fn">Adam Bergkvist</span>, Ericsson</span>
        <span property="rdf:rest" resource="_:editor2"></span>
      </dd>
      <dd class="p-author h-card vcard" resource="_:editor2" data-editor-id="25254"><span property="rdf:first" typeof="foaf:Person"><span property="foaf:name" class="p-name fn">Cullen Jennings</span>, Cisco</span>
        <span property="rdf:rest" resource="_:editor3"></span>
      </dd>
      <dd class="p-author h-card vcard" resource="_:editor3" data-editor-id="47326"><span property="rdf:first" typeof="foaf:Person"><span property="foaf:name" class="p-name fn">Anant Narayanan</span>, Mozilla (until November 2012)</span>
        <span property="rdf:rest" resource="_:editor4"></span>
      </dd>
      <dd class="p-author h-card vcard" resource="_:editor4" data-editor-id="65611"><span property="rdf:first" typeof="foaf:Person"><span property="foaf:name" class="p-name fn">Bernard Aboba</span>, Microsoft Corporation</span>
        <span property="rdf:rest" resource="rdf:nil"></span>
      </dd>

      <dt>Participate:</dt>
      <dd>
        <a href="https://lists.w3.org/Archives/Public/public-media-capture/">
                      Mailing list
                    </a>
      </dd>
      <dd>
        <a href="https://github.com/w3c/mediacapture-main/issues">
                      Browse open issues
                    </a>
      </dd>
      <dd>
        <a href="https://github.com/w3c/mediacapture-main/issues/new">
                      File a bug
                    </a>
      </dd>
    </dl>
    <p class="copyright">Initial Author of this Specification was Ian Hickson, Google Inc., with the following copyright statement:<br> © Copyright 2004-2011 Apple Computer, Inc., Mozilla Foundation, and Opera Software ASA. You are granted a license to use, reproduce and create derivative works of this document.</p>
    <p class="copyright">All subsequent changes since 26 July 2011 done by the <abbr title="World Wide Web Consortium">W3C</abbr> WebRTC Working Group and the Device APIs Working Group are under the following <a href="https://www.w3.org/Consortium/Legal/ipr-notice#Copyright">Copyright</a>:<br>© 2011-2016 <a href="https://www.w3.org/"><abbr title="World Wide Web Consortium">W3C</abbr></a><sup>®</sup> (<a href="https://www.csail.mit.edu/"><abbr title="Massachusetts Institute of Technology">MIT</abbr></a>, <a href="https://www.ercim.eu/"><abbr title="European Research Consortium for Informatics and Mathematics">ERCIM</abbr></a>, <a href="https://www.keio.ac.jp/">Keio</a>, <a href="http://ev.buaa.edu.cn/">Beihang</a>). <a href="https://www.w3.org/Consortium/Legal/copyright-documents">Document use</a> rules apply.</p>
    <p class="copyright">For the entire publication on the <abbr title="World Wide Web Consortium">W3C</abbr> site the <a href="https://wwws.w3.org/Consortium/Legal/ipr-notice#Legal_Disclaimer">liability</a> and <a href="https://www.w3.org/Consortium/Legal/ipr-notice#W3C_Trademarks">trademark</a> rules apply.</p>
    <hr title="Separator for header">
  </div>

  <section id="abstract" class="introductory" property="dc:abstract">
    <h2 id="h-abstract" resource="#h-abstract"><span property="xhv:role" resource="xhv:heading">Abstract</span></h2>
    <p>This document defines a set of JavaScript APIs that allow local media, including audio and video, to be requested from a platform.</p>
  </section>

  <section id="sotd" class="introductory">
    <h2 id="h-sotd" resource="#h-sotd"><span property="xhv:role" resource="xhv:heading">Status of This Document</span></h2>
    <p>
      <em>This section describes the status of this document at the time of its publication. Other documents may supersede this document. A list of current <abbr title="World Wide Web Consortium">W3C</abbr> publications and the latest revision of this technical report can be found in the <a href="https://www.w3.org/TR/"><abbr title="World Wide Web Consortium">W3C</abbr> technical reports index</a> at https://www.w3.org/TR/.</em>
    </p>

    <p>This document is not complete. It is subject to major changes and, while early experimentations are encouraged, it is therefore not intended for implementation. The API is based on preliminary work done in the WHATWG.
    </p>

    <p>
      This document was published by the <a href="https://www.w3.org/2011/04/webrtc/">Web Real-Time Communication Working Group</a> and the <a href="https://www.w3.org/2009/dap">Device APIs Working Group</a> as an Editor's Draft. If you wish to make comments regarding this document, please send them to
      <a href="mailto:public-media-capture@w3.org">public-media-capture@w3.org</a> (<a href="mailto:public-media-capture-request@w3.org?subject=subscribe">subscribe</a>,
      <a href="https://lists.w3.org/Archives/Public/public-media-capture/">archives</a>). All comments are welcome.
    </p>
    <p>
      Publication as an Editor's Draft does not imply endorsement by the <abbr title="World Wide Web Consortium">W3C</abbr> Membership. This is a draft document and may be updated, replaced or obsoleted by other documents at any time. It is inappropriate to cite this document as other than work in progress.
    </p>
    <p>
      This document was produced by groups operating under the
      <a id="sotd_patent" property="w3p:patentRules" href="https://www.w3.org/Consortium/Patent-Policy-20040205/">5 February 2004 <abbr title="World Wide Web Consortium">W3C</abbr> Patent
              Policy</a>.
      <abbr title="World Wide Web Consortium">W3C</abbr> maintains a <a href="https://www.w3.org/2004/01/pp-impl/47318/status" rel="disclosure">public list of any patent disclosures  (Web Real-Time Communication Working Group)</a> and a <a href="https://www.w3.org/2004/01/pp-impl/43696/status" rel="disclosure">public list of any patent disclosures  (Device APIs Working Group)</a> made in connection with the deliverables of each group; these pages also include instructions for disclosing a patent. An individual who has actual knowledge of a patent which the individual believes contains
      <a href="https://www.w3.org/Consortium/Patent-Policy-20040205/#def-essential">Essential
              Claim(s)</a> must disclose the information in accordance with
      <a href="https://www.w3.org/Consortium/Patent-Policy-20040205/#sec-Disclosure">section
              6 of the <abbr title="World Wide Web Consortium">W3C</abbr> Patent Policy</a>.
    </p>
    <p>This document is governed by the <a id="w3c_process_revision" href="https://www.w3.org/2015/Process-20150901/">1 September 2015 <abbr title="World Wide Web Consortium">W3C</abbr> Process Document</a>.
    </p>

  </section>
  <nav id="toc">
    <h2 class="introductory" id="table-of-contents" resource="#table-of-contents"><span property="xhv:role" resource="xhv:heading">Table of Contents</span></h2>
    <ol class="toc" role="directory">
      <li class="tocline"><a href="#intro" class="tocxref"><span class="secno">1. </span>Introduction</a></li>
      <li class="tocline"><a href="#conformance" class="tocxref"><span class="secno">2. </span>Conformance</a></li>
      <li class="tocline"><a href="#terminology" class="tocxref"><span class="secno">3. </span>Terminology</a></li>
      <li class="tocline"><a href="#stream-api" class="tocxref"><span class="secno">4. </span>MediaStream API</a>
        <ol class="toc">
          <li class="tocline"><a href="#introduction" class="tocxref"><span class="secno">4.1 </span>Introduction</a></li>
          <li class="tocline"><a href="#mediastream" class="tocxref"><span class="secno">4.2 </span>MediaStream</a></li>
          <li class="tocline"><a href="#mediastreamtrack" class="tocxref"><span class="secno">4.3 </span>MediaStreamTrack</a>
            <ol class="toc">
              <li class="tocline"><a href="#life-cycle-and-media-flow" class="tocxref"><span class="secno">4.3.1 </span>Life-cycle and Media Flow</a></li>
              <li class="tocline"><a href="#tracks-and-constraints" class="tocxref"><span class="secno">4.3.2 </span>Tracks and Constraints</a></li>
              <li class="tocline"><a href="#media-stream-track-interface-definition" class="tocxref"><span class="secno">4.3.3 </span>Interface Definition</a></li>
              <li class="tocline"><a href="#media-track-supported-constraints" class="tocxref"><span class="secno">4.3.4 </span>MediaTrackSupportedConstraints</a></li>
              <li class="tocline"><a href="#media-track-capabilities" class="tocxref"><span class="secno">4.3.5 </span>MediaTrackCapabilities</a></li>
              <li class="tocline"><a href="#media-track-constraints" class="tocxref"><span class="secno">4.3.6 </span>MediaTrackConstraints</a></li>
              <li class="tocline"><a href="#media-track-settings" class="tocxref"><span class="secno">4.3.7 </span>MediaTrackSettings</a></li>
              <li class="tocline"><a href="#constrainable-properties" class="tocxref"><span class="secno">4.3.8 </span>Constrainable Properties</a></li>
            </ol>
          </li>
          <li class="tocline"><a href="#mediastreamtrackevent" class="tocxref"><span class="secno">4.4 </span>MediaStreamTrackEvent</a></li>
        </ol>
      </li>
      <li class="tocline"><a href="#the-model-sources-sinks-constraints-and-settings" class="tocxref"><span class="secno">5. </span>The model: sources, sinks, constraints, and settings</a></li>
      <li class="tocline"><a href="#mediastreams-in-media-elements" class="tocxref"><span class="secno">6. </span>MediaStreams in Media Elements</a></li>
      <li class="tocline"><a href="#error-handling" class="tocxref"><span class="secno">7. </span>Error Handling</a>
        <ol class="toc">
          <li class="tocline"><a href="#ecmascript-6-terminology" class="tocxref"><span class="secno">7.1 </span>ECMAScript 6 Terminology</a></li>
          <li class="tocline"><a href="#overconstrainederror-object" class="tocxref"><span class="secno">7.2 </span>OverconstrainedError Object</a>
            <ol class="toc">
              <li class="tocline"><a href="#overconstrainederror-constructor" class="tocxref"><span class="secno">7.2.1 </span>OverconstrainedError Constructor</a>
                <ol class="toc">
                  <li class="tocline"><a href="#overconstrainederror-constraint-message" class="tocxref"><span class="secno">7.2.1.1 </span>OverconstrainedError ( constraint, message )</a></li>
                </ol>
              </li>
              <li class="tocline"><a href="#properties-of-the-overconstrainederror-constructor" class="tocxref"><span class="secno">7.2.2 </span>Properties of the OverconstrainedError Constructor</a>
                <ol class="toc">
                  <li class="tocline"><a href="#overconstrainederror.prototype" class="tocxref"><span class="secno">7.2.2.1 </span>OverconstrainedError.prototype</a></li>
                </ol>
              </li>
              <li class="tocline"><a href="#properties-of-the-overconstrainederror-prototype-object" class="tocxref"><span class="secno">7.2.3 </span>Properties of the OverconstrainedError Prototype Object</a>
                <ol class="toc">
                  <li class="tocline"><a href="#overconstrainederror.prototype.constructor" class="tocxref"><span class="secno">7.2.3.1 </span>OverconstrainedError.prototype.constructor</a></li>
                  <li class="tocline"><a href="#overconstrainederror.prototype.constraint" class="tocxref"><span class="secno">7.2.3.2 </span>OverconstrainedError.prototype.constraint</a></li>
                  <li class="tocline"><a href="#overconstrainederror.prototype.message" class="tocxref"><span class="secno">7.2.3.3 </span>OverconstrainedError.prototype.message</a></li>
                  <li class="tocline"><a href="#overconstrainederror.prototype.name" class="tocxref"><span class="secno">7.2.3.4 </span>OverconstrainedError.prototype.name</a></li>
                </ol>
              </li>
              <li class="tocline"><a href="#properties-of-overconstrainederror-instances" class="tocxref"><span class="secno">7.2.4 </span>Properties of OverconstrainedError Instances</a></li>
            </ol>
          </li>
        </ol>
      </li>
      <li class="tocline"><a href="#event-summary" class="tocxref"><span class="secno">8. </span>Event summary</a></li>
      <li class="tocline"><a href="#enumerating-devices" class="tocxref"><span class="secno">9. </span>Enumerating Local Media Devices</a>
        <ol class="toc">
          <li class="tocline"><a href="#navigatorusermedia" class="tocxref"><span class="secno">9.1 </span>NavigatorUserMedia</a></li>
          <li class="tocline"><a href="#mediadevices" class="tocxref"><span class="secno">9.2 </span>MediaDevices</a>
            <ol class="toc">
              <li class="tocline"><a href="#access-control-model" class="tocxref"><span class="secno">9.2.1 </span>Access control model</a></li>
            </ol>
          </li>
          <li class="tocline"><a href="#device-info" class="tocxref"><span class="secno">9.3 </span>Device Info</a></li>
          <li class="tocline"><a href="#input-specific-device-info" class="tocxref"><span class="secno">9.4 </span>Input-specific Device Info</a></li>
        </ol>
      </li>
      <li class="tocline"><a href="#local-content" class="tocxref"><span class="secno">10. </span>Obtaining local multimedia content</a>
        <ol class="toc">
          <li class="tocline"><a href="#navigatorusermedia-interface-extensions" class="tocxref"><span class="secno">10.1 </span>NavigatorUserMedia Interface Extensions</a></li>
          <li class="tocline"><a href="#mediadevices-interface-extensions" class="tocxref"><span class="secno">10.2 </span>MediaDevices Interface Extensions</a></li>
          <li class="tocline"><a href="#mediastreamconstraints" class="tocxref"><span class="secno">10.3 </span>MediaStreamConstraints</a></li>
          <li class="tocline"><a href="#navigatorusermediasuccesscallback" class="tocxref"><span class="secno">10.4 </span>NavigatorUserMediaSuccessCallback</a></li>
          <li class="tocline"><a href="#navigatorusermediaerrorcallback" class="tocxref"><span class="secno">10.5 </span>NavigatorUserMediaErrorCallback</a></li>
          <li class="tocline"><a href="#implementation-suggestions" class="tocxref"><span class="secno">10.6 </span>Implementation Suggestions</a></li>
        </ol>
      </li>
      <li class="tocline"><a href="#constrainable-interface" class="tocxref"><span class="secno">11. </span>Constrainable Pattern</a>
        <ol class="toc">
          <li class="tocline"><a href="#interface-definition" class="tocxref"><span class="secno">11.1 </span>Interface Definition</a></li>
          <li class="tocline"><a href="#types-for-constrainable-properties" class="tocxref"><span class="secno">11.2 </span>Types for Constrainable Properties</a></li>
          <li class="tocline"><a href="#capabilities" class="tocxref"><span class="secno">11.3 </span>Capabilities</a></li>
          <li class="tocline"><a href="#settings" class="tocxref"><span class="secno">11.4 </span>Settings</a></li>
          <li class="tocline"><a href="#constraints" class="tocxref"><span class="secno">11.5 </span><span data-dfn-type="dfn">Constraints and ConstraintSet</span></a></li>
        </ol>
      </li>
      <li class="tocline"><a href="#examples" class="tocxref"><span class="secno">12. </span>Examples</a></li>
      <li class="tocline"><a href="#privacy-and-security-considerations" class="tocxref"><span class="secno">13. </span>Privacy and Security Considerations</a></li>
      <li class="tocline"><a href="#extensibility" class="tocxref"><span class="secno">14. </span>Extensibility</a>
        <ol class="toc">
          <li class="tocline"><a href="#defining-a-new-media-type-beyond-the-existing-audio-and-video-types" class="tocxref"><span class="secno">14.1 </span>Defining a new media type (beyond the existing Audio and Video
      types)</a></li>
          <li class="tocline"><a href="#defining-a-new-constrainable-property" class="tocxref"><span class="secno">14.2 </span>Defining a new constrainable property</a></li>
        </ol>
      </li>
      <li class="tocline"><a href="#change-log" class="tocxref"><span class="secno">15. </span>Change Log</a></li>
      <li class="tocline"><a href="#acknowledgements" class="tocxref"><span class="secno">A. </span>Acknowledgements</a></li>
      <li class="tocline"><a href="#references" class="tocxref"><span class="secno">B. </span>References</a>
        <ol class="toc">
          <li class="tocline"><a href="#normative-references" class="tocxref"><span class="secno">B.1 </span>Normative references</a></li>
          <li class="tocline"><a href="#informative-references" class="tocxref"><span class="secno">B.2 </span>Informative references</a></li>
        </ol>
      </li>
    </ol>
  </nav>

  <section class="informative" id="intro" typeof="bibo:Chapter" resource="#intro" property="bibo:hasPart">
    <!--OddPage-->
    <h2 id="h-intro" resource="#h-intro"><span property="xhv:role" resource="xhv:heading"><span class="secno">1. </span>Introduction</span>
    </h2>
    <p><em>This section is non-normative.</em></p>
    <p>This document defines APIs for requesting access to local multimedia devices, such as microphones or video cameras.</p>
    <p>This document also defines the MediaStream API, which provides the means to control where multimedia stream data is consumed, and provides some control over the devices that produce the media. It also exposes information about devices able to capture and render media.</p>
  </section>

  <section id="conformance" typeof="bibo:Chapter" resource="#conformance" property="bibo:hasPart">
    <!--OddPage-->
    <h2 id="h-conformance" resource="#h-conformance"><span property="xhv:role" resource="xhv:heading"><span class="secno">2. </span>Conformance</span>
    </h2>
    <p>
      As well as sections marked as non-normative, all authoring guidelines, diagrams, examples, and notes in this specification are non-normative. Everything else in this specification is normative.
    </p>
    <p id="respecRFC2119">The key words <em class="rfc2119" title="MAY">MAY</em>, <em class="rfc2119" title="MUST">MUST</em>, <em class="rfc2119" title="MUST NOT">MUST NOT</em>, <em class="rfc2119" title="NOT REQUIRED">NOT REQUIRED</em>, and <em class="rfc2119" title="SHOULD">SHOULD</em> are to be interpreted as described in [<cite><a class="bibref" href="#bib-RFC2119">RFC2119</a></cite>].
    </p>

    <p>This specification defines conformance criteria that apply to a single product: the <dfn data-dfn-type="dfn" id="dfn-user-agent">User Agent</dfn> that implements the interfaces that it contains.
    </p>
    <p>Conformance requirements phrased as algorithms or specific steps may be implemented in any manner, so long as the end result is equivalent. (In particular, the algorithms defined in this specification are intended to be easy to follow, and not intended to be performant.)</p>
    <p>Implementations that use ECMAScript [<cite><a class="bibref" href="#bib-ECMA-262">ECMA-262</a></cite>] to implement the APIs defined in this specification must implement them in a manner consistent with the ECMAScript Bindings defined in the Web IDL specification [
      <cite><a class="bibref" href="#bib-WEBIDL-1">WEBIDL-1</a></cite>], as this specification uses that specification and terminology.
    </p>
  </section>

  <section id="terminology" typeof="bibo:Chapter" resource="#terminology" property="bibo:hasPart">
    <!--OddPage-->
    <h2 id="h-terminology" resource="#h-terminology"><span property="xhv:role" resource="xhv:heading"><span class="secno">3. </span>Terminology</span>
    </h2>
    <dl>
      <dt><i>HTML Terms:</i></dt>
      <dd>
        <p>The <code><a href="http://dev.w3.org/html5/spec/webappapis.html#eventhandler">EventHandler</a></code> interface represents a callback used for event handlers as defined in [
          <cite><a class="bibref" href="#bib-HTML5">HTML5</a></cite>].</p>
        <p>The concepts <dfn data-dfn-type="dfn" id="dfn-queue-a-task"><a href="http://dev.w3.org/html5/spec/webappapis.html#queue-a-task">queue a
        task</a></dfn> and <dfn data-dfn-type="dfn" id="dfn-fires-a-simple-event"><a href="http://dev.w3.org/html5/spec/webappapis.html#fire-a-simple-event">fires
        a simple event</a></dfn> are defined in [<cite><a class="bibref" href="#bib-HTML5">HTML5</a></cite>].</p>
        <p>The terms <dfn data-dfn-type="dfn" id="dfn-event-handlers"><a href="http://dev.w3.org/html5/spec/webappapis.html#event-handlers">event
        handlers</a></dfn> and <dfn data-dfn-type="dfn" id="dfn-event-handler-event-types"><a href="http://dev.w3.org/html5/spec/webappapis.html#event-handler-event-type">
        event handler event types</a></dfn> are defined in [<cite><a class="bibref" href="#bib-HTML5">HTML5</a></cite>].</p>
      </dd>
      <dt><code><dfn data-dfn-type="dfn" id="dfn-domexception">DOMException</dfn></code></dt>
      <dd>
        The term <code>DOMException</code> is defined in <a href="https://www.w3.org/TR/WebIDL-1/#idl-DOMException">WebIDL</a> [
        <cite><a class="bibref" href="#bib-WEBIDL-1">WEBIDL-1</a></cite>]
      </dd>
      <dt><dfn data-dfn-type="dfn" id="dfn-source">source</dfn></dt>
      <dd>
        <p>A source is the "thing" providing the source of a media stream track. The source is the broadcaster of the media itself. A source can be a physical webcam, microphone, local video or audio file from the user's hard drive, network resource, or static image. Note that this document describes the use of microphone and camera type sources only, the use of other source types is described in other documents.</p>
        <p>An application that has no prior authorization regarding sources is only given the number of available sources, their type and any relationship to other devices. Additional information about sources can become available when applications are authorized to use a source (see
          <a href="#access-control-model" class="sec-ref"><span class="secno">9.2.1</span> <span class="sec-title">Access control model</span></a>).</p>
        <p>Sources <strong>do not</strong> have constraints — tracks have constraints. When a source is connected to a track, it must produce media that conforms to the constraints present on that track. Multiple tracks can be attached to the same source. User Agent processing, such as downsampling, <em class="rfc2119" title="MAY">MAY</em> be used to ensure that all tracks have appropriate media.
        </p>
        <p>Sources have constrainable properties which have
          <code><a href="#dom-capabilities" class="internalDFN" data-link-type="dfn"><code>capabilities</code></a>
          </code> and <code><a href="#dom-settings" class="internalDFN" data-link-type="dfn"><code>settings</code></a>
          </code>. The constrainable properties are "owned" by the source and are common to any (multiple) tracks that happen to be using the same source (e.g., if two different track objects bound to the same source ask for the same capability or setting information, they will get back the same answer).
        </p>
      </dd>
      <dt>Setting (Source Setting)</dt>
      <dd>
        <p>A <a href="#settings">setting</a> refers to the immediate, current value of the source's constrainable properties. Settings are always read-only.
        </p>
        <p>A source's settings can change dynamically over time due to environmental conditions, sink configurations, or constraint changes. A source's settings must always conform to the current set of mandatory constraints on all attached tracks. A source that cannot conform to mandatory constraints causes affected tracks to become
          <a href="#event-mediastreamtrack-overconstrained" class="internalDFN" data-link-type="dfn"><code>overconstrained</code></a> and therefore <a href="#track-muted">muted</a>. A <a href="#dfn-user-agent" class="internalDFN" data-link-type="dfn">User Agent</a> attempts to ensure that sources adhere to optional constraints as closely as possible, see <a href="#constrainable-interface" class="sec-ref"><span class="secno">11.</span> <span class="sec-title">Constrainable Pattern</span></a>.</p>
        <p>Although settings are a property of the source, they are only exposed to the application through the tracks attached to the source. This is exposed via the <a href="#idl-def-constrainablepattern" class="internalDFN" data-link-type="dfn"><code>ConstrainablePattern</code></a> interface.</p>
      </dd>
      <dt>Capabilities</dt>
      <dd>
        <p>For each constrainable property, there is a capability that describes whether it is supported by the source and if so, the range of supported values. As with settings, capabilities are exposed to the application via the <a href="#idl-def-constrainablepattern" class="internalDFN" data-link-type="dfn"><code>ConstrainablePattern</code></a> interface.</p>
        <p>The values of the supported capabilities must be normalized to the ranges and enumerated types defined in this specification.</p>
        <p>A <a href="#dfn-getcapabilities" class="internalDFN" data-link-type="dfn">getCapabilities()</a> call on a track returns the same underlying per-source capabilities for all tracks connected to the source.
        </p>
        <p>Source capabilities are effectively constant. Applications should be able to depend on a specific source having the same capabilities for any browsing session.</p>
        <p>This API is intentionally simplified. Capabilities are not capable of describing interactions between different values. For instance, it is not possible to accurately describe the capabilities of a camera that can produce a high resolution video stream at a low frame rate and lower resolutions at a higher frame rate. Capabilities describe the complete range of each value. Interactions between constraints are exposed by attempting to apply constraints.</p>
      </dd>
      <dt><dfn data-dfn-for="" data-dfn-type="dfn" id="dom-constraints" data-idl=""><code>Constraints</code></dfn></dt>
      <dd>
        <p>Constraints provide a general control surface that allows applications to both select an appropriate source for a track and, once selected, to influence how a source operates.</p>
        <p>Constraints limit the range of operating modes that a source can use when providing media for a track. Without provided track constraints, implementations are free to select a source's settings from the full ranges of its supported capabilities. Implementations may also adjust source settings at any time within the bounds imposed by all applied constraints.
        </p>
        <p><a href="#dom-mediadevices-getusermedia" class="internalDFN" data-link-type="dfn"><code>getUserMedia()</code></a> uses constraints to help select an appropriate source for a track and configure it. Additionally, the
          <a href="#idl-def-constrainablepattern" class="internalDFN" data-link-type="dfn"><code>ConstrainablePattern</code></a> interface on tracks includes an API for dynamically changing the track's constraints at any later time.</p>
        <p>A track will not be connected to a source using
          <a href="#dom-mediadevices-getusermedia" class="internalDFN" data-link-type="dfn"><code>getUserMedia()</code></a> if its initial constraints cannot be satisfied. However, the ability to meet the constraints on a track can change over time, and constraints can be changed. If circumstances change such that constraints cannot be met, the <a href="#idl-def-constrainablepattern" class="internalDFN" data-link-type="dfn"><code>ConstrainablePattern</code></a> interface defines an appropriate error to inform the application. <a href="#the-model-sources-sinks-constraints-and-settings" class="sec-ref"><span class="secno">5.</span> <span class="sec-title">The model: sources, sinks, constraints, and settings</span></a> explains how constraints interact in more detail.</p>
        <p>In general, User Agents will have more flexibility to optimize the media streaming experience the fewer constraints are applied, so application authors are strongly encouraged to use mandatory constraints sparingly.</p>
        <p>For each constrainable property, a constraint exists whose name corresponds with the relevant source setting name and capability name.
        </p>
      </dd>
      <dt><code>RTCPeerConnection</code></dt>
      <dd><dfn data-dfn-type="dfn" id="dfn-rtcpeerconnection"><code>RTCPeerConnection</code></dfn> is defined in [
        <cite><a class="bibref" href="#bib-WEBRTC10">WEBRTC10</a></cite>].</dd>
      <dt>Permissions</dt>
      <dd>
        <p>The terms <dfn data-dfn-type="dfn" id="dfn-permission">permission</dfn>, <dfn data-dfn-type="dfn" id="dfn-retrieve-the-permission-state">retrieve the permission
        state</dfn>, <dfn id="request-permission" data-dfn-type="dfn">request permission</dfn> and
          <dfn id="create-permission" data-dfn-type="dfn">create a permission storage entry</dfn> are defined in [<cite><a class="bibref" href="#bib-permissions">permissions</a></cite>].</p>
        <div class="note">
          <div class="note-title marker" aria-level="3" role="heading" id="h-note1"><span>Note</span></div>
          <p class="">"request permission" isn't defined yet. Filed as permissions <a href="https://github.com/w3c/permissions/issues/62">issue 62</a>.</p>
        </div>
      </dd>
    </dl>
  </section>

  <section id="stream-api" typeof="bibo:Chapter" resource="#stream-api" property="bibo:hasPart">
    <!--OddPage-->
    <h2 id="h-stream-api" resource="#h-stream-api"><span property="xhv:role" resource="xhv:heading"><span class="secno">4. </span>MediaStream API</span>
    </h2>

    <section id="introduction" typeof="bibo:Chapter" resource="#introduction" property="bibo:hasPart">
      <h3 id="h-introduction" resource="#h-introduction"><span property="xhv:role" resource="xhv:heading"><span class="secno">4.1 </span>Introduction</span>
      </h3>
      <p>The two main components in the MediaStream API are the
        <code><a href="#idl-def-mediastreamtrack" class="internalDFN" data-link-type="dfn"><code>MediaStreamTrack</code></a>
        </code> and <code><a href="#idl-def-mediastream" class="internalDFN" data-link-type="dfn"><code>MediaStream</code></a>
        </code>
        interfaces. The <code><a href="#idl-def-mediastreamtrack" class="internalDFN" data-link-type="dfn"><code>MediaStreamTrack</code></a>
        </code> object represents media of a single type that originates from one media source in the User Agent, e.g. video produced by a web camera. A
        <code><a href="#idl-def-mediastream" class="internalDFN" data-link-type="dfn"><code>MediaStream</code></a>
        </code> is used to group several
        <code><a href="#idl-def-mediastreamtrack" class="internalDFN" data-link-type="dfn"><code>MediaStreamTrack</code></a>
        </code> objects into one unit that can be recorded or rendered in a media element.</p>
      <p>Each <code><a href="#idl-def-mediastream" class="internalDFN" data-link-type="dfn"><code>MediaStream</code></a>
        </code> can contain zero or more
        <code><a href="#idl-def-mediastreamtrack" class="internalDFN" data-link-type="dfn"><code>MediaStreamTrack</code></a>
        </code> objects. All tracks in a
        <code><a href="#idl-def-mediastream" class="internalDFN" data-link-type="dfn"><code>MediaStream</code></a>
        </code> are intended to be synchronized when rendered. This is not a hard requirement, since it might not be possible to synchronize tracks from sources that have different clocks. Different
        <code><a href="#idl-def-mediastream" class="internalDFN" data-link-type="dfn"><code>MediaStream</code></a>
        </code> objects do not need to be synchronized.
      </p>
      <div class="note">
        <div class="note-title marker" aria-level="4" role="heading" id="h-note2"><span>Note</span></div>
        <p class="">While the intent is to synchronize tracks, it could be better in some circumstances to permit tracks to lose synchronization. In particular, when tracks are remotely sourced and real-time [<cite><a class="bibref" href="#bib-WEBRTC10">WEBRTC10</a></cite>], it can be better to allow loss of synchronization than to accumulate delays or risk glitches and other artifacts. Implementations are expected to understand the implications of choices regarding synchronization of playback and the effect that these have on user perception.</p>
      </div>
      <p>A single <code><a href="#idl-def-mediastreamtrack" class="internalDFN" data-link-type="dfn"><code>MediaStreamTrack</code></a>
        </code> can represent multi-channel content, such as stereo or 5.1 audio or stereoscopic video, where the channels have a well defined relationship to each other. Information about channels might be exposed through other APIs, such as [
        <cite><a class="bibref" href="#bib-WEBAUDIO">WEBAUDIO</a></cite>], but this specification provides no direct access to channels.
      </p>
      <p>A <code><a href="#idl-def-mediastream" class="internalDFN" data-link-type="dfn"><code>MediaStream</code></a>
        </code> object has an input and an output that represent the combined input and output of all the object's tracks. The output of the <code><a href="#idl-def-mediastream" class="internalDFN" data-link-type="dfn"><code>MediaStream</code></a>
        </code> controls how the object is rendered, e.g., what is saved if the object is recorded to a file or what is displayed if the object is used in a <code>video</code> element. A single <code><a href="#idl-def-mediastream" class="internalDFN" data-link-type="dfn"><code>MediaStream</code></a>
        </code> object can be attached to multiple different outputs at the same time.</p>
      <p>A new <code><a href="#idl-def-mediastream" class="internalDFN" data-link-type="dfn"><code>MediaStream</code></a>
        </code> object can be created from existing media streams or tracks using the
        <code><a href="#dom-mediastream" class="internalDFN" data-link-type="dfn"><code>MediaStream()</code></a>
        </code> constructor. The constructor argument can either be an existing <code><a href="#idl-def-mediastream" class="internalDFN" data-link-type="dfn"><code>MediaStream</code></a>
        </code> object, in which case all the tracks of the given stream are added to the new
        <code><a href="#idl-def-mediastream" class="internalDFN" data-link-type="dfn"><code>MediaStream</code></a>
        </code> object, or an array of
        <code><a href="#idl-def-mediastreamtrack" class="internalDFN" data-link-type="dfn"><code>MediaStreamTrack</code></a>
        </code> objects. The latter form makes it possible to compose a stream from different source streams.</p>
      <p>Both <code><a href="#idl-def-mediastream" class="internalDFN" data-link-type="dfn"><code>MediaStream</code></a>
        </code> and
        <code><a href="#idl-def-mediastreamtrack" class="internalDFN" data-link-type="dfn"><code>MediaStreamTrack</code></a>
        </code> objects can be cloned. A cloned
        <code><a href="#idl-def-mediastream" class="internalDFN" data-link-type="dfn"><code>MediaStream</code></a>
        </code> contains clones of all member tracks from the original stream. A cloned <code><a href="#idl-def-mediastreamtrack" class="internalDFN" data-link-type="dfn"><code>MediaStreamTrack</code></a>
        </code> has a
        <a href="#constrainable-interface">set of constraints</a> that is independent of the instance it is cloned from, which allows media from the same source to have different constraints applied for different
        <a href="#dfn-consumer" class="internalDFN" data-link-type="dfn">consumer</a>s. The <code>MediaStream</code> object is also used in contexts outside <code>getUserMedia</code>, such as [<cite><a class="bibref" href="#bib-WEBRTC10">WEBRTC10</a></cite>].</p>
    </section>

    <section id="mediastream" typeof="bibo:Chapter" resource="#mediastream" property="bibo:hasPart">
      <h3 id="h-mediastream" resource="#h-mediastream"><span property="xhv:role" resource="xhv:heading"><span class="secno">4.2 </span>MediaStream</span>
      </h3>
      <p>The <dfn id="dom-mediastream" data-dfn-type="dfn"><code>MediaStream()</code></dfn> constructor composes a new stream out of existing tracks. It takes an optional argument of type <code><a href="#idl-def-mediastream" class="internalDFN" data-link-type="dfn"><code>MediaStream</code></a>
        </code> or an array of
        <code><a href="#idl-def-mediastreamtrack" class="internalDFN" data-link-type="dfn"><code>MediaStreamTrack</code></a>
        </code> objects. <dfn id="mediastream-constructor" data-dfn-type="dfn">When the constructor is invoked</dfn>, the User Agent must run the following steps:</p>
      <ol>
        <li>
          <p>Let <var>stream</var> be a newly constructed
            <code><a href="#idl-def-mediastream" class="internalDFN" data-link-type="dfn"><code>MediaStream</code></a>
            </code> object.</p>
        </li>
        <li>
          <p>Initialize <var>stream's</var> <code><a href="#dom-mediastream-id">id</a></code> attribute to a newly generated value.
          </p>
        </li>
        <li>
          <p>If the constructor's argument is present, construct a set of tracks, <var>tracks</var> based on the type of argument:</p>
          <ul>
            <li>
              <p>A <code><a href="#idl-def-mediastream" class="internalDFN" data-link-type="dfn"><code>MediaStream</code></a>
                </code> object:</p>
              <p>Let <var>tracks</var> be a set containing all the
                <code><a href="#idl-def-mediastreamtrack" class="internalDFN" data-link-type="dfn"><code>MediaStreamTrack</code></a>
                </code> objects in the
                <code><a href="#idl-def-mediastream" class="internalDFN" data-link-type="dfn"><code>MediaStream</code></a>
                </code> <a href="#track-set">track
              set</a>.</p>
            </li>
            <li>
              <p>A sequence of <code><a href="#idl-def-mediastreamtrack" class="internalDFN" data-link-type="dfn"><code>MediaStreamTrack</code></a>
                </code>
                objects:</p>
              <p>Let <var>tracks</var> be a set containing all the
                <code><a href="#idl-def-mediastreamtrack" class="internalDFN" data-link-type="dfn"><code>MediaStreamTrack</code></a>
                </code> objects in the provided sequence.
              </p>
            </li>
          </ul>
        </li>
        <li>
          <p>For each <code><a href="#idl-def-mediastreamtrack" class="internalDFN" data-link-type="dfn"><code>MediaStreamTrack</code></a>
            </code>, <var>track</var>, in <var>tracks</var>, run the following steps:</p>
          <ol>
            <li>
              <p>If <var>track</var> is already in <var>stream</var>'s <a href="#track-set">track set</a>, skip <var>track</var>.</p>
            </li>
            <li>
              <p>Otherwise, add <var>track</var> to <var>stream</var>'s <a href="#track-set">track set</a>.</p>
            </li>
          </ol>
        </li>
        <li>
          <p>Return <var>stream</var>.</p>
        </li>
      </ol>
      <p>The tracks of a <code><a href="#idl-def-mediastream" class="internalDFN" data-link-type="dfn"><code>MediaStream</code></a>
        </code> are stored in a
        <dfn id="track-set" data-dfn-type="dfn">track set</dfn>. The track set <em class="rfc2119" title="MUST">MUST</em> contain the
        <code><a href="#idl-def-mediastreamtrack" class="internalDFN" data-link-type="dfn"><code>MediaStreamTrack</code></a>
        </code> objects that correspond to the tracks of the stream. The relative order of the tracks in the set is User Agent defined and the API will never put any requirements on the order. The proper way to find a specific <code><a href="#idl-def-mediastreamtrack" class="internalDFN" data-link-type="dfn"><code>MediaStreamTrack</code></a>
        </code>
        object in the set is to look it up by its <code><a href="#dom-mediastreamtrack-id">id</a></code>.</p>
      <p>An object that reads data from the output of a
        <code><a href="#idl-def-mediastream" class="internalDFN" data-link-type="dfn"><code>MediaStream</code></a>
        </code> is referred to as a
        <code><a href="#idl-def-mediastream" class="internalDFN" data-link-type="dfn"><code>MediaStream</code></a>
        </code> <dfn data-dfn-type="dfn" id="dfn-consumer">consumer</dfn>. The list of
        <code><a href="#idl-def-mediastream" class="internalDFN" data-link-type="dfn"><code>MediaStream</code></a>
        </code> consumers currently include media elements (such as <code>&lt;video&gt;</code> and
        <code>&lt;audio&gt;</code>) [<cite><a class="bibref" href="#bib-HTML5">HTML5</a></cite>], Web Real-Time Communications (WebRTC; <code>RTCPeerConnection</code>) [<cite><a class="bibref" href="#bib-WEBRTC10">WEBRTC10</a></cite>], media recording (<code>MediaRecorder</code>) [<cite><a class="bibref" href="#bib-mediastream-recording">mediastream-recording</a></cite>], image capture (<code>ImageCapture</code>) [<cite><a class="bibref" href="#bib-image-capture">image-capture</a></cite>], and web audio (<code>MediaStreamAudioSourceNode</code>) [<cite><a class="bibref" href="#bib-WEBAUDIO">WEBAUDIO</a></cite>].</p>
      <div class="note">
        <div class="note-title marker" aria-level="4" role="heading" id="h-note3"><span>Note</span></div>
        <p class=""><code><a href="#idl-def-mediastream" class="internalDFN" data-link-type="dfn"><code>MediaStream</code></a>
          </code> consumers must be able to handle tracks being added and removed. This behavior is specified per consumer.
        </p>
      </div>
      <p>A <code><a href="#idl-def-mediastream" class="internalDFN" data-link-type="dfn"><code>MediaStream</code></a>
        </code> object is said to be <dfn id="stream-active" data-dfn-type="dfn">active</dfn> when it has at least one
        <code><a href="#idl-def-mediastreamtrack" class="internalDFN" data-link-type="dfn"><code>MediaStreamTrack</code></a>
        </code> that has not <a href="#track-ended">ended</a>. A <code><a href="#idl-def-mediastream" class="internalDFN" data-link-type="dfn"><code>MediaStream</code></a>
        </code> that does not have any tracks or only has tracks that are <a href="#track-ended">ended</a> is <dfn id="stream-inactive" data-dfn-type="dfn">inactive</dfn>.</p>
      <p>The User Agent may update a <code><a href="#idl-def-mediastream" class="internalDFN" data-link-type="dfn"><code>MediaStream</code></a>
        </code>'s <a href="#track-set">track set</a> in response to, for example, an external event. This specification does not specify any such cases, but other specifications using the MediaStream API may. One such example is the WebRTC 1.0 [<cite><a class="bibref" href="#bib-WEBRTC10">WEBRTC10</a></cite>] specification where the <a href="#track-set">track set</a> of a <code><a href="#idl-def-mediastream" class="internalDFN" data-link-type="dfn"><code>MediaStream</code></a>
        </code>, received from another peer, can be updated as a result of changes to the media session.
      </p>
      <p>When the User Agent initiates adding a track to a
        <code><a href="#idl-def-mediastream" class="internalDFN" data-link-type="dfn"><code>MediaStream</code></a>
        </code>, with the exception of initializing a newly created <code><a href="#idl-def-mediastream" class="internalDFN" data-link-type="dfn"><code>MediaStream</code></a>
        </code> with tracks, the User Agent
        <em class="rfc2119" title="MUST">MUST</em> queue a task that runs the following steps:</p>
      <ol>
        <li>
          <p>Let <var>track</var> be the <code><a href="#idl-def-mediastreamtrack" class="internalDFN" data-link-type="dfn"><code>MediaStreamTrack</code></a>
            </code>
            in question and <var>stream</var> the <code><a href="#idl-def-mediastream" class="internalDFN" data-link-type="dfn"><code>MediaStream</code></a>
            </code>
            object to which <var>track</var> is to be added.</p>
        </li>
        <li>
          <p>If <var>track</var> is already in <var>stream's</var> <a href="#track-set">track set</a>, then abort these steps.</p>
        </li>
        <li>
          <p>Add <var>track</var> to <var>stream</var>'s <a href="#track-set">track set</a>.</p>
        </li>
        <li>
          <p>Fire a track event named <code><a href="#event-mediastream-addtrack">addtrack</a></code> with
            <var>track</var> at <var>stream</var>.</p>
        </li>
      </ol>
      <p>When the User Agent initiates removing a track from a
        <code><a href="#idl-def-mediastream" class="internalDFN" data-link-type="dfn"><code>MediaStream</code></a>
        </code>, the User Agent <em class="rfc2119" title="MUST">MUST</em> queue a task that runs the following steps:</p>
      <ol>
        <li>
          <p>Let <var>track</var> be the <code><a href="#idl-def-mediastreamtrack" class="internalDFN" data-link-type="dfn"><code>MediaStreamTrack</code></a>
            </code>
            in question and <var>stream</var> the <code><a href="#idl-def-mediastream" class="internalDFN" data-link-type="dfn"><code>MediaStream</code></a>
            </code>
            object to which <var>track</var> is to be added.</p>
        </li>
        <li>
          <p>If <var>track</var> is not in <var>stream's</var> <a href="#track-set">track set</a>, then abort these steps.</p>
        </li>
        <li>
          <p>Remove <var>track</var> from <var>stream</var>'s <a href="#track-set">track set</a>.</p>
        </li>
        <li>
          <p>Fire a track event named <code><a href="#event-mediastream-removetrack">removetrack</a></code> with
            <var>track</var> at <var>stream</var>.</p>
        </li>
      </ol>
      <div>
        <pre class="def idl"><span class="idlInterface" id="idl-def-mediastream" data-idl="" data-title="MediaStream">[<span class="extAttr"><span class="extAttrName">Exposed</span>=<span class="extAttrRhs">Window</span></span>,
 <span class="idlCtor"><span class="extAttrName">Constructor</span></span>,
 <span class="idlCtor"><span class="extAttrName">Constructor</span>(<span class="idlParam"><span class="idlParamType"><a href="#idl-def-mediastream" class="internalDFN" data-link-type="dfn"><code>MediaStream</code></a></span> <span class="idlParamName">stream</span></span>)</span>,
 <span class="idlCtor"><span class="extAttrName">Constructor</span>(<span class="idlParam"><span class="idlParamType">sequence&lt;<a href="#idl-def-mediastreamtrack" class="internalDFN" data-link-type="dfn"><code>MediaStreamTrack</code></a>&gt;</span> <span class="idlParamName">tracks</span></span>)</span>]
interface <span class="idlInterfaceID">MediaStream</span> : <span class="idlSuperclass">EventTarget</span> {
<span class="idlAttribute" id="idl-def-mediastream-id" data-idl="" data-title="id" data-dfn-for="mediastream">    readonly attribute <span class="idlAttrType">DOMString</span>    <span class="idlAttrName"><a data-lt="id" href="#dom-mediastream-id" class="internalDFN" data-link-type="dfn" data-for="MediaStream"><code>id</code></a></span>;</span>
<span class="idlMethod" id="idl-def-mediastream-getaudiotracks()" data-idl="" data-title="getAudioTracks" data-dfn-for="mediastream">    <span class="idlMethType">sequence&lt;<a href="#idl-def-mediastreamtrack" class="internalDFN" data-link-type="dfn"><code>MediaStreamTrack</code></a>&gt;</span> <span class="idlMethName"><a data-lt="getAudioTracks" href="#dom-mediastream-getaudiotracks" class="internalDFN" data-link-type="dfn" data-for="MediaStream"><code>getAudioTracks</code></a></span>();</span>
<span class="idlMethod" id="idl-def-mediastream-getvideotracks()" data-idl="" data-title="getVideoTracks" data-dfn-for="mediastream">    <span class="idlMethType">sequence&lt;<a href="#idl-def-mediastreamtrack" class="internalDFN" data-link-type="dfn"><code>MediaStreamTrack</code></a>&gt;</span> <span class="idlMethName"><a data-lt="getVideoTracks" href="#dom-mediastream-getvideotracks" class="internalDFN" data-link-type="dfn" data-for="MediaStream"><code>getVideoTracks</code></a></span>();</span>
<span class="idlMethod" id="idl-def-mediastream-gettracks()" data-idl="" data-title="getTracks" data-dfn-for="mediastream">    <span class="idlMethType">sequence&lt;<a href="#idl-def-mediastreamtrack" class="internalDFN" data-link-type="dfn"><code>MediaStreamTrack</code></a>&gt;</span> <span class="idlMethName"><a data-lt="getTracks" href="#dom-mediastream-gettracks" class="internalDFN" data-link-type="dfn" data-for="MediaStream"><code>getTracks</code></a></span>();</span>
<span class="idlMethod" id="idl-def-mediastream-gettrackbyid(domstring)" data-idl="" data-title="getTrackById" data-dfn-for="mediastream">    <span class="idlMethType"><a href="#idl-def-mediastreamtrack" class="internalDFN" data-link-type="dfn"><code>MediaStreamTrack</code></a>?</span>          <span class="idlMethName"><a data-lt="getTrackById" href="#dom-mediastream-gettrackbyid" class="internalDFN" data-link-type="dfn" data-for="MediaStream"><code>getTrackById</code></a></span>(<span class="idlParam"><span class="idlParamType">DOMString</span> <span class="idlParamName">trackId</span></span>);</span>
<span class="idlMethod" id="idl-def-mediastream-addtrack(mediastreamtrack)" data-idl="" data-title="addTrack" data-dfn-for="mediastream">    <span class="idlMethType">void</span>                       <span class="idlMethName"><a data-lt="addTrack" href="#dom-mediastream-addtrack" class="internalDFN" data-link-type="dfn" data-for="MediaStream"><code>addTrack</code></a></span>(<span class="idlParam"><span class="idlParamType"><a href="#idl-def-mediastreamtrack" class="internalDFN" data-link-type="dfn"><code>MediaStreamTrack</code></a></span> <span class="idlParamName">track</span></span>);</span>
<span class="idlMethod" id="idl-def-mediastream-removetrack(mediastreamtrack)" data-idl="" data-title="removeTrack" data-dfn-for="mediastream">    <span class="idlMethType">void</span>                       <span class="idlMethName"><a data-lt="removeTrack" href="#dom-mediastream-removetrack" class="internalDFN" data-link-type="dfn" data-for="MediaStream"><code>removeTrack</code></a></span>(<span class="idlParam"><span class="idlParamType"><a href="#idl-def-mediastreamtrack" class="internalDFN" data-link-type="dfn"><code>MediaStreamTrack</code></a></span> <span class="idlParamName">track</span></span>);</span>
<span class="idlMethod" id="idl-def-mediastream-clone()" data-idl="" data-title="clone" data-dfn-for="mediastream">    <span class="idlMethType"><a href="#idl-def-mediastream" class="internalDFN" data-link-type="dfn"><code>MediaStream</code></a></span>                <span class="idlMethName"><a data-lt="clone" href="#dom-mediastream-clone" class="internalDFN" data-link-type="dfn" data-for="MediaStream"><code>clone</code></a></span>();</span>
<span class="idlAttribute" id="idl-def-mediastream-active" data-idl="" data-title="active" data-dfn-for="mediastream">    readonly attribute <span class="idlAttrType">boolean</span>      <span class="idlAttrName"><a data-lt="active" href="#dom-mediastream-active" class="internalDFN" data-link-type="dfn" data-for="MediaStream"><code>active</code></a></span>;</span>
<span class="idlAttribute" id="idl-def-mediastream-onaddtrack" data-idl="" data-title="onaddtrack" data-dfn-for="mediastream">             attribute <span class="idlAttrType">EventHandler</span> <span class="idlAttrName"><a data-lt="onaddtrack" href="#dom-mediastream-onaddtrack" class="internalDFN" data-link-type="dfn" data-for="MediaStream"><code>onaddtrack</code></a></span>;</span>
<span class="idlAttribute" id="idl-def-mediastream-onremovetrack" data-idl="" data-title="onremovetrack" data-dfn-for="mediastream">             attribute <span class="idlAttrType">EventHandler</span> <span class="idlAttrName"><a data-lt="onremovetrack" href="#dom-mediastream-onremovetrack" class="internalDFN" data-link-type="dfn" data-for="MediaStream"><code>onremovetrack</code></a></span>;</span>
};</span></pre>

        <section typeof="bibo:Chapter" resource="#constructors" property="bibo:hasPart">
          <h4 id="constructors" resource="#constructors"><span property="xhv:role" resource="xhv:heading">Constructors</span></h4>
          <dl data-link-for="MediaStream" data-dfn-for="MediaStream" class="constructors">
            <dt><code>MediaStream</code></dt>
            <dd>
              <p>See the <a href="#mediastream-constructor">MediaStream
              constructor algorithm</a></p>
              <div>
                <em>No parameters.</em>
              </div>
            </dd>
            <dt><code>MediaStream</code></dt>
            <dd>
              <p>See the <a href="#mediastream-constructor">MediaStream
              constructor algorithm</a></p>
              <table class="parameters">
                <tbody>
                  <tr>
                    <th>Parameter</th>
                    <th>Type</th>
                    <th>Nullable</th>
                    <th>Optional</th>
                    <th>Description</th>
                  </tr>
                  <tr>
                    <td class="prmName">stream</td>
                    <td class="prmType"><code>MediaStream</code></td>
                    <td class="prmNullFalse"><span role="img" aria-label="False">✘</span></td>
                    <td class="prmOptFalse"><span role="img" aria-label="False">✘</span></td>
                    <td class="prmDesc"></td>
                  </tr>
                </tbody>
              </table>
            </dd>
            <dt><code>MediaStream</code></dt>
            <dd>
              <p>See the <a href="#mediastream-constructor">MediaStream
              constructor algorithm</a></p>
              <table class="parameters">
                <tbody>
                  <tr>
                    <th>Parameter</th>
                    <th>Type</th>
                    <th>Nullable</th>
                    <th>Optional</th>
                    <th>Description</th>
                  </tr>
                  <tr>
                    <td class="prmName">tracks</td>
                    <td class="prmType">
                      <code>sequence&lt;MediaStreamTrack&gt;</code></td>
                    <td class="prmNullFalse"><span role="img" aria-label="False">✘</span></td>
                    <td class="prmOptFalse"><span role="img" aria-label="False">✘</span></td>
                    <td class="prmDesc"></td>
                  </tr>
                </tbody>
              </table>
            </dd>
          </dl>
        </section>

        <section typeof="bibo:Chapter" resource="#attributes" property="bibo:hasPart">
          <h4 id="attributes" resource="#attributes"><span property="xhv:role" resource="xhv:heading">Attributes</span></h4>
          <dl data-link-for="MediaStream" data-dfn-for="MediaStream" class="attributes">
            <dt><code>id</code> of type <span class="idlAttrType">DOMString</span>, readonly</dt>
            <dd>
              <p>When a <code><a href="#idl-def-mediastream" class="internalDFN" data-link-type="dfn"><code>MediaStream</code></a>
                </code> object is created, the User Agent <em class="rfc2119" title="MUST">MUST</em> generate an identifier string, and <em class="rfc2119" title="MUST">MUST</em> initialize the object's <code><a href="#dom-mediastream-id">id</a></code> attribute to that string. A good practice is to use a UUID [<cite><a class="bibref" href="#bib-rfc4122">rfc4122</a></cite>], which is 36 characters long in its canonical form. To avoid fingerprinting, implementations <em class="rfc2119" title="SHOULD">SHOULD</em> use the forms in section 4.4 or 4.5 of RFC 4122 when generating UUIDs.</p>
              <p>The <dfn data-lt-nodefault="" id="dom-mediastream-id" data-dfn-for="mediastream" data-dfn-type="dfn" data-idl=""><code>id</code></dfn> attribute <em class="rfc2119" title="MUST">MUST</em> return the value to which it was initialized when the object was created.
              </p>
            </dd>
            <dt><dfn data-dfn-for="mediastream" data-dfn-type="dfn" id="dom-mediastream-active" data-idl=""><code>active</code></dfn> of type <span class="idlAttrType">boolean</span>, readonly</dt>
            <dd>
              <p>The <code>active</code> attribute <em class="rfc2119" title="MUST">MUST</em> return
                <code>true</code> if this <code><a href="#idl-def-mediastream" class="internalDFN" data-link-type="dfn"><code>MediaStream</code></a>
                </code> is
                <a href="#stream-active">active</a> and <code>false</code> otherwise.
              </p>
            </dd>
            <dt><dfn data-dfn-for="mediastream" data-dfn-type="dfn" id="dom-mediastream-onaddtrack" data-idl=""><code>onaddtrack</code></dfn> of type <span class="idlAttrType">EventHandler</span></dt>
            <dd>
              <p>The event type of this event handler is <code><a href="#event-mediastream-addtrack">addtrack</a></code>.</p>
            </dd>
            <dt><dfn data-dfn-for="mediastream" data-dfn-type="dfn" id="dom-mediastream-onremovetrack" data-idl=""><code>onremovetrack</code></dfn> of type <span class="idlAttrType">EventHandler</span></dt>
            <dd>
              <p>The event type of this event handler is <code><a href="#event-mediastream-removetrack">removetrack</a></code>.</p>
            </dd>
          </dl>
        </section>

        <section typeof="bibo:Chapter" resource="#methods" property="bibo:hasPart">
          <h4 id="methods" resource="#methods"><span property="xhv:role" resource="xhv:heading">Methods</span></h4>
          <dl data-link-for="MediaStream" data-dfn-for="MediaStream" class="methods">
            <dt><code>getAudioTracks</code></dt>
            <dd>
              <p>Returns a sequence of <code><a href="#idl-def-mediastreamtrack" class="internalDFN" data-link-type="dfn"><code>MediaStreamTrack</code></a>
                </code>
                objects representing the audio tracks in this stream.</p>
              <p>The <dfn id="dom-mediastream-getaudiotracks" data-dfn-for="mediastream" data-dfn-type="dfn" data-idl=""><code>getAudioTracks</code></dfn> method <em class="rfc2119" title="MUST">MUST</em> return a sequence that represents a snapshot of all the <code><a href="#idl-def-mediastreamtrack" class="internalDFN" data-link-type="dfn"><code>MediaStreamTrack</code></a>
                </code> objects in this stream's
                <a href="#track-set">track set</a> whose <code><a href="#dom-mediastreamtrack-kind">kind</a></code> is equal to "
                <code>audio</code>". The conversion from the <a href="#track-set">track set</a> to the sequence is User Agent defined and the order does not have to be stable between calls.</p>
              <div>
                <em>No parameters.</em>
              </div>
              <div>
                <em>Return type:</em>
                <code>sequence&lt;MediaStreamTrack&gt;</code>
              </div>
            </dd>
            <dt><code>getVideoTracks</code></dt>
            <dd>
              <p>Returns a sequence of <code><a href="#idl-def-mediastreamtrack" class="internalDFN" data-link-type="dfn"><code>MediaStreamTrack</code></a>
                </code>
                objects representing the video tracks in this stream.</p>
              <p>The <dfn id="dom-mediastream-getvideotracks" data-dfn-for="mediastream" data-dfn-type="dfn" data-idl=""><code>getVideoTracks</code></dfn> method <em class="rfc2119" title="MUST">MUST</em> return a sequence that represents a snapshot of all the <code><a href="#idl-def-mediastreamtrack" class="internalDFN" data-link-type="dfn"><code>MediaStreamTrack</code></a>
                </code> objects in this stream's
                <a href="#track-set">track set</a> whose <code><a href="#dom-mediastreamtrack-kind">kind</a></code> is equal to "
                <code>video</code>". The conversion from the <a href="#track-set">track set</a> to the sequence is User Agent defined and the order does not have to be stable between calls.</p>
              <div>
                <em>No parameters.</em>
              </div>
              <div>
                <em>Return type:</em>
                <code>sequence&lt;MediaStreamTrack&gt;</code>
              </div>
            </dd>
            <dt><code>getTracks</code></dt>
            <dd>
              <p>Returns a sequence of <code><a href="#idl-def-mediastreamtrack" class="internalDFN" data-link-type="dfn"><code>MediaStreamTrack</code></a>
                </code>
                objects representing all the tracks in this stream.</p>
              <p>The <dfn id="dom-mediastream-gettracks" data-dfn-for="mediastream" data-dfn-type="dfn" data-idl=""><code>getTracks</code></dfn> method
                <em class="rfc2119" title="MUST">MUST</em> return a sequence that represents a snapshot of all the
                <code><a href="#idl-def-mediastreamtrack" class="internalDFN" data-link-type="dfn"><code>MediaStreamTrack</code></a>
                </code> objects in this stream's
                <a href="#track-set">track set</a>, regardless of <code><a href="#dom-mediastreamtrack-kind">kind</a></code>. The conversion from the <a href="#track-set">track set</a> to the sequence is User Agent defined and the order does not have to be stable between calls.
              </p>
              <div>
                <em>No parameters.</em>
              </div>
              <div>
                <em>Return type:</em>
                <code>sequence&lt;MediaStreamTrack&gt;</code>
              </div>
            </dd>
            <dt><code>getTrackById</code></dt>
            <dd>
              <p>The <dfn id="dom-mediastream-gettrackbyid" data-dfn-for="mediastream" data-dfn-type="dfn" data-idl=""><code>getTrackById</code></dfn> method <em class="rfc2119" title="MUST">MUST</em> return either a <code><a href="#idl-def-mediastreamtrack" class="internalDFN" data-link-type="dfn"><code>MediaStreamTrack</code></a>
                </code>
                object from this stream's <a href="#track-set">track set</a> whose <code><a href="#dom-mediastreamtrack-id">id</a></code> is equal to <var>trackId</var>, or null, if no such track exists.
              </p>
              <table class="parameters">
                <tbody>
                  <tr>
                    <th>Parameter</th>
                    <th>Type</th>
                    <th>Nullable</th>
                    <th>Optional</th>
                    <th>Description</th>
                  </tr>
                  <tr>
                    <td class="prmName">trackId</td>
                    <td class="prmType"><code>DOMString</code></td>
                    <td class="prmNullFalse"><span role="img" aria-label="False">✘</span></td>
                    <td class="prmOptFalse"><span role="img" aria-label="False">✘</span></td>
                    <td class="prmDesc"></td>
                  </tr>
                </tbody>
              </table>
              <div>
                <em>Return type:</em> <code>MediaStreamTrack</code>, nullable
              </div>
            </dd>
            <dt><code>addTrack</code></dt>
            <dd>
              <p>Adds the given <code><a href="#idl-def-mediastreamtrack" class="internalDFN" data-link-type="dfn"><code>MediaStreamTrack</code></a>
                </code> to this
                <code><a href="#idl-def-mediastream" class="internalDFN" data-link-type="dfn"><code>MediaStream</code></a>
                </code>.</p>
              <p>When the <dfn id="dom-mediastream-addtrack" data-dfn-for="mediastream" data-dfn-type="dfn" data-idl=""><code>addTrack</code></dfn> method is invoked, the User Agent <em class="rfc2119" title="MUST">MUST</em> run the following steps:</p>
              <ol>
                <li>
                  <p>Let <var>track</var> be the methods argument and
                    <var>stream</var> the <code><a href="#idl-def-mediastream" class="internalDFN" data-link-type="dfn"><code>MediaStream</code></a>
                    </code>
                    object on which the method was called.</p>
                </li>
                <li>
                  <p>If <var>track</var> is already in <var>stream</var>'s
                    <a href="#track-set">track set</a>, then abort these steps.
                  </p>
                </li>
                <li>
                  <p>Add <var>track</var> to <var>stream</var>'s <a href="#track-set">track set</a>.</p>
                </li>
              </ol>
              <table class="parameters">
                <tbody>
                  <tr>
                    <th>Parameter</th>
                    <th>Type</th>
                    <th>Nullable</th>
                    <th>Optional</th>
                    <th>Description</th>
                  </tr>
                  <tr>
                    <td class="prmName">track</td>
                    <td class="prmType"><code>MediaStreamTrack</code></td>
                    <td class="prmNullFalse"><span role="img" aria-label="False">✘</span></td>
                    <td class="prmOptFalse"><span role="img" aria-label="False">✘</span></td>
                    <td class="prmDesc"></td>
                  </tr>
                </tbody>
              </table>
              <div>
                <em>Return type:</em> <code>void</code>
              </div>
            </dd>
            <dt><code>removeTrack</code></dt>
            <dd>
              <p>Removes the given <code><a href="#idl-def-mediastreamtrack" class="internalDFN" data-link-type="dfn"><code>MediaStreamTrack</code></a>
                </code> object from this <code><a href="#idl-def-mediastream" class="internalDFN" data-link-type="dfn"><code>MediaStream</code></a>
                </code>.</p>
              <p>When the <dfn id="dom-mediastream-removetrack" data-dfn-for="mediastream" data-dfn-type="dfn" data-idl=""><code>removeTrack</code></dfn> method is invoked, the User Agent <em class="rfc2119" title="MUST">MUST</em> run the following steps:
              </p>
              <ol>
                <li>
                  <p>Let <var>track</var> be the methods argument and
                    <var>stream</var> the <code><a href="#idl-def-mediastream" class="internalDFN" data-link-type="dfn"><code>MediaStream</code></a>
                    </code>
                    object on which the method was called.</p>
                </li>
                <li>
                  <p>If <var>track</var> is not in <var>stream's</var> <a href="#track-set">track set</a>, then abort these steps.</p>
                </li>
                <li>
                  <p>Remove <var>track</var> from <var>stream</var>'s <a href="#track-set">track set</a>.</p>
                </li>
              </ol>
              <table class="parameters">
                <tbody>
                  <tr>
                    <th>Parameter</th>
                    <th>Type</th>
                    <th>Nullable</th>
                    <th>Optional</th>
                    <th>Description</th>
                  </tr>
                  <tr>
                    <td class="prmName">track</td>
                    <td class="prmType"><code>MediaStreamTrack</code></td>
                    <td class="prmNullFalse"><span role="img" aria-label="False">✘</span></td>
                    <td class="prmOptFalse"><span role="img" aria-label="False">✘</span></td>
                    <td class="prmDesc"></td>
                  </tr>
                </tbody>
              </table>
              <div>
                <em>Return type:</em> <code>void</code>
              </div>
            </dd>
            <dt><dfn data-dfn-for="mediastream" data-dfn-type="dfn" id="dom-mediastream-clone" data-idl=""><code>clone</code></dfn></dt>
            <dd>
              <p>Clones the given <code><a href="#idl-def-mediastream" class="internalDFN" data-link-type="dfn"><code>MediaStream</code></a>
                </code> and all its tracks.
              </p>
              <p>When the <code>clone()</code> method is invoked, the User Agent <em class="rfc2119" title="MUST">MUST</em> run the following steps:</p>
              <ol>
                <li>
                  <p>Let <var>streamClone</var> be a newly constructed
                    <code><a href="#idl-def-mediastream" class="internalDFN" data-link-type="dfn"><code>MediaStream</code></a>
                    </code> object.</p>
                </li>
                <li>
                  <p>Initialize <var>streamClone</var>'s <code><a href="#dom-mediastream-id">id</a></code> attribute to a newly generated value.</p>
                </li>
                <li>
                  <p><a href="#track-clone">Clone each track</a> in this
                    <code><a href="#idl-def-mediastream" class="internalDFN" data-link-type="dfn"><code>MediaStream</code></a>
                    </code> object and add the result to
                    <var>streamClone</var>'s <a href="#track-set">track
                  set</a>.</p>
                </li>
                <li>Return <var>streamClone</var>.</li>
              </ol>
              <div>
                <em>No parameters.</em>
              </div>
              <div>
                <em>Return type:</em> <code>MediaStream</code>
              </div>
            </dd>
          </dl>
        </section>
      </div>
    </section>

    <section id="mediastreamtrack" typeof="bibo:Chapter" resource="#mediastreamtrack" property="bibo:hasPart">
      <h3 id="h-mediastreamtrack" resource="#h-mediastreamtrack"><span property="xhv:role" resource="xhv:heading"><span class="secno">4.3 </span>MediaStreamTrack</span>
      </h3>
      <p>A <code><a href="#idl-def-mediastreamtrack" class="internalDFN" data-link-type="dfn"><code>MediaStreamTrack</code></a>
        </code> object represents a media source in the User Agent. An example source is a device connected to the User Agent. Other specifications may define sources for
        <code><a href="#idl-def-mediastreamtrack" class="internalDFN" data-link-type="dfn"><code>MediaStreamTrack</code></a>
        </code> that override the behavior specified here. Several <code><a href="#idl-def-mediastreamtrack" class="internalDFN" data-link-type="dfn"><code>MediaStreamTrack</code></a>
        </code> objects can represent the same media source, e.g., when the user chooses the same camera in the UI shown by two consecutive calls to <code><a href="#dom-mediadevices-getusermedia" class="internalDFN" data-link-type="dfn"><code>getUserMedia()</code></a>
        </code>
        .</p>
      <p>The data from a <code><a href="#idl-def-mediastreamtrack" class="internalDFN" data-link-type="dfn"><code>MediaStreamTrack</code></a>
        </code> object does not necessarily have a canonical binary form; for example, it could just be "the video currently coming from the user's video camera". This allows User Agents to manipulate media in whatever fashion is most suitable on the user's platform.</p>
      <p>A script can indicate that a <code><a href="#idl-def-mediastreamtrack" class="internalDFN" data-link-type="dfn"><code>MediaStreamTrack</code></a>
        </code>
        object no longer needs its source with the <code><a href="#dom-mediastreamtrack-stop">stop()</a></code> method. When all tracks using a source have been stopped or ended by some other means, the source is <dfn id="source-stopped" data-dfn-type="dfn">stopped</dfn>. If the source is a device exposed by <a href="#dom-mediadevices-getusermedia" class="internalDFN" data-link-type="dfn"><code>getUserMedia()</code></a>, then when the source is stopped, the UA <em class="rfc2119" title="MUST">MUST</em> run the following steps:</p>
      <ol>
        <li>
          <p>Let <var>deviceId</var> be the device's deviceId.</p>
        </li>
        <li>
          <p>Set [[devicesLiveMap]]<var>[deviceId]</var> to <code>false</code>.
          </p>
        </li>
        <li>
          <p>If the result of <a data-lt="retrieve the permission state" href="#dfn-retrieve-the-permission-state" class="internalDFN" data-link-type="dfn">
          retrieving the permission state</a> of the permission associated with the device's kind and <var>deviceId</var>, is not “granted”, then set [[devicesAccessibleMap]]
            <var>[deviceId]</var> to <code>false</code>.
          </p>
        </li>
      </ol>

      <p>An implementation may use a per-source reference count to keep track of source usage, but the specifics are out of scope for this specification.
      </p>
      <p>To <dfn id="track-clone" data-dfn-type="dfn">clone a track</dfn> the User Agent <em class="rfc2119" title="MUST">MUST</em> run the following steps:</p>
      <ol>
        <li>
          <p>Let <var>track</var> be the <code><a href="#idl-def-mediastreamtrack" class="internalDFN" data-link-type="dfn"><code>MediaStreamTrack</code></a>
            </code>
            object to be cloned.</p>
        </li>
        <li>
          <p>Let <var>trackClone</var> be a newly constructed
            <code><a href="#idl-def-mediastreamtrack" class="internalDFN" data-link-type="dfn"><code>MediaStreamTrack</code></a>
            </code> object.</p>
        </li>
        <li>
          <p>Initialize <var>trackClone</var>'s <code><a href="#dom-mediastreamtrack-id">id</a></code> attribute to a newly generated value.</p>
        </li>
        <li>
          <p>Initialize <var>trackClone</var>'s <code><a href="#dom-mediastreamtrack-kind">kind</a></code>, <code><a href="#dom-mediastreamtrack-label">label</a></code>, <code><a href="#dom-mediastreamtrack-readystate">readyState</a></code>, and
            <code><a href="#dom-mediastreamtrack-enabled">enabled</a></code> attributes by copying the corresponding values from
            <var>track</var>.</p>
        </li>
        <li>
          <p>Let <var>trackClone</var>'s underlying source be the source of
            <var>track</var>.</p>
        </li>
        <li>
          <p>Set <var>trackClone</var>'s constraints to the active constrains of <var>track</var>.</p>
        </li>
        <li>
          <p>Return <var>trackClone</var>.</p>
        </li>
      </ol>

      <section id="life-cycle-and-media-flow" typeof="bibo:Chapter" resource="#life-cycle-and-media-flow" property="bibo:hasPart">
        <h4 id="h-life-cycle-and-media-flow" resource="#h-life-cycle-and-media-flow"><span property="xhv:role" resource="xhv:heading"><span class="secno">4.3.1 </span>Life-cycle and Media Flow</span>
        </h4>
        <h4 id="life-cycle">Life-cycle</h4>
        <p>A <code><a href="#idl-def-mediastreamtrack" class="internalDFN" data-link-type="dfn"><code>MediaStreamTrack</code></a>
          </code> has two states in its life-cycle: <code>live</code> and <code>ended</code>. A newly created
          <code><a href="#idl-def-mediastreamtrack" class="internalDFN" data-link-type="dfn"><code>MediaStreamTrack</code></a>
          </code> can be in either state depending on how it was created. For example, cloning an ended track results in a new ended track. The current state is reflected by the object's
          <code><a href="#dom-mediastreamtrack-readystate">readyState</a></code> attribute.
        </p>
        <p>In the <code>live</code> state, the track is active and media is available for use by consumers (but may be replaced by zero-information-content if the <code><a href="#idl-def-mediastreamtrack" class="internalDFN" data-link-type="dfn"><code>MediaStreamTrack</code></a>
          </code> is
          <a href="#track-muted">muted</a> or <a href="#track-enabled">disabled</a>, see below).</p>
        <p>A muted or disabled <code><a href="#idl-def-mediastreamtrack" class="internalDFN" data-link-type="dfn"><code>MediaStreamTrack</code></a>
          </code> renders either silence (audio), black frames (video), or a zero-information-content equivalent. For example, a video element sourced by a muted or disabled <code><a href="#idl-def-mediastreamtrack" class="internalDFN" data-link-type="dfn"><code>MediaStreamTrack</code></a>
          </code>
          (contained within a <code><a href="#idl-def-mediastream" class="internalDFN" data-link-type="dfn"><code>MediaStream</code></a>
          </code> ), is playing but the rendered content is the muted output.</p>
        <p>If the source is a device exposed by <a href="#dom-mediadevices-getusermedia" class="internalDFN" data-link-type="dfn"><code>getUserMedia()</code></a>, then when a track becomes either muted or disabled, and this brings all tracks connected to the device to be either muted, disabled, or stopped, then the UA <em class="rfc2119" title="MAY">MAY</em>, using the device's deviceId, <var>deviceId</var>, set [[devicesLiveMap]]
          <var>[deviceId]</var> to
          <code>false</code>, provided the UA sets it back to <code>true</code> as soon as any unstopped track connected to this device becomes un-muted or enabled again.</p>
        <p>The muted/unmuted state of a track reflects whether the source provides any media at this moment. The enabled/disabled state is under application control and determines whether the track outputs media (to its consumers). Hence, media from the source only flows when a
          <code><a href="#idl-def-mediastreamtrack" class="internalDFN" data-link-type="dfn"><code>MediaStreamTrack</code></a>
          </code> object is both unmuted and enabled.
        </p>
        <p>A <code><a href="#idl-def-mediastreamtrack" class="internalDFN" data-link-type="dfn"><code>MediaStreamTrack</code></a>
          </code> is <a href="#track-muted">muted</a> when the source is temporarily unable to provide the track with data. A track can be muted by a user. Often this action is outside the control of the application. This could be as a result of the user hitting a hardware switch or toggling a control in the operating system / browser chrome. A track can also be muted by the User Agent.</p>
        <p>Applications are able to <a href="#track-enabled">enable</a> or disable a <code><a href="#idl-def-mediastreamtrack" class="internalDFN" data-link-type="dfn"><code>MediaStreamTrack</code></a>
          </code> to prevent it from rendering media from the source. A muted track will however, regardless of the enabled state, render silence and blackness. A disabled track is logically equivalent to a muted track, from a consumer point of view.
        </p>
        <p>For a newly created <code><a href="#idl-def-mediastreamtrack" class="internalDFN" data-link-type="dfn"><code>MediaStreamTrack</code></a>
          </code> object, the following applies. The track is always enabled unless stated otherwise (for example when cloned) and the muted state reflects the state of the source at the time the track is created.</p>
        <p>A <code><a href="#idl-def-mediastreamtrack" class="internalDFN" data-link-type="dfn"><code>MediaStreamTrack</code></a>
          </code> object is said to
          <em>end</em> when the source of the track is disconnected or exhausted.
        </p>
        <p>If all <code><a href="#idl-def-mediastreamtrack" class="internalDFN" data-link-type="dfn"><code>MediaStreamTrack</code></a>
          </code>s that are using the same source are <a href="#track-ended">ended</a>, the source will be
          <a href="#source-stopped">stopped</a>.</p>
        <p>When a <code><a href="#idl-def-mediastreamtrack" class="internalDFN" data-link-type="dfn"><code>MediaStreamTrack</code></a>
          </code> object ends for any reason (e.g., because the user rescinds the permission for the page to use the local camera, or because the application invoked the
          <code><a href="#dom-mediastreamtrack-stop">stop()</a></code> method on the <code><a href="#idl-def-mediastreamtrack" class="internalDFN" data-link-type="dfn"><code>MediaStreamTrack</code></a>
          </code> object, or because the User Agent has instructed the track to end for any reason) it is said to be
          <dfn id="track-ended" data-dfn-type="dfn">ended</dfn>.</p>
        <p>When a <code><a href="#idl-def-mediastreamtrack" class="internalDFN" data-link-type="dfn"><code>MediaStreamTrack</code></a>
          </code> <var>track</var> ends for any reason other than the <code><a href="#dom-mediastreamtrack-stop">stop()</a></code> method being invoked, the User Agent <em class="rfc2119" title="MUST">MUST</em> queue a task that runs the following steps:</p>
        <ol>
          <li>
            <p>If the <var>track's</var> <code><a href="#dom-mediastreamtrack-readystate">readyState</a></code> attribute has the value <code>ended</code> already, then abort these steps.
            </p>
          </li>
          <li>
            <p>Set <var>track's</var> <code><a href="#dom-mediastreamtrack-readystate">readyState</a></code> attribute to <code>ended</code>.</p>
          </li>
          <li>
            <p>Notify <var>track</var>'s source that <var>track</var> is
              <a href="#track-ended">ended</a> so that the source may be <a href="#source-stopped">stopped</a>, unless other
              <code><a href="#idl-def-mediastreamtrack" class="internalDFN" data-link-type="dfn"><code>MediaStreamTrack</code></a>
              </code> objects depend on it.</p>
          </li>
          <li>
            <p>Fire a simple event named <code><a href="#event-mediastreamtrack-ended">ended</a></code> at the object.</p>
          </li>
        </ol>
        <p>If the end of the stream was reached due to a user request, the event source for this event is the user interaction event source.</p>
        <h4 id="media-flow">Media Flow</h4>
        <p>There are two dimensions related to the media flow for a
          <code>live</code> <code><a href="#idl-def-mediastreamtrack" class="internalDFN" data-link-type="dfn"><code>MediaStreamTrack</code></a>
          </code> : muted / not muted, and enabled / disabled.</p>
        <p><dfn data-lt-nodefault="" id="track-muted" data-dfn-type="dfn">Muted</dfn> refers to the input to the
          <code><a href="#idl-def-mediastreamtrack" class="internalDFN" data-link-type="dfn"><code>MediaStreamTrack</code></a>
          </code>. If live samples are not made available to the <code><a href="#idl-def-mediastreamtrack" class="internalDFN" data-link-type="dfn"><code>MediaStreamTrack</code></a>
          </code> it is muted.</p>
        <p>Muted is out of control for the application, but can be observed by the application by reading the <code><a href="#dom-mediastreamtrack-muted">muted</a></code> attribute and listening to the associated events <code><a href="#event-mediastreamtrack-mute">mute</a></code> and <code><a href="#event-mediastreamtrack-unmute">unmute</a></code>. There can be several reasons for a <code><a href="#idl-def-mediastreamtrack" class="internalDFN" data-link-type="dfn"><code>MediaStreamTrack</code></a>
          </code> to be muted: the user pushing a physical mute button on the microphone, the user toggling a control in the operating system, the user clicking a mute button in the browser chrome, the User Agent (on behalf of the user) mutes, etc.</p>
        <p>To <dfn id="update-track-muted" data-dfn-type="dfn">update a track's muted state</dfn> to <var>newState</var>, the User Agent <em class="rfc2119" title="MUST">MUST</em> queue a task to run the following steps:</p>
        <ol>
          <li>
            <p>Let <var>track</var> be the <code>MediaStreamTrack</code> in question.
            </p>
          </li>
          <li>
            <p>Set <var>track</var>'s <code>muted</code> attribute to
              <var>newState</var>.</p>
          </li>
          <li>
            <p>If <var>newState</var> is <code>true</code> let
              <var>eventName</var> be <code>mute</code>, otherwise
              <code>unmute</code>.</p>
          </li>
          <li>
            <p>Fire a simple event named <var>eventName</var> on
              <var>track</var>.</p>
          </li>
        </ol>
        <p><dfn id="track-enabled" data-dfn-type="dfn">Enabled/disabled</dfn> on the other hand is available to the application to control (and observe) via the
          <code><a href="#dom-mediastreamtrack-enabled">enabled</a></code> attribute.
        </p>
        <p>The result for the consumer is the same in the sense that whenever
          <code><a href="#idl-def-mediastreamtrack" class="internalDFN" data-link-type="dfn"><code>MediaStreamTrack</code></a>
          </code> is muted or disabled (or both) the consumer gets zero-information-content, which means silence for audio and black frames for video. In other words, media from the source only flows when a <code><a href="#idl-def-mediastreamtrack" class="internalDFN" data-link-type="dfn"><code>MediaStreamTrack</code></a>
          </code> object is both unmuted and enabled. For example, a video element sourced by a muted or disabled <code><a href="#idl-def-mediastreamtrack" class="internalDFN" data-link-type="dfn"><code>MediaStreamTrack</code></a>
          </code> (contained in a
          <code><a href="#idl-def-mediastream" class="internalDFN" data-link-type="dfn"><code>MediaStream</code></a>
          </code> ), is playing but rendering blackness.
        </p>
        <p>For a newly created <code><a href="#idl-def-mediastreamtrack" class="internalDFN" data-link-type="dfn"><code>MediaStreamTrack</code></a>
          </code> object, the following applies: the track is always enabled unless stated otherwise (for example when cloned) and the muted state reflects the state of the source at the time the track is created.</p>
      </section>

      <section id="tracks-and-constraints" typeof="bibo:Chapter" resource="#tracks-and-constraints" property="bibo:hasPart">
        <h4 id="h-tracks-and-constraints" resource="#h-tracks-and-constraints"><span property="xhv:role" resource="xhv:heading"><span class="secno">4.3.2 </span>Tracks and Constraints</span>
        </h4>
        <p><code><a href="#idl-def-mediastreamtrack" class="internalDFN" data-link-type="dfn"><code>MediaStreamTrack</code></a>
          </code> is a <a href="#dfn-constrainable-object" class="internalDFN" data-link-type="dfn">constrainable
        object</a> as defined in the <a href="#constrainable-interface">Constrainable Pattern</a> section. Constraints are set on tracks and may affect sources.</p>
        <p>Whether <code><a href="#dom-constraints" class="internalDFN" data-link-type="dfn"><code>Constraints</code></a>
          </code> were provided at track initialization time or need to be established later at runtime, the APIs defined in the <a href="#idl-def-constrainablepattern" class="internalDFN" data-link-type="dfn"><code>ConstrainablePattern</code></a> Interface allow the retrieval and manipulation of the constraints currently established on a track.</p>
        <p>If the <code><a href="#event-mediastreamtrack-overconstrained" class="internalDFN" data-link-type="dfn"><code>overconstrained</code></a>
          </code> event is thrown, the track <em class="rfc2119" title="MUST">MUST</em> be muted until either new satisfiable constraints are applied or the existing constraints become satisfiable.</p>
      </section>

      <section id="media-stream-track-interface-definition" typeof="bibo:Chapter" resource="#media-stream-track-interface-definition" property="bibo:hasPart">
        <h4 id="h-media-stream-track-interface-definition" resource="#h-media-stream-track-interface-definition"><span property="xhv:role" resource="xhv:heading"><span class="secno">4.3.3 </span>Interface Definition</span>
        </h4>
        <div>
          <pre class="def idl"><span class="idlInterface" id="idl-def-mediastreamtrack" data-idl="" data-title="MediaStreamTrack">[<span class="extAttr"><span class="extAttrName">Exposed</span>=<span class="extAttrRhs">Window</span></span>]
interface <span class="idlInterfaceID">MediaStreamTrack</span> : <span class="idlSuperclass">EventTarget</span> {
<span class="idlAttribute" id="idl-def-mediastreamtrack-kind" data-idl="" data-title="kind" data-dfn-for="mediastreamtrack">    readonly attribute <span class="idlAttrType">DOMString</span>             <span class="idlAttrName"><a data-lt="kind" href="#dom-mediastreamtrack-kind" class="internalDFN" data-link-type="dfn" data-for="MediaStreamTrack"><code>kind</code></a></span>;</span>
<span class="idlAttribute" id="idl-def-mediastreamtrack-id" data-idl="" data-title="id" data-dfn-for="mediastreamtrack">    readonly attribute <span class="idlAttrType">DOMString</span>             <span class="idlAttrName">id</span>;</span>
<span class="idlAttribute" id="idl-def-mediastreamtrack-label" data-idl="" data-title="label" data-dfn-for="mediastreamtrack">    readonly attribute <span class="idlAttrType">DOMString</span>             <span class="idlAttrName"><a data-lt="label" href="#dom-mediastreamtrack-label" class="internalDFN" data-link-type="dfn" data-for="MediaStreamTrack"><code>label</code></a></span>;</span>
<span class="idlAttribute" id="idl-def-mediastreamtrack-enabled" data-idl="" data-title="enabled" data-dfn-for="mediastreamtrack">             attribute <span class="idlAttrType">boolean</span>               <span class="idlAttrName"><a data-lt="enabled" href="#dom-mediastreamtrack-enabled" class="internalDFN" data-link-type="dfn" data-for="MediaStreamTrack"><code>enabled</code></a></span>;</span>
<span class="idlAttribute" id="idl-def-mediastreamtrack-muted" data-idl="" data-title="muted" data-dfn-for="mediastreamtrack">    readonly attribute <span class="idlAttrType">boolean</span>               <span class="idlAttrName"><a data-lt="muted" href="#dom-mediastreamtrack-muted" class="internalDFN" data-link-type="dfn" data-for="MediaStreamTrack"><code>muted</code></a></span>;</span>
<span class="idlAttribute" id="idl-def-mediastreamtrack-onmute" data-idl="" data-title="onmute" data-dfn-for="mediastreamtrack">             attribute <span class="idlAttrType">EventHandler</span>          <span class="idlAttrName"><a data-lt="onmute" href="#dom-mediastreamtrack-onmute" class="internalDFN" data-link-type="dfn" data-for="MediaStreamTrack"><code>onmute</code></a></span>;</span>
<span class="idlAttribute" id="idl-def-mediastreamtrack-onunmute" data-idl="" data-title="onunmute" data-dfn-for="mediastreamtrack">             attribute <span class="idlAttrType">EventHandler</span>          <span class="idlAttrName"><a data-lt="onunmute" href="#dom-mediastreamtrack-onunmute" class="internalDFN" data-link-type="dfn" data-for="MediaStreamTrack"><code>onunmute</code></a></span>;</span>
<span class="idlAttribute" id="idl-def-mediastreamtrack-readystate" data-idl="" data-title="readyState" data-dfn-for="mediastreamtrack">    readonly attribute <span class="idlAttrType"><a href="#idl-def-mediastreamtrackstate" class="internalDFN" data-link-type="dfn"><code>MediaStreamTrackState</code></a></span> <span class="idlAttrName"><a data-lt="readyState" href="#dom-mediastreamtrack-readystate" class="internalDFN" data-link-type="dfn" data-for="MediaStreamTrack"><code>readyState</code></a></span>;</span>
<span class="idlAttribute" id="idl-def-mediastreamtrack-onended" data-idl="" data-title="onended" data-dfn-for="mediastreamtrack">             attribute <span class="idlAttrType">EventHandler</span>          <span class="idlAttrName"><a data-lt="onended" href="#dom-mediastreamtrack-onended" class="internalDFN" data-link-type="dfn" data-for="MediaStreamTrack"><code>onended</code></a></span>;</span>
<span class="idlMethod" id="idl-def-mediastreamtrack-clone()" data-idl="" data-title="clone" data-dfn-for="mediastreamtrack">    <span class="idlMethType"><a href="#idl-def-mediastreamtrack" class="internalDFN" data-link-type="dfn"><code>MediaStreamTrack</code></a></span>       <span class="idlMethName"><a data-lt="clone" href="#dom-mediastreamtrack-clone" class="internalDFN" data-link-type="dfn" data-for="MediaStreamTrack"><code>clone</code></a></span>();</span>
<span class="idlMethod" id="idl-def-mediastreamtrack-stop()" data-idl="" data-title="stop" data-dfn-for="mediastreamtrack">    <span class="idlMethType">void</span>                   <span class="idlMethName">stop</span>();</span>
<span class="idlMethod" id="idl-def-mediastreamtrack-getcapabilities()" data-idl="" data-title="getCapabilities" data-dfn-for="mediastreamtrack">    <span class="idlMethType"><a href="#idl-def-mediatrackcapabilities" class="internalDFN" data-link-type="dfn"><code>MediaTrackCapabilities</code></a></span> <span class="idlMethName"><a data-lt="getCapabilities" href="#dom-mediastreamtrack-getcapabilities" class="internalDFN" data-link-type="dfn" data-for="MediaStreamTrack"><code>getCapabilities</code></a></span>();</span>
<span class="idlMethod" id="idl-def-mediastreamtrack-getconstraints()" data-idl="" data-title="getConstraints" data-dfn-for="mediastreamtrack">    <span class="idlMethType"><a href="#idl-def-mediatrackconstraints" class="internalDFN" data-link-type="dfn"><code>MediaTrackConstraints</code></a></span>  <span class="idlMethName"><a data-lt="getConstraints" href="#dom-mediastreamtrack-getconstraints" class="internalDFN" data-link-type="dfn" data-for="MediaStreamTrack"><code>getConstraints</code></a></span>();</span>
<span class="idlMethod" id="idl-def-mediastreamtrack-getsettings()" data-idl="" data-title="getSettings" data-dfn-for="mediastreamtrack">    <span class="idlMethType"><a href="#idl-def-mediatracksettings" class="internalDFN" data-link-type="dfn"><code>MediaTrackSettings</code></a></span>     <span class="idlMethName"><a data-lt="getSettings" href="#dom-mediastreamtrack-getsettings" class="internalDFN" data-link-type="dfn" data-for="MediaStreamTrack"><code>getSettings</code></a></span>();</span>
<span class="idlMethod" id="idl-def-mediastreamtrack-applyconstraints(optional-mediatrackconstraints)" data-idl="" data-title="applyConstraints" data-dfn-for="mediastreamtrack">    <span class="idlMethType">Promise&lt;void&gt;</span>          <span class="idlMethName"><a data-lt="applyConstraints" href="#dom-mediastreamtrack-applyconstraints" class="internalDFN" data-link-type="dfn" data-for="MediaStreamTrack"><code>applyConstraints</code></a></span>(<span class="idlParam">optional <span class="idlParamType"><a href="#idl-def-mediatrackconstraints" class="internalDFN" data-link-type="dfn"><code>MediaTrackConstraints</code></a></span> <span class="idlParamName">constraints</span></span>);</span>
<span class="idlAttribute" id="idl-def-mediastreamtrack-onoverconstrained" data-idl="" data-title="onoverconstrained" data-dfn-for="mediastreamtrack">             attribute <span class="idlAttrType">EventHandler</span>          <span class="idlAttrName"><a data-lt="onoverconstrained" href="#dom-mediastreamtrack-onoverconstrained" class="internalDFN" data-link-type="dfn" data-for="MediaStreamTrack"><code>onoverconstrained</code></a></span>;</span>
};</span></pre>

          <section typeof="bibo:Chapter" resource="#attributes-1" property="bibo:hasPart">
            <h5 id="attributes-1" resource="#attributes-1"><span property="xhv:role" resource="xhv:heading">Attributes</span></h5>
            <dl data-link-for="MediaStreamTrack" data-dfn-for="MediaStreamTrack" class="attributes">
              <dt><code>kind</code> of type <span class="idlAttrType">DOMString</span>, readonly</dt>
              <dd>
                <p>The <dfn id="dom-mediastreamtrack-kind" data-dfn-for="mediastreamtrack" data-dfn-type="dfn" data-idl=""><code>kind</code></dfn> attribute
                  <em class="rfc2119" title="MUST">MUST</em> return the string "<code>audio</code>" if this object represents an audio track or "<code>video</code>" if this object represents a video track.</p>
              </dd>
              <dt><code>id</code> of type <span class="idlAttrType">DOMString</span>, readonly</dt>
              <dd>
                <p>Unless a <code><a href="#idl-def-mediastreamtrack" class="internalDFN" data-link-type="dfn"><code>MediaStreamTrack</code></a>
                  </code> object is created as a part of a special purpose algorithm that specifies how the track id must be initialized, the User Agent <em class="rfc2119" title="MUST">MUST</em> generate an identifier string and initialize the object's
                  <code><a href="#dom-mediastreamtrack-id">id</a></code> attribute to that string. See <code><a href="#idl-def-mediastream" class="internalDFN" data-link-type="dfn"><code>MediaStream</code></a>
                  </code>'s
                  <code><a href="#dom-mediastream-id">id</a></code> attribute for guidelines on how to generate such an identifier.</p>
                <p>An example of an algorithm that specifies how the track id must be initialized is the algorithm to represent an incoming network component with a <code><a href="#idl-def-mediastreamtrack" class="internalDFN" data-link-type="dfn"><code>MediaStreamTrack</code></a>
                  </code>
                  object. [<cite><a class="bibref" href="#bib-WEBRTC10">WEBRTC10</a></cite>]</p>
                <p><dfn data-lt-nodefault="" id="dom-mediastreamtrack-id" data-dfn-type="dfn"><code>id</code></dfn> attribute <em class="rfc2119" title="MUST">MUST</em> return the value to which it was initialized when the object was created.</p>
              </dd>
              <dt><code>label</code> of type <span class="idlAttrType">DOMString</span>, readonly</dt>
              <dd>
                <p>User Agents <em class="rfc2119" title="MAY">MAY</em> label audio and video sources (e.g., "Internal microphone" or "External USB Webcam"). The <dfn id="dom-mediastreamtrack-label" data-dfn-for="mediastreamtrack" data-dfn-type="dfn" data-idl=""><code>label</code></dfn> attribute
                  <em class="rfc2119" title="MUST">MUST</em> return the label of the object's corresponding source, if any. If the corresponding source has or had no label, the attribute <em class="rfc2119" title="MUST">MUST</em> instead return the empty string.</p>
              </dd>
              <dt><code>enabled</code> of type <span class="idlAttrType">boolean</span></dt>
              <dd>
                <p>The <dfn id="dom-mediastreamtrack-enabled" data-dfn-for="mediastreamtrack" data-dfn-type="dfn" data-idl=""><code>enabled</code></dfn> attribute controls the <code><a href="#track-enabled">enabled</a></code> state for the object.</p>
                <p>On getting, the attribute <em class="rfc2119" title="MUST">MUST</em> return the value to which it was last set. On setting, it <em class="rfc2119" title="MUST">MUST</em> be set to the new value.</p>
                <div class="note">
                  <div class="note-title marker" aria-level="6" role="heading" id="h-note4"><span>Note</span></div>
                  <p class="">Thus, after a
                    <code><a href="#idl-def-mediastreamtrack" class="internalDFN" data-link-type="dfn"><code>MediaStreamTrack</code></a>
                    </code> has <a href="#track-ended">ended</a>, its <code><a href="#dom-mediastreamtrack-enabled">enabled</a></code> attribute still changes value when set; it just doesn't do anything with that new value.</p>
                </div>
              </dd>
              <dt><code>muted</code> of type <span class="idlAttrType">boolean</span>, readonly</dt>
              <dd>
                <p>The <dfn data-lt-nodefault="" id="dom-mediastreamtrack-muted" data-dfn-for="mediastreamtrack" data-dfn-type="dfn" data-idl=""><code>muted</code></dfn> attribute
                  <em class="rfc2119" title="MUST">MUST</em> return <code>true</code> if the track is <a href="#track-muted">muted</a>, and <code>false</code> otherwise.</p>
              </dd>
              <dt><dfn data-dfn-for="mediastreamtrack" data-dfn-type="dfn" id="dom-mediastreamtrack-onmute" data-idl=""><code>onmute</code></dfn> of type <span class="idlAttrType">EventHandler</span></dt>
              <dd>
                <p>The event type of this event handler is <code><a href="#event-mediastreamtrack-mute">mute</a></code>.</p>
              </dd>
              <dt><dfn data-dfn-for="mediastreamtrack" data-dfn-type="dfn" id="dom-mediastreamtrack-onunmute" data-idl=""><code>onunmute</code></dfn> of type <span class="idlAttrType">EventHandler</span></dt>
              <dd>
                <p>The event type of this event handler is <code><a href="#event-mediastreamtrack-unmute">unmute</a></code>.</p>
              </dd>
              <dt><code>readyState</code> of type <span class="idlAttrType"><a href="#idl-def-mediastreamtrackstate" class="internalDFN" data-link-type="dfn"><code>MediaStreamTrackState</code></a></span>, readonly</dt>
              <dd>
                <p>The <dfn id="dom-mediastreamtrack-readystate" data-dfn-for="mediastreamtrack" data-dfn-type="dfn" data-idl=""><code>readyState</code></dfn> attribute represents the state of the track. It <em class="rfc2119" title="MUST">MUST</em> return the value as most recently set by the User Agent.</p>
              </dd>
              <dt><dfn data-dfn-for="mediastreamtrack" data-dfn-type="dfn" id="dom-mediastreamtrack-onended" data-idl=""><code>onended</code></dfn> of type <span class="idlAttrType">EventHandler</span></dt>
              <dd>
                <p>The event type of this event handler is <code><a href="#event-mediastreamtrack-ended">ended</a></code>.</p>
              </dd>
              <dt><dfn data-dfn-for="mediastreamtrack" data-dfn-type="dfn" id="dom-mediastreamtrack-onoverconstrained" data-idl=""><code>onoverconstrained</code></dfn> of type
              <span class="idlAttrType">EventHandler</span></dt>
              <dd>
                <p>The event type of this event handler is <code><a href="#event-mediastreamtrack-overconstrained">overconstrained</a></code>.</p>
                <p>See <a href="#constrainable-interface">ConstrainablePattern
                Interface</a> for more information about the
                  <code>overconstrained</code> event.</p>
              </dd>
            </dl>
          </section>

          <section typeof="bibo:Chapter" resource="#methods-1" property="bibo:hasPart">
            <h5 id="methods-1" resource="#methods-1"><span property="xhv:role" resource="xhv:heading">Methods</span></h5>
            <dl data-link-for="MediaStreamTrack" data-dfn-for="MediaStreamTrack" class="methods">
              <dt><dfn data-dfn-for="mediastreamtrack" data-dfn-type="dfn" id="dom-mediastreamtrack-clone" data-idl=""><code>clone</code></dfn></dt>
              <dd>
                <p>Clones this <code><a href="#idl-def-mediastreamtrack" class="internalDFN" data-link-type="dfn"><code>MediaStreamTrack</code></a>
                  </code>.</p>
                <p>When the <code>clone()</code> method is invoked, the User Agent <em class="rfc2119" title="MUST">MUST</em> return the result of <a href="#track-clone">cloning
                this track</a>.</p>
                <div>
                  <em>No parameters.</em>
                </div>
                <div>
                  <em>Return type:</em> <code>MediaStreamTrack</code>
                </div>
              </dd>
              <dt><code>stop</code></dt>
              <dd>
                <p>When a <code><a href="#idl-def-mediastreamtrack" class="internalDFN" data-link-type="dfn"><code>MediaStreamTrack</code></a>
                  </code> object's
                  <dfn id="dom-mediastreamtrack-stop" data-dfn-type="dfn"><code>stop()</code></dfn> method is invoked, the User Agent <em class="rfc2119" title="MUST">MUST</em> run following steps:</p>
                <ol>
                  <li>
                    <p>Let <var>track</var> be the current
                      <code><a href="#idl-def-mediastreamtrack" class="internalDFN" data-link-type="dfn"><code>MediaStreamTrack</code></a>
                      </code> object.</p>
                  </li>
                  <li>
                    <p>Notify <var>track</var>'s source that <var>track</var> is <a href="#track-ended">ended</a>.</p>
                    <p>A source that is notified of a track ending will be
                      <a href="#source-stopped">stopped</a>, unless other
                      <code><a href="#idl-def-mediastreamtrack" class="internalDFN" data-link-type="dfn"><code>MediaStreamTrack</code></a>
                      </code> objects depend on it.
                    </p>
                  </li>
                  <li>
                    <p>Set <var>track's</var> <code><a href="#dom-mediastreamtrack-readystate">readyState</a></code> attribute to <code>ended</code>.</p>
                  </li>
                </ol>
                <p>The task source for the <span title="concept-task">tasks</span> queued for the <code><a href="#dom-mediastreamtrack-stop">stop()</a></code> method is the DOM manipulation task source.</p>
                <div>
                  <em>No parameters.</em>
                </div>
                <div>
                  <em>Return type:</em> <code>void</code>
                </div>
              </dd>
              <dt><dfn data-dfn-for="mediastreamtrack" data-dfn-type="dfn" id="dom-mediastreamtrack-getcapabilities" data-idl=""><code>getCapabilities</code></dfn></dt>
              <dd>
                <p>Returns the capabilites of the source that this
                  <code><a href="#idl-def-mediastreamtrack" class="internalDFN" data-link-type="dfn"><code>MediaStreamTrack</code></a>
                  </code>, the <a href="#dfn-constrainable-object" class="internalDFN" data-link-type="dfn">constrainable
                object</a>, represents.</p>
                <p>See <a href="#constrainable-interface">ConstrainablePattern
                Interface</a> for the definition of this method.</p>
                <p class="fingerprint">Since this method gives likely persistent, cross-origin information about the underlying device, it adds to the fingerprint surface of the device.<img src="images/fingerprint.png" alt="(This is a fingerprinting vector.)" width="15" height="21"></p>
                <div>
                  <em>No parameters.</em>
                </div>
                <div>
                  <em>Return type:</em> <code>MediaTrackCapabilities</code>
                </div>
              </dd>
              <dt><dfn data-dfn-for="mediastreamtrack" data-dfn-type="dfn" id="dom-mediastreamtrack-getconstraints" data-idl=""><code>getConstraints</code></dfn></dt>
              <dd>
                <p>See <a href="#constrainable-interface">ConstrainablePattern
                Interface</a> for the definition of this method.</p>
                <div>
                  <em>No parameters.</em>
                </div>
                <div>
                  <em>Return type:</em> <code>MediaTrackConstraints</code>
                </div>
              </dd>
              <dt><dfn data-dfn-for="mediastreamtrack" data-dfn-type="dfn" id="dom-mediastreamtrack-getsettings" data-idl=""><code>getSettings</code></dfn></dt>
              <dd>
                <p>See <a href="#constrainable-interface">ConstrainablePattern
                Interface</a> for the definition of this method.</p>
                <div>
                  <em>No parameters.</em>
                </div>
                <div>
                  <em>Return type:</em> <code>MediaTrackSettings</code>
                </div>
              </dd>
              <dt><dfn data-dfn-for="mediastreamtrack" data-dfn-type="dfn" id="dom-mediastreamtrack-applyconstraints" data-idl=""><code>applyConstraints</code></dfn></dt>
              <dd>
                <p>See <a href="#constrainable-interface">ConstrainablePattern
                Interface</a> for the definition of this method, where</p>
                <ul>
                  <li>In the SelectSettings algorithm,
                    <ul>
                      <li>
                        <var>object</var> is the
                        <a href="#idl-def-mediastreamtrack" class="internalDFN" data-link-type="dfn"><code><code>MediaStreamTrack</code></code></a> on which this method was called, and
                      </li>
                      <li>
                        <a href="#dfn-settings-dictionary" class="internalDFN" data-link-type="dfn">settings dictionary</a> refers to a possible instance of the <a href="#idl-def-mediatracksettings" class="internalDFN" data-link-type="dfn"><code><code>MediaTrackSettings</code></code></a> dictionary.
                      </li>
                    </ul>
                  </li>
                  <li>In step 3 of the applyConstraints algorithm, all changes listed are to be made to <var>object</var>, and</li>
                  <li>In step 4 of the applyConstraints algorithm, the requirement on getConstraints() applies to the getConstraints() method of <var>object</var>.</li>
                </ul>
                <table class="parameters">
                  <tbody>
                    <tr>
                      <th>Parameter</th>
                      <th>Type</th>
                      <th>Nullable</th>
                      <th>Optional</th>
                      <th>Description</th>
                    </tr>
                    <tr>
                      <td class="prmName">constraints</td>
                      <td class="prmType">
                        <code>MediaTrackConstraints</code></td>
                      <td class="prmNullFalse"><span role="img" aria-label="False">✘</span></td>
                      <td class="prmOptTrue"><span role="img" aria-label="True">✔</span></td>
                      <td class="prmDesc">
                        <p>A new constraint structure to apply to this object.
                        </p>
                      </td>
                    </tr>
                  </tbody>
                </table>
                <div>
                  <em>Return type:</em> <code>Promise&lt;void&gt;</code>
                </div>
              </dd>
            </dl>
          </section>
        </div>
        <div>
          <pre class="def idl"><span class="idlEnum" id="idl-def-mediastreamtrackstate" data-idl="" data-title="MediaStreamTrackState">enum <span class="idlEnumID">MediaStreamTrackState</span> {
    "<a href="#dom-mediastreamtrackstate-live" class="idlEnumItem">live</a>",
    "<a href="#dom-mediastreamtrackstate-ended" class="idlEnumItem">ended</a>"
};</span></pre>
          <table data-link-for="MediaStreamTrackState" data-dfn-for="MediaStreamTrackState" class="simple">
            <tbody>
              <tr>
                <th colspan="2">Enumeration description</th>
              </tr>
              <tr>
                <td><dfn data-dfn-for="mediastreamtrackstate" data-dfn-type="dfn" id="dom-mediastreamtrackstate-live" data-idl=""><code id="idl-def-MediaStreamTrackState.live">live</code></dfn></td>
                <td>
                  <p>The track is active (the track's underlying media source is making a best-effort attempt to provide data in real time).
                  </p>
                  <p>The output of a track in the <code>live</code> state can be switched on and off with the <code><a href="#dom-mediastreamtrack-enabled">enabled</a></code> attribute.
                  </p>
                </td>
              </tr>
              <tr>
                <td><dfn data-dfn-for="mediastreamtrackstate" data-dfn-type="dfn" id="dom-mediastreamtrackstate-ended" data-idl=""><code id="idl-def-MediaStreamTrackState.ended">ended</code></dfn></td>
                <td>
                  <p>The track has <a href="#track-ended">ended</a> (the track's underlying media source is no longer providing data, and will never provide more data for this track). Once a track enters this state, it never exits it.</p>
                  <p>For example, a video track in a
                    <code><a href="#idl-def-mediastream" class="internalDFN" data-link-type="dfn"><code>MediaStream</code></a>
                    </code> ends when the user unplugs the USB web camera that acts as the track's media source.</p>
                </td>
              </tr>
            </tbody>
          </table>
        </div>
      </section>

      <section id="media-track-supported-constraints" typeof="bibo:Chapter" resource="#media-track-supported-constraints" property="bibo:hasPart">
        <h4 id="h-media-track-supported-constraints" resource="#h-media-track-supported-constraints"><span property="xhv:role" resource="xhv:heading"><span class="secno">4.3.4 </span>MediaTrackSupportedConstraints</span>
        </h4>
        <p><code><a href="#idl-def-mediatracksupportedconstraints" class="internalDFN" data-link-type="dfn"><code>MediaTrackSupportedConstraints</code></a>
          </code> represents the list of constraints recognized by a User Agent for controlling the
          <a href="#dom-capabilities" class="internalDFN" data-link-type="dfn"><code>Capabilities</code></a> of a <code><a href="#idl-def-mediastreamtrack" class="internalDFN" data-link-type="dfn"><code>MediaStreamTrack</code></a>
          </code> object. This dictionary is used as a function return value, and never as an operation argument.</p>
        <p>Future specifications can extend the MediaTrackSupportedConstraints dictionary by defining a partial dictionary with dictionary members of type boolean.</p>
        <div>
          <pre class="def idl"><span class="idlDictionary" id="idl-def-mediatracksupportedconstraints" data-idl="" data-title="MediaTrackSupportedConstraints">dictionary <span class="idlDictionaryID">MediaTrackSupportedConstraints</span> {
<span class="idlMember" id="idl-def-mediatracksupportedconstraints-width" data-idl="" data-title="width" data-dfn-for="mediatracksupportedconstraints">    <span class="idlMemberType">boolean</span> <span class="idlMemberName"><a data-lt="width" href="#dom-mediatracksupportedconstraints-width" class="internalDFN" data-link-type="dfn" data-for="MediaTrackSupportedConstraints"><code>width</code></a></span> = <span class="idlMemberValue">true</span>;</span>
<span class="idlMember" id="idl-def-mediatracksupportedconstraints-height" data-idl="" data-title="height" data-dfn-for="mediatracksupportedconstraints">    <span class="idlMemberType">boolean</span> <span class="idlMemberName"><a data-lt="height" href="#dom-mediatracksupportedconstraints-height" class="internalDFN" data-link-type="dfn" data-for="MediaTrackSupportedConstraints"><code>height</code></a></span> = <span class="idlMemberValue">true</span>;</span>
<span class="idlMember" id="idl-def-mediatracksupportedconstraints-aspectratio" data-idl="" data-title="aspectRatio" data-dfn-for="mediatracksupportedconstraints">    <span class="idlMemberType">boolean</span> <span class="idlMemberName"><a data-lt="aspectRatio" href="#dom-mediatracksupportedconstraints-aspectratio" class="internalDFN" data-link-type="dfn" data-for="MediaTrackSupportedConstraints"><code>aspectRatio</code></a></span> = <span class="idlMemberValue">true</span>;</span>
<span class="idlMember" id="idl-def-mediatracksupportedconstraints-framerate" data-idl="" data-title="frameRate" data-dfn-for="mediatracksupportedconstraints">    <span class="idlMemberType">boolean</span> <span class="idlMemberName"><a data-lt="frameRate" href="#dom-mediatracksupportedconstraints-framerate" class="internalDFN" data-link-type="dfn" data-for="MediaTrackSupportedConstraints"><code>frameRate</code></a></span> = <span class="idlMemberValue">true</span>;</span>
<span class="idlMember" id="idl-def-mediatracksupportedconstraints-facingmode" data-idl="" data-title="facingMode" data-dfn-for="mediatracksupportedconstraints">    <span class="idlMemberType">boolean</span> <span class="idlMemberName"><a data-lt="facingMode" href="#dom-mediatracksupportedconstraints-facingmode" class="internalDFN" data-link-type="dfn" data-for="MediaTrackSupportedConstraints"><code>facingMode</code></a></span> = <span class="idlMemberValue">true</span>;</span>
<span class="idlMember" id="idl-def-mediatracksupportedconstraints-volume" data-idl="" data-title="volume" data-dfn-for="mediatracksupportedconstraints">    <span class="idlMemberType">boolean</span> <span class="idlMemberName"><a data-lt="volume" href="#dom-mediatracksupportedconstraints-volume" class="internalDFN" data-link-type="dfn" data-for="MediaTrackSupportedConstraints"><code>volume</code></a></span> = <span class="idlMemberValue">true</span>;</span>
<span class="idlMember" id="idl-def-mediatracksupportedconstraints-samplerate" data-idl="" data-title="sampleRate" data-dfn-for="mediatracksupportedconstraints">    <span class="idlMemberType">boolean</span> <span class="idlMemberName"><a data-lt="sampleRate" href="#dom-mediatracksupportedconstraints-samplerate" class="internalDFN" data-link-type="dfn" data-for="MediaTrackSupportedConstraints"><code>sampleRate</code></a></span> = <span class="idlMemberValue">true</span>;</span>
<span class="idlMember" id="idl-def-mediatracksupportedconstraints-samplesize" data-idl="" data-title="sampleSize" data-dfn-for="mediatracksupportedconstraints">    <span class="idlMemberType">boolean</span> <span class="idlMemberName"><a data-lt="sampleSize" href="#dom-mediatracksupportedconstraints-samplesize" class="internalDFN" data-link-type="dfn" data-for="MediaTrackSupportedConstraints"><code>sampleSize</code></a></span> = <span class="idlMemberValue">true</span>;</span>
<span class="idlMember" id="idl-def-mediatracksupportedconstraints-echocancellation" data-idl="" data-title="echoCancellation" data-dfn-for="mediatracksupportedconstraints">    <span class="idlMemberType">boolean</span> <span class="idlMemberName"><a data-lt="echoCancellation" href="#dom-mediatracksupportedconstraints-echocancellation" class="internalDFN" data-link-type="dfn" data-for="MediaTrackSupportedConstraints"><code>echoCancellation</code></a></span> = <span class="idlMemberValue">true</span>;</span>
<span class="idlMember" id="idl-def-mediatracksupportedconstraints-latency" data-idl="" data-title="latency" data-dfn-for="mediatracksupportedconstraints">    <span class="idlMemberType">boolean</span> <span class="idlMemberName"><a data-lt="latency" href="#dom-mediatracksupportedconstraints-latency" class="internalDFN" data-link-type="dfn" data-for="MediaTrackSupportedConstraints"><code>latency</code></a></span> = <span class="idlMemberValue">true</span>;</span>
<span class="idlMember" id="idl-def-mediatracksupportedconstraints-channelcount" data-idl="" data-title="channelCount" data-dfn-for="mediatracksupportedconstraints">    <span class="idlMemberType">boolean</span> <span class="idlMemberName"><a data-lt="channelCount" href="#dom-mediatracksupportedconstraints-channelcount" class="internalDFN" data-link-type="dfn" data-for="MediaTrackSupportedConstraints"><code>channelCount</code></a></span> = <span class="idlMemberValue">true</span>;</span>
<span class="idlMember" id="idl-def-mediatracksupportedconstraints-deviceid" data-idl="" data-title="deviceId" data-dfn-for="mediatracksupportedconstraints">    <span class="idlMemberType">boolean</span> <span class="idlMemberName"><a data-lt="deviceId" href="#dom-mediatracksupportedconstraints-deviceid" class="internalDFN" data-link-type="dfn" data-for="MediaTrackSupportedConstraints"><code>deviceId</code></a></span> = <span class="idlMemberValue">true</span>;</span>
<span class="idlMember" id="idl-def-mediatracksupportedconstraints-groupid" data-idl="" data-title="groupId" data-dfn-for="mediatracksupportedconstraints">    <span class="idlMemberType">boolean</span> <span class="idlMemberName"><a data-lt="groupId" href="#dom-mediatracksupportedconstraints-groupid" class="internalDFN" data-link-type="dfn" data-for="MediaTrackSupportedConstraints"><code>groupId</code></a></span> = <span class="idlMemberValue">true</span>;</span>
};</span></pre>

          <section typeof="bibo:Chapter" resource="#dictionary-mediatracksupportedconstraints-members" property="bibo:hasPart">
            <h5 id="dictionary-mediatracksupportedconstraints-members" resource="#dictionary-mediatracksupportedconstraints-members"><span property="xhv:role" resource="xhv:heading">Dictionary <a class="idlType internalDFN" href="#idl-def-mediatracksupportedconstraints" data-link-type="dfn"><code>MediaTrackSupportedConstraints</code></a> Members</span></h5>
            <dl data-link-for="MediaTrackSupportedConstraints" data-dfn-for="MediaTrackSupportedConstraints" class="dictionary-members">
              <dt><dfn data-dfn-for="mediatracksupportedconstraints" data-dfn-type="dfn" id="dom-mediatracksupportedconstraints-width" data-idl=""><code>width</code></dfn> of type <span class="idlMemberType">boolean</span>, defaulting to
              <code>true</code></dt>
              <dd>See <code><a href="#def-constraint-width">width</a></code> for details.</dd>
              <dt><dfn data-dfn-for="mediatracksupportedconstraints" data-dfn-type="dfn" id="dom-mediatracksupportedconstraints-height" data-idl=""><code>height</code></dfn> of type <span class="idlMemberType">boolean</span>, defaulting to
              <code>true</code></dt>
              <dd>See <code><a href="#def-constraint-height">height</a></code> for details.</dd>
              <dt><dfn data-dfn-for="mediatracksupportedconstraints" data-dfn-type="dfn" id="dom-mediatracksupportedconstraints-aspectratio" data-idl=""><code>aspectRatio</code></dfn> of type <span class="idlMemberType">boolean</span>, defaulting to
              <code>true</code></dt>
              <dd>See <code><a href="#def-constraint-aspect">aspectRatio</a></code> for details.</dd>
              <dt><dfn data-dfn-for="mediatracksupportedconstraints" data-dfn-type="dfn" id="dom-mediatracksupportedconstraints-framerate" data-idl=""><code>frameRate</code></dfn> of type <span class="idlMemberType">boolean</span>, defaulting to
              <code>true</code></dt>
              <dd>See <code><a href="#def-constraint-frameRate">frameRate</a></code> for details.
              </dd>
              <dt><dfn data-dfn-for="mediatracksupportedconstraints" data-dfn-type="dfn" id="dom-mediatracksupportedconstraints-facingmode" data-idl=""><code>facingMode</code></dfn> of type <span class="idlMemberType">boolean</span>, defaulting to
              <code>true</code></dt>
              <dd>See <code><a href="#def-constraint-facingMode">facingMode</a></code> for details.
              </dd>
              <dt><dfn data-dfn-for="mediatracksupportedconstraints" data-dfn-type="dfn" id="dom-mediatracksupportedconstraints-volume" data-idl=""><code>volume</code></dfn> of type <span class="idlMemberType">boolean</span>, defaulting to
              <code>true</code></dt>
              <dd>See <code><a href="#def-constraint-volume">volume</a></code> for details.</dd>
              <dt><dfn data-dfn-for="mediatracksupportedconstraints" data-dfn-type="dfn" id="dom-mediatracksupportedconstraints-samplerate" data-idl=""><code>sampleRate</code></dfn> of type <span class="idlMemberType">boolean</span>, defaulting to
              <code>true</code></dt>
              <dd>See <code><a href="#def-constraint-sampleRate">sampleRate</a></code> for details.
              </dd>
              <dt><dfn data-dfn-for="mediatracksupportedconstraints" data-dfn-type="dfn" id="dom-mediatracksupportedconstraints-samplesize" data-idl=""><code>sampleSize</code></dfn> of type <span class="idlMemberType">boolean</span>, defaulting to
              <code>true</code></dt>
              <dd>See <code><a href="#def-constraint-sampleSize">sampleSize</a></code> for details.
              </dd>
              <dt><dfn data-dfn-for="mediatracksupportedconstraints" data-dfn-type="dfn" id="dom-mediatracksupportedconstraints-echocancellation" data-idl=""><code>echoCancellation</code></dfn> of type <span class="idlMemberType">boolean</span>, defaulting to
              <code>true</code></dt>
              <dd>See <code><a href="#def-constraint-echoCancellation">echoCancellation</a></code> for details.</dd>
              <dt><dfn data-dfn-for="mediatracksupportedconstraints" data-dfn-type="dfn" id="dom-mediatracksupportedconstraints-latency" data-idl=""><code>latency</code></dfn> of type <span class="idlMemberType">boolean</span>, defaulting to
              <code>true</code></dt>
              <dd>See <code><a href="#def-constraint-latency">latency</a></code> for details.</dd>
              <dt><dfn data-dfn-for="mediatracksupportedconstraints" data-dfn-type="dfn" id="dom-mediatracksupportedconstraints-channelcount" data-idl=""><code>channelCount</code></dfn> of type <span class="idlMemberType">boolean</span>, defaulting to
              <code>true</code></dt>
              <dd>See <code><a href="#def-constraint-channelCount">channelCount</a></code> for details.
              </dd>
              <dt><dfn data-dfn-for="mediatracksupportedconstraints" data-dfn-type="dfn" id="dom-mediatracksupportedconstraints-deviceid" data-idl=""><code>deviceId</code></dfn> of type <span class="idlMemberType">boolean</span>, defaulting to
              <code>true</code></dt>
              <dd>See <code><a href="#def-constraint-deviceId">deviceId</a></code> for details.</dd>
              <dt><dfn data-dfn-for="mediatracksupportedconstraints" data-dfn-type="dfn" id="dom-mediatracksupportedconstraints-groupid" data-idl=""><code>groupId</code></dfn> of type <span class="idlMemberType">boolean</span>, defaulting to
              <code>true</code></dt>
              <dd>See <code><a href="#def-constraint-groupId">groupId</a></code> for details.</dd>
            </dl>
          </section>
        </div>
      </section>

      <section id="media-track-capabilities" typeof="bibo:Chapter" resource="#media-track-capabilities" property="bibo:hasPart">
        <h4 id="h-media-track-capabilities" resource="#h-media-track-capabilities"><span property="xhv:role" resource="xhv:heading"><span class="secno">4.3.5 </span>MediaTrackCapabilities</span>
        </h4>
        <p><code><a href="#idl-def-mediatrackcapabilities" class="internalDFN" data-link-type="dfn"><code>MediaTrackCapabilities</code></a>
          </code> represents the
          <a href="#dom-capabilities" class="internalDFN" data-link-type="dfn"><code>Capabilities</code></a> of a <code><a href="#idl-def-mediastreamtrack" class="internalDFN" data-link-type="dfn"><code>MediaStreamTrack</code></a>
          </code>
          object.</p>
        <p>Future specifications can extend the MediaTrackCapabilities dictionary by defining a partial dictionary with dictionary members of appropriate type.</p>
        <div>
          <pre class="def idl"><span class="idlDictionary" id="idl-def-mediatrackcapabilities" data-idl="" data-title="MediaTrackCapabilities">dictionary <span class="idlDictionaryID">MediaTrackCapabilities</span> {
<span class="idlMember" id="idl-def-mediatrackcapabilities-width" data-idl="" data-title="width" data-dfn-for="mediatrackcapabilities">    <span class="idlMemberType"><a href="#idl-def-longrange" class="internalDFN" data-link-type="dfn"><code>LongRange</code></a></span>           <span class="idlMemberName"><a data-lt="width" href="#dom-mediatrackcapabilities-width" class="internalDFN" data-link-type="dfn" data-for="MediaTrackCapabilities"><code>width</code></a></span>;</span>
<span class="idlMember" id="idl-def-mediatrackcapabilities-height" data-idl="" data-title="height" data-dfn-for="mediatrackcapabilities">    <span class="idlMemberType"><a href="#idl-def-longrange" class="internalDFN" data-link-type="dfn"><code>LongRange</code></a></span>           <span class="idlMemberName"><a data-lt="height" href="#dom-mediatrackcapabilities-height" class="internalDFN" data-link-type="dfn" data-for="MediaTrackCapabilities"><code>height</code></a></span>;</span>
<span class="idlMember" id="idl-def-mediatrackcapabilities-aspectratio" data-idl="" data-title="aspectRatio" data-dfn-for="mediatrackcapabilities">    <span class="idlMemberType"><a href="#idl-def-doublerange" class="internalDFN" data-link-type="dfn"><code>DoubleRange</code></a></span>         <span class="idlMemberName"><a data-lt="aspectRatio" href="#dom-mediatrackcapabilities-aspectratio" class="internalDFN" data-link-type="dfn" data-for="MediaTrackCapabilities"><code>aspectRatio</code></a></span>;</span>
<span class="idlMember" id="idl-def-mediatrackcapabilities-framerate" data-idl="" data-title="frameRate" data-dfn-for="mediatrackcapabilities">    <span class="idlMemberType"><a href="#idl-def-doublerange" class="internalDFN" data-link-type="dfn"><code>DoubleRange</code></a></span>         <span class="idlMemberName"><a data-lt="frameRate" href="#dom-mediatrackcapabilities-framerate" class="internalDFN" data-link-type="dfn" data-for="MediaTrackCapabilities"><code>frameRate</code></a></span>;</span>
<span class="idlMember" id="idl-def-mediatrackcapabilities-facingmode" data-idl="" data-title="facingMode" data-dfn-for="mediatrackcapabilities">    <span class="idlMemberType">sequence&lt;DOMString&gt;</span> <span class="idlMemberName"><a data-lt="facingMode" href="#dom-mediatrackcapabilities-facingmode" class="internalDFN" data-link-type="dfn" data-for="MediaTrackCapabilities"><code>facingMode</code></a></span>;</span>
<span class="idlMember" id="idl-def-mediatrackcapabilities-volume" data-idl="" data-title="volume" data-dfn-for="mediatrackcapabilities">    <span class="idlMemberType"><a href="#idl-def-doublerange" class="internalDFN" data-link-type="dfn"><code>DoubleRange</code></a></span>         <span class="idlMemberName"><a data-lt="volume" href="#dom-mediatrackcapabilities-volume" class="internalDFN" data-link-type="dfn" data-for="MediaTrackCapabilities"><code>volume</code></a></span>;</span>
<span class="idlMember" id="idl-def-mediatrackcapabilities-samplerate" data-idl="" data-title="sampleRate" data-dfn-for="mediatrackcapabilities">    <span class="idlMemberType"><a href="#idl-def-longrange" class="internalDFN" data-link-type="dfn"><code>LongRange</code></a></span>           <span class="idlMemberName"><a data-lt="sampleRate" href="#dom-mediatrackcapabilities-samplerate" class="internalDFN" data-link-type="dfn" data-for="MediaTrackCapabilities"><code>sampleRate</code></a></span>;</span>
<span class="idlMember" id="idl-def-mediatrackcapabilities-samplesize" data-idl="" data-title="sampleSize" data-dfn-for="mediatrackcapabilities">    <span class="idlMemberType"><a href="#idl-def-longrange" class="internalDFN" data-link-type="dfn"><code>LongRange</code></a></span>           <span class="idlMemberName"><a data-lt="sampleSize" href="#dom-mediatrackcapabilities-samplesize" class="internalDFN" data-link-type="dfn" data-for="MediaTrackCapabilities"><code>sampleSize</code></a></span>;</span>
<span class="idlMember" id="idl-def-mediatrackcapabilities-echocancellation" data-idl="" data-title="echoCancellation" data-dfn-for="mediatrackcapabilities">    <span class="idlMemberType">sequence&lt;boolean&gt;</span>   <span class="idlMemberName"><a data-lt="echoCancellation" href="#dom-mediatrackcapabilities-echocancellation" class="internalDFN" data-link-type="dfn" data-for="MediaTrackCapabilities"><code>echoCancellation</code></a></span>;</span>
<span class="idlMember" id="idl-def-mediatrackcapabilities-latency" data-idl="" data-title="latency" data-dfn-for="mediatrackcapabilities">    <span class="idlMemberType"><a href="#idl-def-doublerange" class="internalDFN" data-link-type="dfn"><code>DoubleRange</code></a></span>         <span class="idlMemberName"><a data-lt="latency" href="#dom-mediatrackcapabilities-latency" class="internalDFN" data-link-type="dfn" data-for="MediaTrackCapabilities"><code>latency</code></a></span>;</span>
<span class="idlMember" id="idl-def-mediatrackcapabilities-channelcount" data-idl="" data-title="channelCount" data-dfn-for="mediatrackcapabilities">    <span class="idlMemberType"><a href="#idl-def-longrange" class="internalDFN" data-link-type="dfn"><code>LongRange</code></a></span>           <span class="idlMemberName"><a data-lt="channelCount" href="#dom-mediatrackcapabilities-channelcount" class="internalDFN" data-link-type="dfn" data-for="MediaTrackCapabilities"><code>channelCount</code></a></span>;</span>
<span class="idlMember" id="idl-def-mediatrackcapabilities-deviceid" data-idl="" data-title="deviceId" data-dfn-for="mediatrackcapabilities">    <span class="idlMemberType">DOMString</span>           <span class="idlMemberName"><a data-lt="deviceId" href="#dom-mediatrackcapabilities-deviceid" class="internalDFN" data-link-type="dfn" data-for="MediaTrackCapabilities"><code>deviceId</code></a></span>;</span>
<span class="idlMember" id="idl-def-mediatrackcapabilities-groupid" data-idl="" data-title="groupId" data-dfn-for="mediatrackcapabilities">    <span class="idlMemberType">DOMString</span>           <span class="idlMemberName"><a data-lt="groupId" href="#dom-mediatrackcapabilities-groupid" class="internalDFN" data-link-type="dfn" data-for="MediaTrackCapabilities"><code>groupId</code></a></span>;</span>
};</span></pre>

          <section typeof="bibo:Chapter" resource="#dictionary-mediatrackcapabilities-members" property="bibo:hasPart">
            <h5 id="dictionary-mediatrackcapabilities-members" resource="#dictionary-mediatrackcapabilities-members"><span property="xhv:role" resource="xhv:heading">Dictionary <a class="idlType internalDFN" href="#idl-def-mediatrackcapabilities" data-link-type="dfn"><code>MediaTrackCapabilities</code></a>
            Members</span></h5>
            <dl data-link-for="MediaTrackCapabilities" data-dfn-for="MediaTrackCapabilities" class="dictionary-members">
              <dt><dfn data-dfn-for="mediatrackcapabilities" data-dfn-type="dfn" id="dom-mediatrackcapabilities-width" data-idl=""><code>width</code></dfn> of type <span class="idlMemberType"><a href="#idl-def-longrange" class="internalDFN" data-link-type="dfn"><code>LongRange</code></a></span></dt>
              <dd>See <code><a href="#def-constraint-width">width</a></code> for details.</dd>
              <dt><dfn data-dfn-for="mediatrackcapabilities" data-dfn-type="dfn" id="dom-mediatrackcapabilities-height" data-idl=""><code>height</code></dfn> of type <span class="idlMemberType"><a href="#idl-def-longrange" class="internalDFN" data-link-type="dfn"><code>LongRange</code></a></span></dt>
              <dd>See <code><a href="#def-constraint-height">height</a></code> for details.</dd>
              <dt><dfn data-dfn-for="mediatrackcapabilities" data-dfn-type="dfn" id="dom-mediatrackcapabilities-aspectratio" data-idl=""><code>aspectRatio</code></dfn> of type <span class="idlMemberType"><a href="#idl-def-doublerange" class="internalDFN" data-link-type="dfn"><code>DoubleRange</code></a></span></dt>
              <dd>See <code><a href="#def-constraint-aspect">aspectRatio</a></code> for details.</dd>
              <dt><dfn data-dfn-for="mediatrackcapabilities" data-dfn-type="dfn" id="dom-mediatrackcapabilities-framerate" data-idl=""><code>frameRate</code></dfn> of type <span class="idlMemberType"><a href="#idl-def-doublerange" class="internalDFN" data-link-type="dfn"><code>DoubleRange</code></a></span></dt>
              <dd>See <code><a href="#def-constraint-frameRate">frameRate</a></code> for details.
              </dd>
              <dt><dfn data-dfn-for="mediatrackcapabilities" data-dfn-type="dfn" id="dom-mediatrackcapabilities-facingmode" data-idl=""><code>facingMode</code></dfn> of type <span class="idlMemberType">sequence&lt;DOMString&gt;</span></dt>
              <dd>
                <p>A camera can report multiple facing modes. For example, in a high-end telepresence solution with several cameras facing the user, a camera to the left of the user can report both "left" and "user". See <code><a href="#def-constraint-facingMode">facingMode</a></code> for additional details.</p>
              </dd>
              <dt><dfn data-dfn-for="mediatrackcapabilities" data-dfn-type="dfn" id="dom-mediatrackcapabilities-volume" data-idl=""><code>volume</code></dfn> of type <span class="idlMemberType"><a href="#idl-def-doublerange" class="internalDFN" data-link-type="dfn"><code>DoubleRange</code></a></span></dt>
              <dd>See <code><a href="#def-constraint-volume">volume</a></code> for details.</dd>
              <dt><dfn data-dfn-for="mediatrackcapabilities" data-dfn-type="dfn" id="dom-mediatrackcapabilities-samplerate" data-idl=""><code>sampleRate</code></dfn> of type <span class="idlMemberType"><a href="#idl-def-longrange" class="internalDFN" data-link-type="dfn"><code>LongRange</code></a></span></dt>
              <dd>See <code><a href="#def-constraint-sampleRate">sampleRate</a></code> for details.
              </dd>
              <dt><dfn data-dfn-for="mediatrackcapabilities" data-dfn-type="dfn" id="dom-mediatrackcapabilities-samplesize" data-idl=""><code>sampleSize</code></dfn> of type <span class="idlMemberType"><a href="#idl-def-longrange" class="internalDFN" data-link-type="dfn"><code>LongRange</code></a></span></dt>
              <dd>See <code><a href="#def-constraint-sampleSize">sampleSize</a></code> for details.
              </dd>
              <dt><dfn data-dfn-for="mediatrackcapabilities" data-dfn-type="dfn" id="dom-mediatrackcapabilities-echocancellation" data-idl=""><code>echoCancellation</code></dfn> of type <span class="idlMemberType">sequence&lt;boolean&gt;</span></dt>
              <dd>
                <p>If the source cannot do echo cancellation a single
                  <code>false</code> is reported. If echo cancellation cannot be turned off, a single <code>true</code> is reported. If the script can control the feature, the source reports a list with both <code>true</code> and <code>false</code> as possible values. See <code><a href="#def-constraint-echoCancellation">echoCancellation</a></code> for additional details.</p>
              </dd>
              <dt><dfn data-dfn-for="mediatrackcapabilities" data-dfn-type="dfn" id="dom-mediatrackcapabilities-latency" data-idl=""><code>latency</code></dfn> of type <span class="idlMemberType"><a href="#idl-def-doublerange" class="internalDFN" data-link-type="dfn"><code>DoubleRange</code></a></span></dt>
              <dd>See <code><a href="#def-constraint-latency">latency</a></code> for details.</dd>
              <dt><dfn data-dfn-for="mediatrackcapabilities" data-dfn-type="dfn" id="dom-mediatrackcapabilities-channelcount" data-idl=""><code>channelCount</code></dfn> of type <span class="idlMemberType"><a href="#idl-def-longrange" class="internalDFN" data-link-type="dfn"><code>LongRange</code></a></span></dt>
              <dd>See <code><a href="#def-constraint-channelCount">channelCount</a></code> for details.
              </dd>
              <dt><dfn data-dfn-for="mediatrackcapabilities" data-dfn-type="dfn" id="dom-mediatrackcapabilities-deviceid" data-idl=""><code>deviceId</code></dfn> of type <span class="idlMemberType">DOMString</span></dt>
              <dd>See <code><a href="#def-constraint-deviceId">deviceId</a></code> for details.</dd>
              <dt><dfn data-dfn-for="mediatrackcapabilities" data-dfn-type="dfn" id="dom-mediatrackcapabilities-groupid" data-idl=""><code>groupId</code></dfn> of type <span class="idlMemberType">DOMString</span></dt>
              <dd>See <code><a href="#def-constraint-groupId">groupId</a></code> for details.</dd>
            </dl>
          </section>
        </div>
      </section>

      <section id="media-track-constraints" typeof="bibo:Chapter" resource="#media-track-constraints" property="bibo:hasPart">
        <h4 id="h-media-track-constraints" resource="#h-media-track-constraints"><span property="xhv:role" resource="xhv:heading"><span class="secno">4.3.6 </span>MediaTrackConstraints</span>
        </h4>
        <div>
          <pre class="def idl"><span class="idlDictionary" id="idl-def-mediatrackconstraints" data-idl="" data-title="MediaTrackConstraints">dictionary <span class="idlDictionaryID">MediaTrackConstraints</span> : <span class="idlSuperclass"><a href="#idl-def-mediatrackconstraintset" class="internalDFN" data-link-type="dfn"><code>MediaTrackConstraintSet</code></a></span> {
<span class="idlMember" id="idl-def-mediatrackconstraints-advanced" data-idl="" data-title="advanced" data-dfn-for="mediatrackconstraints">    <span class="idlMemberType">sequence&lt;<a href="#idl-def-mediatrackconstraintset" class="internalDFN" data-link-type="dfn"><code>MediaTrackConstraintSet</code></a>&gt;</span> <span class="idlMemberName"><a data-lt="advanced" href="#dom-mediatrackconstraints-advanced" class="internalDFN" data-link-type="dfn" data-for="MediaTrackConstraints"><code>advanced</code></a></span>;</span>
};</span></pre>

          <section typeof="bibo:Chapter" resource="#dictionary-mediatrackconstraints-members" property="bibo:hasPart">
            <h5 id="dictionary-mediatrackconstraints-members" resource="#dictionary-mediatrackconstraints-members"><span property="xhv:role" resource="xhv:heading">Dictionary <a class="idlType internalDFN" href="#idl-def-mediatrackconstraints" data-link-type="dfn"><code>MediaTrackConstraints</code></a>
            Members</span></h5>
            <dl data-link-for="MediaTrackConstraints" data-dfn-for="MediaTrackConstraints" class="dictionary-members">
              <dt><dfn data-dfn-for="mediatrackconstraints" data-dfn-type="dfn" id="dom-mediatrackconstraints-advanced" data-idl=""><code>advanced</code></dfn> of type <span class="idlMemberType">sequence&lt;<a href="#idl-def-mediatrackconstraintset" class="internalDFN" data-link-type="dfn"><code>MediaTrackConstraintSet</code></a>&gt;</span></dt>
              <dd>
                <p>See <a href="#constraints">Constraints and ConstraintSet</a> for the definition of this element.</p>
              </dd>
            </dl>
          </section>
        </div>
        <p>Future specifications can extend the MediaTrackConstraintSet dictionary by defining a partial dictionary with dictionary members of appropriate type.</p>
        <div>
          <pre class="def idl"><span class="idlDictionary" id="idl-def-mediatrackconstraintset" data-idl="" data-title="MediaTrackConstraintSet">dictionary <span class="idlDictionaryID">MediaTrackConstraintSet</span> {
<span class="idlMember" id="idl-def-mediatrackconstraintset-width" data-idl="" data-title="width" data-dfn-for="mediatrackconstraintset">    <span class="idlMemberType"><a href="#idl-def-constrainlong" class="internalDFN" data-link-type="dfn"><code>ConstrainLong</code></a></span>      <span class="idlMemberName"><a data-lt="width" href="#dom-mediatrackconstraintset-width" class="internalDFN" data-link-type="dfn" data-for="MediaTrackConstraintSet"><code>width</code></a></span>;</span>
<span class="idlMember" id="idl-def-mediatrackconstraintset-height" data-idl="" data-title="height" data-dfn-for="mediatrackconstraintset">    <span class="idlMemberType"><a href="#idl-def-constrainlong" class="internalDFN" data-link-type="dfn"><code>ConstrainLong</code></a></span>      <span class="idlMemberName"><a data-lt="height" href="#dom-mediatrackconstraintset-height" class="internalDFN" data-link-type="dfn" data-for="MediaTrackConstraintSet"><code>height</code></a></span>;</span>
<span class="idlMember" id="idl-def-mediatrackconstraintset-aspectratio" data-idl="" data-title="aspectRatio" data-dfn-for="mediatrackconstraintset">    <span class="idlMemberType"><a href="#idl-def-constraindouble" class="internalDFN" data-link-type="dfn"><code>ConstrainDouble</code></a></span>    <span class="idlMemberName"><a data-lt="aspectRatio" href="#dom-mediatrackconstraintset-aspectratio" class="internalDFN" data-link-type="dfn" data-for="MediaTrackConstraintSet"><code>aspectRatio</code></a></span>;</span>
<span class="idlMember" id="idl-def-mediatrackconstraintset-framerate" data-idl="" data-title="frameRate" data-dfn-for="mediatrackconstraintset">    <span class="idlMemberType"><a href="#idl-def-constraindouble" class="internalDFN" data-link-type="dfn"><code>ConstrainDouble</code></a></span>    <span class="idlMemberName"><a data-lt="frameRate" href="#dom-mediatrackconstraintset-framerate" class="internalDFN" data-link-type="dfn" data-for="MediaTrackConstraintSet"><code>frameRate</code></a></span>;</span>
<span class="idlMember" id="idl-def-mediatrackconstraintset-facingmode" data-idl="" data-title="facingMode" data-dfn-for="mediatrackconstraintset">    <span class="idlMemberType"><a href="#idl-def-constraindomstring" class="internalDFN" data-link-type="dfn"><code>ConstrainDOMString</code></a></span> <span class="idlMemberName"><a data-lt="facingMode" href="#dom-mediatrackconstraintset-facingmode" class="internalDFN" data-link-type="dfn" data-for="MediaTrackConstraintSet"><code>facingMode</code></a></span>;</span>
<span class="idlMember" id="idl-def-mediatrackconstraintset-volume" data-idl="" data-title="volume" data-dfn-for="mediatrackconstraintset">    <span class="idlMemberType"><a href="#idl-def-constraindouble" class="internalDFN" data-link-type="dfn"><code>ConstrainDouble</code></a></span>    <span class="idlMemberName"><a data-lt="volume" href="#dom-mediatrackconstraintset-volume" class="internalDFN" data-link-type="dfn" data-for="MediaTrackConstraintSet"><code>volume</code></a></span>;</span>
<span class="idlMember" id="idl-def-mediatrackconstraintset-samplerate" data-idl="" data-title="sampleRate" data-dfn-for="mediatrackconstraintset">    <span class="idlMemberType"><a href="#idl-def-constrainlong" class="internalDFN" data-link-type="dfn"><code>ConstrainLong</code></a></span>      <span class="idlMemberName"><a data-lt="sampleRate" href="#dom-mediatrackconstraintset-samplerate" class="internalDFN" data-link-type="dfn" data-for="MediaTrackConstraintSet"><code>sampleRate</code></a></span>;</span>
<span class="idlMember" id="idl-def-mediatrackconstraintset-samplesize" data-idl="" data-title="sampleSize" data-dfn-for="mediatrackconstraintset">    <span class="idlMemberType"><a href="#idl-def-constrainlong" class="internalDFN" data-link-type="dfn"><code>ConstrainLong</code></a></span>      <span class="idlMemberName"><a data-lt="sampleSize" href="#dom-mediatrackconstraintset-samplesize" class="internalDFN" data-link-type="dfn" data-for="MediaTrackConstraintSet"><code>sampleSize</code></a></span>;</span>
<span class="idlMember" id="idl-def-mediatrackconstraintset-echocancellation" data-idl="" data-title="echoCancellation" data-dfn-for="mediatrackconstraintset">    <span class="idlMemberType"><a href="#idl-def-constrainboolean" class="internalDFN" data-link-type="dfn"><code>ConstrainBoolean</code></a></span>   <span class="idlMemberName"><a data-lt="echoCancellation" href="#dom-mediatrackconstraintset-echocancellation" class="internalDFN" data-link-type="dfn" data-for="MediaTrackConstraintSet"><code>echoCancellation</code></a></span>;</span>
<span class="idlMember" id="idl-def-mediatrackconstraintset-latency" data-idl="" data-title="latency" data-dfn-for="mediatrackconstraintset">    <span class="idlMemberType"><a href="#idl-def-constraindouble" class="internalDFN" data-link-type="dfn"><code>ConstrainDouble</code></a></span>    <span class="idlMemberName"><a data-lt="latency" href="#dom-mediatrackconstraintset-latency" class="internalDFN" data-link-type="dfn" data-for="MediaTrackConstraintSet"><code>latency</code></a></span>;</span>
<span class="idlMember" id="idl-def-mediatrackconstraintset-channelcount" data-idl="" data-title="channelCount" data-dfn-for="mediatrackconstraintset">    <span class="idlMemberType"><a href="#idl-def-constrainlong" class="internalDFN" data-link-type="dfn"><code>ConstrainLong</code></a></span>      <span class="idlMemberName"><a data-lt="channelCount" href="#dom-mediatrackconstraintset-channelcount" class="internalDFN" data-link-type="dfn" data-for="MediaTrackConstraintSet"><code>channelCount</code></a></span>;</span>
<span class="idlMember" id="idl-def-mediatrackconstraintset-deviceid" data-idl="" data-title="deviceId" data-dfn-for="mediatrackconstraintset">    <span class="idlMemberType"><a href="#idl-def-constraindomstring" class="internalDFN" data-link-type="dfn"><code>ConstrainDOMString</code></a></span> <span class="idlMemberName"><a data-lt="deviceId" href="#dom-mediatrackconstraintset-deviceid" class="internalDFN" data-link-type="dfn" data-for="MediaTrackConstraintSet"><code>deviceId</code></a></span>;</span>
<span class="idlMember" id="idl-def-mediatrackconstraintset-groupid" data-idl="" data-title="groupId" data-dfn-for="mediatrackconstraintset">    <span class="idlMemberType"><a href="#idl-def-constraindomstring" class="internalDFN" data-link-type="dfn"><code>ConstrainDOMString</code></a></span> <span class="idlMemberName"><a data-lt="groupId" href="#dom-mediatrackconstraintset-groupid" class="internalDFN" data-link-type="dfn" data-for="MediaTrackConstraintSet"><code>groupId</code></a></span>;</span>
};</span></pre>

          <section typeof="bibo:Chapter" resource="#dictionary-mediatrackconstraintset-members" property="bibo:hasPart">
            <h5 id="dictionary-mediatrackconstraintset-members" resource="#dictionary-mediatrackconstraintset-members"><span property="xhv:role" resource="xhv:heading">Dictionary <a class="idlType internalDFN" href="#idl-def-mediatrackconstraintset" data-link-type="dfn"><code>MediaTrackConstraintSet</code></a>
            Members</span></h5>
            <dl data-link-for="MediaTrackConstraintSet" data-dfn-for="MediaTrackConstraintSet" class="dictionary-members">
              <dt><dfn data-dfn-for="mediatrackconstraintset" data-dfn-type="dfn" id="dom-mediatrackconstraintset-width" data-idl=""><code>width</code></dfn> of type <span class="idlMemberType"><a href="#idl-def-constrainlong" class="internalDFN" data-link-type="dfn"><code>ConstrainLong</code></a></span></dt>
              <dd>See <code><a href="#def-constraint-width">width</a></code> for details.</dd>
              <dt><dfn data-dfn-for="mediatrackconstraintset" data-dfn-type="dfn" id="dom-mediatrackconstraintset-height" data-idl=""><code>height</code></dfn> of type <span class="idlMemberType"><a href="#idl-def-constrainlong" class="internalDFN" data-link-type="dfn"><code>ConstrainLong</code></a></span></dt>
              <dd>See <code><a href="#def-constraint-height">height</a></code> for details.</dd>
              <dt><dfn data-dfn-for="mediatrackconstraintset" data-dfn-type="dfn" id="dom-mediatrackconstraintset-aspectratio" data-idl=""><code>aspectRatio</code></dfn> of type <span class="idlMemberType"><a href="#idl-def-constraindouble" class="internalDFN" data-link-type="dfn"><code>ConstrainDouble</code></a></span></dt>
              <dd>See <code><a href="#def-constraint-aspect">aspectRatio</a></code> for details.</dd>
              <dt><dfn data-dfn-for="mediatrackconstraintset" data-dfn-type="dfn" id="dom-mediatrackconstraintset-framerate" data-idl=""><code>frameRate</code></dfn> of type <span class="idlMemberType"><a href="#idl-def-constraindouble" class="internalDFN" data-link-type="dfn"><code>ConstrainDouble</code></a></span></dt>
              <dd>See <code><a href="#def-constraint-frameRate">frameRate</a></code> for details.
              </dd>
              <dt><dfn data-dfn-for="mediatrackconstraintset" data-dfn-type="dfn" id="dom-mediatrackconstraintset-facingmode" data-idl=""><code>facingMode</code></dfn> of type <span class="idlMemberType"><a href="#idl-def-constraindomstring" class="internalDFN" data-link-type="dfn"><code>ConstrainDOMString</code></a></span></dt>
              <dd>See <code><a href="#def-constraint-facingMode">facingMode</a></code> for details.
              </dd>
              <dt><dfn data-dfn-for="mediatrackconstraintset" data-dfn-type="dfn" id="dom-mediatrackconstraintset-volume" data-idl=""><code>volume</code></dfn> of type <span class="idlMemberType"><a href="#idl-def-constraindouble" class="internalDFN" data-link-type="dfn"><code>ConstrainDouble</code></a></span></dt>
              <dd>See <code><a href="#def-constraint-volume">volume</a></code> for details.</dd>
              <dt><dfn data-dfn-for="mediatrackconstraintset" data-dfn-type="dfn" id="dom-mediatrackconstraintset-samplerate" data-idl=""><code>sampleRate</code></dfn> of type <span class="idlMemberType"><a href="#idl-def-constrainlong" class="internalDFN" data-link-type="dfn"><code>ConstrainLong</code></a></span></dt>
              <dd>See <code><a href="#def-constraint-sampleRate">sampleRate</a></code> for details.
              </dd>
              <dt><dfn data-dfn-for="mediatrackconstraintset" data-dfn-type="dfn" id="dom-mediatrackconstraintset-samplesize" data-idl=""><code>sampleSize</code></dfn> of type <span class="idlMemberType"><a href="#idl-def-constrainlong" class="internalDFN" data-link-type="dfn"><code>ConstrainLong</code></a></span></dt>
              <dd>See <code><a href="#def-constraint-sampleSize">sampleSize</a></code> for details.
              </dd>
              <dt><dfn data-dfn-for="mediatrackconstraintset" data-dfn-type="dfn" id="dom-mediatrackconstraintset-echocancellation" data-idl=""><code>echoCancellation</code></dfn> of type <span class="idlMemberType"><a href="#idl-def-constrainboolean" class="internalDFN" data-link-type="dfn"><code>ConstrainBoolean</code></a></span></dt>
              <dd>See <code><a href="#def-constraint-echoCancellation">echoCancellation</a></code> for details.</dd>
              <dt><dfn data-dfn-for="mediatrackconstraintset" data-dfn-type="dfn" id="dom-mediatrackconstraintset-latency" data-idl=""><code>latency</code></dfn> of type <span class="idlMemberType"><a href="#idl-def-constraindouble" class="internalDFN" data-link-type="dfn"><code>ConstrainDouble</code></a></span></dt>
              <dd>See <code><a href="#def-constraint-latency">latency</a></code> for details.</dd>
              <dt><dfn data-dfn-for="mediatrackconstraintset" data-dfn-type="dfn" id="dom-mediatrackconstraintset-channelcount" data-idl=""><code>channelCount</code></dfn> of type <span class="idlMemberType"><a href="#idl-def-constrainlong" class="internalDFN" data-link-type="dfn"><code>ConstrainLong</code></a></span></dt>
              <dd>See <code><a href="#def-constraint-channelCount">channelCount</a></code> for details.
              </dd>
              <dt><dfn data-dfn-for="mediatrackconstraintset" data-dfn-type="dfn" id="dom-mediatrackconstraintset-deviceid" data-idl=""><code>deviceId</code></dfn> of type <span class="idlMemberType"><a href="#idl-def-constraindomstring" class="internalDFN" data-link-type="dfn"><code>ConstrainDOMString</code></a></span></dt>
              <dd>See <code><a href="#def-constraint-deviceId">deviceId</a></code> for details.</dd>
              <dt><dfn data-dfn-for="mediatrackconstraintset" data-dfn-type="dfn" id="dom-mediatrackconstraintset-groupid" data-idl=""><code>groupId</code></dfn> of type <span class="idlMemberType"><a href="#idl-def-constraindomstring" class="internalDFN" data-link-type="dfn"><code>ConstrainDOMString</code></a></span></dt>
              <dd>See <code><a href="#def-constraint-groupId">groupId</a></code> for details.</dd>
            </dl>
          </section>
        </div>
      </section>

      <section id="media-track-settings" typeof="bibo:Chapter" resource="#media-track-settings" property="bibo:hasPart">
        <h4 id="h-media-track-settings" resource="#h-media-track-settings"><span property="xhv:role" resource="xhv:heading"><span class="secno">4.3.7 </span>MediaTrackSettings</span>
        </h4>
        <p><code><a href="#idl-def-mediatracksettings" class="internalDFN" data-link-type="dfn"><code>MediaTrackSettings</code></a>
          </code> represents the
          <a href="#dom-settings" class="internalDFN" data-link-type="dfn"><code>Settings</code></a> of a <code><a href="#idl-def-mediastreamtrack" class="internalDFN" data-link-type="dfn"><code>MediaStreamTrack</code></a>
          </code> object.</p>
        <p>Future specifications can extend the MediaTrackSettings dictionary by defining a partial dictionary with dictionary members of appropriate type.
        </p>
        <div>
          <pre class="def idl"><span class="idlDictionary" id="idl-def-mediatracksettings" data-idl="" data-title="MediaTrackSettings">dictionary <span class="idlDictionaryID">MediaTrackSettings</span> {
<span class="idlMember" id="idl-def-mediatracksettings-width" data-idl="" data-title="width" data-dfn-for="mediatracksettings">    <span class="idlMemberType">long</span>      <span class="idlMemberName"><a data-lt="width" href="#dom-mediatracksettings-width" class="internalDFN" data-link-type="dfn" data-for="MediaTrackSettings"><code>width</code></a></span>;</span>
<span class="idlMember" id="idl-def-mediatracksettings-height" data-idl="" data-title="height" data-dfn-for="mediatracksettings">    <span class="idlMemberType">long</span>      <span class="idlMemberName"><a data-lt="height" href="#dom-mediatracksettings-height" class="internalDFN" data-link-type="dfn" data-for="MediaTrackSettings"><code>height</code></a></span>;</span>
<span class="idlMember" id="idl-def-mediatracksettings-aspectratio" data-idl="" data-title="aspectRatio" data-dfn-for="mediatracksettings">    <span class="idlMemberType">double</span>    <span class="idlMemberName"><a data-lt="aspectRatio" href="#dom-mediatracksettings-aspectratio" class="internalDFN" data-link-type="dfn" data-for="MediaTrackSettings"><code>aspectRatio</code></a></span>;</span>
<span class="idlMember" id="idl-def-mediatracksettings-framerate" data-idl="" data-title="frameRate" data-dfn-for="mediatracksettings">    <span class="idlMemberType">double</span>    <span class="idlMemberName"><a data-lt="frameRate" href="#dom-mediatracksettings-framerate" class="internalDFN" data-link-type="dfn" data-for="MediaTrackSettings"><code>frameRate</code></a></span>;</span>
<span class="idlMember" id="idl-def-mediatracksettings-facingmode" data-idl="" data-title="facingMode" data-dfn-for="mediatracksettings">    <span class="idlMemberType">DOMString</span> <span class="idlMemberName"><a data-lt="facingMode" href="#dom-mediatracksettings-facingmode" class="internalDFN" data-link-type="dfn" data-for="MediaTrackSettings"><code>facingMode</code></a></span>;</span>
<span class="idlMember" id="idl-def-mediatracksettings-volume" data-idl="" data-title="volume" data-dfn-for="mediatracksettings">    <span class="idlMemberType">double</span>    <span class="idlMemberName"><a data-lt="volume" href="#dom-mediatracksettings-volume" class="internalDFN" data-link-type="dfn" data-for="MediaTrackSettings"><code>volume</code></a></span>;</span>
<span class="idlMember" id="idl-def-mediatracksettings-samplerate" data-idl="" data-title="sampleRate" data-dfn-for="mediatracksettings">    <span class="idlMemberType">long</span>      <span class="idlMemberName"><a data-lt="sampleRate" href="#dom-mediatracksettings-samplerate" class="internalDFN" data-link-type="dfn" data-for="MediaTrackSettings"><code>sampleRate</code></a></span>;</span>
<span class="idlMember" id="idl-def-mediatracksettings-samplesize" data-idl="" data-title="sampleSize" data-dfn-for="mediatracksettings">    <span class="idlMemberType">long</span>      <span class="idlMemberName"><a data-lt="sampleSize" href="#dom-mediatracksettings-samplesize" class="internalDFN" data-link-type="dfn" data-for="MediaTrackSettings"><code>sampleSize</code></a></span>;</span>
<span class="idlMember" id="idl-def-mediatracksettings-echocancellation" data-idl="" data-title="echoCancellation" data-dfn-for="mediatracksettings">    <span class="idlMemberType">boolean</span>   <span class="idlMemberName"><a data-lt="echoCancellation" href="#dom-mediatracksettings-echocancellation" class="internalDFN" data-link-type="dfn" data-for="MediaTrackSettings"><code>echoCancellation</code></a></span>;</span>
<span class="idlMember" id="idl-def-mediatracksettings-latency" data-idl="" data-title="latency" data-dfn-for="mediatracksettings">    <span class="idlMemberType">double</span>    <span class="idlMemberName"><a data-lt="latency" href="#dom-mediatracksettings-latency" class="internalDFN" data-link-type="dfn" data-for="MediaTrackSettings"><code>latency</code></a></span>;</span>
<span class="idlMember" id="idl-def-mediatracksettings-channelcount" data-idl="" data-title="channelCount" data-dfn-for="mediatracksettings">    <span class="idlMemberType">long</span>      <span class="idlMemberName"><a data-lt="channelCount" href="#dom-mediatracksettings-channelcount" class="internalDFN" data-link-type="dfn" data-for="MediaTrackSettings"><code>channelCount</code></a></span>;</span>
<span class="idlMember" id="idl-def-mediatracksettings-deviceid" data-idl="" data-title="deviceId" data-dfn-for="mediatracksettings">    <span class="idlMemberType">DOMString</span> <span class="idlMemberName"><a data-lt="deviceId" href="#dom-mediatracksettings-deviceid" class="internalDFN" data-link-type="dfn" data-for="MediaTrackSettings"><code>deviceId</code></a></span>;</span>
<span class="idlMember" id="idl-def-mediatracksettings-groupid" data-idl="" data-title="groupId" data-dfn-for="mediatracksettings">    <span class="idlMemberType">DOMString</span> <span class="idlMemberName"><a data-lt="groupId" href="#dom-mediatracksettings-groupid" class="internalDFN" data-link-type="dfn" data-for="MediaTrackSettings"><code>groupId</code></a></span>;</span>
};</span></pre>

          <section typeof="bibo:Chapter" resource="#dictionary-mediatracksettings-members" property="bibo:hasPart">
            <h5 id="dictionary-mediatracksettings-members" resource="#dictionary-mediatracksettings-members"><span property="xhv:role" resource="xhv:heading">Dictionary <a class="idlType internalDFN" href="#idl-def-mediatracksettings" data-link-type="dfn"><code>MediaTrackSettings</code></a>
            Members</span></h5>
            <dl data-link-for="MediaTrackSettings" data-dfn-for="MediaTrackSettings" class="dictionary-members">
              <dt><dfn data-dfn-for="mediatracksettings" data-dfn-type="dfn" id="dom-mediatracksettings-width" data-idl=""><code>width</code></dfn> of type <span class="idlMemberType">long</span></dt>
              <dd>See <code><a href="#def-constraint-width">width</a></code> for details.</dd>
              <dt><dfn data-dfn-for="mediatracksettings" data-dfn-type="dfn" id="dom-mediatracksettings-height" data-idl=""><code>height</code></dfn> of type <span class="idlMemberType">long</span></dt>
              <dd>See <code><a href="#def-constraint-height">height</a></code> for details.</dd>
              <dt><dfn data-dfn-for="mediatracksettings" data-dfn-type="dfn" id="dom-mediatracksettings-aspectratio" data-idl=""><code>aspectRatio</code></dfn> of type <span class="idlMemberType">double</span></dt>
              <dd>See <code><a href="#def-constraint-aspect">aspectRatio</a></code> for details.</dd>
              <dt><dfn data-dfn-for="mediatracksettings" data-dfn-type="dfn" id="dom-mediatracksettings-framerate" data-idl=""><code>frameRate</code></dfn> of type <span class="idlMemberType">double</span></dt>
              <dd>See <code><a href="#def-constraint-frameRate">frameRate</a></code> for details.
              </dd>
              <dt><dfn data-dfn-for="mediatracksettings" data-dfn-type="dfn" id="dom-mediatracksettings-facingmode" data-idl=""><code>facingMode</code></dfn> of type <span class="idlMemberType">DOMString</span></dt>
              <dd>See <code><a href="#def-constraint-facingMode">facingMode</a></code> for details.
              </dd>
              <dt><dfn data-dfn-for="mediatracksettings" data-dfn-type="dfn" id="dom-mediatracksettings-volume" data-idl=""><code>volume</code></dfn> of type <span class="idlMemberType">double</span></dt>
              <dd>See <code><a href="#def-constraint-volume">volume</a></code> for details.</dd>
              <dt><dfn data-dfn-for="mediatracksettings" data-dfn-type="dfn" id="dom-mediatracksettings-samplerate" data-idl=""><code>sampleRate</code></dfn> of type <span class="idlMemberType">long</span></dt>
              <dd>See <code><a href="#def-constraint-sampleRate">sampleRate</a></code> for details.
              </dd>
              <dt><dfn data-dfn-for="mediatracksettings" data-dfn-type="dfn" id="dom-mediatracksettings-samplesize" data-idl=""><code>sampleSize</code></dfn> of type <span class="idlMemberType">long</span></dt>
              <dd>See <code><a href="#def-constraint-sampleSize">sampleSize</a></code> for details.
              </dd>
              <dt><dfn data-dfn-for="mediatracksettings" data-dfn-type="dfn" id="dom-mediatracksettings-echocancellation" data-idl=""><code>echoCancellation</code></dfn> of type <span class="idlMemberType">boolean</span></dt>
              <dd>See <code><a href="#def-constraint-echoCancellation">echoCancellation</a></code> for details.</dd>
              <dt><dfn data-dfn-for="mediatracksettings" data-dfn-type="dfn" id="dom-mediatracksettings-latency" data-idl=""><code>latency</code></dfn> of type <span class="idlMemberType">double</span></dt>
              <dd>See <code><a href="#def-constraint-latency">latency</a></code> for details.</dd>
              <dt><dfn data-dfn-for="mediatracksettings" data-dfn-type="dfn" id="dom-mediatracksettings-channelcount" data-idl=""><code>channelCount</code></dfn> of type <span class="idlMemberType">long</span></dt>
              <dd>See <code><a href="#def-constraint-channelCount">channelCount</a></code> for details.
              </dd>
              <dt><dfn data-dfn-for="mediatracksettings" data-dfn-type="dfn" id="dom-mediatracksettings-deviceid" data-idl=""><code>deviceId</code></dfn> of type <span class="idlMemberType">DOMString</span></dt>
              <dd>See <code><a href="#def-constraint-deviceId">deviceId</a></code> for details.</dd>
              <dt><dfn data-dfn-for="mediatracksettings" data-dfn-type="dfn" id="dom-mediatracksettings-groupid" data-idl=""><code>groupId</code></dfn> of type <span class="idlMemberType">DOMString</span></dt>
              <dd>See <code><a href="#def-constraint-groupId">groupId</a></code> for details.</dd>
            </dl>
          </section>
        </div>
      </section>

      <section id="constrainable-properties" typeof="bibo:Chapter" resource="#constrainable-properties" property="bibo:hasPart">
        <h4 id="h-constrainable-properties" resource="#h-constrainable-properties"><span property="xhv:role" resource="xhv:heading"><span class="secno">4.3.8 </span>Constrainable Properties</span>
        </h4>
        <p>The names of the initial set of constrainable properties for MediaStreamTrack are defined below.</p>
        <p>The following constrainable properties are defined to apply to both video and audio <code><a href="#idl-def-mediastreamtrack" class="internalDFN" data-link-type="dfn"><code>MediaStreamTrack</code></a>
          </code> objects:</p>
        <table class="simple">
          <thead>
            <tr>
              <th>Property Name</th>
              <th>Values</th>
              <th>Notes</th>
            </tr>
          </thead>
          <tbody>
            <tr id="def-constraint-deviceId">
              <td><dfn data-dfn-type="dfn" id="dfn-deviceid">deviceId</dfn></td>
              <td>DOMString</td>
              <td>
                The origin-unique identifier for the source of the
                <a href="#idl-def-mediastreamtrack" class="internalDFN" data-link-type="dfn"><code>MediaStreamTrack</code></a>. The same identifier <em class="rfc2119" title="MUST">MUST</em> be valid between browsing sessions of this origin, but <em class="rfc2119" title="MUST">MUST</em> also be different for other origins. Some sort of GUID is recommended for the identifier. Note that the setting of this property is uniquely determined by the source that is attached to the
                <a href="#idl-def-mediastreamtrack" class="internalDFN" data-link-type="dfn"><code>MediaStreamTrack</code></a>. In particular,
                <a href="#dfn-getcapabilities" class="internalDFN" data-link-type="dfn">getCapabilities()</a> will return only a single value for deviceId. This property can therefore be used for initial media selection with <a href="#dom-mediadevices-getusermedia" class="internalDFN" data-link-type="dfn"><code>getUserMedia()</code></a>. However, it is not useful for subsequent media control with <a href="#dfn-applyconstraints" class="internalDFN" data-link-type="dfn">applyConstraints()</a>, since any attempt to set a different value will result in an unsatisfiable <a href="#idl-def-constraintset" class="internalDFN" data-link-type="dfn"><code>ConstraintSet</code></a>.
              </td>
            </tr>
            <tr id="def-constraint-groupId">
              <td><dfn data-dfn-type="dfn" id="dfn-groupid">groupId</dfn></td>
              <td>DOMString</td>
              <td>
                The browsing session-unique group identifier for the source of the <a href="#idl-def-mediastreamtrack" class="internalDFN" data-link-type="dfn"><code>MediaStreamTrack</code></a>. Two devices have the same group identifier if they belong to the same physical device; for example, the audio input and output devices representing the speaker and microphone of the same headset would have the same groupId. Note that the setting of this property is uniquely determined by the source that is attached to the
                <a href="#idl-def-mediastreamtrack" class="internalDFN" data-link-type="dfn"><code>MediaStreamTrack</code></a>. In particular,
                <a href="#dfn-getcapabilities" class="internalDFN" data-link-type="dfn">getCapabilities()</a> will return only a single value for groupId. Since this property is not stable between browsing sessions its usefulness for initial media selection with
                <a href="#dom-mediadevices-getusermedia" class="internalDFN" data-link-type="dfn"><code>getUserMedia()</code></a> is limited. It is not useful for subsequent media control with <a href="#dfn-applyconstraints" class="internalDFN" data-link-type="dfn">applyConstraints()</a>, since any attempt to set a different value will result in an unsatisfiable <a href="#idl-def-constraintset" class="internalDFN" data-link-type="dfn"><code>ConstraintSet</code></a>.
              </td>
            </tr>
          </tbody>
        </table>
        <p>The following constrainable properties are defined to apply only to video <code><a href="#idl-def-mediastreamtrack" class="internalDFN" data-link-type="dfn"><code>MediaStreamTrack</code></a>
          </code> objects:</p>
        <table class="simple">
          <thead>
            <tr>
              <th>Property Name</th>
              <th>Values</th>
              <th>Notes</th>
            </tr>
          </thead>
          <tbody>
            <tr id="def-constraint-width">
              <td><dfn data-dfn-type="dfn" id="dfn-width">width</dfn></td>
              <td><code><a href="#idl-def-constrainlong" class="internalDFN" data-link-type="dfn"><code>ConstrainLong</code></a>
                </code>
              </td>
              <td>The width or width range, in pixels. As a capability, the range should span the video source's pre-set width values with min being the smallest width and max being the largest width.
              </td>
            </tr>
            <tr id="def-constraint-height">
              <td><dfn data-dfn-type="dfn" id="dfn-height">height</dfn></td>
              <td><code><a href="#idl-def-constrainlong" class="internalDFN" data-link-type="dfn"><code>ConstrainLong</code></a>
                </code>
              </td>
              <td>The height or height range, in pixels. As a capability, the range should span the video source's pre-set height values with min being the smallest height and max being the largest height.
              </td>
            </tr>
            <tr id="def-constraint-frameRate">
              <td><dfn data-dfn-type="dfn" id="dfn-framerate">frameRate</dfn></td>
              <td><code><a href="#idl-def-constraindouble" class="internalDFN" data-link-type="dfn"><code>ConstrainDouble</code></a>
                </code>
              </td>
              <td>The exact frame rate (frames per second) or frame rate range. If this frame rate cannot be determined (e.g. the source does not natively provide a frame rate, or the frame rate cannot be determined from the source stream), then this value <em class="rfc2119" title="MUST">MUST</em> refer to the User Agent's vsync display rate.</td>
            </tr>
            <tr id="def-constraint-aspect">
              <td><dfn data-dfn-type="dfn" id="dfn-aspectratio">aspectRatio</dfn></td>
              <td><code><a href="#idl-def-constraindouble" class="internalDFN" data-link-type="dfn"><code>ConstrainDouble</code></a>
                </code>
              </td>
              <td>The exact aspect ratio (width in pixels divided by height in pixels, represented as a double rounded to the tenth decimal place) or aspect ratio range.</td>
            </tr>
            <tr id="def-constraint-facingMode">
              <td><dfn data-dfn-type="dfn" id="dfn-facingmode">facingMode</dfn></td>
              <td><code><a href="#idl-def-constraindomstring" class="internalDFN" data-link-type="dfn"><code>ConstrainDOMString</code></a>
                </code>
              </td>
              <td>This string (or each string, when a list) should be one of the members of <code><a href="#idl-def-videofacingmodeenum" class="internalDFN" data-link-type="dfn"><code>VideoFacingModeEnum</code></a>
                </code>. The members describe the directions that the camera can face, as seen from the user's perspective. Note that <code><a data-link-for="ConstrainablePattern" href="#dom-constrainablepattern-getconstraints" class="internalDFN" data-link-type="dfn"><code>getConstraints</code></a>
                </code> may not return exactly the same string for strings not in this enum. This preserves the possibility of using a future version of WebIDL enum for this property.</td>
            </tr>
          </tbody>
        </table>
        <div>
          <pre class="def idl"><span class="idlEnum" id="idl-def-videofacingmodeenum" data-idl="" data-title="VideoFacingModeEnum">enum <span class="idlEnumID">VideoFacingModeEnum</span> {
    "<a href="#dom-videofacingmodeenum-user" class="idlEnumItem">user</a>",
    "<a href="#dom-videofacingmodeenum-environment" class="idlEnumItem">environment</a>",
    "<a href="#dom-videofacingmodeenum-left" class="idlEnumItem">left</a>",
    "<a href="#dom-videofacingmodeenum-right" class="idlEnumItem">right</a>"
};</span></pre>
          <table data-link-for="VideoFacingModeEnum" data-dfn-for="VideoFacingModeEnum" class="simple">
            <tbody>
              <tr>
                <th colspan="2">Enumeration description</th>
              </tr>
              <tr>
                <td><dfn data-dfn-for="videofacingmodeenum" data-dfn-type="dfn" id="dom-videofacingmodeenum-user" data-idl=""><code id="idl-def-VideoFacingModeEnum.user">user</code></dfn></td>
                <td>
                  <p>The source is facing toward the user (a self-view camera).
                  </p>
                </td>
              </tr>
              <tr>
                <td><dfn data-dfn-for="videofacingmodeenum" data-dfn-type="dfn" id="dom-videofacingmodeenum-environment" data-idl=""><code id="idl-def-VideoFacingModeEnum.environment">environment</code></dfn></td>
                <td>
                  <p>The source is facing away from the user (viewing the environment).
                  </p>
                </td>
              </tr>
              <tr>
                <td><dfn data-dfn-for="videofacingmodeenum" data-dfn-type="dfn" id="dom-videofacingmodeenum-left" data-idl=""><code id="idl-def-VideoFacingModeEnum.left">left</code></dfn></td>
                <td>
                  <p>The source is facing to the left of the user.</p>
                </td>
              </tr>
              <tr>
                <td><dfn data-dfn-for="videofacingmodeenum" data-dfn-type="dfn" id="dom-videofacingmodeenum-right" data-idl=""><code id="idl-def-VideoFacingModeEnum.right">right</code></dfn></td>
                <td>
                  <p>The source is facing to the right of the user.</p>
                </td>
              </tr>
            </tbody>
          </table>
        </div>
        <p>Below is an illustration of the video facing modes in relation to the user.<br>
          <img alt="Illustration of video facing modes in relation to user" src="images/camera-names-exp.svg" style="width:40%"></p>
        <p>The following constrainable properties are defined to apply only to audio <code><a href="#idl-def-mediastreamtrack" class="internalDFN" data-link-type="dfn"><code>MediaStreamTrack</code></a>
          </code> objects:</p>
        <table class="simple">
          <thead>
            <tr>
              <th>Property Name</th>
              <th>Values</th>
              <th>Notes</th>
            </tr>
          </thead>
          <tbody>
            <tr id="def-constraint-volume">
              <td>volume</td>
              <td><code><a href="#idl-def-constraindouble" class="internalDFN" data-link-type="dfn"><code>ConstrainDouble</code></a>
                </code>
              </td>
              <td>The volume or volume range, as a multiplier of the linear audio sample values. A volume of 0.0 is silence, while a volume of 1.0 is the maximum supported volume. A volume of 0.5 will result in an approximately 6 dB<sub>SPL</sub> change in the sound pressure level from the maximum volume. Note that any ConstraintSet that specifies values outside of this range of 0 to 1 can never be satisfied.</td>
            </tr>
            <tr id="def-constraint-sampleRate">
              <td>sampleRate</td>
              <td><code><a href="#idl-def-constrainlong" class="internalDFN" data-link-type="dfn"><code>ConstrainLong</code></a>
                </code>
              </td>
              <td>The sample rate in samples per second for the audio data.
              </td>
            </tr>
            <tr id="def-constraint-sampleSize">
              <td>sampleSize</td>
              <td><code><a href="#idl-def-constrainlong" class="internalDFN" data-link-type="dfn"><code>ConstrainLong</code></a>
                </code>
              </td>
              <td>The linear sample size in bits. This constraint can only be satisfied for audio devices that produce linear samples.</td>
            </tr>
            <tr id="def-constraint-echoCancellation">
              <td>echoCancellation</td>
              <td><code><a href="#idl-def-constrainboolean" class="internalDFN" data-link-type="dfn"><code>ConstrainBoolean</code></a>
                </code>
              </td>
              <td>When one or more audio streams is being played in the processes of various microphones, it is often desirable to attempt to remove the sound being played from the input signals recorded by the microphones. This is referred to as echo cancellation. There are cases where it is not needed and it is desirable to turn it off so that no audio artifacts are introduced. This allows applications to control this behavior.
              </td>
            </tr>
            <tr id="def-constraint-latency">
              <td>latency</td>
              <td><code><a href="#idl-def-constraindouble" class="internalDFN" data-link-type="dfn"><code>ConstrainDouble</code></a>
                </code>
              </td>
              <td>The latency or latency range, in seconds. The latency is the time between start of processing (for instance, when sound occurs in the real world) to the data being available to the next step in the process. Low latency is critical for some applications; high latency may be acceptable for other applications because it helps with power constraints. The number is expected to be the target latency of the configuration; the actual latency may show some variation from that.</td>
            </tr>
            <tr id="def-constraint-channelCount">
              <td>channelCount</td>
              <td><code><a href="#idl-def-constrainlong" class="internalDFN" data-link-type="dfn"><code>ConstrainLong</code></a>
                </code>
              </td>
              <td>The number of independent channels of sound that the audio data contains, i.e. the number of audio samples per sample frame.
              </td>
            </tr>
          </tbody>
        </table>
      </section>
    </section>

    <section id="mediastreamtrackevent" typeof="bibo:Chapter" resource="#mediastreamtrackevent" property="bibo:hasPart">
      <h3 id="h-mediastreamtrackevent" resource="#h-mediastreamtrackevent"><span property="xhv:role" resource="xhv:heading"><span class="secno">4.4 </span>MediaStreamTrackEvent</span>
      </h3>
      <p>The <code><a href="#event-mediastream-addtrack">addtrack</a></code> and <code title="event-MediaStreamTracklist-removetrack"><a href="#event-mediastream-removetrack">removetrack</a></code> events use the
        <code><a href="#dom-mediastreamtrackevent" class="internalDFN" data-link-type="dfn"><code>MediaStreamTrackEvent</code></a>
        </code> interface.</p>
      <p>The <code>addtrack</code> and <code>removetrack</code> events notify the script that the <a href="#track-set">track set</a> of a
        <code><a href="#idl-def-mediastream" class="internalDFN" data-link-type="dfn"><code>MediaStream</code></a>
        </code> has been updated by the User Agent.</p>
      <p><dfn data-dfn-type="dfn" id="dfn-firing-a-track-event-named-e">Firing a track event named
      <var>e</var></dfn> with a <code><a href="#idl-def-mediastreamtrack" class="internalDFN" data-link-type="dfn"><code>MediaStreamTrack</code></a>
        </code>
        <var>track</var> means that an event with the name <var>e</var>, which does not bubble (except where otherwise stated) and is not cancelable (except where otherwise stated), and which uses the
        <code><a href="#dom-mediastreamtrackevent" class="internalDFN" data-link-type="dfn"><code>MediaStreamTrackEvent</code></a>
        </code> interface with the
        <code><a href="#dom-mediastreamtrackevent-track">track</a></code> attribute set to <var>track</var>, <em class="rfc2119" title="MUST">MUST</em> be created and dispatched at the given target.</p>
      <div>
        <pre class="def idl"><span class="idlInterface" id="idl-def-mediastreamtrackevent" data-idl="" data-title="MediaStreamTrackEvent">[<span class="extAttr"><span class="extAttrName">Exposed</span>=<span class="extAttrRhs">Window</span></span>,
 <span class="idlCtor"><span class="extAttrName">Constructor</span>(<span class="idlParam"><span class="idlParamType">DOMString</span> <span class="idlParamName">type</span></span>, <span class="idlParam"><span class="idlParamType"><a href="#idl-def-mediastreamtrackeventinit" class="internalDFN" data-link-type="dfn"><code>MediaStreamTrackEventInit</code></a></span> <span class="idlParamName">eventInitDict</span></span>)</span>]
interface <span class="idlInterfaceID"><a data-lt="MediaStreamTrackEvent" href="#dom-mediastreamtrackevent" class="internalDFN" data-link-type="dfn" data-for=""><code>MediaStreamTrackEvent</code></a></span> : <span class="idlSuperclass">Event</span> {
<span class="idlAttribute" id="idl-def-mediastreamtrackevent-track" data-idl="" data-title="track" data-dfn-for="mediastreamtrackevent">    [<span class="extAttr"><span class="extAttrName">SameObject</span></span>]
    readonly attribute <span class="idlAttrType"><a href="#idl-def-mediastreamtrack" class="internalDFN" data-link-type="dfn"><code>MediaStreamTrack</code></a></span> <span class="idlAttrName"><a data-lt="track" href="#dom-mediastreamtrackevent-track" class="internalDFN" data-link-type="dfn" data-for="MediaStreamTrackEvent"><code>track</code></a></span>;</span>
};</span></pre>

        <section typeof="bibo:Chapter" resource="#constructors-1" property="bibo:hasPart">
          <h4 id="constructors-1" resource="#constructors-1"><span property="xhv:role" resource="xhv:heading">Constructors</span></h4>
          <dl data-link-for="MediaStreamTrackEvent" data-dfn-for="MediaStreamTrackEvent" class="constructors">
            <dt><dfn data-dfn-for="" data-dfn-type="dfn" id="dom-mediastreamtrackevent" data-idl=""><code>MediaStreamTrackEvent</code></dfn></dt>
            <dd>
              <p>Constructs a new
                <code><a href="#dom-mediastreamtrackevent" class="internalDFN" data-link-type="dfn"><code>MediaStreamTrackEvent</code></a>
                </code>.</p>
              <table class="parameters">
                <tbody>
                  <tr>
                    <th>Parameter</th>
                    <th>Type</th>
                    <th>Nullable</th>
                    <th>Optional</th>
                    <th>Description</th>
                  </tr>
                  <tr>
                    <td class="prmName">type</td>
                    <td class="prmType"><code>DOMString</code></td>
                    <td class="prmNullFalse"><span role="img" aria-label="False">✘</span></td>
                    <td class="prmOptFalse"><span role="img" aria-label="False">✘</span></td>
                    <td class="prmDesc"></td>
                  </tr>
                  <tr>
                    <td class="prmName">eventInitDict</td>
                    <td class="prmType">
                      <code>MediaStreamTrackEventInit</code></td>
                    <td class="prmNullFalse"><span role="img" aria-label="False">✘</span></td>
                    <td class="prmOptFalse"><span role="img" aria-label="False">✘</span></td>
                    <td class="prmDesc"></td>
                  </tr>
                </tbody>
              </table>
            </dd>
          </dl>
        </section>

        <section typeof="bibo:Chapter" resource="#attributes-2" property="bibo:hasPart">
          <h4 id="attributes-2" resource="#attributes-2"><span property="xhv:role" resource="xhv:heading">Attributes</span></h4>
          <dl data-link-for="MediaStreamTrackEvent" data-dfn-for="MediaStreamTrackEvent" class="attributes">
            <dt><code>track</code> of type <span class="idlAttrType"><a href="#idl-def-mediastreamtrack" class="internalDFN" data-link-type="dfn"><code>MediaStreamTrack</code></a></span>, readonly</dt>
            <dd>
              <p>The <dfn id="dom-mediastreamtrackevent-track" data-dfn-for="mediastreamtrackevent" data-dfn-type="dfn" data-idl=""><code>track</code></dfn> attribute represents the <code><a href="#idl-def-mediastreamtrack" class="internalDFN" data-link-type="dfn"><code>MediaStreamTrack</code></a>
                </code>
                object associated with the event.</p>
            </dd>
          </dl>
        </section>
      </div>
      <div>
        <pre class="def idl"><span class="idlDictionary" id="idl-def-mediastreamtrackeventinit" data-idl="" data-title="MediaStreamTrackEventInit">dictionary <span class="idlDictionaryID">MediaStreamTrackEventInit</span> : <span class="idlSuperclass">EventInit</span> {
<span class="idlMember" id="idl-def-mediastreamtrackeventinit-track" data-idl="" data-title="track" data-dfn-for="mediastreamtrackeventinit">    required <span class="idlMemberType"><a href="#idl-def-mediastreamtrack" class="internalDFN" data-link-type="dfn"><code>MediaStreamTrack</code></a></span> <span class="idlMemberName"><a data-lt="track" href="#dom-mediastreamtrackeventinit-track" class="internalDFN" data-link-type="dfn" data-for="MediaStreamTrackEventInit"><code>track</code></a></span>;</span>
};</span></pre>

        <section typeof="bibo:Chapter" resource="#dictionary-mediastreamtrackeventinit-members" property="bibo:hasPart">
          <h4 id="dictionary-mediastreamtrackeventinit-members" resource="#dictionary-mediastreamtrackeventinit-members"><span property="xhv:role" resource="xhv:heading">Dictionary <a class="idlType internalDFN" href="#idl-def-mediastreamtrackeventinit" data-link-type="dfn"><code>MediaStreamTrackEventInit</code></a>
          Members</span></h4>
          <dl data-link-for="MediaStreamTrackEventInit" data-dfn-for="MediaStreamTrackEventInit" class="dictionary-members">
            <dt><dfn data-dfn-for="mediastreamtrackeventinit" data-dfn-type="dfn" id="dom-mediastreamtrackeventinit-track" data-idl=""><code>track</code></dfn> of type <span class="idlMemberType"><a href="#idl-def-mediastreamtrack" class="internalDFN" data-link-type="dfn"><code>MediaStreamTrack</code></a></span>, required</dt>
            <dd></dd>
          </dl>
        </section>
      </div>
    </section>
  </section>

  <section class="informative" id="the-model-sources-sinks-constraints-and-settings" typeof="bibo:Chapter" resource="#the-model-sources-sinks-constraints-and-settings" property="bibo:hasPart">
    <!--OddPage-->
    <h2 id="h-the-model-sources-sinks-constraints-and-settings" resource="#h-the-model-sources-sinks-constraints-and-settings"><span property="xhv:role" resource="xhv:heading"><span class="secno">5. </span>The model: sources, sinks, constraints, and settings</span>
    </h2>
    <p><em>This section is non-normative.</em></p>
    <p>Browsers provide a media pipeline from sources to sinks. In a browser, sinks are the &lt;img&gt;, &lt;video&gt;, and &lt;audio&gt; tags. Traditional sources include streamed content, files, and web resources. The media produced by these sources typically does not change over time - these sources can be considered to be static.</p>
    <p>The sinks that display these sources to the user (the actual tags themselves) have a variety of controls for manipulating the source content. For example, an &lt;img&gt; tag scales down a huge source image of 1600x1200 pixels to fit in a rectangle defined with
      <code>width="400"</code> and <code>height="300"</code>.</p>
    <p>The getUserMedia API adds dynamic sources such as microphones and cameras - the characteristics of these sources can change in response to application needs. These sources can be considered to be dynamic in nature. A &lt;video&gt; element that displays media from a dynamic source can either perform scaling or it can feed back information along the media pipeline and have the source produce content more suitable for display.</p>
    <div class="note">
      <div class="note-title marker" aria-level="3" role="heading" id="h-note5"><span>Note</span></div>
      <div class="">
        <p><strong>Note:</strong> This sort of feedback loop is obviously just enabling an "optimization", but it's a non-trivial gain. This optimization can save battery, allow for less network congestion, etc...
        </p>
      </div>
    </div>
    <p>Note that <code>MediaStream</code> sinks (such as
      <code>&lt;video&gt;</code>, <code>&lt;audio&gt;</code>, and even
      <code>RTCPeerConnection</code>) will continue to have mechanisms to further transform the source stream beyond that which the <a href="#dom-settings" class="internalDFN" data-link-type="dfn"><code>Settings</code></a>,
      <a href="#dom-capabilities" class="internalDFN" data-link-type="dfn"><code>Capabilities</code></a>, and <a href="#dom-constraints" class="internalDFN" data-link-type="dfn"><code>Constraints</code></a> described in this specification offer. (The sink transformation options, including those of
      <code>RTCPeerConnection</code>, are outside the scope of this specification.)
    </p>
    <p>The act of changing or applying a track constraint may affect the
      <code><a href="#dom-settings" class="internalDFN" data-link-type="dfn"><code>settings</code></a>
      </code> of all tracks sharing that source and consequently all down-level sinks that are using that source. Many sinks may be able to take these changes in stride, such as the
      <code>&lt;video&gt;</code> element or <code>RTCPeerConnection</code>. Others like the Recorder API may fail as a result of a source setting change.
    </p>
    <p>The <code>RTCPeerConnection</code> is an interesting object because it acts simultaneously as both a sink <strong>and</strong> a source for over-the-network streams. As a sink, it has source transformational capabilities (e.g., lowering bit-rates, scaling-up / down resolutions, and adjusting frame-rates), and as a source it could have its own settings changed by a track source.</p>
    <p>To illustrate how changes to a given source impact various sinks, consider the following example. This example only uses width and height, but the same principles apply to all of the <a href="#dom-settings" class="internalDFN" data-link-type="dfn"><code>Settings</code></a> exposed in this specification. In the first figure a home client has obtained a video source from its local video camera. The source's width and height settings are 800 pixels and 600 pixels, respectively. Three
      <code><a href="#idl-def-mediastream" class="internalDFN" data-link-type="dfn"><code>MediaStream</code></a>
      </code> objects on the home client contain tracks that use this same <code><a href="#dfn-deviceid" class="internalDFN" data-link-type="dfn">deviceId</a></code>. The three media streams are connected to three different sinks: a <code>&lt;video&gt;</code> element (A), another <code>&lt;video&gt;</code> element (B), and a peer connection (C). The peer connection is streaming the source video to a remote client. On the remote client there are two media streams with tracks that use the peer connection as a source. These two media streams are connected to two <code>&lt;video&gt;</code> element sinks (Y and Z).
    </p><img alt="Changing media stream source effects: before the requested change" src="images/change_states_before.svg">
    <p>Note that at this moment, all of the sinks on the home client must apply a transformation to the original source's provided dimension settings. B is scaling the video down, A is scaling the video up (resulting in loss of quality), and C is also scaling the video up slightly for sending over the network. On the remote client, sink Y is scaling the video <em>way</em> down, while sink Z is not applying any scaling.</p>
    <p>In response to <code><a href="#dfn-applyconstraints" class="internalDFN" data-link-type="dfn">applyConstraints()</a></code> being called, one of the tracks wants a higher resolution (1920 by 1200 pixels) from the home client's video source.</p><img alt="Changing media stream source effects: after the requested change" src="images/change_states_after.svg">
    <p>Note that the source change immediately affects all of the tracks and sinks on the home client, but does not impact any of the sinks (or sources) on the remote client. With the increase in the home client source video's dimensions, sink A no longer has to perform any scaling, while sink B must scale down even further than before. Sink C (the peer connection) must now scale down the video in order to keep the transmission constant to the remote client.</p>
    <p>While not shown, an equally valid settings change request could be made on the remote client's side. In addition to impacting sink Y and Z in the same manner as A, B and C were impacted earlier, it could lead to re-negotiation with the peer connection on the home client in order to alter the transformation that it is applying to the home client's video source. Such a change is <em class="rfc2119" title="NOT REQUIRED">NOT REQUIRED</em> to change anything related to sink A or B or the home client's video source.</p>
    <p>Note that this specification does not define a mechanism by which a change to the remote client's video source could automatically trigger a change to the home client's video source. Implementations may choose to make such source-to-sink optimizations as long as they only do so within the constraints established by the application, as the next example demonstrates.
    </p>
    <p>It is fairly obvious that changes to a given source will impact sink consumers. However, in some situations changes to a given sink may also cause implementations to adjust a source's settings. This is illustrated in the following figures. In the first figure below, the home client's video source is sending a video stream sized at 1920 by 1200 pixels. The video source is also unconstrained, such that the exact source dimensions are flexible as far as the application is concerned. Two
      <code><a href="#idl-def-mediastream" class="internalDFN" data-link-type="dfn"><code>MediaStream</code></a>
      </code> objects contain tracks with the same
      <code><a href="#dfn-deviceid" class="internalDFN" data-link-type="dfn">deviceId</a></code>, and those <code><a href="#idl-def-mediastream" class="internalDFN" data-link-type="dfn"><code>MediaStream</code></a>
      </code> s are connected to two different <code>&lt;video&gt;</code> element sinks A and B. Sink A has been sized to <code>width="1920"</code> and
      <code>height="1200"</code> and is displaying the source's video content without any transformations. Sink B has been sized smaller and, as a result, is scaling the video down to fit its rectangle of 320 pixels across by 200 pixels down.</p><img alt="Changing media stream sinks may affect sources: before the requested change" src="images/change_states_before2.svg">
    <p>When the application changes sink A to a smaller dimension (from 1920 to 1024 pixels wide and from 1200 to 768 pixels tall), the browser's media pipeline may recognize that none of its sinks require the higher source resolution, and needless work is being done both on the part of the source and sink A. In such a case and without any other constraints forcing the source to continue producing the higher resolution video, the media pipeline <em class="rfc2119" title="MAY">MAY</em> change the source resolution:</p><img alt="Changing media stream sinks may affect sources: after the requested change" src="images/change_states_after2.svg">
    <p>In the above figure, the home client's video source resolution was changed to the greater of that from sink A and B in order to optimize playback. While not shown above, the same behavior could apply to peer connections and other sinks.</p>
    <p>It is possible that <a href="#dom-constraints" class="internalDFN" data-link-type="dfn"><code>constraints</code></a> can be applied to a track which a source is unable to satisfy, either because the source itself cannot satisfy the constraint or because the source is already satisfying a conflicting constraint. When this happens, the promise returned from
      <code><a href="#dfn-applyconstraints" class="internalDFN" data-link-type="dfn">applyConstraints()</a></code> will be rejected, without applying any of the new constraints. Since no change in constraints occurs in this case, there is also no required change to the source itself as a result of this condition. Here is an example of this behavior.</p>
    <p>In this example, two media streams each have a video track that share the same source. The first track initially has no constraints applied. It is connected to sink N. Sink N has a resolution of 800 by 600 pixels and is scaling down the source's resolution of 1024 by 768 to fit. The other track has a mandatory constraint forcing off the source's fill light; it is connected to sink P. Sink P has a width and height equal to that of the source.
    </p>
    <p><img alt="Overconstrained application" src="images/overconstrained_apply.svg"></p>
    <p>Now, the first track adds a mandatory constraint that the fill light should be forced on. At this point, both mandatory constraints cannot be satisfied by the source (the fill light cannot be simultaneously on and off at the same time). Since this state was caused by the first track's attempt to apply a conflicting constraint, the constraint application fails and there is no change in the source's settings nor to the constraints on either track.</p>
    <p>Let's look at a slightly different situation starting from the same point. In this case, instead of the first track attempting to apply a conflicting constraint, the user physically locks the camera into a mode where the fill light is on. At this point the source can no longer satisfy the second track's mandatory constraint that the fill light be off. The second track is transitioned into the muted state and receives an
      <a href="#event-mediastreamtrack-overconstrained" class="internalDFN" data-link-type="dfn"><code>overconstrained</code></a> event. At the same time, the source notes that its remaining active sink only requires a resolution of 800 by 600 and so it adjusts its resolution down to match (this is an optional optimization that the User Agent is allowed to make given the situation).</p>
    <p><img alt="Overconstrained occurrence" src="images/overconstrained_occurrence.svg"></p>
    <p>At this point, it is the responsibility of the application to address the problem that led to the overconstrained situation, perhaps by removing the fill light mandatory constraint on the second track or by closing the second track altogether and informing the user.</p>
  </section>

  <section id="mediastreams-in-media-elements" typeof="bibo:Chapter" resource="#mediastreams-in-media-elements" property="bibo:hasPart">
    <!--OddPage-->
    <h2 id="h-mediastreams-in-media-elements" resource="#h-mediastreams-in-media-elements"><span property="xhv:role" resource="xhv:heading"><span class="secno">6. </span>MediaStreams in Media Elements</span>
    </h2>
    <div class="note">
      <div class="note-title marker" aria-level="3" role="heading" id="h-note6"><span>Note</span></div>
      <div class="">
        We are now referencing the [<cite><a class="bibref" href="#bib-HTML51">HTML51</a></cite>] specification for MediaStream playback in a HTMLMediaElement. This section, that defines MediaStream-specific exceptions and additions, is still work in progress and feedback is most welcome.
      </div>
    </div>
    <p>A <code>MediaStream</code> may be assigned to media elements. A
      <code>MediaStream</code> is not preloadable or seekable and represents a simple, potentially infinite, linear media timeline. The timeline starts at 0 and increments linearly in real time as long as the
      <code>MediaStream</code> is playing. The timeline does not increment when the playout of the <code>MediaStream</code> is paused.</p>
    <p>User Agents that support this specification <em class="rfc2119" title="MUST">MUST</em> support the
      <code><a href="http://www.w3.org/TR/2015/WD-html51-20150506/semantics.html#dom-media-srcobject">
    srcObject</a></code> attribute of the <code>HTMLMediaElement</code> interface defined in [<cite><a class="bibref" href="#bib-HTML51">HTML51</a></cite>], which includes support for playing
      <code>MediaStream</code> objects.</p>
    <p>The [<cite><a class="bibref" href="#bib-HTML51">HTML51</a></cite>] document outlines how the <code>HTMLMediaElement</code> works with a <em>media provider object</em>. The following applies when the
      <em>media provider object</em> is a <code><a href="#idl-def-mediastream" class="internalDFN" data-link-type="dfn"><code>MediaStream</code></a>
      </code>:</p>
    <ul>
      <li>
        <p>Whenever an [<cite><a class="bibref" href="#bib-HTML51">HTML51</a></cite>] <code><a href="http://www.w3.org/TR/2015/WD-html51-20150506/semantics.html#audiotrack">
        AudioTrack</a></code> or a <code><a href="http://www.w3.org/TR/2015/WD-html51-20150506/semantics.html#videotrack">
        VideoTrack</a></code> is created, the <code>id</code> and
          <code>label</code> attributes must be initialized to the corresponding attributes of the <code>MediaStreamTrack</code>, the <code>kind</code> attribute must be initialized to "main" and the <code>language</code> attribute to the empty string</p>
      </li>
      <li>The User Agent <em class="rfc2119" title="MUST">MUST</em> always play the current data from the
        <code><a href="#idl-def-mediastream" class="internalDFN" data-link-type="dfn"><code>MediaStream</code></a>
        </code> and <em class="rfc2119" title="MUST NOT">MUST NOT</em> buffer.</li>
      <li>
        <p>Since the order in the <code><a href="#idl-def-mediastream" class="internalDFN" data-link-type="dfn"><code>MediaStream</code></a>
          </code> 's <a href="#track-set">track set</a> is undefined, no requirements are put on how the <code><a href="http://www.w3.org/TR/2015/WD-html51-20150506/semantics.html#audiotracklist">
        AudioTrackList</a></code> and <code><a href="http://www.w3.org/TR/2015/WD-html51-20150506/semantics.html#videotracklist">
        VideoTrackList</a></code> is ordered</p>
      </li>
      <li>
        <p>When the <code><a href="#idl-def-mediastream" class="internalDFN" data-link-type="dfn"><code>MediaStream</code></a>
          </code> state moves from the active to the <a href="#stream-inactive">inactive</a> state, the User Agent
          <em class="rfc2119" title="MUST">MUST</em> raise an <a href="http://www.w3.org/TR/2015/WD-html51-20150506/semantics.html#event-media-ended">
        ended</a> event on the <code>HTMLMediaElement</code> and set its
          <a href="http://www.w3.org/TR/2015/WD-html51-20150506/semantics.html#dom-media-ended">
        ended</a> attribute to <code>true</code>. Note that once <a href="http://www.w3.org/TR/2015/WD-html51-20150506/semantics.html#dom-media-ended">
        ended</a> equals <code>true</code> the <code>HTMLMediaElement</code> will not play media even if new <code><a href="#idl-def-mediastreamtrack" class="internalDFN" data-link-type="dfn"><code>MediaStreamTrack</code></a>
          </code>'s are added to the <code><a href="#idl-def-mediastream" class="internalDFN" data-link-type="dfn"><code>MediaStream</code></a>
          </code> (causing it to return to the active state) unless <code>autoplay</code> is <code>true</code> or the web application restarts the element, e.g., by calling <a href="http://www.w3.org/TR/2015/WD-html51-20150506/semantics.html#dom-media-play">
        play()</a></p>
      </li>
      <li>
        <p>Any calls to the <code><a href="http://www.w3.org/TR/2015/WD-html51-20150506/semantics.html#dom-media-fastseek">
        fastSeek</a></code> method on a <code>HTMLMediaElement</code> must be ignored
        </p>
      </li>
    </ul>
    <p>The nature of the <code><a href="#idl-def-mediastream" class="internalDFN" data-link-type="dfn"><code>MediaStream</code></a>
      </code> places certain restrictions on the behavior and attribute values of the associated
      <code>HTMLMediaElement</code> and on the operations that can be performed on it, as shown below:</p>
    <table class="simple">
      <thead>
        <tr>
          <th scope="col">Attribute Name</th>
          <th scope="col">Attribute Type</th>
          <th scope="col">Valid Values When Using a MediaStream</th>
          <th scope="col">Additional considerations</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td>
            <a class="externalDFN" href="http://www.w3.org/TR/2015/WD-html51-20150506/semantics.html#attr-media-preload">
              <code>preload</code></a>
          </td>
          <td><code>DOMString</code></td>
          <td>On getting: <code>none</code>. On setting: ignored.</td>
          <td>A MediaStream cannot be preloaded.</td>
        </tr>
        <tr>
          <td>
            <a class="externalDFN" href="http://www.w3.org/TR/2015/WD-html51-20150506/semantics.html#dom-media-buffered">
              <code>buffered</code></a>
          </td>
          <td>
            <a class="externalDFN" href="http://www.w3.org/TR/2015/WD-html51-20150506/semantics.html#timeranges">
              <code>TimeRanges</code></a>
          </td>
          <td><code>buffered.length</code> <em class="rfc2119" title="MUST">MUST</em> return <code>0</code>.</td>
          <td>A MediaStream cannot be preloaded. Therefore, the amount buffered is always an empty TimeRange.</td>
        </tr>
        <tr>
          <td>
            <a class="externalDFN" href="http://www.w3.org/TR/2015/WD-html51-20150506/semantics.html#dom-media-currenttime">
              <code>currentTime</code></a>
          </td>
          <td><code>double</code></td>
          <td>Any non-negative integer. The initial value is 0 and the values increments linearly in real time whenever the stream is playing.</td>
          <td>The value is the current stream position, in seconds. On any attempt to set this attribute, the User Agent must throw an
            <code>InvalidStateError</code> exception.</td>
        </tr>
        <tr>
          <td>
            <a class="externalDFN" href="http://www.w3.org/TR/2015/WD-html51-20150506/semantics.html#dom-media-seeking">
              <code>seeking</code></a>
          </td>
          <td><code>boolean</code></td>
          <td>false</td>
          <td>A MediaStream is not seekable. Therefore, this attribute <em class="rfc2119" title="MUST">MUST</em> always have the value <code>false</code>.</td>
        </tr>
        <tr>
          <td>
            <a class="externalDFN" href="http://www.w3.org/TR/2015/WD-html51-20150506/semantics.html#dom-media-defaultplaybackrate">
              <code>defaultPlaybackRate</code></a>
          </td>
          <td><code>double</code></td>
          <td>On setting: ignored. On getting: return 1.0</td>
          <td>A MediaStream is not seekable. Therefore, this attribute <em class="rfc2119" title="MUST">MUST</em> always have the value <code>1.0</code> and any attempt to alter it
            <em class="rfc2119" title="MUST">MUST</em> be ignored. Note that this also means that the <code><a href="http://www.w3.org/TR/2015/WD-html51-20150506/semantics.html#event-media-ratechange">
          ratechange</a></code> event will not fire.</td>
        </tr>
        <tr>
          <td>
            <a class="externalDFN" href="http://www.w3.org/TR/2015/WD-html51-20150506/semantics.html#dom-media-playbackrate">
              <code>playbackRate</code></a>
          </td>
          <td><code>double</code></td>
          <td>1.0</td>
          <td>A MediaStream is not seekable. Therefore, this attribute <em class="rfc2119" title="MUST">MUST</em> always have the value <code>1.0</code> and any attempt to alter it
            <em class="rfc2119" title="MUST">MUST</em> be ignored. Note that this also means that the <code><a href="http://www.w3.org/TR/2015/WD-html51-20150506/semantics.html#event-media-ratechange">
          ratechange</a></code> event will not fire.</td>
        </tr>
        <tr>
          <td>
            <a class="externalDFN" href="http://www.w3.org/TR/2015/WD-html51-20150506/semantics.html#dom-media-played">
              <code>played</code></a>
          </td>
          <td>
            <a class="externalDFN" href="http://www.w3.org/TR/2015/WD-html51-20150506/semantics.html#timeranges">
              <code>TimeRanges</code></a>
          </td>
          <td>
            <code>played.length</code> <em class="rfc2119" title="MUST">MUST</em> return <code>1</code>.<br>
            <code>played.start(0)</code> <em class="rfc2119" title="MUST">MUST</em> return <code>0</code>.<br>
            <code>played.end(0)</code> <em class="rfc2119" title="MUST">MUST</em> return the last known
            <a class="externalDFN" href="http://www.w3.org/TR/2015/WD-html51-20150506/semantics.html#dom-media-currenttime">
              <code>currentTime</code></a> .
          </td>
          <td>A <code><a href="#idl-def-mediastream" class="internalDFN" data-link-type="dfn"><code>MediaStream</code></a>
            </code>'s timeline always consists of a single range, starting at 0 and extending up to the currentTime.</td>
        </tr>
        <tr>
          <td>
            <a class="externalDFN" href="http://www.w3.org/TR/2015/WD-html51-20150506/semantics.html#dom-media-seekable">
              <code>seekable</code></a>
          </td>
          <td>
            <a class="externalDFN" href="http://www.w3.org/TR/2015/WD-html51-20150506/semantics.html#timeranges">
              <code>TimeRanges</code></a>
          </td>
          <td><code>seekable.length</code> <em class="rfc2119" title="MUST">MUST</em> return <code>0</code>.</td>
          <td>A <code><a href="#idl-def-mediastream" class="internalDFN" data-link-type="dfn"><code>MediaStream</code></a>
            </code> is not seekable.</td>
        </tr>
        <tr>
          <td>
            <a class="externalDFN" href="http://www.w3.org/TR/2015/WD-html51-20150506/semantics.html#dom-media-loop">
              <code>loop</code></a>
          </td>
          <td><code>boolean</code></td>
          <td>true, false</td>
          <td>Setting the <code>loop</code> attribute has no effect since a
            <code><a href="#idl-def-mediastream" class="internalDFN" data-link-type="dfn"><code>MediaStream</code></a>
            </code> has no defined end and therefore cannot be looped.</td>
        </tr>
      </tbody>
    </table>
    <p>When applicable, behavior outlined above for
      <code>HTMLMediaElement</code> carry over to <code><a href="http://www.w3.org/TR/2015/WD-html51-20150506/semantics.html#mediacontroller">
    MediaController</a></code>'s.</p>
  </section>

  <section id="error-handling" typeof="bibo:Chapter" resource="#error-handling" property="bibo:hasPart">
    <!--OddPage-->
    <h2 id="h-error-handling" resource="#h-error-handling"><span property="xhv:role" resource="xhv:heading"><span class="secno">7. </span>Error Handling</span>
    </h2>
    <p>This section and its subsections extend the list of Error subclasses defined in [<cite><a class="bibref" href="#bib-ES6">ES6</a></cite>] following the pattern for NativeError in section 19.5.6 of that specification. Assume the following:</p>
    <ul>
      <li>that use of syntax such as [[something]] and %something% is as used in [<cite><a class="bibref" href="#bib-ES6">ES6</a></cite>].</li>
      <li>that the rules for ECMAScript standard built-in objects ([<cite><a class="bibref" href="#bib-ES6">ES6</a></cite>], section 17) are in effect in this section.</li>
      <li>that the new intrinsic objects %OverconstrainedError% and %OverconstrainedErrorPrototype% are available as if they had been included in ([<cite><a class="bibref" href="#bib-ES6">ES6</a></cite>], Table 7) and all referencing sections, e.g. ([
        <cite><a class="bibref" href="#bib-ES6">ES6</a></cite>], section 8.2.2), thus behave appropriately.</li>
    </ul>

    <section id="ecmascript-6-terminology" typeof="bibo:Chapter" resource="#ecmascript-6-terminology" property="bibo:hasPart">
      <h3 id="h-ecmascript-6-terminology" resource="#h-ecmascript-6-terminology"><span property="xhv:role" resource="xhv:heading"><span class="secno">7.1 </span>ECMAScript 6 Terminology</span>
      </h3>
      <p>The following terms used in this section are defined in [<cite><a class="bibref" href="#bib-ES6">ES6</a></cite>].</p>
      <table>
        <thead>
          <tr>
            <th>Term/Notation</th>
            <th>Section in [<cite><a class="bibref" href="#bib-ES6">ES6</a></cite>]</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td>Type(X)</td>
            <td>6</td>
          </tr>
          <tr>
            <td>intrinsic object</td>
            <td>6.1.7.4</td>
          </tr>
          <tr>
            <td>[[ErrorData]]</td>
            <td>19.5.1</td>
          </tr>
          <tr>
            <td>internal slot</td>
            <td>6.1.7.2</td>
          </tr>
          <tr>
            <td>NewTarget</td>
            <td>various uses, but no definition</td>
          </tr>
          <tr>
            <td>active function object</td>
            <td>8.3</td>
          </tr>
          <tr>
            <td>OrdinaryCreateFromConstructor()</td>
            <td>9.1.14</td>
          </tr>
          <tr>
            <td>ReturnIfAbrupt()</td>
            <td>6.2.2.4</td>
          </tr>
          <tr>
            <td>Assert</td>
            <td>5.2</td>
          </tr>
          <tr>
            <td>String</td>
            <td>4.3.17-19, depending on context</td>
          </tr>
          <tr>
            <td>PropertyDescriptor</td>
            <td>6.2.4</td>
          </tr>
          <tr>
            <td>[[Value]]</td>
            <td>6.1.7.1</td>
          </tr>
          <tr>
            <td>[[Writable]]</td>
            <td>6.1.7.1</td>
          </tr>
          <tr>
            <td>[[Enumerable]]</td>
            <td>6.1.7.1</td>
          </tr>
          <tr>
            <td>[[Configurable]]</td>
            <td>6.1.7.1</td>
          </tr>
          <tr>
            <td>DefinePropertyOrThrow()</td>
            <td>7.3.7</td>
          </tr>
          <tr>
            <td>abrupt completion</td>
            <td>6.2.2</td>
          </tr>
          <tr>
            <td>ToString()</td>
            <td>7.1.12</td>
          </tr>
          <tr>
            <td>[[Prototype]]</td>
            <td>9.1</td>
          </tr>
          <tr>
            <td>%Error%</td>
            <td>19.5.1</td>
          </tr>
          <tr>
            <td>Error</td>
            <td>19.5</td>
          </tr>
          <tr>
            <td>%ErrorPrototype%</td>
            <td>19.5.3</td>
          </tr>
          <tr>
            <td>Object.prototype.toString</td>
            <td>19.1.3.6</td>
          </tr>
        </tbody>
      </table>
    </section>

    <section id="overconstrainederror-object" typeof="bibo:Chapter" resource="#overconstrainederror-object" property="bibo:hasPart">
      <h3 id="h-overconstrainederror-object" resource="#h-overconstrainederror-object"><span property="xhv:role" resource="xhv:heading"><span class="secno">7.2 </span>OverconstrainedError Object</span>
      </h3>

      <section id="overconstrainederror-constructor" typeof="bibo:Chapter" resource="#overconstrainederror-constructor" property="bibo:hasPart">
        <h4 id="h-overconstrainederror-constructor" resource="#h-overconstrainederror-constructor"><span property="xhv:role" resource="xhv:heading"><span class="secno">7.2.1 </span>OverconstrainedError Constructor</span>
        </h4>
        <p>The OverconstrainedError Constructor is the %OverconstrainedError% intrinsic object. When <code>OverconstrainedError</code> is called as a function rather than as a constructor, it creates and initializes a new OverconstrainedError object. A call of the object as a function is equivalent to calling it as a constructor with the same arguments. Thus the function call <code><b>OverconstrainedError(</b>...<b>)</b></code> is equivalent to the object creation expression <code><b>new
        OverconstrainedError(</b>...<b>)</b></code> with the same arguments.
        </p>
        <p>The <code>OverconstrainedError</code> constructor is designed to be subclassable. It may be used as the value of an <code>extends</code> clause of a class definition. Subclass constructors that intend to inherit the specified <code>OverconstrainedError</code> behaviour must include a <code>super</code> call to the
          <code>OverconstrainedError</code> constructor to create and initialize the subclass instance with an [[ErrorData]] internal slot.</p>

        <section id="overconstrainederror-constraint-message" typeof="bibo:Chapter" resource="#overconstrainederror-constraint-message" property="bibo:hasPart">
          <h5 id="h-overconstrainederror-constraint-message" resource="#h-overconstrainederror-constraint-message"><span property="xhv:role" resource="xhv:heading"><span class="secno">7.2.1.1 </span>OverconstrainedError ( constraint, message )</span>
          </h5>
          <p>When the <code><dfn data-dfn-type="dfn" id="dfn-overconstrainederror">OverconstrainedError</dfn></code> function is called with arguments <i>constraint</i> and <i>message</i> the following steps are taken:</p>
          <ol>
            <li>If NewTarget is <b>undefined</b>, let <i>newTarget</i> be the active function object, else let <i>newTarget</i> be NewTarget.
            </li>
            <li>Let <i>O</i> be OrdinaryCreateFromConstructor(<i>newTarget</i>,
              <code>"%OverconstrainedErrorPrototype%"</code>, «[[ErrorData]]» ).
            </li>
            <li>ReturnIfAbrupt(<i>O</i>).</li>
            <li>If <i>constraint</i> is not <b>undefined</b>, then
              <ol>
                <li>Let <i>constraintDesc</i> be the PropertyDescriptor{[[Value]]: <i>constraint</i>, [[Writable]]: <b>false</b>, [[Enumerable]]: <b>false</b>, [[Configurable]]: <b>false</b>}.</li>
                <li>Let <i>cStatus</i> be DefinePropertyOrThrow(O, "
                  <code>constraint</code>", <i>constraintDesc</i>).</li>
                <li>Assert: <i>cStatus</i> is not an abrupt completion.</li>
              </ol>
            </li>
            <li>If <i>message</i> is not <b>undefined</b>, then
              <ol>
                <li>Let <i>msg</i> be ToString(<i>message</i>).</li>
                <li>Let <i>msgDesc</i> be the PropertyDescriptor{[[Value]]:
                  <i>msg</i>, [[Writable]]: <b>true</b>, [[Enumerable]]:
                  <b>false</b>, [[Configurable]]: <b>true</b>}.</li>
                <li>Let <i>mStatus</i> be DefinePropertyOrThrow(O, "
                  <code>message</code>", <i>msgDesc</i>).</li>
                <li>Assert: <i>mStatus</i> is not an abrupt completion.</li>
              </ol>
            </li>
            <li>Return <i>O</i>.</li>
          </ol>
        </section>
      </section>

      <section id="properties-of-the-overconstrainederror-constructor" typeof="bibo:Chapter" resource="#properties-of-the-overconstrainederror-constructor" property="bibo:hasPart">
        <h4 id="h-properties-of-the-overconstrainederror-constructor" resource="#h-properties-of-the-overconstrainederror-constructor"><span property="xhv:role" resource="xhv:heading"><span class="secno">7.2.2 </span>Properties of the OverconstrainedError Constructor</span>
        </h4>
        <p>The value of the [[Prototype]] internal slot of the OverconstrainedError constructor is the intrinsic object %Error%.</p>
        <p>Besides the <code>length</code> property (whose value is <b>1</b>), the OverconstrainedError constructor has the following properties:</p>

        <section id="overconstrainederror.prototype" typeof="bibo:Chapter" resource="#overconstrainederror.prototype" property="bibo:hasPart">
          <h5 id="h-overconstrainederror.prototype" resource="#h-overconstrainederror.prototype"><span property="xhv:role" resource="xhv:heading"><span class="secno">7.2.2.1 </span>OverconstrainedError.prototype</span>
          </h5>
          <p>The initial value of <code>OverconstrainedError.prototype</code> is the <a href="#properties-of-the-overconstrainederror-prototype-object">OverconstrainedError
          prototype object</a>. This property has the attributes { [[Writable]]: <b>false</b>, [[Enumerable]]: <b>false</b>, [[Configurable]]: <b>false</b> }.</p>
        </section>
      </section>

      <section id="properties-of-the-overconstrainederror-prototype-object" typeof="bibo:Chapter" resource="#properties-of-the-overconstrainederror-prototype-object" property="bibo:hasPart">
        <h4 id="h-properties-of-the-overconstrainederror-prototype-object" resource="#h-properties-of-the-overconstrainederror-prototype-object"><span property="xhv:role" resource="xhv:heading"><span class="secno">7.2.3 </span>Properties of the OverconstrainedError Prototype Object</span>
        </h4>
        <p>The OverconstrainedError prototype object is an ordinary object. It is not an Error instance and does not have an [[ErrorData]] internal slot.
        </p>
        <p>The value of the [[Prototype]] internal slot of the OverconstrainedError prototype object is the intrinsic object %ErrorPrototype%.
        </p>

        <section id="overconstrainederror.prototype.constructor" typeof="bibo:Chapter" resource="#overconstrainederror.prototype.constructor" property="bibo:hasPart">
          <h5 id="h-overconstrainederror.prototype.constructor" resource="#h-overconstrainederror.prototype.constructor"><span property="xhv:role" resource="xhv:heading"><span class="secno">7.2.3.1 </span>OverconstrainedError.prototype.constructor</span>
          </h5>
          <p>The initial value of the constructor property of the prototype for the OverconstrainedError constructor is the intrinsic object <a href="#error-handling">%OverconstrainedError%</a>.</p>
        </section>

        <section id="overconstrainederror.prototype.constraint" typeof="bibo:Chapter" resource="#overconstrainederror.prototype.constraint" property="bibo:hasPart">
          <h5 id="h-overconstrainederror.prototype.constraint" resource="#h-overconstrainederror.prototype.constraint"><span property="xhv:role" resource="xhv:heading"><span class="secno">7.2.3.2 </span>OverconstrainedError.prototype.constraint</span>
          </h5>
          <p>The initial value of the constraint property of the prototype for the OverconstrainedError constructor is the empty String.</p>
        </section>

        <section id="overconstrainederror.prototype.message" typeof="bibo:Chapter" resource="#overconstrainederror.prototype.message" property="bibo:hasPart">
          <h5 id="h-overconstrainederror.prototype.message" resource="#h-overconstrainederror.prototype.message"><span property="xhv:role" resource="xhv:heading"><span class="secno">7.2.3.3 </span>OverconstrainedError.prototype.message</span>
          </h5>
          <p>The initial value of the message property of the prototype for the OverconstrainedError constructor is the empty String.</p>
        </section>

        <section id="overconstrainederror.prototype.name" typeof="bibo:Chapter" resource="#overconstrainederror.prototype.name" property="bibo:hasPart">
          <h5 id="h-overconstrainederror.prototype.name" resource="#h-overconstrainederror.prototype.name"><span property="xhv:role" resource="xhv:heading"><span class="secno">7.2.3.4 </span>OverconstrainedError.prototype.name</span>
          </h5>
          <p>The initial value of the name property of the prototype for the OverconstrainedError constructor is
            <code>"<b>OverconstrainedError</b>"</code>.</p>
        </section>
      </section>

      <section id="properties-of-overconstrainederror-instances" typeof="bibo:Chapter" resource="#properties-of-overconstrainederror-instances" property="bibo:hasPart">
        <h4 id="h-properties-of-overconstrainederror-instances" resource="#h-properties-of-overconstrainederror-instances"><span property="xhv:role" resource="xhv:heading"><span class="secno">7.2.4 </span>Properties of OverconstrainedError Instances</span>
        </h4>
        <p>OverconstrainedError instances are ordinary objects that inherit properties from the OverconstrainedError prototype object and have an [[ErrorData]] internal slot whose value is <b>undefined</b>. The only specified use of [[ErrorData]] is by Object.prototype.toString ([
          <cite><a class="bibref" href="#bib-ES6">ES6</a></cite>], section 19.1.3.6) to identify instances of Error or its various subclasses.</p>
      </section>
      <div class="note">
        <div class="note-title marker" aria-level="4" role="heading" id="h-note7"><span>Note</span></div>
        <div class="">
          The following will need to be updated when we finish out the error definitions.
        </div>
      </div>
      <p>The following interface is defined for cases when an OverconstrainedError is raised as an event:</p>
      <div>
        <pre class="def idl"><span class="idlInterface" id="idl-def-overconstrainederrorevent" data-idl="" data-title="OverconstrainedErrorEvent">[<span class="extAttr"><span class="extAttrName">Exposed</span>=<span class="extAttrRhs">Window</span></span>,
 <span class="idlCtor"><span class="extAttrName">Constructor</span>(<span class="idlParam"><span class="idlParamType">DOMString</span> <span class="idlParamName">type</span></span>, <span class="idlParam"><span class="idlParamType"><a href="#idl-def-overconstrainederroreventinit" class="internalDFN" data-link-type="dfn"><code>OverconstrainedErrorEventInit</code></a></span> <span class="idlParamName">eventInitDict</span></span>)</span>]
interface <span class="idlInterfaceID"><a data-lt="OverconstrainedErrorEvent" href="#dom-overconstrainederrorevent" class="internalDFN" data-link-type="dfn" data-for=""><code>OverconstrainedErrorEvent</code></a></span> : <span class="idlSuperclass">Event</span> {
<span class="idlAttribute" id="idl-def-overconstrainederrorevent-error" data-idl="" data-title="error" data-dfn-for="overconstrainederrorevent">    readonly attribute <span class="idlAttrType"><a href="#dfn-overconstrainederror" class="internalDFN" data-link-type="dfn"><code>OverconstrainedError</code></a>?</span> <span class="idlAttrName"><a data-lt="error" href="#dom-overconstrainederrorevent-error" class="internalDFN" data-link-type="dfn" data-for="OverconstrainedErrorEvent"><code>error</code></a></span>;</span>
};</span></pre>

        <section typeof="bibo:Chapter" resource="#constructors-2" property="bibo:hasPart">
          <h4 id="constructors-2" resource="#constructors-2"><span property="xhv:role" resource="xhv:heading">Constructors</span></h4>
          <dl data-link-for="OverconstrainedErrorEvent" data-dfn-for="OverconstrainedErrorEvent" class="constructors">
            <dt><dfn data-dfn-for="" data-dfn-type="dfn" id="dom-overconstrainederrorevent" data-idl=""><code>OverconstrainedErrorEvent</code></dfn></dt>
            <dd>
              <p>Constructs a new
                <code><a href="#dom-overconstrainederrorevent" class="internalDFN" data-link-type="dfn"><code>OverconstrainedErrorEvent</code></a>
                </code>.</p>
              <table class="parameters">
                <tbody>
                  <tr>
                    <th>Parameter</th>
                    <th>Type</th>
                    <th>Nullable</th>
                    <th>Optional</th>
                    <th>Description</th>
                  </tr>
                  <tr>
                    <td class="prmName">type</td>
                    <td class="prmType"><code>DOMString</code></td>
                    <td class="prmNullFalse"><span role="img" aria-label="False">✘</span></td>
                    <td class="prmOptFalse"><span role="img" aria-label="False">✘</span></td>
                    <td class="prmDesc"></td>
                  </tr>
                  <tr>
                    <td class="prmName">eventInitDict</td>
                    <td class="prmType">
                      <code>OverconstrainedErrorEventInit</code></td>
                    <td class="prmNullFalse"><span role="img" aria-label="False">✘</span></td>
                    <td class="prmOptFalse"><span role="img" aria-label="False">✘</span></td>
                    <td class="prmDesc"></td>
                  </tr>
                </tbody>
              </table>
            </dd>
          </dl>
        </section>

        <section typeof="bibo:Chapter" resource="#attributes-3" property="bibo:hasPart">
          <h4 id="attributes-3" resource="#attributes-3"><span property="xhv:role" resource="xhv:heading">Attributes</span></h4>
          <dl data-link-for="OverconstrainedErrorEvent" data-dfn-for="OverconstrainedErrorEvent" class="attributes">
            <dt><dfn data-dfn-for="overconstrainederrorevent" data-dfn-type="dfn" id="dom-overconstrainederrorevent-error" data-idl=""><code>error</code></dfn> of type <span class="idlAttrType"><a href="#dfn-overconstrainederror" class="internalDFN" data-link-type="dfn"><code>OverconstrainedError</code></a></span>, readonly ,
            nullable</dt>
            <dd>
              <p>The <code><a href="#dfn-overconstrainederror" class="internalDFN" data-link-type="dfn"><code>OverconstrainedError</code></a>
                </code> describing the error that triggered the event (if any).</p>
            </dd>
          </dl>
        </section>
      </div>
      <div>
        <pre class="def idl"><span class="idlDictionary" id="idl-def-overconstrainederroreventinit" data-idl="" data-title="OverconstrainedErrorEventInit">dictionary <span class="idlDictionaryID">OverconstrainedErrorEventInit</span> : <span class="idlSuperclass">EventInit</span> {
<span class="idlMember" id="idl-def-overconstrainederroreventinit-error" data-idl="" data-title="error" data-dfn-for="overconstrainederroreventinit">    <span class="idlMemberType"><a href="#dfn-overconstrainederror" class="internalDFN" data-link-type="dfn"><code>OverconstrainedError</code></a>?</span> <span class="idlMemberName"><a data-lt="error" href="#dom-overconstrainederroreventinit-error" class="internalDFN" data-link-type="dfn" data-for="OverconstrainedErrorEventInit"><code>error</code></a></span> = <span class="idlMemberValue">null</span>;</span>
};</span></pre>

        <section typeof="bibo:Chapter" resource="#dictionary-overconstrainederroreventinit-members" property="bibo:hasPart">
          <h4 id="dictionary-overconstrainederroreventinit-members" resource="#dictionary-overconstrainederroreventinit-members"><span property="xhv:role" resource="xhv:heading">Dictionary <a class="idlType internalDFN" href="#idl-def-overconstrainederroreventinit" data-link-type="dfn"><code>OverconstrainedErrorEventInit</code></a>
          Members</span></h4>
          <dl data-link-for="OverconstrainedErrorEventInit" data-dfn-for="OverconstrainedErrorEventInit" class="dictionary-members">
            <dt><dfn data-dfn-for="overconstrainederroreventinit" data-dfn-type="dfn" id="dom-overconstrainederroreventinit-error" data-idl=""><code>error</code></dfn> of type <span class="idlMemberType"><a href="#dfn-overconstrainederror" class="internalDFN" data-link-type="dfn"><code>OverconstrainedError</code></a></span>, nullable,
            defaulting to <code>null</code></dt>
            <dd>
              <p>The <code><a href="#dfn-overconstrainederror" class="internalDFN" data-link-type="dfn"><code>OverconstrainedError</code></a>
                </code> describing the error associated with the event (if any)</p>
            </dd>
          </dl>
        </section>
      </div>
    </section>
  </section>

  <section class="informative" id="event-summary" typeof="bibo:Chapter" resource="#event-summary" property="bibo:hasPart">
    <!--OddPage-->
    <h2 id="h-event-summary" resource="#h-event-summary"><span property="xhv:role" resource="xhv:heading"><span class="secno">8. </span>Event summary</span>
    </h2>
    <p><em>This section is non-normative.</em></p>
    <p>The following events fire on <code><a href="#idl-def-mediastream" class="internalDFN" data-link-type="dfn"><code>MediaStream</code></a>
      </code>
      objects:</p>
    <table>
      <tbody>
        <tr>
          <th>Event name</th>
          <th>Interface</th>
          <th>Fired when...</th>
        </tr>
      </tbody>
      <tbody>
        <tr>
          <td><dfn id="event-mediastream-addtrack" data-dfn-type="dfn"><code>addtrack</code></dfn></td>
          <td><code><a href="#dom-mediastreamtrackevent" class="internalDFN" data-link-type="dfn"><code>MediaStreamTrackEvent</code></a>
            </code>
          </td>
          <td>A new <code><a href="#idl-def-mediastreamtrack" class="internalDFN" data-link-type="dfn"><code>MediaStreamTrack</code></a>
            </code> has been added to this stream. Note that this event is not fired when the script directly modifies the tracks of a <code><a href="#idl-def-mediastream" class="internalDFN" data-link-type="dfn"><code>MediaStream</code></a>
            </code>.</td>
        </tr>
        <tr>
          <td><dfn id="event-mediastream-removetrack" data-dfn-type="dfn"><code>removetrack</code></dfn></td>
          <td><code><a href="#dom-mediastreamtrackevent" class="internalDFN" data-link-type="dfn"><code>MediaStreamTrackEvent</code></a>
            </code>
          </td>
          <td>A <code><a href="#idl-def-mediastreamtrack" class="internalDFN" data-link-type="dfn"><code>MediaStreamTrack</code></a>
            </code> has been removed from this stream. Note that this event is not fired when the script directly modifies the tracks of a <code><a href="#idl-def-mediastream" class="internalDFN" data-link-type="dfn"><code>MediaStream</code></a>
            </code>.</td>
        </tr>
      </tbody>
    </table>
    <p>The following events fire on <code><a href="#idl-def-mediastreamtrack" class="internalDFN" data-link-type="dfn"><code>MediaStreamTrack</code></a>
      </code>
      objects:</p>
    <table>
      <tbody>
        <tr>
          <th>Event name</th>
          <th>Interface</th>
          <th>Fired when...</th>
        </tr>
      </tbody>
      <tbody>
        <tr>
          <td><dfn id="event-mediastreamtrack-mute" data-dfn-type="dfn"><code>mute</code></dfn></td>
          <td><code>Event</code></td>
          <td>The <code><a href="#idl-def-mediastreamtrack" class="internalDFN" data-link-type="dfn"><code>MediaStreamTrack</code></a>
            </code> object's source is temporarily unable to provide data.</td>
        </tr>
        <tr>
          <td><dfn id="event-mediastreamtrack-unmute" data-dfn-type="dfn"><code>unmute</code></dfn></td>
          <td><code>Event</code></td>
          <td>The <code><a href="#idl-def-mediastreamtrack" class="internalDFN" data-link-type="dfn"><code>MediaStreamTrack</code></a>
            </code> object's source is live again after having been temporarily unable to provide data.</td>
        </tr>
        <tr>
          <td><dfn id="event-mediastreamtrack-overconstrained" data-dfn-type="dfn"><code>overconstrained</code></dfn></td>
          <td><code><a href="#dom-overconstrainederrorevent" class="internalDFN" data-link-type="dfn"><code>OverconstrainedErrorEvent</code></a>
            </code>
          </td>
          <td>
            <p>This error event fires for each affected track (when multiple tracks share the same source) after the User Agent has evaluated the current constraints against a given source and is not able to configure the source within the limitations established by the intersection of imposed constraints.</p>
            <p>Due to being over-constrained, the User Agent must mute each affected track.</p>
            <p>The affected track(s) will remain <a href="#track-muted">muted</a> until the application adjusts the constraints to accommodate the source's current effective capabilities.
            </p>
          </td>
        </tr>
        <tr>
          <td><code id="event-mediastreamtrack-ended">ended</code></td>
          <td><code>Event</code></td>
          <td>
            <p>The <code><a href="#idl-def-mediastreamtrack" class="internalDFN" data-link-type="dfn"><code>MediaStreamTrack</code></a>
              </code> object's source will no longer provide any data, either because the user revoked the permissions, or because the source device has been ejected, or because the remote peer permanently stopped sending data.</p>
          </td>
        </tr>
      </tbody>
    </table>
    <p>The following events fire on <code><a href="#idl-def-mediadevices-partial-1" class="internalDFN" data-link-type="dfn"><code>MediaDevices</code></a>
      </code>
      objects:</p>
    <table>
      <tbody>
        <tr>
          <th>Event name</th>
          <th>Interface</th>
          <th>Fired when...</th>
        </tr>
      </tbody>
      <tbody>
        <tr>
          <td><dfn id="event-mediadevices-devicechange" data-dfn-type="dfn"><code>devicechange</code></dfn></td>
          <td><code>Event</code></td>
          <td>The set of media devices, available to the User Agent, has changed. The current list devices can be retrieved with the
            <code><a href="#dom-mediadevices-enumeratedevices">enumerateDevices()</a></code> method.
          </td>
        </tr>
      </tbody>
    </table>
  </section>

  <section id="enumerating-devices" typeof="bibo:Chapter" resource="#enumerating-devices" property="bibo:hasPart">
    <!--OddPage-->
    <h2 id="h-enumerating-devices" resource="#h-enumerating-devices"><span property="xhv:role" resource="xhv:heading"><span class="secno">9. </span>Enumerating Local Media Devices</span>
    </h2>
    <p>This section describes an API that the script can use to query the User Agent about connected media input and output devices (for example a web camera or a headset).</p>

    <section id="navigatorusermedia" typeof="bibo:Chapter" resource="#navigatorusermedia" property="bibo:hasPart">
      <h3 id="h-navigatorusermedia" resource="#h-navigatorusermedia"><span property="xhv:role" resource="xhv:heading"><span class="secno">9.1 </span>NavigatorUserMedia</span>
      </h3>
      <div>
        <pre class="def idl"><span class="idlInterface" id="dom-navigatorusermedia" data-idl="" data-title="NavigatorUserMedia" data-dfn-for=""><code>[<span class="extAttr"><span class="extAttrName">Exposed</span>=<span class="extAttrRhs">Window</span></span>,
 <span class="extAttr"><span class="extAttrName">NoInterfaceObject</span></span>]
interface <span class="idlInterfaceID">NavigatorUserMedia</span> {
<span class="idlAttribute" id="idl-def-navigatorusermedia-mediadevices" data-idl="" data-title="mediaDevices" data-dfn-for="navigatorusermedia">    [<span class="extAttr"><span class="extAttrName">SameObject</span></span>]
    readonly attribute <span class="idlAttrType"><a href="#idl-def-mediadevices-partial-1" class="internalDFN" data-link-type="dfn"><code>MediaDevices</code></a></span> <span class="idlAttrName"><a data-lt="mediaDevices" href="#dom-navigatorusermedia-mediadevices" class="internalDFN" data-link-type="dfn" data-for="NavigatorUserMedia"><code>mediaDevices</code></a></span>;</span>
};</code></span></pre>

        <section typeof="bibo:Chapter" resource="#attributes-4" property="bibo:hasPart">
          <h4 id="attributes-4" resource="#attributes-4"><span property="xhv:role" resource="xhv:heading">Attributes</span></h4>
          <dl data-link-for="NavigatorUserMedia" data-dfn-for="NavigatorUserMedia" class="attributes">
            <dt><dfn data-dfn-for="navigatorusermedia" data-dfn-type="dfn" id="dom-navigatorusermedia-mediadevices" data-idl=""><code>mediaDevices</code></dfn> of type <span class="idlAttrType"><a href="#dom-navigatorusermedia-mediadevices" class="internalDFN" data-link-type="dfn"><code>MediaDevices</code></a></span>, readonly</dt>
            <dd>
              <p>Returns the <code>MediaDevices</code> object associated with this <code>Navigator</code> object.</p>
            </dd>
          </dl>
        </section>
      </div>
      <div>
        <pre class="def idl"><span class="idlImplements">Navigator implements <a href="#idl-def-navigatorusermedia-partial-1" class="internalDFN" data-link-type="dfn"><code>NavigatorUserMedia</code></a>;</span></pre>
        <div class="idlImplementsDesc">
          <p>All instances of the <code>Navigator</code> type are defined to also implement the <a href="#idl-def-navigatorusermedia-partial-1" class="internalDFN" data-link-type="dfn"><code>NavigatorUserMedia</code></a> interface.
          </p>
        </div>
      </div>
    </section>

    <section id="mediadevices" typeof="bibo:Chapter" resource="#mediadevices" property="bibo:hasPart">
      <h3 id="h-mediadevices" resource="#h-mediadevices"><span property="xhv:role" resource="xhv:heading"><span class="secno">9.2 </span>MediaDevices</span>
      </h3>
      <p>The <code>MediaDevices</code> object is the entry point to the API used to examine and get access to media devices available to the User Agent.
      </p>
      <p>On page load, run the following steps:</p>
      <p>
      </p>
      <ol>
        <li>
          <p>On the <a href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-settings-object-global">
          relevant global object</a>, run the following steps:</p>
          <ol>
            <li>
              <p>Create three internal slots: [[devicesLiveMap]], [[devicesAccessibleMap]], and [[kindsAccessibleMap]], each initialized to a different empty object.</p>
            </li>
            <li>
              <p>Create one internal slot: [[storedDeviceList]], initialized to null.</p>
            </li>
          </ol>
        </li>
        <li>
          <p>For each kind of device, <var>kind</var>, that
            <a href="#dom-mediadevices-getusermedia" class="internalDFN" data-link-type="dfn"><code>getUserMedia()</code></a> exposes, set [[kindsAccessibleMap]]
            <var>[kind]</var> either to <code>true</code> if the result of <a data-lt="retrieve the permission state" href="#dfn-retrieve-the-permission-state" class="internalDFN" data-link-type="dfn">retrieving
            the permission state</a> of the permission associated with
            <var>kind</var> (e.g. "camera", "microphone"), is "granted", or to
            <code>false</code> otherwise.</p>
        </li>
        <li>
          <p>For each individual device that <a href="#dom-mediadevices-getusermedia" class="internalDFN" data-link-type="dfn"><code>getUserMedia()</code></a> exposes, using the device's deviceId, <var>deviceId</var>, set [[devicesLiveMap]]
            <var>[deviceId]</var> to <code>false</code>, and set [[devicesAccessibleMap]]<var>[deviceId]</var> either to
            <code>true</code> if the result of
            <a data-lt="retrieve the permission state" href="#dfn-retrieve-the-permission-state" class="internalDFN" data-link-type="dfn">retrieving the permission
          state</a> of the permission associated with the device’s kind and <var>deviceId</var>, is “granted”, or to false otherwise.</p>
        </li>
      </ol>

      <p>For each kind of device, <var>kind</var>, that <a href="#dom-mediadevices-getusermedia" class="internalDFN" data-link-type="dfn"><code>getUserMedia()</code></a> exposes, <a data-lt="retrieve the permission state" href="#dfn-retrieve-the-permission-state" class="internalDFN" data-link-type="dfn">
      whenever a transition occurs of the permission state</a> of the permission associated with <var>kind</var>, run the following steps:
      </p>
      <ol>
        <li>
          <p>If the transition is to “granted” from another value, then set [[kindsAccessibleMap]]
            <var>[kind]</var> to <code>true</code>.</p>
        </li>
        <li>
          <p>If the transition is from “granted” to another value, then set [[kindsAccessibleMap]]
            <var>[kind]</var> to <code>false</code>.</p>
        </li>
      </ol>

      <p>For each device that <a href="#dom-mediadevices-getusermedia" class="internalDFN" data-link-type="dfn"><code>getUserMedia()</code></a> exposes,
        <a data-lt="retrieve the permission state" href="#dfn-retrieve-the-permission-state" class="internalDFN" data-link-type="dfn">
      whenever a transition occurs of the permission state</a> of the permission associated with the device's kind and the device's deviceId,
        <var>deviceId</var>, run the following steps:
      </p>
      <ol>
        <li>
          <p>If the transition is to “granted” from another value, then set [[devicesAccessibleMap]]
            <var>[deviceId]</var> to <code>true</code>, if it isn’t already <code>true</code>.</p>
        </li>
        <li>
          <p>If the transition is from “granted” to another value, and the device is currently <a href="#source-stopped">stopped</a>, then set [[devicesAccessibleMap]]<var>[deviceId]</var> to
            <code>false</code>.
          </p>
        </li>
      </ol>

      <p>When new media input and/or output devices are made available, if either the
        <a data-lt="retrieve the permission state" href="#dfn-retrieve-the-permission-state" class="internalDFN" data-link-type="dfn">permission state</a> of the "device-info" permission is "granted", or any of the local devices are attached to an active MediaStream in the current browsing context, or the <a href="https://html.spec.whatwg.org/multipage/browsers.html#active-document">active document</a> in the current browsing context is <a href="https://html.spec.whatwg.org/multipage/browsers.html#fully-active">fully active</a> and <a href="https://html.spec.whatwg.org/#gains-focus">has focus</a>, then the User Agent <em class="rfc2119" title="MUST">MUST</em> run the following steps:</p>
      <ol>
        <li>
          <p>Set [[storedDeviceList]] to null.</p>
        </li>
        <li>
          <p>Queue a task that fires a simple event named <code><a href="#event-mediadevices-devicechange">devicechange</a></code> at the
            <code><a href="#idl-def-mediadevices-partial-1" class="internalDFN" data-link-type="dfn"><code>MediaDevices</code></a>
            </code> object.</p>
        </li>
      </ol>
      <p>The User Agent <em class="rfc2119" title="MAY">MAY</em> fire just a single event when several devices are added at the same time, e.g. a camera with a microphone. These events are potentially triggered simultaneously across browsing contexts on different origins; user agents <em class="rfc2119" title="MAY">MAY</em> add fuzzing on the timing of events to avoid cross-origin activity correlation.</p>
      <div>
        <pre class="def idl"><span class="idlInterface" id="idl-def-mediadevices" data-idl="" data-title="MediaDevices">[<span class="extAttr"><span class="extAttrName">Exposed</span>=<span class="extAttrRhs">Window</span></span>]
interface <span class="idlInterfaceID">MediaDevices</span> : <span class="idlSuperclass">EventTarget</span> {
<span class="idlAttribute" id="idl-def-mediadevices-ondevicechange" data-idl="" data-title="ondevicechange" data-dfn-for="mediadevices">    attribute <span class="idlAttrType">EventHandler</span> <span class="idlAttrName"><a data-lt="ondevicechange" href="#dom-mediadevices-ondevicechange" class="internalDFN" data-link-type="dfn" data-for="MediaDevices"><code>ondevicechange</code></a></span>;</span>
<span class="idlMethod" id="idl-def-mediadevices-enumeratedevices()" data-idl="" data-title="enumerateDevices" data-dfn-for="mediadevices">    <span class="idlMethType">Promise&lt;sequence&lt;<a href="#idl-def-mediadeviceinfo" class="internalDFN" data-link-type="dfn"><code>MediaDeviceInfo</code></a>&gt;&gt;</span> <span class="idlMethName">enumerateDevices</span>();</span>
};</span></pre>

        <section typeof="bibo:Chapter" resource="#attributes-5" property="bibo:hasPart">
          <h4 id="attributes-5" resource="#attributes-5"><span property="xhv:role" resource="xhv:heading">Attributes</span></h4>
          <dl data-link-for="MediaDevices" data-dfn-for="MediaDevices" class="attributes">
            <dt><dfn data-dfn-for="mediadevices" data-dfn-type="dfn" id="dom-mediadevices-ondevicechange" data-idl=""><code>ondevicechange</code></dfn> of type <span class="idlAttrType">EventHandler</span></dt>
            <dd>
              <p>The event type of this event handler is <code><a href="#event-mediadevices-devicechange">devicechange</a></code>.</p>
            </dd>
          </dl>
        </section>

        <section typeof="bibo:Chapter" resource="#methods-2" property="bibo:hasPart">
          <h4 id="methods-2" resource="#methods-2"><span property="xhv:role" resource="xhv:heading">Methods</span></h4>
          <dl data-link-for="MediaDevices" data-dfn-for="MediaDevices" class="methods">
            <dt><code>enumerateDevices</code></dt>
            <dd>
              <p>Collects information about the User Agent's available media input and output devices.</p>
              <p>This method returns a promise. The promise will be fulfilled with a sequence of <code><a href="#idl-def-mediadeviceinfo" class="internalDFN" data-link-type="dfn"><code>MediaDeviceInfo</code></a>
                </code>
                dictionaries representing the User Agent's available media input and output devices if enumeration is successful.</p>
              <p>Elements of this sequence that represent input devices will be of type <code><a href="#idl-def-inputdeviceinfo" class="internalDFN" data-link-type="dfn"><code>InputDeviceInfo</code></a>
                </code> which extends
                <code><a href="#idl-def-mediadeviceinfo" class="internalDFN" data-link-type="dfn"><code>MediaDeviceInfo</code></a>
                </code>.</p>
              <p>Camera and microphone sources <em class="rfc2119">should</em> be enumerable. Specifications that add additional types of source will provide recommendations about whether the source type should be enumerable.</p>
              <p>When the <dfn id="dom-mediadevices-enumeratedevices" data-dfn-type="dfn"><code>enumerateDevices()</code></dfn> method is called, the User Agent must run the following steps:
              </p>
              <ol>
                <li>
                  <p>Let <var>p</var> be a new promise.</p>
                </li>
                <li>
                  <p>Run the following steps in parallel:</p>
                  <ol>
                    <li>
                      <p>If [[storedDeviceList]] is not null, then let <var>resultList</var> be a copy of [[storedDeviceList]], and jump to the step labeled
                        <em>Complete Enumeration</em>.</p>
                    </li>
                    <li>
                      <p>Let <var>resultList</var> be an empty list.</p>
                    </li>
                    <li>
                      <p>If this method has been called previously within this browsing session, let <var>oldList</var> be the list of
                        <code><a href="#idl-def-mediadeviceinfo" class="internalDFN" data-link-type="dfn"><code>MediaDeviceInfo</code></a>
                        </code> objects that was produced at that call (<var>resultList</var>); otherwise, let <var>oldList</var> be an empty list.</p>
                    </li>
                    <li>
                      <p>Probe the User Agent for available media devices, and run the following sub steps for each discovered device,
                        <var>device</var>:</p>
                      <ol>
                        <li>
                          <p>If <var>device</var> is represented by a
                            <code><a href="#idl-def-mediadeviceinfo" class="internalDFN" data-link-type="dfn"><code>MediaDeviceInfo</code></a>
                            </code> object in
                            <var>oldList</var>, append that object to
                            <var>resultList</var>, abort these steps and continue with the next device (if any).</p>
                        </li>
                        <li>
                          <p>Let <var>deviceInfo</var> be a new
                            <code><a href="#idl-def-mediadeviceinfo" class="internalDFN" data-link-type="dfn"><code>MediaDeviceInfo</code></a>
                            </code> object to represent <var>device</var>.</p>
                        </li>
                        <li>
                          <p>If a stored <code><a data-link-for="MediaDeviceInfo" href="#dom-mediadeviceinfo-deviceid" class="internalDFN" data-link-type="dfn"><code>deviceId</code></a>
                            </code> exists for
                            <var>device</var>, initialize <var>deviceInfo</var>'s
                            <code><a data-link-for="MediaDeviceInfo" href="#dom-mediadeviceinfo-deviceid" class="internalDFN" data-link-type="dfn"><code>deviceId</code></a>
                            </code> to that value. Otherwise, let <var>deviceInfo</var>'s
                            <code><a data-link-for="MediaDeviceInfo" href="#dom-mediadeviceinfo-deviceid" class="internalDFN" data-link-type="dfn"><code>deviceId</code></a>
                            </code> member be a newly generated unique identifier.</p>
                        </li>
                        <li>
                          <p>If <var>device</var> belongs to the same physical device as a device already represented in
                            <var>oldList</var> or <var>resultList</var>, initialize <var>deviceInfo</var>'s
                            <code><a data-link-for="MediaDeviceInfo" href="#dom-mediadeviceinfo-groupid" class="internalDFN" data-link-type="dfn"><code>groupId</code></a>
                            </code> member to the
                            <code><a data-link-for="MediaDeviceInfo" href="#dom-mediadeviceinfo-groupid" class="internalDFN" data-link-type="dfn"><code>groupId</code></a>
                            </code> value of the existing <code><a href="#idl-def-mediadeviceinfo" class="internalDFN" data-link-type="dfn"><code>MediaDeviceInfo</code></a>
                            </code> object. Otherwise, let <var>deviceInfo</var>'s
                            <code><a data-link-for="MediaDeviceInfo" href="#dom-mediadeviceinfo-groupid" class="internalDFN" data-link-type="dfn"><code>groupId</code></a>
                            </code> member be a newly generated unique identifier.</p>
                        </li>
                        <li>
                          <p>Append <var>deviceInfo</var> to
                            <var>resultList</var>.</p>
                        </li>
                      </ol>
                    </li>
                    <li>
                      <p>Set [[storedDeviceList]] to <var>resultList</var>.</p>
                    </li>
                    <li>
                      <p><em>Complete Enumeration</em>: run the following sub steps to resolve <var>p</var>:</p>
                      <ol>
                        <li>
                          <p>If any of the local devices are attached to a
                            <code>live</code> MediaStreamTrack in the current browsing context, set <var>list-permission</var> to "granted", otherwise set <var>list-permission</var> to the result of
                            <a data-lt="retrieve the permission state" href="#dfn-retrieve-the-permission-state" class="internalDFN" data-link-type="dfn"> retrieving the
                          permission state</a> of the "device-info" permission.</p>
                        </li>
                        <li>
                          <p>If <var>list-permission</var> is not "granted", let
                            <var>filteredList</var> be a copy of
                            <var>resultList</var>, and all its elements, where the
                            <code><a data-link-for="MediaDeviceInfo" href="#dom-mediadeviceinfo-label" class="internalDFN" data-link-type="dfn"><code>label</code></a>
                            </code>
                            member is the empty string.</p>
                        </li>
                        <li>
                          <p>If <var>filteredList</var> is a non-empty list, then resolve <var>p</var> with <var>filteredList</var>. Otherwise, resolve <var>p</var> with
                            <var>resultList</var>.</p>
                        </li>
                      </ol>
                    </li>
                  </ol>
                </li>
                <li>
                  <p>Return <var>p</var>.</p>
                </li>
              </ol>
              <p class="fingerprint">Since this method returns persistent information across browsing sessions and origins via the number and grouping of media capture devices, it adds to the fingerprinting surface exposed by the user agent.<img src="images/fingerprint.png" alt="(This is a fingerprinting vector.)" width="15" height="21"></p>
              <p class="fingerprint">Once authorization has been granted to one of the capture devices, it provides additional persistent cross-origin information via the human readable labels associated with available capture devices, which furhter adds to the fingerprinting surface.<img src="images/fingerprint.png" alt="(This is a fingerprinting vector.)" width="15" height="21"></p>
              <div>
                <em>No parameters.</em>
              </div>
              <div>
                <em>Return type:</em>
                <code>Promise&lt;sequence&lt;MediaDeviceInfo&gt;&gt;</code>
              </div>
            </dd>
          </dl>
        </section>
      </div>

      <section id="access-control-model" typeof="bibo:Chapter" resource="#access-control-model" property="bibo:hasPart">
        <h4 id="h-access-control-model" resource="#h-access-control-model"><span property="xhv:role" resource="xhv:heading"><span class="secno">9.2.1 </span>Access control model</span>
        </h4>
        <p>The algorithm described above means that the access to media device information depends on whether or not permission has been granted to the page's origin.</p>
        <p>If no such access has been granted, the
          <code><a href="#idl-def-mediadeviceinfo" class="internalDFN" data-link-type="dfn"><code>MediaDeviceInfo</code></a>
          </code> dictionary will contain the deviceId, kind, and groupId.</p>
        <p>If access has been granted for a media device, the
          <code><a href="#idl-def-mediadeviceinfo" class="internalDFN" data-link-type="dfn"><code>MediaDeviceInfo</code></a>
          </code> dictionary will contain the deviceId, kind, label, and groupId.</p>
      </section>
    </section>

    <section id="device-info" typeof="bibo:Chapter" resource="#device-info" property="bibo:hasPart">
      <h3 id="h-device-info" resource="#h-device-info"><span property="xhv:role" resource="xhv:heading"><span class="secno">9.3 </span>Device Info</span>
      </h3>
      <div>
        <pre class="def idl"><span class="idlInterface" id="idl-def-mediadeviceinfo" data-idl="" data-title="MediaDeviceInfo">[<span class="extAttr"><span class="extAttrName">Exposed</span>=<span class="extAttrRhs">Window</span></span>]
interface <span class="idlInterfaceID">MediaDeviceInfo</span> {
<span class="idlAttribute" id="idl-def-mediadeviceinfo-deviceid" data-idl="" data-title="deviceId" data-dfn-for="mediadeviceinfo">    readonly attribute <span class="idlAttrType">DOMString</span>       <span class="idlAttrName"><a data-lt="deviceId" href="#dom-mediadeviceinfo-deviceid" class="internalDFN" data-link-type="dfn" data-for="MediaDeviceInfo"><code>deviceId</code></a></span>;</span>
<span class="idlAttribute" id="idl-def-mediadeviceinfo-kind" data-idl="" data-title="kind" data-dfn-for="mediadeviceinfo">    readonly attribute <span class="idlAttrType"><a href="#idl-def-mediadevicekind" class="internalDFN" data-link-type="dfn"><code>MediaDeviceKind</code></a></span> <span class="idlAttrName"><a data-lt="kind" href="#dom-mediadeviceinfo-kind" class="internalDFN" data-link-type="dfn" data-for="MediaDeviceInfo"><code>kind</code></a></span>;</span>
<span class="idlAttribute" id="idl-def-mediadeviceinfo-label" data-idl="" data-title="label" data-dfn-for="mediadeviceinfo">    readonly attribute <span class="idlAttrType">DOMString</span>       <span class="idlAttrName"><a data-lt="label" href="#dom-mediadeviceinfo-label" class="internalDFN" data-link-type="dfn" data-for="MediaDeviceInfo"><code>label</code></a></span>;</span>
<span class="idlAttribute" id="idl-def-mediadeviceinfo-groupid" data-idl="" data-title="groupId" data-dfn-for="mediadeviceinfo">    readonly attribute <span class="idlAttrType">DOMString</span>       <span class="idlAttrName"><a data-lt="groupId" href="#dom-mediadeviceinfo-groupid" class="internalDFN" data-link-type="dfn" data-for="MediaDeviceInfo"><code>groupId</code></a></span>;</span>
<span class="idlSerializer" id="idl-def-mediadeviceinfo-serializer" data-idl="" data-title="serializer" data-dfn-for="mediadeviceinfo">    serializer = <span class="idlSerializerValues">{attribute}</span>;</span>
};</span></pre>

        <section typeof="bibo:Chapter" resource="#attributes-6" property="bibo:hasPart">
          <h4 id="attributes-6" resource="#attributes-6"><span property="xhv:role" resource="xhv:heading">Attributes</span></h4>
          <dl data-link-for="MediaDeviceInfo" data-dfn-for="MediaDeviceInfo" class="attributes">
            <dt><dfn data-dfn-for="mediadeviceinfo" data-dfn-type="dfn" id="dom-mediadeviceinfo-deviceid" data-idl=""><code>deviceId</code></dfn> of type <span class="idlAttrType">DOMString</span>, readonly</dt>
            <dd>
              <p>A unique identifier for the represented device.</p>
              <p>All enumerable devices have an identifier that <em class="rfc2119" title="MUST">MUST</em> be unique to the page's origin. This identifier <em class="rfc2119" title="MUST">MUST</em> be un-guessable by applications of other origins to prevent the identifier from being used to correlate the same user across different origins.</p>
              <p>If any local devices have been attached to a live MediaStreamTrack in a page from this origin, or
                <a href="#stored-permissions">stored permission</a> to access local devices has been granted to this origin, then this identifier <em class="rfc2119" title="MUST">MUST</em> be persisted, except as detailed below. Unique and stable identifiers let the application save, identify the availability of, and directly request specific sources, across multiple visits.</p>
              <p>However, as long as no local device has been attached to a live MediaStreamTrack in a page from this origin, and no
                <a href="#stored-permissions">stored permission</a> to access local devices has been granted to this origin, then the user agent
                <em class="rfc2119" title="MAY">MAY</em> clear this identifier once the last browsing session from this origin has been closed. If the user agent chooses not to clear the identifier in this condition, then it <em class="rfc2119" title="MUST">MUST</em> provide for the user to visibly inspect and delete the identifier, like a cookie.</p>
              <p class="fingerprint">Since <code>deviceId</code> may persist across browsing sessions and to reduce its potential as a fingerprinting mechanism, <code>deviceId</code> is to be treated as other persistent storage mechanisms such as cookies [
                <cite><a class="bibref" href="#bib-COOKIES">COOKIES</a></cite>], in that user agents <em class="rfc2119" title="MUST NOT">MUST NOT</em> persist device identifiers for sites that are blocked from using cookies, and user agents <em class="rfc2119" title="MUST">MUST</em> reset per-origin device identifiers when other persistent storage are cleared.<img src="images/fingerprint.png" alt="(This is a fingerprinting vector.)" width="15" height="21"></p>
            </dd>
            <dt><dfn data-dfn-for="mediadeviceinfo" data-dfn-type="dfn" id="dom-mediadeviceinfo-kind" data-idl=""><code>kind</code></dfn> of type <span class="idlAttrType"><a href="#idl-def-mediadevicekind" class="internalDFN" data-link-type="dfn"><code>MediaDeviceKind</code></a></span>, readonly</dt>
            <dd>
              <p>Describes the kind of the represented device.</p>
            </dd>
            <dt><dfn data-dfn-for="mediadeviceinfo" data-dfn-type="dfn" id="dom-mediadeviceinfo-label" data-idl=""><code>label</code></dfn> of type <span class="idlAttrType">DOMString</span>, readonly</dt>
            <dd>
              <p>A label describing this device (for example "External USB Webcam"). If the device has no associated label, then this attribute <em class="rfc2119" title="MUST">MUST</em> return the empty string.</p>
            </dd>
            <dt><dfn data-dfn-for="mediadeviceinfo" data-dfn-type="dfn" id="dom-mediadeviceinfo-groupid" data-idl=""><code>groupId</code></dfn> of type <span class="idlAttrType">DOMString</span>, readonly</dt>
            <dd>
              <p>Returns the group identifier of the represented device. Two devices have the same group identifier if they belong to the same physical device; for example a monitor with a built-in camera and microphone.
              </p>
            </dd>
          </dl>
        </section>

        <section typeof="bibo:Chapter" resource="#serializer" property="bibo:hasPart">
          <h4 id="serializer" resource="#serializer"><span property="xhv:role" resource="xhv:heading">Serializer</span></h4>
          <div>
            <p>Instances of this interface are serialized as a map with entries for each of the serializable attributes.</p>
          </div>
        </section>
      </div>
      <div>
        <pre class="def idl"><span class="idlEnum" id="idl-def-mediadevicekind" data-idl="" data-title="MediaDeviceKind">enum <span class="idlEnumID">MediaDeviceKind</span> {
    "<a href="#dom-mediadevicekind-audioinput" class="idlEnumItem">audioinput</a>",
    "<a href="#dom-mediadevicekind-audiooutput" class="idlEnumItem">audiooutput</a>",
    "<a href="#dom-mediadevicekind-videoinput" class="idlEnumItem">videoinput</a>"
};</span></pre>
        <table data-link-for="MediaDeviceKind" data-dfn-for="MediaDeviceKind" class="simple">
          <tbody>
            <tr>
              <th colspan="2">Enumeration description</th>
            </tr>
            <tr>
              <td><dfn data-dfn-for="mediadevicekind" data-dfn-type="dfn" id="dom-mediadevicekind-audioinput" data-idl=""><code id="idl-def-MediaDeviceKind.audioinput">audioinput</code></dfn></td>
              <td>
                <p>Represents an audio input device; for example a microphone.
                </p>
              </td>
            </tr>
            <tr>
              <td><dfn data-dfn-for="mediadevicekind" data-dfn-type="dfn" id="dom-mediadevicekind-audiooutput" data-idl=""><code id="idl-def-MediaDeviceKind.audiooutput">audiooutput</code></dfn></td>
              <td>
                <p>Represents an audio output device; for example a pair of headphones.
                </p>
              </td>
            </tr>
            <tr>
              <td><dfn data-dfn-for="mediadevicekind" data-dfn-type="dfn" id="dom-mediadevicekind-videoinput" data-idl=""><code id="idl-def-MediaDeviceKind.videoinput">videoinput</code></dfn></td>
              <td>
                <p>Represents a video input device; for example a webcam.</p>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </section>

    <section id="input-specific-device-info" typeof="bibo:Chapter" resource="#input-specific-device-info" property="bibo:hasPart">
      <h3 id="h-input-specific-device-info" resource="#h-input-specific-device-info"><span property="xhv:role" resource="xhv:heading"><span class="secno">9.4 </span>Input-specific Device Info</span>
      </h3>
      <div>
        <pre class="def idl"><span class="idlInterface" id="idl-def-inputdeviceinfo" data-idl="" data-title="InputDeviceInfo">interface <span class="idlInterfaceID">InputDeviceInfo</span> : <span class="idlSuperclass"><a href="#idl-def-mediadeviceinfo" class="internalDFN" data-link-type="dfn"><code>MediaDeviceInfo</code></a></span> {
<span class="idlMethod" id="idl-def-inputdeviceinfo-getcapabilities()" data-idl="" data-title="getCapabilities" data-dfn-for="inputdeviceinfo">    <span class="idlMethType"><a href="#idl-def-mediatrackcapabilities" class="internalDFN" data-link-type="dfn"><code>MediaTrackCapabilities</code></a></span> <span class="idlMethName"><a data-lt="getCapabilities" href="#dom-inputdeviceinfo-getcapabilities" class="internalDFN" data-link-type="dfn" data-for="InputDeviceInfo"><code>getCapabilities</code></a></span>();</span>
};</span></pre>

        <section typeof="bibo:Chapter" resource="#methods-3" property="bibo:hasPart">
          <h4 id="methods-3" resource="#methods-3"><span property="xhv:role" resource="xhv:heading">Methods</span></h4>
          <dl data-link-for="InputDeviceInfo" data-dfn-for="InputDeviceInfo" class="methods">
            <dt><dfn data-dfn-for="inputdeviceinfo" data-dfn-type="dfn" id="dom-inputdeviceinfo-getcapabilities" data-idl=""><code>getCapabilities</code></dfn></dt>
            <dd>
              <p>Returns a <code><a href="#idl-def-mediatrackcapabilities" class="internalDFN" data-link-type="dfn"><code>MediaTrackCapabilities</code></a>
                </code> object describing the primary audio or video track of a device's
                <code><a href="#idl-def-mediastream" class="internalDFN" data-link-type="dfn"><code>MediaStream</code></a>
                </code> (according to its
                <code>kind</code> value), in the absence of any user-supplied constraints. These capabilities <em class="rfc2119" title="MUST">MUST</em> be identical to those that would have been obtained by calling
                <code>getCapabilities()</code> on the first
                <code><a href="#idl-def-mediastreamtrack" class="internalDFN" data-link-type="dfn"><code>MediaStreamTrack</code></a>
                </code> of this type in a
                <code><a href="#idl-def-mediastream" class="internalDFN" data-link-type="dfn"><code>MediaStream</code></a>
                </code> returned by
                <code>getUserMedia({deviceId: <i>id</i>})</code> where <i>id</i> is the value of the <code>deviceId</code> attribute of this
                <code>MediaDeviceInfo</code>.</p>
              <p>If no access has been granted to any local devices and this
                <code>InputDeviceInfo</code> has been filtered with respect to unique identifying information (see above description of
                <code>enumerateDevices()</code> result), then this method returns
                <code>null</code>.</p>
              <div>
                <em>No parameters.</em>
              </div>
              <div>
                <em>Return type:</em> <code>MediaTrackCapabilities</code>
              </div>
            </dd>
          </dl>
        </section>
      </div>
    </section>
  </section>

  <section id="local-content" typeof="bibo:Chapter" resource="#local-content" property="bibo:hasPart">
    <!--OddPage-->
    <h2 id="h-local-content" resource="#h-local-content"><span property="xhv:role" resource="xhv:heading"><span class="secno">10. </span>Obtaining local multimedia content</span>
    </h2>
    <p>This section extends <code><a href="#idl-def-navigatorusermedia-partial-1" class="internalDFN" data-link-type="dfn"><code>NavigatorUserMedia</code></a>
      </code> and
      <code><a href="#idl-def-mediadevices-partial-1" class="internalDFN" data-link-type="dfn"><code>MediaDevices</code></a>
      </code> with APIs to request permission to access media input devices available to the User Agent.</p>
    <p>When on an insecure origin [<cite><a class="bibref" href="#bib-mixed-content">mixed-content</a></cite>], User Agents are encouraged to warn about usage of <code>navigator.mediaDevices.getUserMedia</code>,
      <code>navigator.getUserMedia</code>, and any prefixed variants in their developer tools, error logs, etc. It is explicitly permitted for User Agents to remove these APIs entirely when on an insecure origin, as long as they remove all of them at once (e.g., they should not leave just the prefixed version available on insecure origins).</p>
    <p>All Documents have a <dfn data-dfn-type="dfn" id="dfn-user-media-enabled-flag">user media enabled flag</dfn>. This specification does not detail how or when this flag is set.</p>

    <section id="navigatorusermedia-interface-extensions" typeof="bibo:Chapter" resource="#navigatorusermedia-interface-extensions" property="bibo:hasPart">
      <h3 id="h-navigatorusermedia-interface-extensions" resource="#h-navigatorusermedia-interface-extensions"><span property="xhv:role" resource="xhv:heading"><span class="secno">10.1 </span>NavigatorUserMedia Interface Extensions</span>
      </h3>
      <div class="note">
        <div class="note-title marker" aria-level="4" role="heading" id="h-note8"><span>Note</span></div>
        <div class="">
          The definition of getUserMedia() in this section reflects two major changes from the method definition that has existed here for many months.
          <p>First, the official definition for the getUserMedia() method, and the one which developers are encouraged to use, is now at <a href="#dom-mediadevices-getusermedia">MediaDevices</a>. This decision reflected consensus as long as the original API remained available here under the Navigator object for backwards compatibility reasons, since the working group acknowledges that early users of these APIs have been encouraged to define getUserMedia as "var getUserMedia = navigator.getUserMedia || navigator.webkitGetUserMedia || navigator.mozGetUserMedia;" in order for their code to be functional both before and after official implementations of getUserMedia() in popular browsers. To ensure functional equivalence, the getUserMedia() method here is defined in terms of the method under MediaDevices.</p>
          <p>Second, the decision to change all other callback-based methods in the specification to be based on Promises instead required that the navigator.getUserMedia() definition reflect this in its use of navigator.mediaDevices.getUserMedia(). Because navigator.getUserMedia() is now the only callback-based method remaining in the specification, there is ongoing discussion as to a) whether it still belongs in the specification, and b) if it does, whether its syntax should remain callback-based or change in some way to use Promises. Input on these questions is encouraged, particularly from developers actively using today's implementations of this functionality.</p>
          <p>Note that the other methods that changed from a callback-based syntax to a Promises-based syntax were not considered to have been implemented widely enough in any form to have to consider legacy usage.
          </p>
        </div>
      </div>
      <div>
        <pre class="def idl"><span class="idlInterface" id="idl-def-navigatorusermedia-partial-1" data-idl="" data-title="NavigatorUserMedia">partial interface <span class="idlInterfaceID"><a data-lt="NavigatorUserMedia" href="#idl-def-navigatorusermedia-partial-1" class="internalDFN" data-link-type="dfn" data-for=""><code>NavigatorUserMedia</code></a></span> {
<span class="idlMethod" id="idl-def-navigatorusermedia-getusermedia(mediastreamconstraints,navigatorusermediasuccesscallback,navigatorusermediaerrorcallback)" data-idl="" data-title="getUserMedia" data-dfn-for="navigatorusermedia">    <span class="idlMethType">void</span> <span class="idlMethName">getUserMedia</span>(<span class="idlParam"><span class="idlParamType"><a href="#idl-def-mediastreamconstraints" class="internalDFN" data-link-type="dfn"><code>MediaStreamConstraints</code></a></span> <span class="idlParamName">constraints</span></span>,
                      <span class="idlParam"><span class="idlParamType"><a href="#idl-def-navigatorusermediasuccesscallback" class="internalDFN" data-link-type="dfn"><code>NavigatorUserMediaSuccessCallback</code></a></span> <span class="idlParamName">successCallback</span></span>,
                      <span class="idlParam"><span class="idlParamType"><a href="#idl-def-navigatorusermediaerrorcallback" class="internalDFN" data-link-type="dfn"><code>NavigatorUserMediaErrorCallback</code></a></span> <span class="idlParamName">errorCallback</span></span>);</span>
};</span></pre>

        <section typeof="bibo:Chapter" resource="#methods-4" property="bibo:hasPart">
          <h4 id="methods-4" resource="#methods-4"><span property="xhv:role" resource="xhv:heading">Methods</span></h4>
          <dl data-link-for="NavigatorUserMedia" data-dfn-for="NavigatorUserMedia" class="methods">
            <dt><code>getUserMedia</code></dt>
            <dd>
              <p>Prompts the user for permission to use their Web cam or other video or audio input.</p>
              <p>The <var>constraints</var> argument is a dictionary of type
                <code><a href="#idl-def-mediastreamconstraints" class="internalDFN" data-link-type="dfn"><code>MediaStreamConstraints</code></a>
                </code>.</p>
              <p>The <var>successCallback</var> will be invoked with a suitable
                <code><a href="#idl-def-mediastream" class="internalDFN" data-link-type="dfn"><code>MediaStream</code></a>
                </code> object as its argument if the user accepts valid tracks as described in <a href="#dom-mediadevices-getusermedia">getUserMedia()</a> on
                <code><a href="#dom-navigatorusermedia-mediadevices" class="internalDFN" data-link-type="dfn"><code>MediaDevices</code></a>
                </code>.</p>
              <p>The <var>errorCallback</var> will be invoked if there is a failure in finding valid tracks or if the user denies permission, as described in <a href="#dom-mediadevices-getusermedia">getUserMedia()</a> on
                <code><a href="#dom-navigatorusermedia-mediadevices" class="internalDFN" data-link-type="dfn"><code>MediaDevices</code></a>
                </code>.</p>
              <p>When the <code id="dom-navigatorusermedia-getusermedia">getUserMedia()</code> method is called, the User Agent <em class="rfc2119" title="MUST">MUST</em> run the following steps:
              </p>
              <ol>
                <li>
                  <p>Let <var>constraints</var> be the method's first argument.
                  </p>
                </li>
                <li>
                  <p>Let <var>successCallback</var> be the callback indicated by the method's second argument.</p>
                </li>
                <li>
                  <p>Let <var>errorCallback</var> be the callback indicated by the method's third argument.</p>
                </li>
                <li>
                  <p>Run the steps specified by the <a href="#dom-mediadevices-getusermedia">getUserMedia() algorithm</a> with <var>constraints</var> as the argument, and let
                    <var>p</var> be the resulting promise.</p>
                </li>
                <li>
                  <p>Upon fulfillment of <var>p</var> with value
                    <var>stream</var>, run the following step:</p>
                  <ol>
                    <li>
                      <p>Invoke <var>successCallback</var> with
                        <var>stream</var> as the argument.</p>
                    </li>
                  </ol>
                </li>
                <li>
                  <p>Upon rejection of <var>p</var> with reason <var>r</var>, run the following step:</p>
                  <ol>
                    <li>
                      <p>Invoke <var>errorCallback</var> with <var>r</var> as the argument.</p>
                    </li>
                  </ol>
                </li>
              </ol>
              <table class="parameters">
                <tbody>
                  <tr>
                    <th>Parameter</th>
                    <th>Type</th>
                    <th>Nullable</th>
                    <th>Optional</th>
                    <th>Description</th>
                  </tr>
                  <tr>
                    <td class="prmName">constraints</td>
                    <td class="prmType">
                      <code>MediaStreamConstraints</code></td>
                    <td class="prmNullFalse"><span role="img" aria-label="False">✘</span></td>
                    <td class="prmOptFalse"><span role="img" aria-label="False">✘</span></td>
                    <td class="prmDesc"></td>
                  </tr>
                  <tr>
                    <td class="prmName">successCallback</td>
                    <td class="prmType">
                      <code>NavigatorUserMediaSuccessCallback</code></td>
                    <td class="prmNullFalse"><span role="img" aria-label="False">✘</span></td>
                    <td class="prmOptFalse"><span role="img" aria-label="False">✘</span></td>
                    <td class="prmDesc"></td>
                  </tr>
                  <tr>
                    <td class="prmName">errorCallback</td>
                    <td class="prmType">
                      <code>NavigatorUserMediaErrorCallback</code></td>
                    <td class="prmNullFalse"><span role="img" aria-label="False">✘</span></td>
                    <td class="prmOptFalse"><span role="img" aria-label="False">✘</span></td>
                    <td class="prmDesc"></td>
                  </tr>
                </tbody>
              </table>
              <div>
                <em>Return type:</em> <code>void</code>
              </div>
            </dd>
          </dl>
        </section>
      </div>
    </section>

    <section id="mediadevices-interface-extensions" typeof="bibo:Chapter" resource="#mediadevices-interface-extensions" property="bibo:hasPart">
      <h3 id="h-mediadevices-interface-extensions" resource="#h-mediadevices-interface-extensions"><span property="xhv:role" resource="xhv:heading"><span class="secno">10.2 </span>MediaDevices Interface Extensions</span>
      </h3>
      <div class="note">
        <div class="note-title marker" aria-level="4" role="heading" id="h-note9"><span>Note</span></div>
        <div class="">
          The definition of getUserMedia() in this section reflects two major changes from the method definition that has existed under NavigatorUserMedia for many months.
          <p>First, the official definition for the getUserMedia() method, and the one which developers are encouraged to use, is now the one defined here under MediaDevices. This decision reflected consensus as long as the original API remained available at
            <a href="#idl-def-navigatorusermedia-getusermedia(mediastreamconstraints,navigatorusermediasuccesscallback,navigatorusermediaerrorcallback)" class="internalDFN" data-link-type="dfn"><code>NavigatorUserMedia.getUserMedia</code></a> under the Navigator object for backwards compatibility reasons, since the working group acknowledges that early users of these APIs have been encouraged to define getUserMedia as "var getUserMedia = navigator.getUserMedia || navigator.webkitGetUserMedia || navigator.mozGetUserMedia;" in order for their code to be functional both before and after official implementations of getUserMedia() in popular browsers. To ensure functional equivalence, the getUserMedia() method under NavigatorUserMedia is defined in terms of the method here.</p>
          <p>Second, the method defined here is Promises-based, while the one defined under NavigatorUserMedia is currently still callback-based. Developers expecting to find getUserMedia() defined under NavigatorUserMedia are strongly encouraged to read the detailed Note given there.</p>
        </div>
      </div>
      <p>The <code>getSupportedConstraints</code> method is provided to allow the application to determine which constraints the User Agent recognizes.
      </p>
      <div>
        <pre class="def idl"><span class="idlInterface" id="idl-def-mediadevices-partial-1" data-idl="" data-title="MediaDevices">partial interface <span class="idlInterfaceID">MediaDevices</span> {
<span class="idlMethod" id="idl-def-mediadevices-getsupportedconstraints()" data-idl="" data-title="getSupportedConstraints" data-dfn-for="mediadevices">    <span class="idlMethType"><a href="#idl-def-mediatracksupportedconstraints" class="internalDFN" data-link-type="dfn"><code>MediaTrackSupportedConstraints</code></a></span> <span class="idlMethName"><a data-lt="getSupportedConstraints" href="#dom-mediadevices-getsupportedconstraints" class="internalDFN" data-link-type="dfn" data-for="MediaDevices"><code>getSupportedConstraints</code></a></span>();</span>
<span class="idlMethod" id="idl-def-mediadevices-getusermedia(optional-mediastreamconstraints)" data-idl="" data-title="getUserMedia" data-dfn-for="mediadevices">    <span class="idlMethType">Promise&lt;<a href="#idl-def-mediastream" class="internalDFN" data-link-type="dfn"><code>MediaStream</code></a>&gt;</span>           <span class="idlMethName">getUserMedia</span>(<span class="idlParam">optional <span class="idlParamType"><a href="#idl-def-mediastreamconstraints" class="internalDFN" data-link-type="dfn"><code>MediaStreamConstraints</code></a></span> <span class="idlParamName">constraints</span></span>);</span>
};</span></pre>

        <section typeof="bibo:Chapter" resource="#methods-5" property="bibo:hasPart">
          <h4 id="methods-5" resource="#methods-5"><span property="xhv:role" resource="xhv:heading">Methods</span></h4>
          <dl data-link-for="MediaDevices" data-dfn-for="MediaDevices" class="methods">
            <dt><dfn data-dfn-for="mediadevices" data-dfn-type="dfn" id="dom-mediadevices-getsupportedconstraints" data-idl=""><code>getSupportedConstraints</code></dfn></dt>
            <dd>
              <p>Returns a dictionary whose members are the constrainable properties known to the User Agent. A supported constrainable property <em class="rfc2119" title="MUST">MUST</em> be represented and any constrainable properties not supported by the User Agent <em class="rfc2119" title="MUST NOT">MUST NOT</em> be present in the returned dictionary. The values returned represent what the browser implements and will not change during a browsing session.</p>
              <div>
                <em>No parameters.</em>
              </div>
              <div>
                <em>Return type:</em>
                <code>MediaTrackSupportedConstraints</code>
              </div>
            </dd>
            <dt><code>getUserMedia</code></dt>
            <dd>
              <p>Prompts the user for permission to use their Web cam or other video or audio input.</p>
              <p>The <var>constraints</var> argument is a dictionary of type
                <code><a href="#idl-def-mediastreamconstraints" class="internalDFN" data-link-type="dfn"><code>MediaStreamConstraints</code></a>
                </code>.</p>
              <p>This method returns a promise. The promise will be fulfilled with a suitable <code><a href="#idl-def-mediastream" class="internalDFN" data-link-type="dfn"><code>MediaStream</code></a>
                </code> object if the user accepts valid tracks as described below.</p>
              <p>The promise will be rejected if there is a failure in finding valid tracks or if the user denies permission, as described below.
              </p>
              <p>When the <dfn id="dom-mediadevices-getusermedia" data-dfn-type="dfn"><code>getUserMedia()</code></dfn> method is called, the User Agent <em class="rfc2119" title="MUST">MUST</em> run the following steps:
              </p>
              <ol>
                <li>
                  <p>Let <var>constraints</var> be the method's first argument.
                  </p>
                </li>
                <li>
                  <p>Let <var>requestedMediaTypes</var> be the set of media types in <var>constraints</var> with either a dictionary value or a value of "true".</p>
                </li>
                <li>
                  <p>If <var>requestedMediaTypes</var> is the empty set, return a promise rejected with a <code>TypeError</code>. The word "optional" occurs in the WebIDL due to WebIDL rules, but the argument <em class="rfc2119" title="MUST">MUST</em> be supplied in order for the call to succeed.
                  </p>
                </li>
                <li>
                  <p>If the current [<cite><a class="bibref" href="#bib-HTML51">HTML51</a></cite>] Document's <a href="#dfn-user-media-enabled-flag" class="internalDFN" data-link-type="dfn">user media
                  enabled flag</a> is unset, return a promise rejected with a
                    <code><a href="#dfn-domexception" class="internalDFN" data-link-type="dfn"><code>DOMException</code></a>
                    </code> object whose
                    <code>name</code> attribute has the value
                    <code>SecurityError</code>.</p>
                </li>
                <li>
                  <p>Let <var>p</var> be a new promise.</p>
                </li>
                <li>
                  <p>Run the following steps in parallel:</p>
                  <ol>
                    <li>
                      <p>Let <var>finalSet</var> be an (initially) empty set.
                      </p>
                    </li>
                    <li>
                      <p>For each media type <var>T</var> in
                        <var>requestedMediaTypes</var>,</p>
                      <ol>
                        <li>
                          <p>For each possible source for that media type, construct an unconstrained MediaStreamTrack with that source as its source.</p>
                          <p>Call this set of tracks the
                            <var>candidateSet</var>.</p>
                          <p>If <var>candidateSet</var> is the empty set, reject <var>p</var> with a new
                            <code><a href="#dfn-domexception" class="internalDFN" data-link-type="dfn"><code>DOMException</code></a>
                            </code> object whose
                            <code>name</code> attribute has the value
                            <code>NotFoundError</code> and abort these steps.</p>
                        </li>
                        <li>If the value of the <var>T</var> entry of
                          <var>constraints</var> is "true", set CS to the empty constraint set (no constraint). Otherwise, continue with <var>CS</var> set to the value of the <var>T</var> entry of <var>constraints</var>.</li>
                        <li>
                          <p>Run the <code><a href="#dfn-selectsettings" class="internalDFN" data-link-type="dfn">SelectSettings</a></code> algorithm on each track in <var>CandidateSet</var> with <var>CS</var> as the constraint set. If the algorithm returns <code>undefined</code>, remove the track from <var>candidateSet</var>. This eliminates devices unable to satisfy the constraints, by verifying that at least one settings dictionary exists that satisfies the constraints.</p>
                          <p>If <var>candidateSet</var> is the empty set, let
                            <var>constraint</var> be any required constraint whose fitness distance was infinity for all settings dictionaries examined while executing the
                            <code><a href="#dfn-selectsettings" class="internalDFN" data-link-type="dfn">SelectSettings</a></code> algorithm, let
                            <var>message</var> be either <code>undefined</code> or an informative human-readable message, and reject
                            <var>p</var> with a new
                            <code><a href="#dfn-overconstrainederror" class="internalDFN" data-link-type="dfn"><code>OverconstrainedError</code></a>
                            </code> created by calling
                            <code>OverconstrainedError(<var>constraint</var>,
                          <var>message</var>)</code>, then abort these steps.
                          </p>
                          <p class="fingerprint">This error gives information about what the underlying device is not capable of producing, before the user has given any authorization to any device, and can thus be used as a fingerprinting surface.<img src="images/fingerprint.png" alt="(This is a fingerprinting vector.)" width="15" height="21"></p>
                        </li>
                        <li>
                          <p><a href="#dfn-retrieve-the-permission-state" class="internalDFN" data-link-type="dfn">Retrieve the permission state</a> for all candidate devices in <var>candidateSet</var> that are not attached to a <code>live</code> MediaStreamTrack in the current browsing context. Remove from
                            <var>candidateSet</var> any device for which the permission state is "denied".</p>
                          <p>If <var>candidateSet</var> is now empty, indicating that all devices of this type are in state "denied", jump to the step labeled
                            <em>PermissionFailure</em> below.</p>
                        </li>
                        <li>
                          <p>Add all tracks from <var>candidateSet</var> to
                            <var>finalSet</var>.</p>
                        </li>
                      </ol>
                    </li>
                    <li>
                      <p>Optionally, e.g., based on a previously-established user preference, for security reasons, or due to platform limitations, jump to the step labeled <em>Permission
                      Failure</em> below.</p>
                    </li>
                    <li>
                      <p>Let <var>originIdentifier</var> be the [<cite><a class="bibref" href="#bib-HTML51">HTML51</a></cite>]
                        <a href="https://www.w3.org/TR/2015/WD-html51-20150506/browsers.html#top-level-browsing-context">
                      top-level browsing context</a>'s origin.</p>
                    </li>
                    <li>
                      <p>If the current [<cite><a class="bibref" href="#bib-HTML51">HTML51</a></cite>] <a href="https://www.w3.org/TR/2015/WD-html51-20150506/browsers.html#browsing-context">
                      browsing context</a> is a [<cite><a class="bibref" href="#bib-HTML51">HTML51</a></cite>] <a href="https://www.w3.org/TR/2015/WD-html51-20150506/browsers.html#nested-browsing-context">
                      nested browsing context</a> whose origin is different from <var>originIdentifier</var>, let
                        <var>originIdentifier</var> be the result of combining
                        <var>originIdentifier</var> and the current <a href="https://www.w3.org/TR/2015/WD-html51-20150506/browsers.html#browsing-context">
                      browsing context</a>'s origin.</p>
                    </li>
                    <li>
                      <p>For the origin identified by
                        <var>originIdentifier</var>, <a href="#request-permission" class="internalDFN" data-link-type="dfn">request permission</a> for use of the devices, while considering all devices attached to a <code>live</code> MediaStreamTrack in the current <a href="https://www.w3.org/TR/2015/WD-html51-20150506/browsers.html#browsing-context">
                      browsing context</a> to have permission status "granted", resulting in a set of provided media.</p>
                      <p>The provided media <em class="rfc2119" title="MUST">MUST</em> include precisely one track of each media type in requestedMediaTypes from the
                        <var>finalSet</var>. The decision of which devices to choose from the <var>finalSet</var> is completely up to the User Agent and may be determined by asking the user. Once selected, the source of a
                        <code><a href="#idl-def-mediastreamtrack" class="internalDFN" data-link-type="dfn"><code>MediaStreamTrack</code></a>
                        </code> <em class="rfc2119" title="MUST NOT">MUST NOT</em> change.</p>
                      <p>The User Agent <em class="rfc2119" title="MAY">MAY</em> use the value of the computed "fitness distance" from the <a href="#dfn-selectsettings" class="internalDFN" data-link-type="dfn">SelectSettings</a> algorithm, or any other internally-available information about the devices, as an input to the selection algorithm.
                      </p>
                      <p>User Agents are encouraged to default to using the user's primary or system default camera and/or microphone (when possible) to generate the media stream. User Agents
                        <em class="rfc2119" title="MAY">MAY</em> allow users to use any media source, including pre-recorded media files.</p>
                      <p>If the result of the request is "granted", then for each device that is sourcing the provided media, using the device's deviceId, <var>deviceId</var>, set [[devicesLiveMap]]
                        <var>[deviceId]</var> to
                        <code>true</code>, if it isn’t already <code>true</code>, and set the [[devicesAccessibleMap]]<var>[deviceId]</var> to <code>true</code>, if it isn’t already
                        <code>true</code>.</p>
                      <p>If the result is "denied", jump to the step labeled
                        <em>Permission Failure</em> below. If the user never responds, this algorithm stalls on this step.</p>
                      <p>If the user grants permission but a hardware error such as an OS/program/webpage lock prevents access, reject <var>p</var> with a new
                        <code><a href="#dfn-domexception" class="internalDFN" data-link-type="dfn"><code>DOMException</code></a>
                        </code> object whose
                        <code>name</code> attribute has the value
                        <code>NotReadableError</code> and abort these steps.</p>
                      <p>If the result is "granted" but device access fails for any reason other than those listed above, reject
                        <var>p</var> with a new <code><a href="#dfn-domexception" class="internalDFN" data-link-type="dfn"><code>DOMException</code></a>
                        </code>
                        object whose <code>name</code> attribute has the value <code>AbortError</code> and abort these steps.</p>
                    </li>
                    <li>
                      <p>Let <var>stream</var> be the
                        <code><a href="#idl-def-mediastream" class="internalDFN" data-link-type="dfn"><code>MediaStream</code></a>
                        </code> object for which the user granted permission.</p>
                    </li>
                    <li>
                      <p>Run the <code>ApplyConstraints()</code> algorithm on all tracks in <var>stream</var> with the appropriate constraints.
                      </p>
                    </li>
                    <li>
                      <p>Resolve <var>p</var> with <var>stream</var> and abort these steps.</p>
                    </li>
                    <li>
                      <p><em>Permission Failure</em>: Reject <var>p</var> with a new <code><a href="#dfn-domexception" class="internalDFN" data-link-type="dfn"><code>DOMException</code></a>
                        </code> object whose
                        <code>name</code> attribute has the value
                        <code>NotAllowedError</code>.</p>
                    </li>
                  </ol>
                </li>
                <li>
                  <p>Return <var>p</var>.</p>
                </li>
              </ol>
              <table class="parameters">
                <tbody>
                  <tr>
                    <th>Parameter</th>
                    <th>Type</th>
                    <th>Nullable</th>
                    <th>Optional</th>
                    <th>Description</th>
                  </tr>
                  <tr>
                    <td class="prmName">constraints</td>
                    <td class="prmType">
                      <code>MediaStreamConstraints</code></td>
                    <td class="prmNullFalse"><span role="img" aria-label="False">✘</span></td>
                    <td class="prmOptFalse"><span role="img" aria-label="False">✘</span></td>
                    <td class="prmDesc"></td>
                  </tr>
                </tbody>
              </table>
              <div>
                <em>Return type:</em> <code>Promise&lt;MediaStream&gt;</code>
              </div>
            </dd>
          </dl>
        </section>
      </div>
      <div class="note">
        <div class="note-title marker" aria-level="4" role="heading" id="h-note10"><span>Note</span></div>
        <div class="">
          <p>In the algorithm above, constraints are checked twice - once at device selection, and once after access approval. Time may have passed between those checks, so it is conceivable that the selected device is no longer suitable. In this case, a NotReadableError will result.</p>
        </div>
      </div>
    </section>

    <section id="mediastreamconstraints" typeof="bibo:Chapter" resource="#mediastreamconstraints" property="bibo:hasPart">
      <h3 id="h-mediastreamconstraints" resource="#h-mediastreamconstraints"><span property="xhv:role" resource="xhv:heading"><span class="secno">10.3 </span>MediaStreamConstraints</span>
      </h3>
      <p>The <code>MediaStreamConstraints</code> dictionary is used to instruct the User Agent what sort of <a href="#idl-def-mediastreamtrack" class="internalDFN" data-link-type="dfn"><code>MediaStreamTrack</code></a>s to include in the
        <a href="#idl-def-mediastream" class="internalDFN" data-link-type="dfn"><code>MediaStream</code></a> returned by <a href="#dom-mediadevices-getusermedia" class="internalDFN" data-link-type="dfn"><code>getUserMedia()</code></a>.</p>
      <div>
        <pre class="def idl"><span class="idlDictionary" id="idl-def-mediastreamconstraints" data-idl="" data-title="MediaStreamConstraints">dictionary <span class="idlDictionaryID">MediaStreamConstraints</span> {
<span class="idlMember" id="idl-def-mediastreamconstraints-video" data-idl="" data-title="video" data-dfn-for="mediastreamconstraints">    <span class="idlMemberType">(boolean or <a href="#idl-def-mediatrackconstraints" class="internalDFN" data-link-type="dfn"><code>MediaTrackConstraints</code></a>)</span> <span class="idlMemberName"><a data-lt="video" href="#dom-mediastreamconstraints-video" class="internalDFN" data-link-type="dfn" data-for="MediaStreamConstraints"><code>video</code></a></span> = <span class="idlMemberValue">false</span>;</span>
<span class="idlMember" id="idl-def-mediastreamconstraints-audio" data-idl="" data-title="audio" data-dfn-for="mediastreamconstraints">    <span class="idlMemberType">(boolean or <a href="#idl-def-mediatrackconstraints" class="internalDFN" data-link-type="dfn"><code>MediaTrackConstraints</code></a>)</span> <span class="idlMemberName"><a data-lt="audio" href="#dom-mediastreamconstraints-audio" class="internalDFN" data-link-type="dfn" data-for="MediaStreamConstraints"><code>audio</code></a></span> = <span class="idlMemberValue">false</span>;</span>
};</span></pre>

        <section typeof="bibo:Chapter" resource="#dictionary-mediastreamconstraints-members" property="bibo:hasPart">
          <h4 id="dictionary-mediastreamconstraints-members" resource="#dictionary-mediastreamconstraints-members"><span property="xhv:role" resource="xhv:heading">Dictionary <a class="idlType internalDFN" href="#idl-def-mediastreamconstraints" data-link-type="dfn"><code>MediaStreamConstraints</code></a>
          Members</span></h4>
          <dl data-link-for="MediaStreamConstraints" data-dfn-for="MediaStreamConstraints" class="dictionary-members">
            <dt><dfn data-dfn-for="mediastreamconstraints" data-dfn-type="dfn" id="dom-mediastreamconstraints-video" data-idl=""><code>video</code></dfn> of type <span class="idlMemberType">(boolean or MediaTrackConstraints)</span>,
            defaulting to <code>false</code></dt>
            <dd>
              <p>If <code>true</code>, it requests that the returned
                <a href="#idl-def-mediastream" class="internalDFN" data-link-type="dfn"><code>MediaStream</code></a> contain a video track. If a <a href="#dom-constraints" class="internalDFN" data-link-type="dfn"><code>Constraints</code></a> structure is provided, it further specifies the nature and settings of the video Track. If <code>false</code>, the
                <a href="#idl-def-mediastream" class="internalDFN" data-link-type="dfn"><code>MediaStream</code></a> <em class="rfc2119" title="MUST NOT">MUST NOT</em> contain a video Track.</p>
            </dd>
            <dt><dfn data-dfn-for="mediastreamconstraints" data-dfn-type="dfn" id="dom-mediastreamconstraints-audio" data-idl=""><code>audio</code></dfn> of type <span class="idlMemberType">(boolean or MediaTrackConstraints)</span>,
            defaulting to <code>false</code></dt>
            <dd>
              <p>If <code>true</code>, it requests that the returned
                <a href="#idl-def-mediastream" class="internalDFN" data-link-type="dfn"><code>MediaStream</code></a> contain an audio track. If a
                <a href="#dom-constraints" class="internalDFN" data-link-type="dfn"><code>Constraints</code></a> structure is provided, it further specifies the nature and settings of the audio Track. If
                <code>false</code>, the <a href="#idl-def-mediastream" class="internalDFN" data-link-type="dfn"><code>MediaStream</code></a> <em class="rfc2119" title="MUST NOT">MUST NOT</em> contain an audio Track.</p>
            </dd>
          </dl>
        </section>
      </div>
    </section>

    <section id="navigatorusermediasuccesscallback" typeof="bibo:Chapter" resource="#navigatorusermediasuccesscallback" property="bibo:hasPart">
      <h3 id="h-navigatorusermediasuccesscallback" resource="#h-navigatorusermediasuccesscallback"><span property="xhv:role" resource="xhv:heading"><span class="secno">10.4 </span>NavigatorUserMediaSuccessCallback</span>
      </h3>
      <div>
        <pre class="def idl"><span class="idlCallback" id="idl-def-navigatorusermediasuccesscallback" data-idl="" data-title="NavigatorUserMediaSuccessCallback">callback <span class="idlCallbackID">NavigatorUserMediaSuccessCallback</span> = <span class="idlCallbackType">void</span> (<span class="idlParam"><span class="idlParamType"><a href="#idl-def-mediastream" class="internalDFN" data-link-type="dfn"><code>MediaStream</code></a></span> <span class="idlParamName">stream</span></span>);</span></pre>

        <section typeof="bibo:Chapter" resource="#callback-navigatorusermediasuccesscallback-parameters" property="bibo:hasPart">
          <h4 id="callback-navigatorusermediasuccesscallback-parameters" resource="#callback-navigatorusermediasuccesscallback-parameters"><span property="xhv:role" resource="xhv:heading">Callback <a class="idlType internalDFN" href="#idl-def-navigatorusermediasuccesscallback" data-link-type="dfn"><code>NavigatorUserMediaSuccessCallback</code></a>
          Parameters</span></h4>
          <dl data-link-for="NavigatorUserMediaSuccessCallback" data-dfn-for="NavigatorUserMediaSuccessCallback" class="callback-members">
            <dt><code>stream</code> of type <span class="idlMemberType"><a href="#idl-def-mediastream" class="internalDFN" data-link-type="dfn"><code>MediaStream</code></a></span></dt>
            <dd>
              <code><a href="#idl-def-mediastream" class="internalDFN" data-link-type="dfn"><code>MediaStream</code></a>
              </code> object representing the stream to which the user granted permission as described in the <a data-lt="NavigatorUserMedia.getUserMedia" href="#idl-def-navigatorusermedia-getusermedia(mediastreamconstraints,navigatorusermediasuccesscallback,navigatorusermediaerrorcallback)" class="internalDFN" data-link-type="dfn"><code><code>navigator.getUserMedia()</code></code></a> algorithm.
            </dd>
          </dl>
        </section>
      </div>
    </section>

    <section id="navigatorusermediaerrorcallback" typeof="bibo:Chapter" resource="#navigatorusermediaerrorcallback" property="bibo:hasPart">
      <h3 id="h-navigatorusermediaerrorcallback" resource="#h-navigatorusermediaerrorcallback"><span property="xhv:role" resource="xhv:heading"><span class="secno">10.5 </span>NavigatorUserMediaErrorCallback</span>
      </h3>
      <div>
        <pre class="def idl"><span class="idlCallback" id="idl-def-navigatorusermediaerrorcallback" data-idl="" data-title="NavigatorUserMediaErrorCallback">callback <span class="idlCallbackID">NavigatorUserMediaErrorCallback</span> = <span class="idlCallbackType">void</span> (<span class="idlParam"><span class="idlParamType"><a href="#idl-def-mediastreamerror" class="internalDFN" data-link-type="dfn"><code>MediaStreamError</code></a></span> <span class="idlParamName">error</span></span>);</span></pre>

        <section typeof="bibo:Chapter" resource="#callback-navigatorusermediaerrorcallback-parameters" property="bibo:hasPart">
          <h4 id="callback-navigatorusermediaerrorcallback-parameters" resource="#callback-navigatorusermediaerrorcallback-parameters"><span property="xhv:role" resource="xhv:heading">Callback <a class="idlType internalDFN" href="#idl-def-navigatorusermediaerrorcallback" data-link-type="dfn"><code>NavigatorUserMediaErrorCallback</code></a>
          Parameters</span></h4>
          <dl data-link-for="NavigatorUserMediaErrorCallback" data-dfn-for="NavigatorUserMediaErrorCallback" class="callback-members">
            <dt><code>error</code> of type <span class="idlMemberType"><a href="#idl-def-mediastreamerror" class="internalDFN" data-link-type="dfn"><code>MediaStreamError</code></a></span></dt>
            <dd>
              Error in obtaining a <code><a href="#idl-def-mediastream" class="internalDFN" data-link-type="dfn"><code>MediaStream</code></a>
              </code> as described in the failure steps of the <a data-lt="NavigatorUserMedia.getUserMedia" href="#idl-def-navigatorusermedia-getusermedia(mediastreamconstraints,navigatorusermediasuccesscallback,navigatorusermediaerrorcallback)" class="internalDFN" data-link-type="dfn"><code><code>navigator.getUserMedia()</code></code></a> algorithm.
            </dd>
          </dl>
        </section>
      </div>
      <div>
        <pre class="def idl"><span class="idlTypedef" id="idl-def-mediastreamerror" data-idl="" data-title="MediaStreamError">typedef <span class="idlTypedefType">object</span> <span class="idlTypedefID">MediaStreamError</span>;</span></pre>
        <div class="idlTypedefDesc">
          A MediaStreamError object is either a
          <code><a href="#dfn-domexception" class="internalDFN" data-link-type="dfn"><code>DOMException</code></a>
          </code> object or an
          <code><a href="#dfn-overconstrainederror" class="internalDFN" data-link-type="dfn"><code>OverconstrainedError</code></a>
          </code> object.
        </div>
      </div>
    </section>

    <section id="implementation-suggestions" typeof="bibo:Chapter" resource="#implementation-suggestions" property="bibo:hasPart">
      <h3 id="h-implementation-suggestions" resource="#h-implementation-suggestions"><span property="xhv:role" resource="xhv:heading"><span class="secno">10.6 </span>Implementation Suggestions</span>
      </h3>
      <div class="practice">
        <span class="practicelab" id="resource-reservation">Best Practice 1: Resource
        reservation</span>
        <p class="practicedesc">The User Agent is encouraged to reserve resources when it has determined that a given call to
          <a href="#dom-mediadevices-getusermedia" class="internalDFN" data-link-type="dfn"><code>getUserMedia()</code></a> will be successful. It is preferable to reserve the resource prior to resolving the returned promise. Subsequent calls to <a href="#dom-mediadevices-getusermedia" class="internalDFN" data-link-type="dfn"><code>getUserMedia()</code></a> (in this page or any other) should treat the resource that was previously allocated, as well as resources held by other applications, as busy. Resources marked as busy should not be provided as sources to the current web page, unless specified by the user. Optionally, the User Agent may choose to provide a stream sourced from a busy source but only to a page whose origin matches the owner of the original stream that is keeping the source busy.</p>
        <p class="practicedesc">This document recommends that in the permission grant dialog or device selection interface (if one is present), the user be allowed to select any available hardware as a source for the stream requested by the page (provided the resource is able to fulfill any specified mandatory constraints). Although not specifically recommended as best practice, note that some User Agents may support the ability to substitute a video or audio source with local files and other media. A file picker may be used to provide this functionality to the user.</p>
        <p class="practicedesc">This document also recommends that the user be shown all resources that are currently busy as a result of prior calls to <a href="#dom-mediadevices-getusermedia">getUserMedia()</a> (in this page or any other page that is still alive) and be allowed to terminate that stream and utilize the resource for the current page instead. If possible in the current operating environment, it is also suggested that resources currently held by other applications be presented and treated in the same manner. If the user chooses this option, the track corresponding to the resource that was provided to the page whose stream was affected must be removed.</p>
      </div>
      <div class="practice">
        <span id="stored-permissions" class="practicelab">Best Practice 2: Stored
        Permissions</span>
        <p class="practicedesc">When permission is requested for a device, the User Agent may choose to <a href="#create-permission">create a
        permission storage entry</a> for later use by the same origin, so that the user does not need to grant permission again at a later time. [
          <cite><a class="bibref" href="#bib-RTCWEB-SECURITY-ARCH">RTCWEB-SECURITY-ARCH</a></cite>] Section 5.2 requires that such storing <em class="rfc2119" title="MUST">MUST</em> only be done when the page is secure (served over HTTPS and having no mixed content). It is a User Agent choice whether it offers functionality to store permission to each device separately, all devices of a given class, or all devices; the choice needs to be apparent to the user, and permission must have been granted for the entire set whose permission is being stored, e.g., to store permission to use all cameras the user must have given permission to use all cameras and not just one.</p>
        <p class="practicedesc">As described, this specification does not dictate whether or not granting permission results in a stored permission. When permission is not stored, permission will last only until such time as all MediaStreamTracks sourced from that device have been stopped.</p>
      </div>
      <div class="practice">
        <span class="practicelab" id="handling-devices">Best Practice 3: Handling multiple
        devices</span>
        <p class="practicedesc">A <a href="#idl-def-mediastream" class="internalDFN" data-link-type="dfn"><code>MediaStream</code></a> may contain more than one video and audio track. This makes it possible to include video from two or more webcams in a single stream object, for example. However, the current API does not allow a page to express a need for multiple video streams from independent sources.</p>
        <p class="practicedesc">It is recommended for multiple calls to
          <a href="#dom-mediadevices-getusermedia">getUserMedia()</a> from the same page to be allowed as a way for pages to request multiple discrete video and/or audio streams.</p>
        <p class="practicedesc">Note also that if multiple <a href="#dom-mediadevices-getusermedia">getUserMedia()</a> calls are done by a page, the order in which they request resources, and the order in which they complete, is not constrained by this specification.</p>
        <p class="practicedesc">A single call to <a href="#dom-mediadevices-getusermedia">getUserMedia()</a> will always return a stream with either zero or one audio tracks, and either zero or one video tracks. If a script calls <a href="#dom-mediadevices-getusermedia">getUserMedia()</a> multiple times before reaching a stable state, this document advises the UI designer that the permission dialogs should be merged, so that the user can give permission for the use of multiple cameras and/or media sources in one dialog interaction. The constraints on each getUserMedia call can be used to decide which stream gets which media sources.</p>
      </div>
    </section>
  </section>

  <section id="constrainable-interface" typeof="bibo:Chapter" resource="#constrainable-interface" property="bibo:hasPart">
    <!--OddPage-->
    <h2 id="h-constrainable-interface" resource="#h-constrainable-interface"><span property="xhv:role" resource="xhv:heading"><span class="secno">11. </span>Constrainable Pattern</span>
    </h2>
    <p>The Constrainable pattern allows applications to inspect and adjust the properties of objects implementing it (the <dfn data-dfn-type="dfn" id="dfn-constrainable-object">constrainable
    object</dfn>). It is broken out as a separate set of definitions so that it can be referred to by other specifications. The core concept is the Capability, which consists of a constrainable property of an object and the set of its possible values, which may be specified either as a range or as an enumeration. For example, a camera might be capable of framerates (a property) between 20 and 50 frames per second (a range) and may be able to be positioned (a property) facing towards the user, away from the user, or to the left or right of the user (an enumerated set). The application can examine a constrainable property's supported Capabilities via the
      <code>getCapabilities()</code> accessor.</p>
    <p>The application can select the (range of) values it wants for an object's Capabilities by means of basic and/or advanced ConstraintSets and the <code>applyConstraints()</code> method. A ConstraintSet consists of the names of one or more properties of the object plus the desired value (or a range of desired values) for each property. Each of those property/value pairs can be considered to be an individual constraint. For example, the application may set a ConstraintSet containing two constraints, the first stating that the framerate of a camera be between 30 and 40 frames per second (a range) and the second that the camera should be facing the user (a specific value). How the individual constraints interact depends on whether and how they are given in the basic Constraint structure, which is a ConstraintSet with an additional 'advanced' property, or whether they are in a ConstraintSet in the advanced list. The behavior is as follows: all 'min', 'max', and 'exact' constraints in the basic Constraint structure are together treated as the 'required' set, and if it is not possible to satisfy simultaneously all of those individual constraints for the indicated property names, the User Agent <em class="rfc2119" title="MUST">MUST</em> reject the returned promise. Otherwise, it must apply the required constraints. Next, it will consider any ConstraintSets given in the 'advanced' list, in the order in which they are specified, and will try to satisfy/apply each complete ConstraintSet (i.e., all constraints in the ConstraintSet together), but will skip a ConstraintSet if and only if it cannot satisfy/apply it in its entirety. Next, the User Agent <em class="rfc2119" title="MUST">MUST</em> attempt to apply, individually, any 'ideal' constraints or a constraint given as a bare value for the property. Of these properties, it <em class="rfc2119" title="MUST">MUST</em> satisfy the largest number that it can, in any order. Finally, the User Agent <em class="rfc2119" title="MUST">MUST</em> resolve the returned promise.</p>
    <div class="note">
      <div class="note-title marker" aria-level="3" role="heading" id="h-note11"><span>Note</span></div>
      <div class="">
        Any constraint provided via this API will only be considered if the given constrainable property is supported by the browser. JavaScript application code is expected to first check, via
        <code>getSupportedConstraints()</code>, that all the named properties that are used are supported by the browser. The reason for this is that WebIDL drops any unsupported names from the dictionary holding the constraints, so the browser does not see them and the unsupported names end up being silently ignored. This will cause confusing programming errors as the JavaScript code will be setting constraints but the browser will be ignoring them. Browsers that support (recognize) the name of a required constraint but cannot satisfy it will generate an error, while browsers that do not support the constrainable property will not generate an error.
      </div>
    </div>
    <p>The following examples may help to understand how constraints work. The first shows a basic Constraint structure. Three constraints are given, each of which the User Agent will attempt to satisfy individually. Depending upon the resolutions available for this camera, it is possible that not all three constraints can be satisfied at the same time. If so, the User Agent will satisfy two if it can, or only one if not even two constraints can be satisfied together. Note that if not all three can be satisfied simultaneously, it is possible that there is more than one combination of two constraints that could be satisfied. If so, the User Agent will choose.
    </p>
    <div class="example">
      <div class="example-title marker"><span>Example 1</span></div><pre class="highlight hljs javascript"><span class="hljs-keyword">var</span> supports = navigator.mediaDevices.getSupportedConstraints();
<span class="hljs-keyword">if</span>(!supports[<span class="hljs-string">"aspectRatio"</span>]) {
  <span class="hljs-comment">// Treat like an error.</span>
}
 <span class="hljs-keyword">var</span> constraints =
  {
<span class="hljs-attr">width</span>: <span class="hljs-number">1280</span>,
<span class="hljs-attr">height</span>: <span class="hljs-number">720</span>,
<span class="hljs-attr">aspectRatio</span>: <span class="hljs-number">1.5</span>
  };</pre></div>
    <p>This next example adds a small bit of complexity. The ideal values are still given for width and height, but this time with minimum requirements on each as well as a minimum frameRate that must be satisfied. If it cannot satisfy the frameRate, width or height minimum it will reject the promise. Otherwise, it will try to satisfy the width, height, and aspectRatio target values as well and then resolve the promise. Note that the frameRate minimum might be within the capabilities of the camera and satisfiable in ideal lighting conditions, but not in low light, and could therefore result in firing of the <code>onoverconstrained</code> event handler under poor lighting conditions.</p>
    <div class="example">
      <div class="example-title marker"><span>Example 2</span></div><pre class="highlight hljs javascript"><span class="hljs-keyword">var</span> supports = navigator.mediaDevices.getSupportedConstraints();
<span class="hljs-keyword">if</span>(!supports[<span class="hljs-string">"aspectRatio"</span>] || !supports[<span class="hljs-string">"frameRate"</span>]) {
  <span class="hljs-comment">// Treat like an error.</span>
}
 <span class="hljs-keyword">var</span> constraints =
  {
<span class="hljs-attr">frameRate</span>: {<span class="hljs-attr">min</span>: <span class="hljs-number">20</span>},
<span class="hljs-attr">width</span>: {<span class="hljs-attr">min</span>: <span class="hljs-number">640</span>, <span class="hljs-attr">ideal</span>: <span class="hljs-number">1280</span>},
<span class="hljs-attr">height</span>: {<span class="hljs-attr">min</span>: <span class="hljs-number">480</span>, <span class="hljs-attr">ideal</span>: <span class="hljs-number">720</span>},
<span class="hljs-attr">aspectRatio</span>: <span class="hljs-number">1.5</span>
  };</pre></div>
    <p>This example illustrates the full control possible with the Constraints structure by adding the 'advanced' property. In this case, the User Agent behaves the same way with respect to the required constraints, but before attempting to satisfy the ideal values it will process the 'advanced' list. In this example the 'advanced' list contains two ConstraintSets. The first specifies width and height constraints, and the second specifies an aspectRatio constraint. Note that in the advanced list, these bare values are treated as 'exact' values. This example represents the following: "I need my video to be at least 640 pixels wide and at least 480 pixels high. My preference is for precisely 1920x1280, but if you can't give me that, give me an aspectRatio of 4x3 if at all possible. If even that is not possible, give me a resolution as close to 1280x720 as possible."</p>
    <div class="example">
      <div class="example-title marker"><span>Example 3</span></div><pre class="highlight hljs xquery">var supports = navigator.mediaDevices.getSupportedConstraints();
<span class="hljs-keyword">if</span>(!supports[<span class="hljs-string">"width"</span>] || !supports[<span class="hljs-string">"height"</span>]) {
  // Treat like an error.
}
 var constraints =
  {
width: {min: <span class="hljs-number">640</span>, ideal: <span class="hljs-number">1280</span>},
height: {min: <span class="hljs-number">480</span>, ideal: <span class="hljs-number">720</span>},
advanced: [{width: <span class="hljs-number">1920</span>, height: <span class="hljs-number">1280</span>},
           {aspectRatio: <span class="hljs-number">1.3333333333</span>}]
  };</pre></div>
    <p>The ordering of advanced ConstraintSets is significant. In the preceding example it is impossible to satisfy both the 1920x1280 ConstraintSet and the 4x3 aspect ratio ConstraintSet at the same time. Since the 1920x1280 occurs first in the list, the User Agent will attempt to satisfy it first. Application authors can therefore implement a backoff strategy by specifying multiple optional ConstraintSets for the same property. For example, an application might specify three optional ConstraintSets, the first asking for a frame rate greater than 500, the second asking for a frame rate greater than 400, and the third asking for one greater than 300. If the User Agent is capable of setting a frame rate greater than 500, it will (and the subsequent two ConstraintSets will be trivially satisfied). However, if the User Agent cannot set the frame rate above 500, it will skip that ConstraintSet and attempt to set the frame rate above 400. If that fails, it will then try to set it above 300. If the User Agent cannot satisfy any of the three ConstraintSets, it will set the frame rate to any value it can get. If the developers wanted to insist on 300 as a lower bound, they could provide that as a 'min' value in the basic ConstraintSet. In that case, the User Agent would fail altogether if it couldn't get a value over 300, but would choose a value over 500 if possible, then try for a value over 400.</p>
    <p>Note that, unlike basic constraints, the constraints within a ConstraintSet in the advanced list must be satisfied together or skipped together. Thus, {width: 1920, height: 1280} is a request for that specific resolution, not a request for that width or that height. One can think of the basic constraints as requesting an or (non-exclusive) of the individual constraints, while each advanced ConstraintSet is requesting an and of the individual constraints in the ConstraintSet. An application may inspect the full set of Constraints currently in effect via the
      <code>getConstraints()</code> accessor.</p>
    <p>The specific value that the User Agent chooses for a constrainable property is referred to as a Setting. For example, if the application applies a ConstraintSet specifying that the frameRate must be at least 30 frames per second, and no greater than 40, the Setting can be any intermediate value, e.g., 32, 35, or 37 frames per second. The application can query the current settings of the object's constrainable properties via the <code><a href="#dfn-getsettings" class="internalDFN" data-link-type="dfn">getSettings()</a></code> accessor.</p>

    <section id="interface-definition" typeof="bibo:Chapter" resource="#interface-definition" property="bibo:hasPart">
      <h3 id="h-interface-definition" resource="#h-interface-definition"><span property="xhv:role" resource="xhv:heading"><span class="secno">11.1 </span>Interface Definition</span>
      </h3>
      <p>Although this specification formally defines ConstrainablePattern as a WebIDL interface, it is actually a template or pattern for other interfaces and cannot be inherited directly since the return values of the methods need to be extended, something WebIDL cannot do. Thus, each interface that wishes to make use of the functionality defined here will have to provide its own copy of the WebIDL for the functions and interfaces given here. However it can refer to the semantics defined here, which will not change. See <a href="#media-stream-track-interface-definition">MediaStreamTrack Interface
      Definition</a> for an example of this.</p>
      <p>When the User Agent is no longer able to satisfy the
        <var>requiredConstraints</var> from the currently valid Constraints, the User Agent <em class="rfc2119" title="MUST">MUST</em> queue a task that fires an
        <code>OverconstrainedErrorEvent</code>, initialized as described in the following paragraph, at the <a href="#dfn-constrainable-object" class="internalDFN" data-link-type="dfn">constrainable object</a>. The event firing task <em class="rfc2119" title="MAY">MAY</em> also be used to update the <a href="#dfn-constrainable-object" class="internalDFN" data-link-type="dfn">constrainable object</a> as a result of the overconstrained situation.</p>
      <p>The <code>OverconstrainedErrorEvent</code> references an
        <code><a href="#dfn-overconstrainederror" class="internalDFN" data-link-type="dfn"><code>OverconstrainedError</code></a>
        </code> whose <code>constraint</code> attribute is set to one of the <var>requiredConstraints</var> that can no longer be satisfied. The <code>message</code> attribute of the
        <code>OverconstrainedError</code> <em class="rfc2119" title="SHOULD">SHOULD</em> contain a string that is useful for debugging. The conditions under which this error might occur are platform and application-specific. For example, the user might physically manipulate a camera in a way that makes it impossible to provide a resolution or frameRate that satisfies the constraints. The User Agent
        <em class="rfc2119" title="MAY">MAY</em> take other actions as a result of the overconstrained situation.</p>
      <div>
        <pre class="def idl"><span class="idlInterface" id="idl-def-constrainablepattern" data-idl="" data-title="ConstrainablePattern">[<span class="extAttr"><span class="extAttrName">NoInterfaceObject</span></span>]
interface <span class="idlInterfaceID">ConstrainablePattern</span> {
<span class="idlMethod" id="idl-def-constrainablepattern-getcapabilities()" data-idl="" data-title="getCapabilities" data-dfn-for="constrainablepattern">    <span class="idlMethType"><a href="#dom-capabilities" class="internalDFN" data-link-type="dfn"><code>Capabilities</code></a></span>  <span class="idlMethName">getCapabilities</span>();</span>
<span class="idlMethod" id="idl-def-constrainablepattern-getconstraints()" data-idl="" data-title="getConstraints" data-dfn-for="constrainablepattern">    <span class="idlMethType"><a href="#dom-constraints" class="internalDFN" data-link-type="dfn"><code>Constraints</code></a></span>   <span class="idlMethName"><a data-lt="getConstraints" href="#dom-constrainablepattern-getconstraints" class="internalDFN" data-link-type="dfn" data-for="ConstrainablePattern"><code>getConstraints</code></a></span>();</span>
<span class="idlMethod" id="idl-def-constrainablepattern-getsettings()" data-idl="" data-title="getSettings" data-dfn-for="constrainablepattern">    <span class="idlMethType"><a href="#dom-settings" class="internalDFN" data-link-type="dfn"><code>Settings</code></a></span>      <span class="idlMethName">getSettings</span>();</span>
<span class="idlMethod" id="idl-def-constrainablepattern-applyconstraints(optional-constraints)" data-idl="" data-title="applyConstraints" data-dfn-for="constrainablepattern">    <span class="idlMethType">Promise&lt;void&gt;</span> <span class="idlMethName">applyConstraints</span>(<span class="idlParam">optional <span class="idlParamType"><a href="#dom-constraints" class="internalDFN" data-link-type="dfn"><code>Constraints</code></a></span> <span class="idlParamName">constraints</span></span>);</span>
<span class="idlAttribute" id="idl-def-constrainablepattern-onoverconstrained" data-idl="" data-title="onoverconstrained" data-dfn-for="constrainablepattern">    attribute <span class="idlAttrType">EventHandler</span> <span class="idlAttrName"><a data-lt="onoverconstrained" href="#dom-constrainablepattern-onoverconstrained" class="internalDFN" data-link-type="dfn" data-for="ConstrainablePattern"><code>onoverconstrained</code></a></span>;</span>
};</span></pre>

        <section typeof="bibo:Chapter" resource="#attributes-7" property="bibo:hasPart">
          <h4 id="attributes-7" resource="#attributes-7"><span property="xhv:role" resource="xhv:heading">Attributes</span></h4>
          <dl data-link-for="ConstrainablePattern" data-dfn-for="ConstrainablePattern" class="attributes">
            <dt><dfn data-dfn-for="constrainablepattern" data-dfn-type="dfn" id="dom-constrainablepattern-onoverconstrained" data-idl=""><code>onoverconstrained</code></dfn> of type <span class="idlAttrType">EventHandler</span></dt>
            <dd>The event type of this event handler is
              <code><a href="#event-mediastreamtrack-overconstrained" class="internalDFN" data-link-type="dfn"><code>overconstrained</code></a>
              </code>.</dd>
          </dl>
        </section>

        <section typeof="bibo:Chapter" resource="#methods-6" property="bibo:hasPart">
          <h4 id="methods-6" resource="#methods-6"><span property="xhv:role" resource="xhv:heading">Methods</span></h4>
          <dl data-link-for="ConstrainablePattern" data-dfn-for="ConstrainablePattern" class="methods">
            <dt><code>getCapabilities</code></dt>
            <dd>
              <p>The <dfn data-dfn-type="dfn" id="dfn-getcapabilities">getCapabilities()</dfn> method returns the dictionary of the names of the constrainable properties that the object supports.
              </p>
              <div class="note">
                <div class="note-title marker" aria-level="5" role="heading" id="h-note12"><span>Note</span></div>
                <div class="">
                  <p>It is possible that the underlying hardware may not exactly map to the range defined for the constrainable property. Where this is possible, the entry <em class="rfc2119" title="SHOULD">SHOULD</em> define how to translate and scale the hardware's setting onto the values defined for the property. For example, suppose that a hypothetical fluxCapacitance property ranges from -10 (min) to 10 (max), but there are common hardware devices that support only values of "off" "medium" and "full". The constrainable property definition might specify that for such hardware, the User Agent should map the range value of -10 to "off", 10 to "full", and 0 to "medium". It might also indicate that given a ConstraintSet imposing a strict value of 3, the User Agent should attempt to set the value of "medium" on the hardware, and that
                    <code><a href="#dfn-getsettings" class="internalDFN" data-link-type="dfn">getSettings()</a></code> should return a fluxCapacitance of 0, since that is the value defined as corresponding to "medium".</p>
                </div>
              </div>
              <div>
                <em>No parameters.</em>
              </div>
              <div>
                <em>Return type:</em> <code>Capabilities</code>
              </div>
            </dd>
            <dt><code>getConstraints</code></dt>
            <dd>
              <p>The <dfn data-dfn-for="constrainablepattern" data-dfn-type="dfn" id="dom-constrainablepattern-getconstraints" data-idl=""><code>getConstraints</code></dfn> method returns the Constraints that were the argument to the most recent successful call of
                <code>applyConstraints()</code>, maintaining the order in which they were specified. Note that some of the optional ConstraintSets returned may not be currently satisfied. To check which ConstraintSets are currently in effect, the application should use <code>getSettings</code>.</p>
              <div>
                <em>No parameters.</em>
              </div>
              <div>
                <em>Return type:</em> <code>Constraints</code>
              </div>
            </dd>
            <dt><code>getSettings</code></dt>
            <dd>
              <p>The <dfn data-dfn-type="dfn" id="dfn-getsettings">getSettings()</dfn> method returns the current settings of all the constrainable properties of the object, whether they are platform defaults or have been set by
                <code>applyConstraints()</code>. Note that the actual setting of a property <em class="rfc2119" title="MUST">MUST</em> be a single value.</p>
              <div>
                <em>No parameters.</em>
              </div>
              <div>
                <em>Return type:</em> <code>Settings</code>
              </div>
            </dd>
            <dt><code>applyConstraints</code></dt>
            <dd>
              <p>The <dfn data-dfn-type="dfn" id="dfn-applyconstraints">applyConstraints()</dfn> algorithm for applying constraints is stated below. Here are some preliminary definitions that are used in the statement of the algorithm:</p>
              <p>We use the term <dfn data-dfn-type="dfn" id="dfn-settings-dictionary">settings dictionary</dfn> for the set of values that might be applied as settings to the object.</p>
              <p>For string valued constraints, we define "==" below to be true if one of the values in the sequence is exactly the same as the value being compared against.</p>
              <p>We define the <dfn data-dfn-type="dfn" id="dfn-fitness-distance">fitness distance</dfn> between a
                <a href="#dfn-settings-dictionary" class="internalDFN" data-link-type="dfn">settings dictionary</a> and a constraint set <var>CS</var> as the sum, for each constraint provided for a constraint name in
                <var>CS</var>, of the following values:</p>
              <ol>
                <li>
                  <p>If the constraint is not supported by the browser, the fitness distance is 0.</p>
                </li>
                <li>
                  <p>If the constraint is required ('min', 'max', or 'exact'), and the <a href="#dfn-settings-dictionary" class="internalDFN" data-link-type="dfn">settings dictionary</a>'s value for the constraint does not satisfy the constraint, the fitness distance is positive infinity.</p>
                </li>
                <li>If no ideal value is specified, the fitness distance is 0.
                </li>
                <li>For all positive numeric non-required constraints (such as height, width, frameRate, aspectRatio, sampleRate and sampleSize), the fitness distance is the result of the formula
                  <pre class="hljs">(actual == ideal) ? 0 : |actual -
                  ideal|/max(|actual|,|ideal|)
</pre>
                </li>
                <li>For all string and enum non-required constraints (deviceId, groupId, facingMode, echoCancellation), the fitness distance is the result of the formula
                  <pre class="hljs">(actual == ideal) ? 0 : 1
</pre>
                </li>
              </ol>
              <p>More definitions:</p>
              <ul>
                <li>We refer to each element of a ConstraintSet (other than the special term 'advanced') as a 'constraint' since it is intended to constrain the acceptable settings for the given property from the full list or range given in the corresponding Capability of the ConstrainablePattern object to a value that is within the range or list of values it specifies.</li>
                <li>We refer to the "effective Capability" C of an object O as the possibly proper subset of the possible values of C (as returned by getCapabilities) taking into consideration environmental limitations and/or restrictions placed by other constraints. For example given a ConstraintSet that constrains the aspectRatio, height, and width properties, the values assigned to any two of the properties limit the effective Capability of the third. The set of effective Capabilities may be platform dependent. For example, on a resource-limited device it may not be possible to set properties P1 and P2 both to 'high', while on another less limited device, this may be possible.
                </li>
                <li>A settings dictionary, which is a set of values for the constrainable properties of an object O, satisfies ConstraintSet CS if the fitness distance between the set and CS is less than infinity.</li>
                <li>A set of ConstraintSets CS1...CSn (n &gt;= 1) can be satisfied by an object O if it is possible to find a settings dictionary of O that satisfies CS1...CSn simultaneously.</li>
                <li>To apply a set of ConstraintSets CS1...CSn to object O is to choose such a sequence of values that satisfy CS1...CSn and assign them as the settings for the properties of O.</li>
              </ul>
              <p>We define the <dfn data-dfn-type="dfn" id="dfn-selectsettings">SelectSettings</dfn> algorithm as follows:
              </p>
              <ol>
                <li>Each <a data-lt="constraints" href="#dom-constraints" class="internalDFN" data-link-type="dfn"><code>constraint</code></a> specifies one or more values (or a range of values) for its property. A property <em class="rfc2119" title="MAY">MAY</em> appear more than once in the list of 'advanced' ConstraintSets. If an empty object or list has been given as the value for a constraint, it <em class="rfc2119" title="MUST">MUST</em> be interpreted as if the constraint were not specified (in other words, an empty constraint == no constraint).
                  <p>Note that unknown properties are discarded by WebIDL, which means that unknown/unsupported required constraints will silently disappear. To avoid this being a surprise, application authors are expected to first use the
                    <code>getSupportedConstraints()</code> method as shown in the Examples below.</p>
                </li>
                <li>Let <var>object</var> be the
                  <code><a href="#idl-def-constrainablepattern" class="internalDFN" data-link-type="dfn"><code>ConstrainablePattern</code></a>
                  </code> object on which this algorithm is applied. Let <var>copy</var> be an unconstrained copy of <var>object</var> (i.e., <var>copy</var> should behave as if it were <var>object</var> with all ConstraintSets removed.)
                </li>
                <li>
                  <p>For every possible <a href="#dfn-settings-dictionary" class="internalDFN" data-link-type="dfn">settings dictionary</a> of
                    <var>copy</var> compute its fitness distance, treating bare values of properties as ideal values. Let
                    <var>candidates</var> be the set of <a data-lt="settings dictionary" href="#dfn-settings-dictionary" class="internalDFN" data-link-type="dfn">settings dictionaries</a> for which the
                    <a href="#dfn-fitness-distance" class="internalDFN" data-link-type="dfn">fitness distance</a> is finite.</p>
                </li>
                <li>
                  <p>If <var>candidates</var> is empty, return
                    <code>undefined</code> as the result of the
                    <code>SelectSettings()</code> algorithm.</p>
                </li>
                <li>Iterate over the 'advanced' ConstraintSets in
                  <var>newConstraints</var> in the order in which they were specified. For each ConstraintSet:
                  <ol>
                    <li>
                      <p>compute the fitness distance between it and each settings dictionary in <var>candidates</var>, treating bare values of properties as exact.</p>
                    </li>
                    <li>
                      <p>If the fitness distance is finite for one or more settings dictionaries in <var>candidates</var>, keep those settings dictionaries in <var>candidates</var>, discarding others.</p>
                      <p>If the fitness distance is infinite for all settings dictionaries in <var>candidates</var>, ignore this ConstraintSet.
                      </p>
                    </li>
                  </ol>
                </li>
                <li>
                  <p>Select one settings dictionary from <var>candidates</var>, and return it as the result of the
                    <code>SelectSettings()</code> algorithm. The UA <em class="rfc2119" title="SHOULD">SHOULD</em> use the one with the smallest <code>fitness distance</code>, as calculated in step 3.</p>
                </li>
              </ol>
              <p>When <code>applyConstraints</code> is called, the User Agent
                <em class="rfc2119" title="MUST">MUST</em> run the following steps:</p>
              <ol>
                <li>
                  <p>Let <var>p</var> be a new promise.</p>
                </li>
                <li>
                  <p>Let <var>newContraints</var> be the argument to this function.
                  </p>
                </li>
                <li>
                  <p>Run the following steps in parallel:</p>
                  <ol>
                    <li>
                      <p>Let <var>successfulSettings</var> be the result of running the <a href="#dfn-selectsettings" class="internalDFN" data-link-type="dfn">SelectSettings</a> algorithm with
                        <var>newConstraints</var> as the constraint set.</p>
                    </li>
                    <li>
                      <p>If <var>successfulSettings</var> is
                        <code>undefined</code>, let <var>failedConstraint</var> be any required constraint whose fitness distance was infinity for all settings dictionaries examined while executing the <code><a href="#dfn-selectsettings" class="internalDFN" data-link-type="dfn">SelectSettings</a></code> algorithm, let <var>message</var> be either
                        <code>undefined</code> or an informative human-readable message, reject <var>p</var> with a new
                        <code>OverconstrainedError</code> created by calling
                        <code>OverconstrainedError(<var>failedConstraint</var>,
                      <var>message</var>)</code>, and abort these steps. The existing constraints remain in effect in this case.</p>
                    </li>
                    <li>In a single operation, remove the existing constraints from <var>object</var>, apply <var>newConstraints</var>, and apply <var>successfulSettings</var> as the current settings.
                    </li>
                    <li>Finally, resolve <var>p</var>. From this point on until applyConstraints() is called successfully again, getConstraints() <em class="rfc2119" title="must">must</em> return the <var>newConstraints</var> that were passed as an argument to this call.</li>
                  </ol>
                </li>
                <li>
                  <p>Return <var>p</var>.</p>
                </li>
              </ol>
              <div class="note">
                <div class="note-title marker" aria-level="5" role="heading" id="h-note13"><span>Note</span></div>
                <div class="">
                  <p>Any implementation that has the same result as the algorithm above is an allowed implementation. For instance, the implementation may choose to keep track of the maximum and minimum values for a setting that are OK under the constraints considered, rather than keeping track of all possible values for the setting.</p>
                </div>
              </div>
              <div class="note">
                <div class="note-title marker" aria-level="5" role="heading" id="h-note14"><span>Note</span></div>
                <div class="">
                  <p>When picking a settings dictionary, the UA can use any information available to it. Examples of such information may be whether the selection is done as part of device selection in getUserMedia, whether the energy usage of the camera varies between the settings dictionaries, or whether using a settings dictionary will cause the device driver to apply resampling.
                  </p>
                </div>
              </div>
              <p>The User Agent <em class="rfc2119" title="MAY">MAY</em> choose new settings for the constrainable properties of the object at any time. When it does so it <em class="rfc2119" title="MUST">MUST</em> attempt to satisfy the current Constraints, in the manner described in the algorithm above.</p>
              <table class="parameters">
                <tbody>
                  <tr>
                    <th>Parameter</th>
                    <th>Type</th>
                    <th>Nullable</th>
                    <th>Optional</th>
                    <th>Description</th>
                  </tr>
                  <tr>
                    <td class="prmName">constraints</td>
                    <td class="prmType"><code>Constraints</code></td>
                    <td class="prmNullFalse"><span role="img" aria-label="False">✘</span></td>
                    <td class="prmOptTrue"><span role="img" aria-label="True">✔</span></td>
                    <td class="prmDesc">
                      <p>A new constraint structure to apply to this object.
                      </p>
                    </td>
                  </tr>
                </tbody>
              </table>
              <div>
                <em>Return type:</em> <code>Promise&lt;void&gt;</code>
              </div>
            </dd>
          </dl>
        </section>
      </div>
      <p>An example of Constraints that could be passed into
        <code><a href="#dfn-applyconstraints" class="internalDFN" data-link-type="dfn">applyConstraints()</a></code> or returned as a value of
        <code><a href="#dom-constraints" class="internalDFN" data-link-type="dfn"><code>constraints</code></a>
        </code> is below. It uses the <a href="#constrainable-properties">constrainable properties defined for
      <code>MediaStreamTrack</code></a>.</p>
      <div class="example">
        <div class="example-title marker"><span>Example 4</span></div><pre class="highlight hljs xquery">var supports = navigator.mediaDevices.getSupportedConstraints();
<span class="hljs-keyword">if</span>(!supports[<span class="hljs-string">"facingMode"</span>]) {
  // Treat like an error.
}
var constraints = {
  width: {
    min: <span class="hljs-number">640</span>
  },
  height: {
    min: <span class="hljs-number">480</span>
  },
  advanced: [{
width: <span class="hljs-number">650</span>
    }, {
width: {
  min: <span class="hljs-number">650</span>
}
    }, {
frameRate: <span class="hljs-number">60</span>
    }, {
width: {
  max: <span class="hljs-number">800</span>
}
    }, {
facingMode: <span class="hljs-string">"user"</span>
    }]
};</pre></div>
      <p>Here is another example, specifically for a video track where I must have a particular camera and have separate preferences for the width and height:
      </p>
      <div class="example">
        <div class="example-title marker"><span>Example 5</span></div><pre class="highlight hljs xquery">var supports = navigator.mediaDevices.getSupportedConstraints();
<span class="hljs-keyword">if</span>(!supports[<span class="hljs-string">"deviceId"</span>]) {
  // Treat like an error.
}
var constraints = {
  deviceId: {exact: <span class="hljs-string">"20983-20o198-109283-098-09812"</span>},
  advanced: [{
width: {
  min: <span class="hljs-number">800</span>,
  max: <span class="hljs-number">1200</span>
}
    }, {
height: {
  min: <span class="hljs-number">600</span>
}
    }]
};</pre></div>
      <p>And here's one for an audio track:</p>
      <div class="example">
        <div class="example-title marker"><span>Example 6</span></div><pre class="highlight hljs javascript"><span class="hljs-keyword">var</span> supports = navigator.mediaDevices.getSupportedConstraints();
<span class="hljs-keyword">if</span>(!supports[<span class="hljs-string">"deviceId"</span>] || !supports[<span class="hljs-string">"volume"</span>]) {
  <span class="hljs-comment">// Treat like an error.</span>
}
<span class="hljs-keyword">var</span> constraints = {
  <span class="hljs-attr">advanced</span>: [{
<span class="hljs-attr">deviceId</span>: <span class="hljs-string">"64815-wi3c89-1839dk-x82-392aa"</span>
    }, {
<span class="hljs-attr">volume</span>: <span class="hljs-number">0.5</span>
    }]
};</pre></div>
      <p>Here's an example of use of ideal:</p>
      <div class="example">
        <div class="example-title marker"><span>Example 7</span></div><pre class="highlight hljs javascript"><span class="hljs-keyword">var</span> supports = navigator.mediaDevices.getSupportedConstraints();
<span class="hljs-keyword">if</span>(!supports[<span class="hljs-string">"aspectRatio"</span>] || !supports[<span class="hljs-string">"facingMode"</span>]) {
  <span class="hljs-comment">// Treat like an error.</span>
}
<span class="hljs-keyword">var</span> gotten = navigator.mediaDevices.getUserMedia({
  <span class="hljs-attr">video</span>: {
    <span class="hljs-attr">width</span>: {<span class="hljs-attr">min</span>: <span class="hljs-number">320</span>, <span class="hljs-attr">ideal</span>: <span class="hljs-number">1280</span>, <span class="hljs-attr">max</span>: <span class="hljs-number">1920</span>},
    <span class="hljs-attr">height</span>: {<span class="hljs-attr">min</span>: <span class="hljs-number">240</span>, <span class="hljs-attr">ideal</span>: <span class="hljs-number">720</span>, <span class="hljs-attr">max</span>: <span class="hljs-number">1080</span>},
    <span class="hljs-attr">frameRate</span>: <span class="hljs-number">30</span>,     <span class="hljs-comment">// Shorthand for ideal.</span>
    <span class="hljs-comment">// facingMode: "environment" would be optional.</span>
    facingMode: {<span class="hljs-attr">exact</span>: <span class="hljs-string">"environment"</span>}
  }});</pre></div>
      <p>Here's an example of "I want 720p, but I can accept up to 1080p and down to VGA.":</p>
      <div class="example">
        <div class="example-title marker"><span>Example 8</span></div><pre class="highlight hljs javascript"><span class="hljs-keyword">var</span> supports = navigator.mediaDevices.getSupportedConstraints();
<span class="hljs-keyword">if</span>(!supports[<span class="hljs-string">"width"</span>] || !supports[<span class="hljs-string">"height"</span>]) {
  <span class="hljs-comment">// Treat like an error.</span>
}
<span class="hljs-keyword">var</span> gotten = navigator.mediaDevices.getUserMedia({<span class="hljs-attr">video</span>: {
  <span class="hljs-attr">width</span>: {<span class="hljs-attr">min</span>: <span class="hljs-number">640</span>, <span class="hljs-attr">ideal</span>: <span class="hljs-number">1280</span>, <span class="hljs-attr">max</span>: <span class="hljs-number">1920</span>},
  <span class="hljs-attr">height</span>: {<span class="hljs-attr">min</span>: <span class="hljs-number">480</span>, <span class="hljs-attr">ideal</span>: <span class="hljs-number">720</span>, <span class="hljs-attr">max</span>: <span class="hljs-number">1080</span>},
}});</pre></div>
      <p>Here's an example of "I want a front-facing camera and it must be VGA.":
      </p>
      <div class="example">
        <div class="example-title marker"><span>Example 9</span></div><pre class="highlight hljs xquery">var supports = navigator.mediaDevices.getSupportedConstraints();
<span class="hljs-keyword">if</span>(!supports[<span class="hljs-string">"width"</span>] || !supports[<span class="hljs-string">"height"</span>] || !supports[<span class="hljs-string">"facingMode"</span>]) {
  // Treat like an error.
}
var gotten = navigator.mediaDevices.getUserMedia({video: {
  facingMode: {exact: <span class="hljs-string">"user"</span>},
  width: {exact: <span class="hljs-number">640</span>},
  height: {exact: <span class="hljs-number">480</span>}
}});</pre></div>
    </section>

    <section id="types-for-constrainable-properties" typeof="bibo:Chapter" resource="#types-for-constrainable-properties" property="bibo:hasPart">
      <h3 id="h-types-for-constrainable-properties" resource="#h-types-for-constrainable-properties"><span property="xhv:role" resource="xhv:heading"><span class="secno">11.2 </span>Types for Constrainable Properties</span>
      </h3>
      <p>The syntax for the specification of the set of legal values depends on the type of the values. In addition to the standard atomic types (boolean, long, double, DOMString), legal values include lists of any of the atomic types, plus min-max ranges, as defined below.</p>
      <p>List values <em class="rfc2119" title="MUST">MUST</em> be interpreted as disjunctions. For example, if a property 'facingMode' for a camera is defined as having legal values ["left", "right", "user", "environment"], this means that 'facingMode' can have the values "left", "right", "environment", and "user". Similarly
        <a href="#dom-constraints" class="internalDFN" data-link-type="dfn"><code>Constraints</code></a> restricting 'facingMode' to ["user", "left", "right"] would mean that the User Agent should select a camera (or point the camera, if that is possible) so that "facingMode" is either "user", "left", or "right". This Constraint would thus request that the camera not be facing away from the user, but would allow the User Agent to allow the user to choose other directions.</p>
      <div>
        <pre class="def idl"><span class="idlDictionary" id="idl-def-doublerange" data-idl="" data-title="DoubleRange">dictionary <span class="idlDictionaryID">DoubleRange</span> {
<span class="idlMember" id="idl-def-doublerange-max" data-idl="" data-title="max" data-dfn-for="doublerange">    <span class="idlMemberType">double</span> <span class="idlMemberName"><a data-lt="max" href="#dom-doublerange-max" class="internalDFN" data-link-type="dfn" data-for="DoubleRange"><code>max</code></a></span>;</span>
<span class="idlMember" id="idl-def-doublerange-min" data-idl="" data-title="min" data-dfn-for="doublerange">    <span class="idlMemberType">double</span> <span class="idlMemberName"><a data-lt="min" href="#dom-doublerange-min" class="internalDFN" data-link-type="dfn" data-for="DoubleRange"><code>min</code></a></span>;</span>
};</span></pre>

        <section typeof="bibo:Chapter" resource="#dictionary-doublerange-members" property="bibo:hasPart">
          <h4 id="dictionary-doublerange-members" resource="#dictionary-doublerange-members"><span property="xhv:role" resource="xhv:heading">Dictionary <a class="idlType internalDFN" href="#idl-def-doublerange" data-link-type="dfn"><code>DoubleRange</code></a> Members</span></h4>
          <dl data-link-for="DoubleRange" data-dfn-for="DoubleRange" class="dictionary-members">
            <dt><dfn data-dfn-for="doublerange" data-dfn-type="dfn" id="dom-doublerange-max" data-idl=""><code>max</code></dfn> of type <span class="idlMemberType">double</span></dt>
            <dd>
              <p>The maximum legal value of this property.</p>
            </dd>
            <dt><dfn data-dfn-for="doublerange" data-dfn-type="dfn" id="dom-doublerange-min" data-idl=""><code>min</code></dfn> of type <span class="idlMemberType">double</span></dt>
            <dd>
              <p>The minimum value of this Property.</p>
            </dd>
          </dl>
        </section>
      </div>
      <div>
        <pre class="def idl"><span class="idlDictionary" id="idl-def-constraindoublerange" data-idl="" data-title="ConstrainDoubleRange">dictionary <span class="idlDictionaryID">ConstrainDoubleRange</span> : <span class="idlSuperclass"><a href="#idl-def-doublerange" class="internalDFN" data-link-type="dfn"><code>DoubleRange</code></a></span> {
<span class="idlMember" id="idl-def-constraindoublerange-exact" data-idl="" data-title="exact" data-dfn-for="constraindoublerange">    <span class="idlMemberType">double</span> <span class="idlMemberName"><a data-lt="exact" href="#dom-constraindoublerange-exact" class="internalDFN" data-link-type="dfn" data-for="ConstrainDoubleRange"><code>exact</code></a></span>;</span>
<span class="idlMember" id="idl-def-constraindoublerange-ideal" data-idl="" data-title="ideal" data-dfn-for="constraindoublerange">    <span class="idlMemberType">double</span> <span class="idlMemberName"><a data-lt="ideal" href="#dom-constraindoublerange-ideal" class="internalDFN" data-link-type="dfn" data-for="ConstrainDoubleRange"><code>ideal</code></a></span>;</span>
};</span></pre>

        <section typeof="bibo:Chapter" resource="#dictionary-constraindoublerange-members" property="bibo:hasPart">
          <h4 id="dictionary-constraindoublerange-members" resource="#dictionary-constraindoublerange-members"><span property="xhv:role" resource="xhv:heading">Dictionary <a class="idlType internalDFN" href="#idl-def-constraindoublerange" data-link-type="dfn"><code>ConstrainDoubleRange</code></a>
          Members</span></h4>
          <dl data-link-for="ConstrainDoubleRange" data-dfn-for="ConstrainDoubleRange" class="dictionary-members">
            <dt><dfn data-dfn-for="constraindoublerange" data-dfn-type="dfn" id="dom-constraindoublerange-exact" data-idl=""><code>exact</code></dfn> of type <span class="idlMemberType">double</span></dt>
            <dd>
              <p>The exact required value for this property.</p>
            </dd>
            <dt><dfn data-dfn-for="constraindoublerange" data-dfn-type="dfn" id="dom-constraindoublerange-ideal" data-idl=""><code>ideal</code></dfn> of type <span class="idlMemberType">double</span></dt>
            <dd>
              <p>The ideal (target) value for this property.</p>
            </dd>
          </dl>
        </section>
      </div>
      <div>
        <pre class="def idl"><span class="idlDictionary" id="idl-def-longrange" data-idl="" data-title="LongRange">dictionary <span class="idlDictionaryID">LongRange</span> {
<span class="idlMember" id="idl-def-longrange-max" data-idl="" data-title="max" data-dfn-for="longrange">    <span class="idlMemberType">long</span> <span class="idlMemberName"><a data-lt="max" href="#dom-longrange-max" class="internalDFN" data-link-type="dfn" data-for="LongRange"><code>max</code></a></span>;</span>
<span class="idlMember" id="idl-def-longrange-min" data-idl="" data-title="min" data-dfn-for="longrange">    <span class="idlMemberType">long</span> <span class="idlMemberName"><a data-lt="min" href="#dom-longrange-min" class="internalDFN" data-link-type="dfn" data-for="LongRange"><code>min</code></a></span>;</span>
};</span></pre>

        <section typeof="bibo:Chapter" resource="#dictionary-longrange-members" property="bibo:hasPart">
          <h4 id="dictionary-longrange-members" resource="#dictionary-longrange-members"><span property="xhv:role" resource="xhv:heading">Dictionary <a class="idlType internalDFN" href="#idl-def-longrange" data-link-type="dfn"><code>LongRange</code></a> Members</span></h4>
          <dl data-link-for="LongRange" data-dfn-for="LongRange" class="dictionary-members">
            <dt><dfn data-dfn-for="longrange" data-dfn-type="dfn" id="dom-longrange-max" data-idl=""><code>max</code></dfn> of type <span class="idlMemberType">long</span></dt>
            <dd>
              <p>The maximum legal value of this property.</p>
            </dd>
            <dt><dfn data-dfn-for="longrange" data-dfn-type="dfn" id="dom-longrange-min" data-idl=""><code>min</code></dfn> of type <span class="idlMemberType">long</span></dt>
            <dd>
              <p>The minimum value of this property.</p>
            </dd>
          </dl>
        </section>
      </div>
      <div>
        <pre class="def idl"><span class="idlDictionary" id="idl-def-constrainlongrange" data-idl="" data-title="ConstrainLongRange">dictionary <span class="idlDictionaryID">ConstrainLongRange</span> : <span class="idlSuperclass"><a href="#idl-def-longrange" class="internalDFN" data-link-type="dfn"><code>LongRange</code></a></span> {
<span class="idlMember" id="idl-def-constrainlongrange-exact" data-idl="" data-title="exact" data-dfn-for="constrainlongrange">    <span class="idlMemberType">long</span> <span class="idlMemberName"><a data-lt="exact" href="#dom-constrainlongrange-exact" class="internalDFN" data-link-type="dfn" data-for="ConstrainLongRange"><code>exact</code></a></span>;</span>
<span class="idlMember" id="idl-def-constrainlongrange-ideal" data-idl="" data-title="ideal" data-dfn-for="constrainlongrange">    <span class="idlMemberType">long</span> <span class="idlMemberName"><a data-lt="ideal" href="#dom-constrainlongrange-ideal" class="internalDFN" data-link-type="dfn" data-for="ConstrainLongRange"><code>ideal</code></a></span>;</span>
};</span></pre>

        <section typeof="bibo:Chapter" resource="#dictionary-constrainlongrange-members" property="bibo:hasPart">
          <h4 id="dictionary-constrainlongrange-members" resource="#dictionary-constrainlongrange-members"><span property="xhv:role" resource="xhv:heading">Dictionary <a class="idlType internalDFN" href="#idl-def-constrainlongrange" data-link-type="dfn"><code>ConstrainLongRange</code></a> Members</span></h4>
          <dl data-link-for="ConstrainLongRange" data-dfn-for="ConstrainLongRange" class="dictionary-members">
            <dt><dfn data-dfn-for="constrainlongrange" data-dfn-type="dfn" id="dom-constrainlongrange-exact" data-idl=""><code>exact</code></dfn> of type <span class="idlMemberType">long</span></dt>
            <dd>
              <p>The exact required value for this property.</p>
            </dd>
            <dt><dfn data-dfn-for="constrainlongrange" data-dfn-type="dfn" id="dom-constrainlongrange-ideal" data-idl=""><code>ideal</code></dfn> of type <span class="idlMemberType">long</span></dt>
            <dd>
              <p>The ideal (target) value for this property.</p>
            </dd>
          </dl>
        </section>
      </div>
      <div>
        <pre class="def idl"><span class="idlDictionary" id="idl-def-constrainbooleanparameters" data-idl="" data-title="ConstrainBooleanParameters">dictionary <span class="idlDictionaryID">ConstrainBooleanParameters</span> {
<span class="idlMember" id="idl-def-constrainbooleanparameters-exact" data-idl="" data-title="exact" data-dfn-for="constrainbooleanparameters">    <span class="idlMemberType">boolean</span> <span class="idlMemberName"><a data-lt="exact" href="#dom-constrainbooleanparameters-exact" class="internalDFN" data-link-type="dfn" data-for="ConstrainBooleanParameters"><code>exact</code></a></span>;</span>
<span class="idlMember" id="idl-def-constrainbooleanparameters-ideal" data-idl="" data-title="ideal" data-dfn-for="constrainbooleanparameters">    <span class="idlMemberType">boolean</span> <span class="idlMemberName"><a data-lt="ideal" href="#dom-constrainbooleanparameters-ideal" class="internalDFN" data-link-type="dfn" data-for="ConstrainBooleanParameters"><code>ideal</code></a></span>;</span>
};</span></pre>

        <section typeof="bibo:Chapter" resource="#dictionary-constrainbooleanparameters-members" property="bibo:hasPart">
          <h4 id="dictionary-constrainbooleanparameters-members" resource="#dictionary-constrainbooleanparameters-members"><span property="xhv:role" resource="xhv:heading">Dictionary <a class="idlType internalDFN" href="#idl-def-constrainbooleanparameters" data-link-type="dfn"><code>ConstrainBooleanParameters</code></a>
          Members</span></h4>
          <dl data-link-for="ConstrainBooleanParameters" data-dfn-for="ConstrainBooleanParameters" class="dictionary-members">
            <dt><dfn data-dfn-for="constrainbooleanparameters" data-dfn-type="dfn" id="dom-constrainbooleanparameters-exact" data-idl=""><code>exact</code></dfn> of type <span class="idlMemberType">boolean</span></dt>
            <dd>
              <p>The exact required value for this property.</p>
            </dd>
            <dt><dfn data-dfn-for="constrainbooleanparameters" data-dfn-type="dfn" id="dom-constrainbooleanparameters-ideal" data-idl=""><code>ideal</code></dfn> of type <span class="idlMemberType">boolean</span></dt>
            <dd>
              <p>The ideal (target) value for this property.</p>
            </dd>
          </dl>
        </section>
      </div>
      <div>
        <pre class="def idl"><span class="idlDictionary" id="idl-def-constraindomstringparameters" data-idl="" data-title="ConstrainDOMStringParameters">dictionary <span class="idlDictionaryID">ConstrainDOMStringParameters</span> {
<span class="idlMember" id="idl-def-constraindomstringparameters-exact" data-idl="" data-title="exact" data-dfn-for="constraindomstringparameters">    <span class="idlMemberType">(DOMString or sequence&lt;DOMString&gt;)</span> <span class="idlMemberName"><a data-lt="exact" href="#dom-constraindomstringparameters-exact" class="internalDFN" data-link-type="dfn" data-for="ConstrainDOMStringParameters"><code>exact</code></a></span>;</span>
<span class="idlMember" id="idl-def-constraindomstringparameters-ideal" data-idl="" data-title="ideal" data-dfn-for="constraindomstringparameters">    <span class="idlMemberType">(DOMString or sequence&lt;DOMString&gt;)</span> <span class="idlMemberName"><a data-lt="ideal" href="#dom-constraindomstringparameters-ideal" class="internalDFN" data-link-type="dfn" data-for="ConstrainDOMStringParameters"><code>ideal</code></a></span>;</span>
};</span></pre>

        <section typeof="bibo:Chapter" resource="#dictionary-constraindomstringparameters-members" property="bibo:hasPart">
          <h4 id="dictionary-constraindomstringparameters-members" resource="#dictionary-constraindomstringparameters-members"><span property="xhv:role" resource="xhv:heading">Dictionary <a class="idlType internalDFN" href="#idl-def-constraindomstringparameters" data-link-type="dfn"><code>ConstrainDOMStringParameters</code></a>
          Members</span></h4>
          <dl data-link-for="ConstrainDOMStringParameters" data-dfn-for="ConstrainDOMStringParameters" class="dictionary-members">
            <dt><dfn data-dfn-for="constraindomstringparameters" data-dfn-type="dfn" id="dom-constraindomstringparameters-exact" data-idl=""><code>exact</code></dfn> of type <span class="idlMemberType">(DOMString or
            sequence&lt;DOMString&gt;)</span></dt>
            <dd>
              <p>The exact required value for this property.</p>
            </dd>
            <dt><dfn data-dfn-for="constraindomstringparameters" data-dfn-type="dfn" id="dom-constraindomstringparameters-ideal" data-idl=""><code>ideal</code></dfn> of type <span class="idlMemberType">(DOMString or
            sequence&lt;DOMString&gt;)</span></dt>
            <dd>
              <p>The ideal (target) value for this property.</p>
            </dd>
          </dl>
        </section>
      </div>
      <div>
        <pre class="def idl"><span class="idlTypedef" id="idl-def-constrainlong" data-idl="" data-title="ConstrainLong">typedef <span class="idlTypedefType">(long or <a href="#idl-def-constrainlongrange" class="internalDFN" data-link-type="dfn"><code>ConstrainLongRange</code></a>)</span> <span class="idlTypedefID">ConstrainLong</span>;</span></pre>
        <div class="idlTypedefDesc">
          Throughout this specification, the identifier <span class="idlTypedefID">ConstrainLong</span> is used to refer to the
          <span class="idlTypedefType">(long or ConstrainLongRange)</span> type.
        </div>
      </div>
      <div>
        <pre class="def idl"><span class="idlTypedef" id="idl-def-constraindouble" data-idl="" data-title="ConstrainDouble">typedef <span class="idlTypedefType">(double or <a href="#idl-def-constraindoublerange" class="internalDFN" data-link-type="dfn"><code>ConstrainDoubleRange</code></a>)</span> <span class="idlTypedefID">ConstrainDouble</span>;</span></pre>
        <div class="idlTypedefDesc">
          Throughout this specification, the identifier <span class="idlTypedefID">ConstrainDouble</span> is used to refer to the
          <span class="idlTypedefType">(double or ConstrainDoubleRange)</span> type.
        </div>
      </div>
      <div>
        <pre class="def idl"><span class="idlTypedef" id="idl-def-constrainboolean" data-idl="" data-title="ConstrainBoolean">typedef <span class="idlTypedefType">(boolean or <a href="#idl-def-constrainbooleanparameters" class="internalDFN" data-link-type="dfn"><code>ConstrainBooleanParameters</code></a>)</span> <span class="idlTypedefID">ConstrainBoolean</span>;</span></pre>
        <div class="idlTypedefDesc">
          Throughout this specification, the identifier <span class="idlTypedefID">ConstrainBoolean</span> is used to refer to the
          <span class="idlTypedefType">(boolean or
          ConstrainBooleanParameters)</span> type.
        </div>
      </div>
      <div>
        <pre class="def idl"><span class="idlTypedef" id="idl-def-constraindomstring" data-idl="" data-title="ConstrainDOMString">typedef <span class="idlTypedefType">(DOMString or sequence&lt;DOMString&gt; or <a href="#idl-def-constraindomstringparameters" class="internalDFN" data-link-type="dfn"><code>ConstrainDOMStringParameters</code></a>)</span> <span class="idlTypedefID">ConstrainDOMString</span>;</span></pre>
        <div class="idlTypedefDesc"></div>
      </div>
    </section>

    <section id="capabilities" typeof="bibo:Chapter" resource="#capabilities" property="bibo:hasPart">
      <h3 id="h-capabilities" resource="#h-capabilities"><span property="xhv:role" resource="xhv:heading"><span class="secno">11.3 </span>Capabilities</span>
      </h3>
      <p><dfn data-dfn-for="" data-dfn-type="dfn" id="dom-capabilities" data-idl=""><code>Capabilities</code></dfn> is a dictionary containing one or more key-value pairs, where each key <em class="rfc2119" title="MUST">MUST</em> be a constrainable property, and each value <em class="rfc2119" title="MUST">MUST</em> be a subset of the set of values allowed for that property. The exact syntax of the value expression depends on the type of the property. The Capabilities dictionary specifies which constrainable properties that can be applied, as constraints, to the <a href="#dfn-constrainable-object" class="internalDFN" data-link-type="dfn">constrainable
      object</a>. Note that the Capabilities of a <a href="#dfn-constrainable-object" class="internalDFN" data-link-type="dfn">constrainable object</a>
        <em class="rfc2119" title="MAY">MAY</em> be a subset of the properties defined in the Web platform, with a subset of the set values for those properties. Note that Capabilities are returned from the User Agent to the application, and cannot be specified by the application. However, the application can control the Settings that the User Agent chooses for constrainable properties by means of Constraints.
      </p>
      <p>An example of a Capabilities dictionary is shown below. In this case, the <a href="#dfn-constrainable-object" class="internalDFN" data-link-type="dfn">constrainable object</a> is a video source with a very limited set of Capabilities.</p>
      <div class="example">
        <div class="example-title marker"><span>Example 10</span></div><pre class="highlight hljs css">{
  <span class="hljs-attribute">frameRate</span>: {
    min: <span class="hljs-number">1.0</span>,
    max: <span class="hljs-number">60.0</span>
  },
  <span class="hljs-selector-tag">facingMode</span>: <span class="hljs-selector-attr">[ "user", "left" ]</span>
}</pre></div>
      <p>The next example below points out that capabilities for range values provide ranges for individual constrainable properties, not combinations. This is particularly relevant for video width and height, since the ranges for width and height are reported separately. In the example, if the <a href="#dfn-constrainable-object" class="internalDFN" data-link-type="dfn">constrainable object</a> can only provide 640x480 and 800x600 resolutions the relevant capabilities returned would be:</p>
      <div class="example">
        <div class="example-title marker"><span>Example 11</span></div><pre class="highlight hljs css">{
  <span class="hljs-attribute">width</span>: {
    min: <span class="hljs-number">640</span>,
    max: <span class="hljs-number">800</span>
  },
  <span class="hljs-selector-tag">height</span>: {
    <span class="hljs-attribute">min</span>: <span class="hljs-number">480</span>,
    max: <span class="hljs-number">600</span>
  },
  <span class="hljs-selector-tag">aspectRatio</span>: 1<span class="hljs-selector-class">.3333333333</span>
}</pre></div>
      <p>Note in the example above that the aspectRatio would make clear that arbitrary combination of widths and heights are not possible, although it would still suggest that more than two resolutions were available.</p>A specification using the Constrainable Pattern should not subclass the below dictionary, but instead provide its own definition. See
      <code><a href="#idl-def-mediatrackcapabilities" class="internalDFN" data-link-type="dfn"><code>MediaTrackCapabilities</code></a>
      </code> for an example.
      <div>
        <pre class="def idl"><span class="idlDictionary" id="idl-def-capabilities" data-idl="" data-title="Capabilities">dictionary <span class="idlDictionaryID"><a data-lt="Capabilities" href="#dom-capabilities" class="internalDFN" data-link-type="dfn" data-for=""><code>Capabilities</code></a></span> {
};</span></pre>
      </div>
    </section>

    <section id="settings" typeof="bibo:Chapter" resource="#settings" property="bibo:hasPart">
      <h3 id="h-settings" resource="#h-settings"><span property="xhv:role" resource="xhv:heading"><span class="secno">11.4 </span>Settings</span>
      </h3>
      <p><dfn data-dfn-for="" data-dfn-type="dfn" id="dom-settings" data-idl=""><code>Settings</code></dfn> is a dictionary containing one or more key-value pairs. It <em class="rfc2119" title="MUST">MUST</em> contain each key returned in
        <code>getCapabilities()</code>. There <em class="rfc2119" title="MUST">MUST</em> be a single value for each key and the value <em class="rfc2119" title="MUST">MUST</em> be a member of the set defined for that property by
        <code>getCapabilities()</code>. The <code>Settings</code> dictionary contains the actual values that the User Agent has chosen for the object's constrainable properties. The exact syntax of the value depends on the type of the property.</p>
      <p>A conforming User Agent <em class="rfc2119" title="MUST">MUST</em> support all the constrainable properties defined in this specification.</p>
      <p>An example of a Settings dictionary is shown below. This example is not very realistic in that a browser would actually be required to support more constrainable properties than just these.</p>
      <div class="example">
        <div class="example-title marker"><span>Example 12</span></div><pre class="highlight hljs css">{
  <span class="hljs-attribute">frameRate</span>: <span class="hljs-number">30.0</span>,
  facingMode: <span class="hljs-string">"user"</span>
}</pre></div>A specification using the Constrainable Pattern should not subclass the below dictionary, but instead provide its own definition. See
      <code><a href="#idl-def-mediatracksettings" class="internalDFN" data-link-type="dfn"><code>MediaTrackSettings</code></a>
      </code> for an example.
      <div>
        <pre class="def idl"><span class="idlDictionary" id="idl-def-settings" data-idl="" data-title="Settings">dictionary <span class="idlDictionaryID"><a data-lt="Settings" href="#dom-settings" class="internalDFN" data-link-type="dfn" data-for=""><code>Settings</code></a></span> {
};</span></pre>
      </div>
    </section>

    <section id="constraints" typeof="bibo:Chapter" resource="#constraints" property="bibo:hasPart">
      <h3 id="h-constraints" resource="#h-constraints"><span property="xhv:role" resource="xhv:heading"><span class="secno">11.5 </span><dfn data-dfn-type="dfn" id="dfn-constraints-and-constraintset">Constraints and ConstraintSet</dfn></span>
      </h3>
      <p>Due to the limitations of WebIDL, interfaces implementing the Constrainable Pattern cannot simply subclass Constraints and ConstraintSet as they are defined here. Instead they must provide their own definitions that follow this pattern. See <a href="#media-track-constraints">MediaTrackConstraints</a> for an example of this.
      </p>
      <div>
        <pre class="def idl"><span class="idlDictionary" id="idl-def-constraintset" data-idl="" data-title="ConstraintSet">dictionary <span class="idlDictionaryID">ConstraintSet</span> {
};</span></pre>
      </div>
      <p>Each member of a ConstraintSet corresponds to a constrainable property and specifies a subset of the property's legal Capability values. Applying a ConstraintSet instructs the User Agent to restrict the settings of the corresponding constrainable properties to the specified values or ranges of values. A given property <em class="rfc2119" title="MAY">MAY</em> occur both in the basic Constraints set and in the advanced ConstraintSets list, and <em class="rfc2119" title="MAY">MAY</em> occur at most once in each ConstraintSet in the advanced list.</p>
      <div>
        <pre class="def idl"><span class="idlDictionary" id="idl-def-constraints" data-idl="" data-title="Constraints">dictionary <span class="idlDictionaryID"><a data-lt="Constraints" href="#dom-constraints" class="internalDFN" data-link-type="dfn" data-for=""><code>Constraints</code></a></span> : <span class="idlSuperclass"><a href="#idl-def-constraintset" class="internalDFN" data-link-type="dfn"><code>ConstraintSet</code></a></span> {
<span class="idlMember" id="idl-def-constraints-advanced" data-idl="" data-title="advanced" data-dfn-for="constraints">    <span class="idlMemberType">sequence&lt;<a href="#idl-def-constraintset" class="internalDFN" data-link-type="dfn"><code>ConstraintSet</code></a>&gt;</span> <span class="idlMemberName"><a data-lt="advanced" href="#dom-constraints-advanced" class="internalDFN" data-link-type="dfn" data-for="Constraints"><code>advanced</code></a></span>;</span>
};</span></pre>

        <section typeof="bibo:Chapter" resource="#dictionary-constraints-members" property="bibo:hasPart">
          <h4 id="dictionary-constraints-members" resource="#dictionary-constraints-members"><span property="xhv:role" resource="xhv:heading">Dictionary <a class="idlType internalDFN" href="#dom-constraints" data-link-type="dfn"><code>Constraints</code></a> Members</span></h4>
          <dl data-link-for="Constraints" data-dfn-for="Constraints" class="dictionary-members">
            <dt><dfn data-dfn-for="constraints" data-dfn-type="dfn" id="dom-constraints-advanced" data-idl=""><code>advanced</code></dfn> of type <span class="idlMemberType">sequence&lt;<a href="#idl-def-constraintset" class="internalDFN" data-link-type="dfn"><code>ConstraintSet</code></a>&gt;</span></dt>
            <dd>
              <p>This is the list of ConstraintSets that the User Agent <em class="rfc2119" title="MUST">MUST</em> attempt to satisfy, in order, skipping only those that cannot be satisfied. The order of these ConstraintSets is significant. In particular, when they are passed as an argument to
                <code>applyConstraints</code>, the User Agent <em class="rfc2119" title="MUST">MUST</em> try to satisfy them in the order that is specified. Thus if optional ConstraintSets C1 and C2 can be satisfied individually, but not together, then whichever of C1 and C2 is first in this list will be satisfied, and the other will not. The User Agent <em class="rfc2119" title="MUST">MUST</em> attempt to satisfy all optional ConstraintSets in the list, even if some cannot be satisfied. Thus, in the preceding example, if optional constraint C3 is specified after C1 and C2, the User Agent will attempt to satisfy C3 even though C2 cannot be satisfied. Note that a given property name may occur only once in each ConstraintSet but may occur in more than one ConstraintSet.</p>
            </dd>
          </dl>
        </section>
      </div>
    </section>
  </section>

  <section id="examples" typeof="bibo:Chapter" resource="#examples" property="bibo:hasPart">
    <!--OddPage-->
    <h2 id="h-examples" resource="#h-examples"><span property="xhv:role" resource="xhv:heading"><span class="secno">12. </span>Examples</span>
    </h2>
    <div>
      <p>This sample code exposes a button. When clicked, the button is disabled and the user is prompted to offer a stream. The user can cause the button to be re-enabled by providing a stream (e.g., giving the page access to the local camera) and then disabling the stream (e.g., revoking that access).</p>
      <div class="example">
        <div class="example-title marker"><span>Example 13</span></div><pre class="highlight hljs javascript">&lt;input type=<span class="hljs-string">"button"</span> value=<span class="hljs-string">"Start"</span> onclick=<span class="hljs-string">"start()"</span> id=<span class="hljs-string">"startBtn"</span>&gt;
<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
 <span class="hljs-keyword">var</span> startBtn = <span class="hljs-built_in">document</span>.getElementById(<span class="hljs-string">'startBtn'</span>);

 <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">start</span>(<span class="hljs-params"></span>) </span>{
     navigator.mediaDevices.getUserMedia({
   <span class="hljs-attr">audio</span>: <span class="hljs-literal">true</span>,
   <span class="hljs-attr">video</span>: <span class="hljs-literal">true</span>
     }).then(gotStream).catch(logError);
     startBtn.disabled = <span class="hljs-literal">true</span>;
 }

 <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">gotStream</span>(<span class="hljs-params">stream</span>) </span>{
     stream.getTracks().forEach(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">track</span>) </span>{
   track.onended = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
       startBtn.disabled = stream.active;
   };
     });
 }

 <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">logError</span>(<span class="hljs-params">error</span>) </span>{
     log(error.name + <span class="hljs-string">": "</span> + error.message);
 }
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span></pre></div>
    </div>
    <!-- Put back when we define MediaStreamRecorder
    <div>

      <p>This example allows people to record a short audio message and upload
      it to the server. This example even shows rudimentary error handling.</p>

      <pre class="example highlight">
&lt;input type="button" value="Start" onclick="msgRecord()" id="recBtn"&gt;
&lt;input type="button" value="Stop" onclick="msgStop()" id="stopBtn" disabled&gt;
&lt;p id="status"&gt;To start recording, press the Start button.&lt;/p&gt;
&lt;script&gt;
 var recBtn = document.getElementById('recBtn');
 var stopBtn = document.getElementById('stopBtn');

 function report(s) {
     document.getElementById('status').textContent = s;
 }

 function msgRecord() {
     report('Attempting to access microphone...');
     navigator.getUserMedia({
         audio: true
     }, gotStream, noStream);
     recBtn.disabled = true;
 }
 var msgStream, msgStreamRecorder;

 function gotStream(stream) {
     report('Recording... To stop, press the Stop button.');
     msgStream = stream;
     msgStreamRecorder = stream.record();
     stopBtn.disabled = false;
     stream.oninactive = function () {
         msgStop();
     }
 }

 function msgStop() {
     report('Creating file...');
     stopBtn.disabled = true;
     msgStream.oninactive = null;
     msgStream.stop();
     msgStreamRecorder.getRecordedData(msgSave);
 }

 function msgSave(blob) {
     report('Uploading file...');
     var x = new XMLHttpRequest();
     x.open('POST', 'uploadMessage');
     x.send(blob);
     x.onload = function () {
         report('Done! To record a new message, press the Start button.');
         recBtn.disabled = false;
     };
     x.onerror = function () {
         report('Failed to upload message. To try recording a message again, press the Start button.');
         recBtn.disabled = false;
     };
 }

 function noStream() {
     report('Could not obtain access to your microphone. To try again, press the Start button.');
     recBtn.disabled = false;
 }
&lt;/script&gt;
</pre>
    </div>-->
    <div>
      <p>This example allows people to take photos of themselves from the local video camera. Note that the Image Capture specification [<cite><a class="bibref" href="#bib-image-capture">image-capture</a></cite>] provides a simpler way to accomplish this.</p>
      <div class="example">
        <div class="example-title marker"><span>Example 14</span></div><pre class="highlight hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">article</span>&gt;</span>
 <span class="hljs-tag">&lt;<span class="hljs-name">style</span> <span class="hljs-attr">scoped</span>&gt;</span><span class="css">
  <span class="hljs-selector-tag">video</span> { <span class="hljs-attribute">transform</span>: <span class="hljs-built_in">scaleX</span>(-1); }
  <span class="hljs-selector-tag">p</span> { <span class="hljs-attribute">text-align</span>: center; }
 </span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span>
 <span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>Snapshot Kiosk<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>
 <span class="hljs-tag">&lt;<span class="hljs-name">section</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"splash"</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">p</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"errorMessage"</span>&gt;</span>Loading...<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
 <span class="hljs-tag">&lt;/<span class="hljs-name">section</span>&gt;</span>
 <span class="hljs-tag">&lt;<span class="hljs-name">section</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"app"</span> <span class="hljs-attr">hidden</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">video</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"monitor"</span> <span class="hljs-attr">autoplay</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">video</span>&gt;</span> <span class="hljs-tag">&lt;<span class="hljs-name">canvas</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"photo"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">canvas</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">button</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"&amp;#x1F4F7;"</span> <span class="hljs-attr">onclick</span>=<span class="hljs-string">"snapshot()"</span>&gt;</span>
 <span class="hljs-tag">&lt;/<span class="hljs-name">section</span>&gt;</span>
 <span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
 <span class="hljs-keyword">var</span> video = <span class="hljs-built_in">document</span>.getElementById(<span class="hljs-string">'monitor'</span>);
 <span class="hljs-keyword">var</span> canvas = <span class="hljs-built_in">document</span>.getElementById(<span class="hljs-string">'photo'</span>);

 navigator.mediaDevices.getUserMedia({
     <span class="hljs-attr">video</span>: <span class="hljs-literal">true</span>
 }).then(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">stream</span>) </span>{
     video.srcObject = stream;
     video.onloadedmetadata = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
         canvas.width = video.videoWidth;
         canvas.height = video.videoHeight;
         <span class="hljs-built_in">document</span>.getElementById(<span class="hljs-string">'splash'</span>).hidden = <span class="hljs-literal">true</span>;
         <span class="hljs-built_in">document</span>.getElementById(<span class="hljs-string">'app'</span>).hidden = <span class="hljs-literal">false</span>;
     };
 }).catch(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">reason</span>) </span>{
     <span class="hljs-built_in">document</span>.getElementById(<span class="hljs-string">'errorMessage'</span>).textContent = <span class="hljs-string">'No camera available.'</span>;
 });

 <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">snapshot</span>(<span class="hljs-params"></span>) </span>{
     canvas.getContext(<span class="hljs-string">'2d'</span>).drawImage(video, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>);
 }
 </span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">article</span>&gt;</span></pre></div>
    </div>
  </section>

  <section id="privacy-and-security-considerations" typeof="bibo:Chapter" resource="#privacy-and-security-considerations" property="bibo:hasPart">
    <!--OddPage-->
    <h2 id="h-privacy-and-security-considerations" resource="#h-privacy-and-security-considerations"><span property="xhv:role" resource="xhv:heading"><span class="secno">13. </span>Privacy and Security Considerations</span>
    </h2>
    <p>This section is non-normative; it specifies no new behavior, but instead summarizes information already present in other parts of the specification.
    </p>
    <p>This document extends the Web platform with the ability to manage input devices for media - in this iteration, microphones, and cameras. It also allows the manipulation of audio output devices (speakers and headphones). Capturing audio and video exposes personally-identifiable information to applications, and this specification requires obtaining explicit user consent before sharing it.</p>
    <p>Without authorization (to the "drive-by web"), it offers the ability to tell how many devices there are of each class, and how they are grouped together (e.g. a microphone and camera belonging to a single Web cam). The identifiers for the devices are designed to not be useful for a fingerprint that can track the user between origins, but the number and grouping of devices adds to the fingerprint surface. It recommends to treat the per-origin persistent identifier <code>deviceId</code> as other persistent storage (e.g. cookies) are treated.</p>
    <p>When authorization is given, this document describes how to get access to, and use, media data from the devices mentioned. This data may be sensitive; advice is given that indicators should be supplied to indicate that devices are in use, but both the nature of authorization and the indicators of in-use devices are platform decisions.</p>
    <p>Authorization may be given on a case-by-case basis, or be persistent. In the case of a case-by-case authorization, it is important that the user be able to say "no" in a way that prevents the UI from blocking user interaction until permission is given - either by offering a way to say a "persistent NO" or by not using a modal permissions dialog.</p>
    <p>When authorization to any media device is given, application developers gain access to the labels of all available media capture devices. In most cases, the labels are persistent across browsing sessions and across origins that have also been granted authorization, and thus potentially provide a way to track a given device across time and origins.</p>
    <p>For origins to which permission has been granted, the
      <code><a href="#event-mediadevices-devicechange" class="internalDFN" data-link-type="dfn"><code>devicechange</code></a>
      </code> event will be emitted across browsing contexts and origins each time a new media device is added or removed; user agents can mitigate the risk of correlation of browsing activity across origins by fuzzing the timing of these events.</p>
    <p>Once a developer gains access to a media stream from a capture device, the developer also gains access to detailed information about the device, including its range of operating capabilities (e.g. available resolutions for a camera). These operating capabilities are for the most part persistent across browsing sessions and origins, and thus provide a way to track a given device across time and origins.</p>
    <p>Once access to a video stream from a capture device is obtained, that stream can most likely be used to fingerprint uniquely the said device (e.g. via dead pixel detection). Similarly, once access to an audio stream is obtained, that stream can most likely be used to fingerprint user location down to the level of a room or even simultaneous occupation of a room by disparate users (e.g. via analysis of ambient audio or of unique audio purposely played out of the device speaker). User-level mitigation for both audio and video consists of covering up the camera and/or microphone or revoking permission via browser chrome controls.</p>
    <p>It is possible to use constraints so that the failure of a getUserMedia call will return information about devices on the system without prompting the user, which increases the surface available for fingerprinting. The User Agent should consider limiting the rate at which failed getUserMedia calls are allowed in order to limit this additional surface.</p>
    <p>In the case of persistent authorization via a stored permission, it is important that it is easy to find the list of granted permissions and revoke permissions that the user wishes to revoke.</p>
    <p>Once permission has been granted, the User Agent should make two things readily apparent to the user:</p>
    <ul>
      <li>That the page has access to the devices for which permission is given
      </li>
      <li>Whether or not any of the devices are presently recording ("on air") indicator
      </li>
    </ul>
    <div class="note">
      <div class="note-title marker" aria-level="3" role="heading" id="h-note15"><span>Note</span></div>
      <div class="">
        <p>Developers of sites with stored permissions should be careful that these permissions not be abused. These permissions can be revoked using the [<cite><a class="bibref" href="#bib-permissions">permissions</a></cite>] API.</p>
        <p>In particular, they should not make it possible to automatically send audio or video streams from authorized media devices to an end point that a third party can select.</p>
        <p>Indeed, if a site offered URLs such as
          <code>https://webrtc.example.org/?call=<var>user</var></code> that would automatically set up calls and transmit audio/video to
          <code><var>user</var></code>, it would be open for instance to the following abuse:</p>
        <p>Users who have granted stored permissions to
          <code>https://webrtc.example.org/</code> could be tricked to send their audio/video streams to an attacker <code>EvilSpy</code> by following a link or being redirected to
          <code>https://webrtc.example.org/?user=EvilSpy</code>.</p>
        <p>Although [<cite><a class="bibref" href="#bib-RTCWEB-SECURITY-ARCH">RTCWEB-SECURITY-ARCH</a></cite>] Section 5.2 indicates that implementations may refuse all access permissions for HTTP origins, it recommends that implementations allow one-time camera/microphone access. While allowing one-time access for HTTP origins is convenient, this makes it possible for an attacker to obtain access to the camera/microphone of an unsuspecting user.</p>
      </div>
    </div>
  </section>

  <section class="informative" id="extensibility" typeof="bibo:Chapter" resource="#extensibility" property="bibo:hasPart">
    <!--OddPage-->
    <h2 id="h-extensibility" resource="#h-extensibility"><span property="xhv:role" resource="xhv:heading"><span class="secno">14. </span>Extensibility</span>
    </h2>
    <p><em>This section is non-normative.</em></p>
    <p>Although new versions of this specification may be produced in the future, it is also expected that other standards will need to define new capabilities that build upon those in this specification. The purpose of this section is to provide guidance to creators of such extensions.</p>
    <p>Any WebIDL-defined interfaces, methods, or attributes in the specification may be extended. Two likely extension points are defining a new media type and defining a new constrainable property.</p>

    <section id="defining-a-new-media-type-beyond-the-existing-audio-and-video-types" typeof="bibo:Chapter" resource="#defining-a-new-media-type-beyond-the-existing-audio-and-video-types" property="bibo:hasPart">
      <h3 id="h-defining-a-new-media-type-beyond-the-existing-audio-and-video-types" resource="#h-defining-a-new-media-type-beyond-the-existing-audio-and-video-types"><span property="xhv:role" resource="xhv:heading"><span class="secno">14.1 </span>Defining a new media type (beyond the existing Audio and Video types)
        </span>
      </h3>
      <p>At a minimum, defining a new media type would require</p>
      <ul>
        <li>adding a new getXXXXTracks() method for the type to the
          <code><a href="#idl-def-mediastream" class="internalDFN" data-link-type="dfn"><code>MediaStream</code></a>
          </code> interface,</li>
        <li>describing what a muted or disabled track of that type will render (see <a href="#life-cycle-and-media-flow" class="sec-ref"><span class="secno">4.3.1</span> <span class="sec-title">Life-cycle and Media Flow</span></a>),
        </li>
        <li>adding the new type as an additional legal value for the
          <code><a href="#dom-mediastreamtrack-kind">kind</a></code> attribute on the <code><a href="#idl-def-mediastreamtrack" class="internalDFN" data-link-type="dfn"><code>MediaStreamTrack</code></a>
          </code> interface,</li>
        <li>defining any constrainable properties (see <a href="#constrainable-properties" class="sec-ref"><span class="secno">4.3.8</span> <span class="sec-title">Constrainable Properties</span></a>) that are applicable to the media type,
        </li>
        <li>updating how the <code>HTMLMediaElement</code> works with a <code>
          <a href="#idl-def-mediastream" class="internalDFN" data-link-type="dfn"><code>MediaStream</code></a>
          </code> containing a track of the new media type (see <a href="#mediastreams-in-media-elements" class="sec-ref"><span class="secno">6.</span> <span class="sec-title">MediaStreams in Media Elements</span></a>),
        </li>
        <li>updating <code><a href="#idl-def-mediadevicekind" class="internalDFN" data-link-type="dfn"><code>MediaDeviceKind</code></a>
          </code> if the new type has enumerable devices,</li>
        <li>updating the <code>getCapabilities()</code> and
          <code>getUserMedia()</code> descriptions,</li>
        <li>adding the new type to the
          <code><a href="#idl-def-mediastreamconstraints" class="internalDFN" data-link-type="dfn"><code>MediaStreamConstraints</code></a>
          </code> dictionary,</li>
        <li>describing any new security and/or privacy considerations (see
          <a href="#privacy-and-security-considerations" class="sec-ref"><span class="secno">13.</span> <span class="sec-title">Privacy and Security Considerations</span></a>) introduced by the new type, and</li>
        <li>if the new type requires user authorization, defining new permissions for it, and defining how they, along with access starting and ending, as well as muting/disabling, affect any new and/or existing "on-air" and "device accessible" indicator states (see
          <a href="#mediadevices" class="sec-ref"><span class="secno">9.2</span> <span class="sec-title">MediaDevices</span></a>).</li>
      </ul>
      <p>Additionally, it should include updating</p>
      <ul>
        <li>the <a href="#dfn-source" class="internalDFN" data-link-type="dfn">source</a> definition,
        </li>
        <li>the list of media stream <a href="#dfn-consumer" class="internalDFN" data-link-type="dfn">consumer</a>s,
        </li>
        <li>the description of the <code><a href="#dom-mediastreamtrack-label">label</a></code> attribute on the
          <code><a href="#idl-def-mediastreamtrack" class="internalDFN" data-link-type="dfn"><code>MediaStreamTrack</code></a>
          </code> interface,</li>
        <li>the list of sinks (see <a href="#the-model-sources-sinks-constraints-and-settings" class="sec-ref"><span class="secno">5.</span> <span class="sec-title">The model: sources, sinks, constraints, and settings</span></a>), and
        </li>
        <li>the best practice statements referring to video and audio (see
          <a href="#implementation-suggestions" class="sec-ref"><span class="secno">10.6</span> <span class="sec-title">Implementation Suggestions</span></a>).
        </li>
      </ul>
      <p>It might also include</p>
      <ul>
        <li>explaining how the media is expected to be used by potential
          <a href="#dfn-consumer" class="internalDFN" data-link-type="dfn">consumer</a>s, and
        </li>
        <li>giving examples in <code><a href="#idl-def-mediastreamtrackstate" class="internalDFN" data-link-type="dfn"><code>MediaStreamTrackState</code></a>
          </code> of how such a track might become ended.</li>
      </ul>
    </section>

    <section id="defining-a-new-constrainable-property" typeof="bibo:Chapter" resource="#defining-a-new-constrainable-property" property="bibo:hasPart">
      <h3 id="h-defining-a-new-constrainable-property" resource="#h-defining-a-new-constrainable-property"><span property="xhv:role" resource="xhv:heading"><span class="secno">14.2 </span>Defining a new constrainable property</span>
      </h3>
      <p>This will require thinking through and defining how Constraints, Capabilities, and Settings for the property (see <a href="#terminology" class="sec-ref"><span class="secno">3.</span> <span class="sec-title">Terminology</span></a>) will work. The relevant text in
        <code><a href="#idl-def-mediatracksupportedconstraints" class="internalDFN" data-link-type="dfn"><code>MediaTrackSupportedConstraints</code></a>
        </code>,
        <code><a href="#idl-def-mediatrackcapabilities" class="internalDFN" data-link-type="dfn"><code>MediaTrackCapabilities</code></a>
        </code>,
        <code><a href="#idl-def-mediatrackconstraints" class="internalDFN" data-link-type="dfn"><code>MediaTrackConstraints</code></a>
        </code>,
        <code><a href="#idl-def-mediatracksettings" class="internalDFN" data-link-type="dfn"><code>MediaTrackSettings</code></a>
        </code>, <a href="#constrainable-properties" class="sec-ref"><span class="secno">4.3.8</span> <span class="sec-title">Constrainable Properties</span></a>, and
        <code><a href="#idl-def-mediastreamconstraints" class="internalDFN" data-link-type="dfn"><code>MediaStreamConstraints</code></a>
        </code> are the model to use.</p>
      <p>Creators of extension specifications are strongly encouraged to notify the Media Capture Task Force of their extension by emailing the list at public-media-capture@w3.org.
        <br> Future versions of this specification and others created by the Media Capture Task Force will take into consideration all extensions they are aware of in an attempt to reduce potential usage conflicts.</p>
    </section>
  </section>

  <section id="change-log" typeof="bibo:Chapter" resource="#change-log" property="bibo:hasPart">
    <!--OddPage-->
    <h2 id="h-change-log" resource="#h-change-log"><span property="xhv:role" resource="xhv:heading"><span class="secno">15. </span>Change Log</span>
    </h2>
    <p>This section will be removed before publication.</p>
    <h2 id="changes-since-september-13-2016">Changes since September 13, 2016</h2>
    <ol>
      <li>[#398] Editorial: Fix links to MediaStream's methods</li>
      <li>[#399] Unroll steps in 'add a track' and 'remove a track'</li>
      <li>[#401] Define states to be used in indicator requirements</li>
      <li>[#410] Rename list-devices permission to device-info to</li>
      match permission spec
      <li>[#412] Specify rules for when devicechange events may fire</li>
      <li>[#415] Remove unions in MediaTrackCapabilities</li>
    </ol>
    <h2 id="changes-since-june-24-2016">Changes since June 24, 2016</h2>
    <ol>
      <li>[#376] Allow firing devicechange just once when inserting a camera with mic</li>
      <li>[#378] Editorial: Update URLs in copyright to https</li>
      <li>[#379] Device change events also occur during active media capture
      </li>
      <li>[#381] Add pre-grant deviceId alternative</li>
      <li>[#383] Editorial: Make constraints webidl optional in gUM call</li>
      <li>[#392] Add room fingerprinting to security considerations</li>
    </ol>
    <h2 id="changes-since-may-13-2016">Changes since May 13, 2016</h2>
    <ol>
      <li>[#362] Replace "user media in an iFrame" section with use of new 'user media enabled flag'</li>
      <li>[#365] Editorial: update content and format of images</li>
      <li>[#367] Editorial: convert to WebIDL contiguous mode</li>
    </ol>
    <h2 id="changes-since-april-23-2016">Changes since April 23, 2016</h2>
    <ol>
      <li>[#348, #346] Removes sourceType from the document</li>
      <li>[#349, #339] Use 'originIdentifier' in getUserMedia() steps</li>
      <li>[#358, #352] Getusermedia: Pull the permissions check into the per-type loop</li>
      <li>[#357, #354] Be specific on what live tracks grant implicit permission
      </li>
    </ol>
    <h2 id="changes-since-april-6-2016">Changes since April 6, 2016</h2>
    <ol>
      <li>[#333] Restrict devicechange event to apps with device-info permission
      </li>
      <li>[#338] Make ended event a simple event</li>
      <li>[#342] Remove obsolte error names table</li>
      <li>[#343] Clarify language around stored permission and revocation</li>
      <li>[#345] Issue 316: add links to constrainable properties</li>
    </ol>
    <h2 id="changes-since-february-22-2016">Changes since February 22, 2016</h2>
    <ol>
      <li>[#318] MediaStreamTrack.stop(): Address early return for non-locally sourced tracks</li>
      <li>[#319] Add text that incorporates Permission API's definition of permission handling.</li>
      <li>[#321] Remove track attributes "remote" and "readonly"</li>
      <li>[#323] Remove unused images</li>
      <li>[#324, #325] editorial fixes</li>
      <li>[#329, #330] Clarify that, with permission, deviceID persists as with other storage such as cookies but that groupID never persists</li>
      <li>[#331] Use NotAllowedError for permission failure in getUserMedia algorithm
      </li>
    </ol>
    <h2 id="changes-since-december-23-2015">Changes since December 23, 2015</h2>
    <ol>
      <li>[#301, #292] getSupportedConstraints(): Remove prose about dictionary member default values</li>
      <li>[#306, #288] Explain WebIDL limitation for ConstrainablePattern</li>
      <li>[#308] Clarify how the generic applyConstraints algorithm applies to MediaStreamTracks
      </li>
      <li>[#309, #267] Specify permission model for nested browsing contexts
      </li>
      <li>[#313, #268] Extend iframe with a new allowusermedia attribute</li>
      <li>[#315, #307, #296] Clarify how Capabilites should work</li>
    </ol>
    <h2 id="changes-since-december-8-2015">Changes since December 8, 2015</h2>
    <ol>
      <li>[#286] Fix facingMode in MediaTrackCapabilities and example</li>
      <li>[#289] Describe the echoCancellation capability</li>
      <li>[#290] Use single double instead of same max and min for the aspectRadio capability in example</li>
      <li>[#291] Remove MediaStream active/inactive events</li>
      <li>[#284] Clarify that constraint in overconstrainederror is defined in selectSettings
      </li>
      <li>[#297] Add new extension text</li>
    </ol>
    <h2 id="changes-since-september-25-2015">Changes since September 25, 2015</h2>
    <ol>
      <li>[#259] Specify that groupId is to be cleared when cookies are</li>
      <li>[#261, #255] Warn against UUID fingerprinting</li>
      <li>[#260] Update privacy section with lessons from TAG questionnaire
      </li>
      <li>[#262] Mark sources of fingerprinting</li>
      <li>[#258] Reorganize definition of constrainable properties without a registry
      </li>
      <li>[#266] Add detailed steps for removeTrack() and fix a security considerations issue</li>
      <li>[#272] Fix applyConstraints steps to avoid unused var and bail on reject
      </li>
      <li>[#273] Add exception for stored permissions in text about stopped sources and revoked permissions</li>
      <li>[#278, #250] PING: Refer to security-arch on the <em class="rfc2119" title="MUST">MUST</em> inside Best Practice for HTTPS</li>
      <li>[#280] Let removeTrack() reference the 'remove a track' steps</li>
      <li>[#282] Clarify equality for string constraints</li>
      <li>[#279, #193] Used frame rate for generic concept</li>
    </ol>
    <h2 id="changes-since-august-26-2015">Changes since August 26, 2015</h2>
    <ol>
      <li>[#226] Typedef MediaStreamError to be an object.</li>
      <li>[#253] Clarify in section 5 that tracks don't request changes, but they can want different settings based on application use of applyConstraints.
      </li>
      <li>[#239] Reject gUM promise with a TypeError if no media types are given.
      </li>
      <li>[#240] Specify that groupid is origin-unique.</li>
      <li>[#241] Reference WebIDL-1.</li>
      <li>[#245] Make applyConstraints argument optional.</li>
      <li>[#247] Clean up language in SelectSettings.</li>
    </ol>
    <h2 id="changes-since-june-29-2015">Changes since June 29, 2015</h2>
    <ol>
      <li>[#204] Use WebIDL [SameObject] extended attribute</li>
      <li>[#209] Once you implement a MediaTrackSupportedConstraints member, you support it</li>
      <li>[#215] MediaStreamErrorEvent -&gt; OverconstrainedErrorEvent</li>
      <li>[#214] Create new ErrorEvent</li>
      <li>[#208] Add WebIDL definitions to Constrainable Pattern section to pass WebIDL validator</li>
      <li>[#201, #207] Specify order of add/removetrack and active/inactive events
      </li>
      <li>[#194, #162] New Overconstrainederror</li>
      <li>[#213] Fix Not Found Error in gUM algorithm</li>
      <li>[#181] Remove text about firing event handlers (from event handler attribute descriptions)</li>
    </ol>
    <h2 id="changes-since-may-23-2015">Changes since May 23, 2015</h2>
    <ol>
      <li>[LC-3016, #171] Referring to html5.1 for describing srcObject in media elements</li>
      <li>[LC-3011, #196, #200] Replace 'invoke MediaDevices.getUserMedia()' with a reference to the algorithm</li>
      <li>[LC-3017, #188] Changed SourceAvailableError to a NotReadableError DOMException
      </li>
      <li>[LC-3017, #187] Changed PermissionDeniedError to a SecurityError DOMException
      </li>
      <li>[LC-3017, #185] Changed NotSupportedError from a MediaStreamError to a DOMException</li>
      <li>[LC-3017, #184] Changed AbortError from a MediaStreamError to a DOMException
      </li>
      <li>[#180, #195] Replaced asynchronously with in parallel</li>
      <li>[LC-3017, #186] Change NotFoundError from a MediaStreamError to a DOMException
      </li>
      <li>[#174, #182] Tidy up getUserMedia() algorithm</li>
      <li>[LC-3022, #177] Add latency constraint</li>
      <li>[#178, #179] Add serializer to MediaDeviceInfo.</li>
      <li>[LC-3025, #175] Add note about addtrack and removetrack not being used by this spec</li>
      <li>[LC-3018, #163, #172] Use [Exposed]</li>
    </ol>
    <h2 id="changes-since-april-10-2015">Changes since April 10, 2015</h2>
    <ol>
      <li>[PR #156] Fix broken fragment</li>
      <li>[Issue #164] Removed detach source from descriptions</li>
      <li>[PR #166] Added steps describing the procedure to update a track's muted state.</li>
      <li>[PR #167] Refer to internal algorithms for track adding and cloning instead of API layer methods</li>
      <li>[PR #168] Remove setting the active state in MediaStream constructor
      </li>
      <li>[PR #169] Use required dictionary track dictionary member on MediaStreamTrackEventInit
      </li>
      <li>[Issue #180] Switch terminology from "asynchronously" to "in parallel" to follow the HTML standard</li>
    </ol>
    <h2 id="changes-since-march-24-2015">Changes since March 24, 2015</h2>
    <ol>
      <li>[PR #151] Remove outdated issues in the doc</li>
      <li>[PR #152] using "browsing session" instead of "session"</li>
      <li>[PR #153] short descriptions of arguments to callbacks in callback-based gUM</li>
    </ol>
    <h2 id="changes-since-february-2-2015">Changes since February 2, 2015</h2>
    <ol>
      <li>Added getUserMedia() implementation suggestion as discussed in issue #67
      </li>
      <li>Issue 139: Clarified in SelectSettings algorithm that an empty constraint is to be treated as no constraint.</li>
      <li>Issue 128: Clarified in SelectSettings that bare values mean exact in the advanced array and ideal otherwise.</li>
      <li>[PR#37/Bug 26654] Webidl in Constrainable</li>
      <li>[Issue #141] MediaDeviceInfo.label and .groupId should not be nullable
      </li>
      <li>[PR #150] Update text for how constraint dictionaries get extended
      </li>
    </ol>
    <h2 id="changes-since-october-27-2014">Changes since October 27, 2014</h2>
    <ol>
      <li>Bug 26953: Added more detail to the definition of volume.</li>
      <li>Clarified in section 4.1 that synchronization is only an intention because some tracks cannot be synchronized.</li>
      <li>Introduced and made consistent use of the term 'constrainable property' everywhere we refer to a property which can have Capabilities, Constraints, and Settings.</li>
      <li>Changed constraint definition text using concepts and some direct text from PR 61.</li>
      <li>Bug 113 (old 25771): Explanation of constraints in GUM call. Rewrote algorithm with separate SelectSettings step, used both in GUM and in applyConstraints.
      </li>
    </ol>
    <h2 id="changes-since-september-24-2014">Changes since September 24, 2014</h2>
    <ol>
      <li>Bug 25809: Added note warning about abuse of call-me URLs.</li>
      <li>Bug 26918: Added note on clearing deviceId when clearing cookies.
      </li>
      <li>Bug 25777: Added example of capabilities when only two video sizes are available.</li>
      <li>Bug 26654: Added ConstrainBoolean.</li>
      <li>Bug 26810: All callback-based methods have been converted to use Promises, except for the version of getUserMedia() defined under NavigatorUserMedia.
      </li>
    </ol>
    <h2 id="changes-since-september-9-2014">Changes since September 9, 2014</h2>
    <ol>
      <li>Bug 22214: How long do permissions persist?</li>
      <li>Define algorithm for processing non-required constraints.</li>
      <li>Bug 24933: deviceId is not registered as constraints, so apps can't choose device based on the device enumeration</li>
      <li>Bug 25609: MediaStreamErrorEvent is incomplete</li>
    </ol>
    <h2 id="changes-since-august-17-2014">Changes since August 17, 2014</h2>
    <ol>
      <li>Bug 25988: Need a list of MediaStreamError "name" values</li>
      <li>Bug 26623: Use commonest spelling of "cancellation"</li>
      <li>Bug 25767: Missing Ref to Image Capture spec</li>
      <li>Bug 22271: Terminology section should not have conformance requirements
      </li>
    </ol>
    <h2 id="changes-since-july-4-2014">Changes since July 4, 2014</h2>
    <ol>
      <li>Bug 22251: Added new NotFoundError, AbortError, SourceUnavailable errors to gUM call.</li>
      <li>Bug 25786: User Agent allowance of files to be substituted for any input device is now permitted but not listed as best practice, i.e., no longer specifically recommended.</li>
    </ol>
    <h2 id="changes-since-june-19-2014">Changes since June 19, 2014</h2>
    <ol>
      <li>Bug 22354: Added privacy and security section.</li>
      <li>Bug 25784: "on air" indication is underspecified - separated "access granted" and "on air" indicators.</li>
      <li>Bug 26192: add onoverconstrained to MediaStreamTrack</li>
      <li>Bug 25776: add groupID to MediaTrackConstraintSet</li>
      <li>Bug 25780: Clarify step 3 of MediaStream.clone</li>
      <li>Bug 25804: Change 'remote' attribute definition</li>
      <li>Bug 25650: In getUserMedia algorithm if user denies permission spec is wrongly redirecting to Constraint Failure.</li>
      <li>Bug 25605: Definition of MediaStreamTrackEvent is not complete</li>
      <li>Bug 25651: All the links in spec should redirect to specified contents without failure.</li>
      <li>Bug 25725: getUserMedia constraints should be non-nullable</li>
      <li>Bug 25763: does the ID really have to be exactly 36 char long?</li>
      <li>Bug 24934: invalid definition for the "seekable" attribute when MediaStream is set to srcObject.</li>
      <li>Removed MediaStreamTrack new state (sourceType none removed as a consequence) (as discussed in bug 25787).</li>
      <li>Bug 25801: Remove getNativeSettings()</li>
    </ol>
    <h2 id="changes-since-may-7-2014">Changes since May 7, 2014</h2>
    <ol>
      <li>Clarified that skipping of optional/advanced ConstraintSets is only permitted if they cannot be satisfied, not merely because the User Agent wishes to.</li>
      <li>Bug 25855: Clarification about conformance requirements phrased as algorithms
      </li>
      <li>Bug 25803: Mark section entitled "The model: sources, sinks, constraints, and settings" as non-normative</li>
      <li>Bug 24015: Add callback to indicate when available media devices change (introduced Navigator.mediaDevices)</li>
      <li>Bug 25860: make sure we have a bug to have a getTracks that gives you all the tracks</li>
      <li>Bug 25884: applied constraint syntax consensus as realized in June 9 WG email from Peter Thatcher.</li>
      <li>Moved getSupportedConstraints() method to MediaDevices object.</li>
      <li>Added stricter requirements on the getSupportedConstraints() return value.
      </li>
      <li>Added issue note in Constrainable Pattern section that ideal is not yet defined.</li>
      <li>Added issue note for applyConstraints that how multiple unorderedConstraints are to be satisfied together is not yet defined.
      </li>
      <li>Added informative notes that WebIDL discards unknown required properties and that application authors need to use the
        <code>getSupportedConstraints()</code> method.</li>
      <li>Cleaned up the MediaStream API intro section (mainly MediaStream behavior that have moved to MediaStreamTrack).</li>
      <li>The concept of MediaStreamTrack with a detachable source is now used throughout the spec (removed language saying that a MST could be disassociated from its track).</li>
      <li>Moved peerIdentity related text to WebRTC.</li>
    </ol>
    <h2 id="changes-since-march-21-2014">Changes since March 21, 2014</h2>
    <ol>
      <li>New webIDL for Constrainable and Constraints.</li>
      <li>Bug 24931: changed MediaError to MediaStreamError.</li>
      <li>Bug 23817: Redundant TOC headers 8.1 &amp; 9.1</li>
      <li>Bug 25230: readyState attribute must be inherited while cloning a MediaStreamTrack
      </li>
      <li>Bug 25249: Source should be detached when a MediaStreamTrack stops for any reason other than stop</li>
      <li>Updated Event Summary section to match the spec regarding MediaStreamTrack.stop() (as discussed in bug 25248)</li>
      <li>Made the MediaStream() constructor behave like addTrack() WRT adding ended tracks (as discussed in bug 25250).</li>
      <li>Bug 25262: MediaStream Constructor algorithm must also check for MediaStreamTracks "ended" state while initializing "active" state.</li>
      <li>Bug 25276: Initialization for VideoTrack.selected attribute is missing while specifying steps for "Loading and Playing a MediaStream in a Media Element"</li>
      <li>Changed syntax of constraints to use 'require' and 'advanced' and support non-required, non-advanced constraints.</li>
      <li>Bug 25360: MediaStreamTrack should not be considered as ended just because remote peer stopped sending data.</li>
      <li>Bug 25275: VideoTrackList.selectedIndex initialization conflicts with HTML5 spec, "if no track is selected".</li>
      <li>Removed mentioning of MediaStream received from other peer (as discussed in bug 25361).</li>
      <li>Bug 22263: Clarify synchronization of tracks in a MediaStream</li>
      <li>Bug 25441: Overconstrained muted state should not link with MediaStreamTrack.readyState
      </li>
    </ol>
    <h2 id="changes-since-february-18-2014">Changes since February 18, 2014</h2>
    <ol>
      <li>Bug 24928: Remove MediaStream state check from addTrack() algorithm.
      </li>
      <li>Bug 24930: Remove MediaStream state check from the removeTrack() algorithm.
      </li>
      <li>Added native settings to tracks.</li>
      <li>Removed videoMediaStreamTrack and audioMediaStreamTrack since they are no longer necessary.</li>
    </ol>
    <h2 id="changes-since-december-25-2013">Changes since December 25, 2013</h2>
    <ol>
      <li>Make optional constraints a list of ConstraintSets. Make ConstraintSet an object.</li>
      <li>Remove noaccess, move peerIdentity</li>
      <li>Add constraints for sampleRate, sampleSize, and echoCancellation.
      </li>
      <li>Aligned text in remainder of document with Constrainable changes.
      </li>
      <li>Removed statements that constraints are not applied to read-only sources
      </li>
    </ol>
    <h2 id="changes-since-november-5-2013">Changes since November 5, 2013</h2>
    <ol>
      <li>ACTION-25: Switch mediastream.inactive to mediastream.active.</li>
      <li>ACTION-26: Rewrite stop to only detach the track's source.</li>
      <li>Bug 22338: Arbitrary changing of tracks.</li>
      <li>Bug 23125: Use double rather than float.</li>
      <li>Bug 22712: VideoFacingMode enum needs an illustration.</li>
      <li>Moved constraints into a separate Constrainable interface.</li>
      <li>Created a separate section on error handling.</li>
    </ol>
    <h2 id="changes-since-october-17-2013">Changes since October 17, 2013</h2>
    <ol>
      <li>Bug 23263: Add output device enumeration to GetSources</li>
      <li>Introduced the Constrainable interface.</li>
      <li>Change consensus note on constraints in IANA section.</li>
      <li>Removed createObjectURL.</li>
      <li>Bug 22209: Should not use <em class="rfc2119" title="MUST">MUST</em> requirements on values provided by the developer.
      </li>
    </ol>
    <h2 id="changes-since-august-24-2013">Changes since August 24, 2013</h2>
    <ol>
      <li>Bug 22269: Renamed getSourceInfos() to getSources() and made the result async.</li>
      <li>Bug 22229: Editorial input</li>
      <li>Bug 22243: Clarify readonly track</li>
      <li>Bug 22259: Disabled mediastreamtrack and state of media element</li>
      <li>Bug 22226: Remove check of same source from MediaStream constructor algorithm
      </li>
      <li>Replaced ended with inactive for MediaStream (resolves bug 21618).
      </li>
      <li>Bug 22264: MediaStream.ended set to true on creation</li>
      <li>Bug 22272: Permission revocation via MediaStreamTrack.stop()</li>
      <li>Bug 22248: Relationship between MediaStreamTrack and HTML5 VideoTrack/AudioTrack after MediaStream assignment</li>
      <li>Bug 22247: Setting loop attribute on a media element reading from a MediaStream
      </li>
    </ol>
    <h2 id="changes-since-july-4-2013">Changes since July 4, 2013</h2>
    <ol>
      <li>Bug 21967: Added paragraph on MediaStreamTrack enabled state and updated cloning algorithm.</li>
      <li>Bug 22210: Make getUserMedia() algorithm use all numbered items.</li>
      <li>Bug 22250: Fixed accidentally overridden error.</li>
      <li>Bug 22211: Added async error when no valid media type is requested.
      </li>
      <li>Bug 22216: Made NavigatorUserMediaError extend DOMError.</li>
      <li>Bug 22249: Throw on attempts to set currentTime on media elements playing MediaStream objects.</li>
      <li>Bug 22246: Made media.buffered have length 0.</li>
      <li>Bug 22692: Updated media element to use HAVE_NOTHING state before media arrives on the played MediaStream and HAVE_ENOUGH_DATA as soon as media arrives.</li>
    </ol>
    <h2 id="may-29-2013">May 29, 2013</h2>
    <ol>
      <li>Bug 22252: fixed usage of <em class="rfc2119" title="MUST">MUST</em> in MediaStream() constructor description.
      </li>
      <li>Bug 22215: made MediaStream.ended readonly.</li>
      <li>Bug 21967: clarified MediaStreamTrack.enabled state initial value.
      </li>
      <li>Added aspectRatio constraint, capability, and state.</li>
      <li>Updated usage of MediaStreams in media elements.</li>
    </ol>
    <h2 id="may-15-2013">May 15, 2013</h2>
    <ol>
      <li>Added explanatory section for constraints, capabilities, and states.
      </li>
      <li>Added VideoFacingModeEnum (including left and right options).</li>
      <li>Added getSourceInfos() and SourceInfo dictionary.</li>
      <li>Added isolated streams.</li>
    </ol>
    <h2 id="april-29-2013">April 29, 2013</h2>
    <ol>
      <li>Removed remaining photo APIs and references (since we have a separate Image Capture Spec).</li>
    </ol>
    <h2 id="march-20-2013">March 20, 2013</h2>
    <ol>
      <li>Added readonly and remote attributes to MediaStreamTrack</li>
      <li>Removed getConstraint(), setConstraint(), appendConstraint(), and prependConstraint().
      </li>
      <li>Added source states. Added states() method on tracks. Moved sourceType and sourceId to be states.</li>
      <li>Added source capabilities. Added capabilities() method on tracks.
      </li>
      <li>Added clarifying text about MediaStreamTrack lifecycle and mediaflow.
      </li>
      <li>Made MediaStreamTrack cloning explicit.</li>
      <li>Removed takePhoto() and friends from VideoStreamTrack (we have a separate Image Capture Spec).</li>
      <li>Made getUserMedia() error callback mandatory.</li>
    </ol>
    <h2 id="december-12-2012">December 12, 2012</h2>
    <ol>
      <li>Changed error code to be string instead of number.</li>
      <li>Added core of settings proposal allowing for constraint changes after stream/track creation.</li>
    </ol>
    <h2 id="november-15-2012">November 15 2012</h2>
    <ol>
      <li>Introduced new representation of tracks in a stream (removed MediaStreamTrackList).
      </li>
      <li>Updated MediaStreamTrack.readyState to use an enum type (instad of unsigned short constants).</li>
      <li>Renamed MediaStream.label to MediaStream.id (the definition needs some more work).</li>
    </ol>
    <h2 id="october-1-2012">October 1 2012</h2>
    <ol>
      <li>Limited the track kind values to "audio" and "video" only (could previously be user defined as well).</li>
      <li>Made MediaStream extend EventTarget.</li>
      <li>Simplified the MediaStream constructor.</li>
    </ol>
    <h2 id="june-23-2012">June 23 2012</h2>
    <ol>
      <li>Rename title to "Media Capture and Streams".</li>
      <li>Update document to comply with HTML5.</li>
      <li>Update image describing a MediaStream.</li>
      <li>Add known issues and various other editorial changes.</li>
    </ol>
    <h2 id="june-22-2012">June 22 2012</h2>
    <ol>
      <li>Update wording for constraints algorithm.</li>
    </ol>
    <h2 id="june-19-2012">June 19 2012</h2>
    <ol>
      <li>Added "Media Streams as Media Elements section".</li>
    </ol>
    <h2 id="june-12-2012">June 12 2012</h2>
    <ol>
      <li>Switch to respec v3.</li>
    </ol>
    <h2 id="june-5-2012">June 5 2012</h2>
    <ol>
      <li>Added non-normative section "Implementation Suggestions".</li>
      <li>Removed stray whitespace.</li>
    </ol>
    <h2 id="june-1-2012">June 1 2012</h2>
    <ol>
      <li>Added media constraint algorithm.</li>
    </ol>
    <h2 id="apr-23-2012">Apr 23 2012</h2>
    <ol>
      <li>Remove MediaStreamRecorder.</li>
    </ol>
    <h2 id="apr-20-2012">Apr 20 2012</h2>
    <ol>
      <li>Add definitions of MediaStreams and related objects.</li>
    </ol>
    <h2 id="dec-21-2011">Dec 21 2011</h2>
    <ol>
      <li>Changed to make wanted media opt in (rather than opt out). Minor edits.
      </li>
    </ol>
    <h2 id="nov-29-2011">Nov 29 2011</h2>
    <ol>
      <li>Changed examples to use MediaStreamOptions objects rather than strings. Minor edits.</li>
    </ol>
    <h2 id="nov-15-2011">Nov 15 2011</h2>
    <ol>
      <li>Removed MediaStream stuff. Refers to webrtc 1.0 spec for that part instead.
      </li>
    </ol>
    <h2 id="nov-9-2011">Nov 9 2011</h2>
    <ol>
      <li>Created first version by copying the webrtc spec and ripping out stuff. Put it on github.</li>
    </ol>
  </section>

  <section class="appendix" id="acknowledgements" typeof="bibo:Chapter" resource="#acknowledgements" property="bibo:hasPart">
    <!--OddPage-->
    <h2 id="h-acknowledgements" resource="#h-acknowledgements"><span property="xhv:role" resource="xhv:heading"><span class="secno">A. </span>Acknowledgements</span>
    </h2>
    <p>The editors wish to thank the Working Group chairs and Team Contact, Harald Alvestrand, Stefan Håkansson, Erik Lagerway and Dominique Hazaël-Massieux, for their support. Substantial text in this specification was provided by many people including
      <!-- tag 1 to reduce merge conflicts when adding names to list  -->
      Jim Barnett,
      <!-- tag 2 -->Harald Alvestrand,
      <!-- tag 3 -->Travis Leithead,
      <!-- tag 4 -->Josh Soref,
      <!-- tag 5 -->Martin Thomson,
      <!-- tag 6 -->Jan-Ivar Bruaroey,
      <!-- tag 7 -->Peter Thatcher,
      <!-- tag 8 -->Dominique Hazaël-Massieux,
      <!-- tag 9 -->and Stefan Håkansson. Dan Burnett would like to acknowledge the significant support received from Voxeo and Aspect during the development of this specification.
    </p>
  </section>


  <section id="references" class="appendix" typeof="bibo:Chapter" resource="#references" property="bibo:hasPart">
    <!--OddPage-->
    <h2 id="h-references" resource="#h-references"><span property="xhv:role" resource="xhv:heading"><span class="secno">B. </span>References</span>
    </h2>

    <section id="normative-references" typeof="bibo:Chapter" resource="#normative-references" property="bibo:hasPart">
      <h3 id="h-normative-references" resource="#h-normative-references"><span property="xhv:role" resource="xhv:heading"><span class="secno">B.1 </span>Normative references</span>
      </h3>
      <dl class="bibliography" resource=""><dt id="bib-ES6">[ES6]</dt>
        <dd>Allen Wirfs-Brock. Ecma International. <a href="http://www.ecma-international.org/ecma-262/6.0/" property="dc:requires"><cite>ECMAScript 2015</cite></a>. Standard. URL: <a href="http://www.ecma-international.org/ecma-262/6.0/" property="dc:requires">http://www.ecma-international.org/ecma-262/6.0/</a>
        </dd><dt id="bib-HTML5">[HTML5]</dt>
        <dd>Ian Hickson; Robin Berjon; Steve Faulkner; Travis Leithead; Erika Doyle Navara; Theresa O'Connor; Silvia Pfeiffer. W3C. <a href="https://www.w3.org/TR/html5/" property="dc:requires"><cite>HTML5</cite></a>. 28 October 2014. W3C Recommendation. URL: <a href="https://www.w3.org/TR/html5/" property="dc:requires">https://www.w3.org/TR/html5/</a>
        </dd><dt id="bib-HTML51">[HTML51]</dt>
        <dd>Steve Faulkner; Arron Eicholz; Travis Leithead; Alex Danilo. W3C. <a href="https://www.w3.org/TR/html51/" property="dc:requires"><cite>HTML 5.1</cite></a>. 1 November 2016. W3C Recommendation. URL: <a href="https://www.w3.org/TR/html51/" property="dc:requires">https://www.w3.org/TR/html51/</a>
        </dd><dt id="bib-RFC2119">[RFC2119]</dt>
        <dd>S. Bradner. IETF. <a href="https://tools.ietf.org/html/rfc2119" property="dc:requires"><cite>Key words for use in RFCs to Indicate Requirement Levels</cite></a>. March 1997. Best Current Practice. URL: <a href="https://tools.ietf.org/html/rfc2119" property="dc:requires">https://tools.ietf.org/html/rfc2119</a>
        </dd><dt id="bib-RTCWEB-SECURITY-ARCH">[RTCWEB-SECURITY-ARCH]</dt>
        <dd>Eric Rescorla. IETF. <a href="http://datatracker.ietf.org/doc/draft-ietf-rtcweb-security-arch/" property="dc:requires"><cite>WebRTC Security Architecture</cite></a>. 22 January 2014. Active Internet-Draft. URL: <a href="http://datatracker.ietf.org/doc/draft-ietf-rtcweb-security-arch/" property="dc:requires">http://datatracker.ietf.org/doc/draft-ietf-rtcweb-security-arch/</a>
        </dd><dt id="bib-WEBIDL-1">[WEBIDL-1]</dt>
        <dd>Cameron McCormack; Boris Zbarsky; Tobie Langel. W3C. <a href="https://www.w3.org/TR/WebIDL-1/" property="dc:requires"><cite>Web IDL</cite></a>. 15 September 2016. W3C Working Draft. URL: <a href="https://www.w3.org/TR/WebIDL-1/" property="dc:requires">https://www.w3.org/TR/WebIDL-1/</a>
        </dd><dt id="bib-permissions">[permissions]</dt>
        <dd>Mounir Lamouri; Marcos Caceres. W3C. <a href="https://www.w3.org/TR/permissions/" property="dc:requires"><cite>The Permissions API</cite></a>. 7 April 2015. W3C Working Draft. URL: <a href="https://www.w3.org/TR/permissions/" property="dc:requires">https://www.w3.org/TR/permissions/</a>
        </dd>
      </dl>
    </section>

    <section id="informative-references" typeof="bibo:Chapter" resource="#informative-references" property="bibo:hasPart">
      <h3 id="h-informative-references" resource="#h-informative-references"><span property="xhv:role" resource="xhv:heading"><span class="secno">B.2 </span>Informative references</span>
      </h3>
      <dl class="bibliography" resource=""><dt id="bib-COOKIES">[COOKIES]</dt>
        <dd>A. Barth. IETF. <a href="https://tools.ietf.org/html/rfc6265" property="dc:references"><cite>HTTP State Management Mechanism</cite></a>. April 2011. Proposed Standard. URL: <a href="https://tools.ietf.org/html/rfc6265" property="dc:references">https://tools.ietf.org/html/rfc6265</a>
        </dd><dt id="bib-ECMA-262">[ECMA-262]</dt>
        <dd>Ecma International. <a href="https://tc39.github.io/ecma262/" property="dc:references"><cite>ECMAScript Language Specification</cite></a>. URL: <a href="https://tc39.github.io/ecma262/" property="dc:references">https://tc39.github.io/ecma262/</a>
        </dd><dt id="bib-WEBAUDIO">[WEBAUDIO]</dt>
        <dd>Paul Adenot; Chris Wilson; Chris Rogers. W3C. <a href="https://www.w3.org/TR/webaudio/" property="dc:references"><cite>Web Audio API</cite></a>. 8 December 2015. W3C Working Draft. URL: <a href="https://www.w3.org/TR/webaudio/" property="dc:references">https://www.w3.org/TR/webaudio/</a>
        </dd><dt id="bib-WEBRTC10">[WEBRTC10]</dt>
        <dd>Adam Bergkvist; Daniel Burnett; Cullen Jennings; Anant Narayanan; Bernard Aboba. W3C. <a href="https://www.w3.org/TR/webrtc/" property="dc:references"><cite>WebRTC 1.0: Real-time Communication Between Browsers</cite></a>. 13 September 2016. W3C Working Draft. URL: <a href="https://www.w3.org/TR/webrtc/" property="dc:references">https://www.w3.org/TR/webrtc/</a>
        </dd><dt id="bib-image-capture">[image-capture]</dt>
        <dd>Giridhar Mandyam. W3C. <a href="https://www.w3.org/TR/image-capture/" property="dc:references"><cite>MediaStream Image Capture</cite></a>. 8 November 2016. W3C Working Draft. URL: <a href="https://www.w3.org/TR/image-capture/" property="dc:references">https://www.w3.org/TR/image-capture/</a>
        </dd><dt id="bib-mediastream-recording">[mediastream-recording]</dt>
        <dd>Miguel Casas-sanchez; James Barnett; Travis Leithead. W3C. <a href="https://www.w3.org/TR/mediastream-recording/" property="dc:references"><cite>MediaStream Recording</cite></a>. 31 October 2016. W3C Working Draft. URL: <a href="https://www.w3.org/TR/mediastream-recording/" property="dc:references">https://www.w3.org/TR/mediastream-recording/</a>
        </dd><dt id="bib-mixed-content">[mixed-content]</dt>
        <dd>Mike West. W3C. <a href="https://www.w3.org/TR/mixed-content/" property="dc:references"><cite>Mixed Content</cite></a>. 2 August 2016. W3C Candidate Recommendation. URL: <a href="https://www.w3.org/TR/mixed-content/" property="dc:references">https://www.w3.org/TR/mixed-content/</a>
        </dd><dt id="bib-rfc4122">[rfc4122]</dt>
        <dd>P. Leach; M. Mealling; R. Salz. IETF. <a href="https://tools.ietf.org/html/rfc4122" property="dc:references"><cite>A Universally Unique IDentifier (UUID) URN Namespace</cite></a>. July 2005. Proposed Standard. URL: <a href="https://tools.ietf.org/html/rfc4122" property="dc:references">https://tools.ietf.org/html/rfc4122</a>
        </dd>
      </dl>
    </section>
  </section>
  <p role="navigation" id="back-to-top"><a href="#toc"><abbr title="Back to Top">↑</abbr></a></p>
  <script src="https://www.w3.org/scripts/TR/2016/fixup.js"></script>
</body>
</html>
