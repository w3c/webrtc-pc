<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <link href="webrtc.css" rel="stylesheet">
  <title>WebRTC NV</title>
  <script class="remove" src=
  "https://www.w3.org/Tools/respec/respec-w3c-common" type="text/javascript">
  // // keep this comment //
  </script>
  <script class="remove" src="webrtc-nv.js" type="text/javascript">
  // // keep
    this comment //
  </script>
</head>
<!-- 

TODO: 
- stats
- onerror

-->
<body>
  <section id="abstract">
    <p>This document defines a set of ECMAScript APIs in WebIDL to
    allow media to be sent to and received from another browser or
    device implementing the appropriate set of real-time
    protocols. It's an extension of WebRTC 1.0 intended to give more
    direct control over the objects in WebRTC 1.0.</p>
  </section>
  <section id="sotd">
    <p>This is an initial proposal.</p>
  </section>
  <section class="informative" id="intro">
    <h2>Introduction</h2>
    <p>TODO</p>
  </section>
  <section id="conformance">
    <p>This specification defines conformance criteria that apply to a single
    product: the <dfn>user agent</dfn> that implements the interfaces that it
    contains.</p>
    <p>Conformance requirements phrased as algorithms or specific steps may be
    implemented in any manner, so long as the end result is equivalent. (In
    particular, the algorithms defined in this specification are intended to be
    easy to follow, and not intended to be performant.)</p>
    <p>Implementations that use ECMAScript to implement the APIs defined in
    this specification MUST implement them in a manner consistent with the
    ECMAScript Bindings defined in the Web IDL specification [[!WEBIDL-1]], as
    this specification uses that specification and terminology.</p>
  </section>
  <section>
    <h2>Terminology</h2>
    <p>The <code><a href=
    "http://dev.w3.org/html5/spec/webappapis.html#eventhandler">EventHandler</a></code>
    interface, representing a callback used for event handlers, and the
    <a href="http://dev.w3.org/html5/spec/webappapis.html#errorevent"><code><dfn>
    ErrorEvent</dfn></code></a> interface are defined in [[!HTML5]].</p>
    <p>The concepts <dfn><a href=
    "http://dev.w3.org/html5/spec/webappapis.html#queue-a-task">queue a
    task</a></dfn>, <dfn><a href=
    "http://dev.w3.org/html5/spec/webappapis.html#fire-a-simple-event">fire a
    simple event</a></dfn> and <dfn><a href=
    "http://dev.w3.org/html5/spec/webappapis.html#networking-task-source">networking
    task source</a></dfn> are defined in [[!HTML5]].</p>
    <p>The terms <dfn>event</dfn>, <dfn><a href=
    "http://dev.w3.org/html5/spec/webappapis.html#event-handlers">event
    handlers</a></dfn> and <dfn><a href=
    "http://dev.w3.org/html5/spec/webappapis.html#event-handler-event-type">event
    handler event types</a></dfn> are defined in [[!HTML5]].</p>
    <p>The terms <dfn>MediaStream</dfn>, <dfn>MediaStreamTrack</dfn>, and
    <dfn>MediaStreamConstraints</dfn> are defined in [[!GETUSERMEDIA]].</p>

    <p>The term <dfn>Blob</dfn> is defined in [[!FILEAPI]].</p>
  </section>
  <section>
    <h2>RTP Media API</h2>
    <section>
      <h3>RTCRtpSender Interface Extensions</h3>
      <p>TODO</p>
      <div>
        <pre class="idl">[ Constructor () ]
partial interface RTCRtpSender {
    Promise&lt;void&gt; setTrack (optional MediaStreamTrack track);
    Promise&lt;void&gt; setTransport (optional RTCDtlsTransport transport);
    void          stop ();
};</pre>
        <section>
          <h2>Constructors</h2>
          <dl data-link-for="RTCRtpSender" data-dfn-for=
          "RTCRtpSender" class="constructors">
            <dt><code>RTCRtpSender</code></dt>
            <dd>
	      <p>TODO</p>
            </dd>
          </dl>
        </section>
        <section>
          <h2>Methods</h2>
          <dl data-link-for="RTCRtpSender" data-dfn-for=
          "RTCRtpSender" class="methods">
            <dt><code>setTrack</code></dt>
            <dd>
              <p>Exactly the same as replaceTrack, but with a name
              that makes sense for setting it the first time.  Media
              cannot be sent until the track, transport, and
              parameters are all set.</p>
            </dd>
            <dt><code>setTransport</code></dt>
            <dd>
              <p>TODO</p>
            </dd>
            <dt><code>stop</code></dt>
            <dd>
              <p>TODO</p>
            </dd>
          </dl>
        </section>
      </div>
    </section>
    <section>
      <h3>RTCRtpReceiver Interface Extensions</h3>
      <p>TODO</p>
      <div>
        <pre class="idl">[ Constructor () ]
partial interface RTCRtpReceiver {
    Promise&lt;void&gt; setTransport (optional RTCDtlsTransport transport);
    Promise&lt;void&gt; setParameters (optionanl RTCRtpParameters parameters);
    void          stop ();
};</pre>
        <section>
          <h2>Constructors</h2>
          <dl data-link-for="RTCRtpSender" data-dfn-for=
          "RTCRtpSender" class="constructors">
            <dt><code>RtpReceiver</code></dt>
            <dd>
	      <p>TODO</p>
            </dd>
          </dl>
        </section>
        <section>
          <h2>Methods</h2>
          <dl data-link-for="RTCRtpReceiver" data-dfn-for=
          "RTCRtpReceiver" class="methods">
            <dt><code>setTransport</code></dt>
            <dd>
              <p>TODO</p>
            </dd>
            <dt><code>setParameters</code></dt>
            <dd>
              <p>TODO</p>
            </dd>
            <dt><code>stop</code></dt>
            <dd>
              <p>TODO</p>
            </dd>
          </dl>
	</section>
      </div>
    </section>
    <section>
      <div>
	<h3>RTCRtpParameters dictionary extensions</h3>
	<p>TODO: Specify these are additions and everything is settable</p>
        <pre class="idl">dictionary RTCRtpParameters {
    DOMString mid;
};</pre>
        <section>
          <h2>Dictionary <a class="idlType">RTCRtpParameters</a> Members</h2>
          <dl data-link-for="RTCRtpParameters" data-dfn-for="RTCRtpParameters"
          class="dictionary-members">
            <dt><dfn><code>mid</code></dfn> of type <span class=
            "idlMemberType"><a>DOMString</a></span></dt>
            <dd>
              <p>TODO</p>
            </dd>
          </dl>
        </section>
      </div>
      <div>
	<h3>RTCRtpFecParameters dictionary extensions</h3>
	<p>TODO: Specify these are additions and everything is settable</p>
        <pre class="idl">dictionary RTCRtpFecParameters {
    DOMString mechanism;
};</pre>
        <section>
          <h2>Dictionary <a class="idlType">RTCRtpFecParameters</a>
          Members</h2>
          <dl data-link-for="RTCRtpFecParameters" data-dfn-for=
          "RTCRtpFecParameters" class="dictionary-members">
            <dt><dfn><code>mechanism</code></dfn> of type <span class=
            "idlMemberType"><a>DOMString</a></span></dt>
            <dd>
              <p>TODO</p>
            </dd>
          </dl>
        </section>
      </div>
      <div>
	<h3>RTCRtcpParameters dictionary extensions</h3>
	<p>TODO: Specify these are additions and everything is settable</p>
        <pre class="idl">dictionary RTCRtcpParameters {
     unsigned long ssrc;
};</pre>
        <section>
          <h2>Dictionary <a class="idlType">RTCRtcpParameters</a>
          Members</h2>
          <dl data-link-for="RTCRtcpParameters" data-dfn-for=
          "RTCRtcpParameters" class="dictionary-members">
            <dt><dfn><code>ssrc</code></dfn> of type <span class=
            "idlMemberType"><a>unsigned long</a></span></dt>
            <dd>
              <p>TODO</p>
            </dd>
          </dl>
        </section>
      </div>
      <div>
	<h3>RTCRtpCodecParameters dictionary extensions</h3>
	<p>TODO: Specify these are additions and everything is settable</p>
        <pre class="idl">dictionary RTCRtpCodecParameters {
    unsigned long             maxptime;
    unsigned long             ptime;
    sequence&lt;RTCRtcpFeedback&gt; rtcpFeedback;
    Dictionary                parameters;
};</pre>
        <section>
          <h2>Dictionary <a class="idlType">RTCRtpCodecParameters</a>
          Members</h2>
          <dl data-link-for="RTCRtpCodecParameters" data-dfn-for=
          "RTCRtpCodecParameters" class="dictionary-members">
            <dt><dfn><code>maxptime</code></dfn> of type <span class=
            "idlMemberType"><a>unsigned long</a></span></dt>
            <dd>
	      <p>TODO</p>
            </dd>
            <dt><dfn><code>ptime</code></dfn> of type <span class=
            "idlMemberType"><a>unsigned long</a></span></dt>
            <dd>
	      <p>TODO</p>
            </dd>
            <dt><dfn><code>rtcpFeedback</code></dfn> of type <span class=
            "idlMemberType"><a>sequence&lt;RTCRtcpFeedback&gt;</a></span></dt>
            <dd>
	      <p>TODO</p>
            </dd>
            <dt><dfn><code>parameters</code></dfn> of type <span class=
            "idlMemberType"><a>Dictionary</a></span></dt>
            <dd>
	      <p>TODO</p>
            </dd>
          </dl>
        </section>
      </div>
      <div>
	<h3>RTCRtpCodecCapability dictionary extensions</h3>
	<p>TODO: Specify these are additions.</p>
        <pre class="idl">dictionary RTCRtpCodecCapability {
    unsigned short            payloadType;
    unsigned long             clockRate;
    unsigned long             channels;
    unsigned long             maxptime;
    unsigned long             ptime;
    sequence&lt;RTCRtcpFeedback&gt; rtcpFeedback;
    Dictionary                parameters;
};</pre>
        <section>
          <h2>Dictionary <a class="idlType">RTCRtpCodecCapability</a>
          Members</h2>
          <dl data-link-for="RTCRtpCodecCapability" data-dfn-for=
          "RTCRtpCodecCapability" class="dictionary-members">
            <dt><dfn><code>payloadType</code></dfn> of type <span class=
            "idlMemberType"><a>unsigned short</a></span></dt>
            <dd>
	      <p>TODO</p>
            </dd>
            <dt><dfn><code>clockRate</code></dfn> of type <span class=
            "idlMemberType"><a>unsigned long</a></span></dt>
            <dd>
	      <p>TODO</p>
            </dd>
            <dt><dfn><code>channels</code></dfn> of type <span class=
            "idlMemberType"><a>unsigned long</a></span></dt>
            <dd>
	      <p>TODO</p>
            </dd>
            <dt><dfn><code>maxptime</code></dfn> of type <span class=
            "idlMemberType"><a>unsigned long</a></span></dt>
            <dd>
	      <p>TODO</p>
            </dd>
            <dt><dfn><code>ptime</code></dfn> of type <span class=
            "idlMemberType"><a>unsigned long</a></span></dt>
            <dd>
	      <p>TODO</p>
            </dd>
            <dt><dfn><code>rtcpFeedback</code></dfn> of type <span class=
            "idlMemberType"><a>sequence&lt;RTCRtcpFeedback&gt;</a></span></dt>
            <dd>
	      <p>TODO</p>
            </dd>
            <dt><dfn><code>parameters</code></dfn> of type <span class=
            "idlMemberType"><a>Dictionary</a></span></dt>
            <dd>
	      <p>TODO</p>
            </dd>
          </dl>
        </section>
      </div>
      <div>
	<h3>RTCRtpCodecParameters dictionary extensions</h3>
	<p>TODO: Specify these are additions and everything is settable</p>

        <pre class="idl">dictionary RTCRtcpFeedback {
    DOMString type;
    DOMString parameter;
};</pre>
        <section>
          <h2>Dictionary <a class="idlType">RTCRtcpFeedback</a>
          Members</h2>
          <dl data-link-for="RTCRtcpFeedback" data-dfn-for=
          "RTCRtcpFeedback" class="dictionary-members">
            <dt><dfn><code>type</code></dfn> of type <span class=
            "idlMemberType"><a>DOMString</a></span></dt>
            <dd>
              <p>TODO</p>
            </dd>
            <dt><dfn><code>parameter</code></dfn> of type <span class=
            "idlMemberType"><a>DOMString</a></span></dt>
            <dd>
              <p>TODO</p>
            </dd>
          </dl>
        </section>
      </div>
    </section>
  <section>
    <h2>Transport API</h2>
    <section>
      <h3>RTCDtlsTransport Interface Extensions</h3>
      <div>
        <pre class="idl">[ Constructor (RTCIceTransport transport, sequence&lt;RTCCertificate&gt; certificates)]
partial interface RTCDtlsTransport {
    RTCDtlsParameters     getLocalParameters ();
    RTCDtlsParameters?    getRemoteParameters ();
    void                  start (RTCDtlsParameters remoteParameters);
    void                  stop ();

    readonly    attribute FrozenArray&lt;RTCCertificate&gt; certificates;
};</pre>
        <section>
          <h2>Attributes</h2>
          <dl data-link-for="RTCDtlsTransport" data-dfn-for="RTCDtlsTransport"
          class="attributes">
            <dt><dfn><code>certificates</code></dfn> of type <span class=
            "idlAttrType"><a>FrozenArray&lt;RTCCertificate&gt;</a></span>, readonly</dt>
            <dd>
              <p>TODO</p>
            </dd>
          </dl>
        </section>
        <section>
          <h2>Methods</h2>
          <dl data-link-for="RTCDtlsTransport" data-dfn-for="RTCDtlsTransport"
          class="methods">
            <dt><dfn><code>getLocalParameters</code></dfn></dt>
            <dd>
	      TODO
            </dd>
            <dt><dfn><code>getRemoteParameters</code></dfn></dt>
            <dd>
	      TODO
            </dd>
            <dt><dfn><code>getRemoteParameters</code></dfn></dt>
            <dd>
	      TODO
            </dd>
            <dt><dfn><code>start</code></dfn></dt>
            <dd>
	      TODO
            </dd>
            <dt><dfn><code>stop</code></dfn></dt>
            <dd>
	      TODO
            </dd>
          </dl>
        </section>
      </div>
      <div>
	<h3>RTCDtlsParameters dictionary</h3>
	<p>TODO: Specify these are additions and everything is settable</p>
        <pre class="idl">dictionary RTCDtlsParameters {
    RTCDtlsRole                  role = "auto";
    sequence&lt;RTCDtlsFingerprint&gt; fingerprints;
};</pre>
        <section>
          <h2>Dictionary <a class="idlType">RTCDtlsParameters</a> Members</h2>
          <dl data-link-for="RTCDtlsParameters" data-dfn-for="RTCDtlsParameters"
          class="dictionary-members">
            <dt><dfn><code>role</code></dfn> of type <span class=
            "idlMemberType"><a>RTCDtlsRole</a></span></dt>
            <dd>
              <p>TODO</p>
            </dd>
            <dt><dfn><code>fingerprints</code></dfn> of type <span class=
            "idlMemberType"><a>sequence&lt;RTCDtlsFingerprint&gt; fingerprints</a></span></dt>
            <dd>
              <p>TODO</p>
            </dd>
          </dl>
        </section>
      </div>
      <div>
	<p>enum RTCDtlsRole</p>
        <pre class="idl">enum RTCDtlsRole {
    "auto",
    "client",
    "server"
};</pre>
	<p>TODO</p>
      </div>
      <div>
	<h3>RTCDtlsFingerprint dictionary</h3>
	<p>TODO: Specify these are additions and everything is settable</p>
        <pre class="idl">dictionary RTCDtlsFingerprint {
    DOMString algorithm;
    DOMString value;
};</pre>
        <section>
          <h2>Dictionary <a class="idlType">RTCDtlsFingerprint</a> Members</h2>
          <dl data-link-for="RTCDtlsFingerprint" data-dfn-for="RTCDtlsFingerprint"
          class="dictionary-members">
            <dt><dfn><code>algorithm</code></dfn> of type <span class=
            "idlMemberType"><a>value</a></span></dt>
            <dd>
              <p>TODO</p>
            </dd>
            <dt><dfn><code>value</code></dfn> of type <span class=
            "idlMemberType"><a>DOMString</a></span></dt>
            <dd>
              <p>TODO</p>
            </dd>
          </dl>
        </section>
      </div>
    </section>
    <section>
      <h3>RTCIceTransport Interface Extensions</h3>
      <p>TODO: Specify these are additions and everything is settable</p>
      <div>
        <pre class="idl">[ Constructor () ]
partial interface RTCIceTransport {
    readonly        attribute RTCIceGatherer? iceGatherer;
    void                      start (RTCIceGatherer gatherer, RTCIceParameters remoteParameters, optional RTCIceRole role);
    void                      addRemoteCandidate (RTCIceGatherCandidate);
    void                      stop ();
};</pre>
        <section>
          <h2>Attributes</h2>
          <dl data-link-for="RTCIceTransport" data-dfn-for="RTCIceTransport"
          class="attributes">
            <dt><code>iceGatherer</code> of type <span class=
            "idlAttrType"><a>RTCIceGatherer</a></span>, readonly</dt>
            <dd>
              <p>TODO</p>
            </dd>
          </dl>
        </section>
        <section>
          <h2>Methods</h2>
          <dl data-link-for="RTCIceTransport" data-dfn-for="RTCIceTransport"
          class="methods">
            <dt><dfn><code>start</code></dfn></dt>
            <dd>
              <p>TODO</p>
            </dd>
            <dt><dfn><code>addRemoteCandidate</code></dfn></dt>
            <dd>
              <p>TODO</p>
            </dd>
            <dt><dfn><code>endRemoteCandidates</code></dfn></dt>
            <dd>
              <p>TODO</p>
            </dd>
            <dt><dfn><code>stop</code></dfn></dt>
            <dd>
              <p>TODO</p>
            </dd>
          </dl>
        </section>
      </div>
    </section>
    <section>
      <div>
	<h3>RTCIceGatherer Interface</h3>
	<p>TODO</p>
	<div>
          <pre class="idl">[ Constructor () ]
	    interface RTCIceGatherer {
	    readonly        attribute RTCIceGatheringState state;
	    RTCIceParameters            getLocalParameters ();
	    void                        start (optional RTCIceGatherOptions options);
	    void                        stop ();
            attribute EventHandler        onstatechange;
            attribute EventHandler        onlocalcandidate;
	    };</pre>

          <section>
            <h2>Attributes</h2>
            <dl data-link-for="RTCIceGatherer" data-dfn-for="RTCIceGatherer"
		class="attributes">
              <dt><code>state</code> of type <span class=
						   "idlAttrType"><a>RTCIceGatheringState</a></span>, readonly</dt>
              <dd>
		<p></p>
              </dd>
              <dt><code>onstatechange</code> of type <span class=
							   "idlAttrType"><a>EventHandler</a></span>, readonly</dt>
              <dd>
		<p></p>
              </dd>
              <dt><code>onlocalcandidate</code> of type <span class=
							      "idlAttrType"><a>EventHandler</a></span>, readonly</dt>
              <dd>
		<p></p>
              </dd>
            </dl>
          </section>
          <section>
            <h2>Methods</h2>
            <dl data-link-for="RTCIceGatherer" data-dfn-for="RTCIceGatherer"
		class="methods">
              <dt><dfn><code>getLocalParameters</code></dfn></dt>
              <dd>
		<p>TODO</p>
              </dd>
              <dt><dfn><code>start</code></dfn></dt>
              <dd>
		<p>TODO</p>
              </dd>
              <dt><dfn><code>stop</code></dfn></dt>
              <dd>
		<p>TODO</p>
              </dd>
            </dl>
          </section>
	</div>
	<div>
	  <h3>RTCIceParameters dictionary extensions</h3>
	  <p>TODO: Specify these are additions and everything is settable</p>
          <pre class="idl">dictionary RTCIceParameters {
	    boolean   iceLite;
	    };</pre>
          <section>
            <h2>Dictionary <a class="idlType">RTCIceParameters</a> Members</h2>
            <dl data-link-for="RTCIceParameters" data-dfn-for="RTCIceParameters"
		class="dictionary-members">
              <dt><dfn><code>iceLite</code></dfn> of type <span class=
								"idlMemberType"><a>bool</a></span></dt>
              <dd>
		<p>TODO</p>
              </dd>
            </dl>
          </section>
	</div>
      </div>
    </section>
  </section>
  <section>
    <h2>Peer-to-peer Data API</h2>
    <p>TODO</p>
    <section>
        <h3>RTCSctpTransport Interface Extensions</h3>
        <p></p>
        <div>
          <pre class="idl">partial interface RTCSctpTransport {
     static RTCSctpCapabilities getCapabilities ();
    void                       start (RTCSctpCapabilities remoteCaps);
    void                       stop ();
                    attribute EventHandler          ondatachannel;
};</pre>
          <section>
            <h2>Attributes</h2>
            <dl data-link-for="RTCSctpTransport" data-dfn-for=
            "RTCSctpTransport" class="attributes">
              <dt><dfn><code>ondatachannel</code></dfn> of type <span class=
              "idlAttrType"><a>EventHandler</a></span>, readonly</dt>
              <dd>
                <p></p>
              </dd>
            </dl>
          </section>
          <section>
            <h2>Methods</h2>
            <dl data-link-for="RTCSctpTransport" data-dfn-for="RTCSctpTransport"
		class="methods">
              <dt><dfn><code>getCapabilities</code></dfn></dt>
              <dd>
		<p>TODO</p>
              </dd>
              <dt><dfn><code>start</code></dfn></dt>
              <dd>
		<p>TODO</p>
              </dd>
              <dt><dfn><code>stop</code></dfn></dt>
              <dd>
		<p>TODO</p>
              </dd>
            </dl>
          </section>
        </div>
      </section>
      <div>
	<h3>RTCSctpCapabilities dictionary</h3>
	<p>TODO</p>
        <pre class="idl">dictionary RTCSctpCapabilities {
    unsigned short maxMessageSize;
};</pre>
        <section>
          <h2>Dictionary <a class="idlType">RTCSctpCapabilities</a> Members</h2>
          <dl data-link-for="RTCSctpCapabilities" data-dfn-for="RTCSctpCapabilities"
          class="dictionary-members">
            <dt><dfn><code>maxMessageSize</code></dfn> of type <span class=
            "idlMemberType"><a>unsigned short</a></span></dt>
            <dd>
              <p>TODO</p>
            </dd>
          </dl>
        </section>
      </div>
      <h3>RTCDataChannel Interface Extensions</h3>
      <p>TODO</p>
      <div>
        <pre class="idl">[ Constructor (RTCDataTransport transport, [TreatNullAs=EmptyString] USVString label, optional RTCDataChannelInit dataChannelDict) ]
partial interface RTCDataChannel {
};</pre>
        <section>
          <h2>Constructors</h2>
          <dl data-link-for="RTCDataChannel" data-dfn-for=
          "RTCDataChannel" class="constructors">
            <dt><code>RTCDataChannel</code></dt>
            <dd>
	      <p>TODO</p>
            </dd>
          </dl>
        </section>
      </div>
  </section>
  <section>
    <h2>Change Log</h2>
    TODO
  </section>
  <section class="appendix">
    <h2>Acknowledgements</h2>
    TODO
  </section>
</body>
</html>
